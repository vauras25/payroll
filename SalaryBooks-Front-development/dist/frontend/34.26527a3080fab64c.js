"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[34],{4034:(Eu,J,k)=>{k.r(J),k.d(J,{AdminModule:()=>xu});var p=k(6895),j=k(4527),z=k(6185),A=k(4837),w=k(4661),E=k(8423),ie=k(2006),h=k(2362),i=k(4719),d=k(7503),le=k(5226),_=k.n(le),e=k(6353),v=k(1481),b=k(7185),S=k(7501),C=k(358);const I=function(){return{exact:!0}},se=function(){return["/admin/team-management/sub-admin","/admin/team-management/role-access"]},de=function(){return["/admin/master/department","/admin/master/branch","/admin/master/designation","/admin/master/reseller","/admin/master/credit-invoice"]},me=function(){return["/admin/govt-rules/epfo-rules","/admin/govt-rules/esic-rules","/admin/govt-rules/bonus-rules","/admin/govt-rules/gratuity-rules","/admin/govt-rules/itax-slabs","/admin/govt-rules/itax-categories","/admin/govt-rules/tds-rule"]},ce=function(){return["/admin/company-rules/attendance-policy","/admin/company-rules/incentive-policy","/admin/company-rules/bonus-policy","/admin/company-rules/overtime-policy","/admin/company-rules/bonusslip-template","/admin/company-rules/arrearslip-template","/admin/company-rules/tds-rule","/admin/company-rules/payslip-template","/admin/company-rules/ptax-rule","/admin/company-rules/lwf-rule","/admin/company-rules/salary-template","/admin/company-rules/leave-rule"]},pe=function(){return["/admin/client-package","/admin/subscription-management/plans","/admin/subscription-management/credit"]},ue=function(){return["/admin/invoice","/admin/ledger-report","/admin/credit-usage","/admin/sales-ledger"]},_e=function(){return["/admin/landing/page","/admin/landing/posts","/admin/landing/settings"]};let he=(()=>{class o{constructor(n){this.router=n}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(h.F0))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-dashboard-sidebar"]],decls:178,vars:69,consts:[[1,"br-sideleft","sideleft-scrollbar"],[1,"sidebar-label","pd-x-10","mg-t-20","op-3"],[1,"br-sideleft-menu"],[1,"br-menu-item"],["routerLink","/admin","routerLinkActive","active",1,"br-menu-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-ios-speedometer-outline","tx-24"],[1,"menu-item-label"],["href","#",1,"br-menu-link","with-sub"],[1,"menu-item-icon","icon","ion-ios-personadd-outline","tx-20"],[1,"br-menu-sub"],[1,"sub-item"],["routerLink","/admin/team-management/sub-admin","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/team-management/role-access","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/user-management","routerLinkActive","active",1,"br-menu-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-ios-list-outline","tx-20"],[1,"menu-item-icon","icon","ion-ios-cog","tx-20"],["routerLink","/admin/master/department","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/master/designation","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/master/branch","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/master/reseller","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/master/credit-invoice","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-card","tx-20"],["routerLink","/admin/govt-rules/epfo-rules","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/govt-rules/esic-rules","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/govt-rules/bonus-rules","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/govt-rules/itax-slabs","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/govt-rules/itax-categories","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/govt-rules/tds-rule","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-ios-briefcase-outline","tx-20"],["routerLink","/admin/company-rules/attendance-policy","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/salary-template","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/leave-rule","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/incentive-policy","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/bonus-policy","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/overtime-policy","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/payslip-template","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/arrearslip-template","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/bonusslip-template","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/tds-rule","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/ptax-rule","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/company-rules/lwf-rule","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/client-package","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/subscription-management/plans","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/subscription-management/credit","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-grid","tx-24"],["routerLink","/admin/invoice","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/sales-ledger","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/credit-usage","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/ledger-report","routerLinkActive","active",1,"sub-link",3,"routerLinkActiveOptions"],["routerLink","/admin/promotion-management","routerLinkActive","active",1,"br-menu-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-flag","tx-24"],["routerLink","/admin/smtp","routerLinkActive","active",1,"br-menu-link",3,"routerLinkActiveOptions"],[1,"menu-item-icon","icon","ion-ios-email","tx-24"],["routerLink","/admin/landing/page","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/landing/posts","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/landing/membership","routerLinkActive","active",1,"sub-link"],["routerLink","/admin/landing/settings","routerLinkActive","active",1,"sub-link"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"label",1),e.\u0275\u0275text(2,"Navigation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ul",2)(4,"li",3)(5,"a",4),e.\u0275\u0275element(6,"i",5),e.\u0275\u0275elementStart(7,"span",6),e.\u0275\u0275text(8,"Dashboard"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"li",3)(10,"a",7),e.\u0275\u0275element(11,"i",8),e.\u0275\u0275elementStart(12,"span",6),e.\u0275\u0275text(13,"Team Management"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"ul",9)(15,"li",10)(16,"a",11),e.\u0275\u0275text(17,"Sub Admin"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"li",10)(19,"a",12),e.\u0275\u0275text(20,"Roles Access"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(21,"li",3)(22,"a",13),e.\u0275\u0275element(23,"i",14),e.\u0275\u0275elementStart(24,"span",6),e.\u0275\u0275text(25,"User Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"li",3)(27,"a",7),e.\u0275\u0275element(28,"i",15),e.\u0275\u0275elementStart(29,"span",6),e.\u0275\u0275text(30,"Master"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"ul",9)(32,"li",10)(33,"a",16),e.\u0275\u0275text(34," Department "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"li",10)(36,"a",17),e.\u0275\u0275text(37," Designation "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"li",10)(39,"a",18),e.\u0275\u0275text(40," Branch "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"li",10)(42,"a",19),e.\u0275\u0275text(43," Reseller "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"li",10)(45,"a",20),e.\u0275\u0275text(46," Credit Invoice "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(47,"li",3)(48,"a",7),e.\u0275\u0275element(49,"i",21),e.\u0275\u0275elementStart(50,"span",6),e.\u0275\u0275text(51,"Government Rules"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"ul",9)(53,"li",10)(54,"a",22),e.\u0275\u0275text(55,"EPFO Rule"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"li",10)(57,"a",23),e.\u0275\u0275text(58,"ESIC Rule"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"li",10)(60,"a",24),e.\u0275\u0275text(61,"Bonus Rule"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"li",10)(63,"a",25),e.\u0275\u0275text(64,"Income Tax Slab"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(65,"li",10)(66,"a",26),e.\u0275\u0275text(67,"Income Tax Category"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"li",10)(69,"a",27),e.\u0275\u0275text(70,"Income Tax TDS Rule"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(71,"li",3)(72,"a",7),e.\u0275\u0275element(73,"i",28),e.\u0275\u0275elementStart(74,"span",6),e.\u0275\u0275text(75,"Company Rules"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(76,"ul",9)(77,"li",10)(78,"a",29),e.\u0275\u0275text(79,"Attendance"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(80,"li",10)(81,"a",30),e.\u0275\u0275text(82,"Salary Template"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"li",10)(84,"a",31),e.\u0275\u0275text(85,"Leave Policy"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(86,"li",10)(87,"a",32),e.\u0275\u0275text(88,"Incentive"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(89,"li",10)(90,"a",33),e.\u0275\u0275text(91,"Bonus"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(92,"li",10)(93,"a",34),e.\u0275\u0275text(94,"Overtime"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(95,"li",10)(96,"a",35),e.\u0275\u0275text(97,"Payslip"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(98,"li",10)(99,"a",36),e.\u0275\u0275text(100,"Arrear Slip"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(101,"li",10)(102,"a",37),e.\u0275\u0275text(103,"Bonus Slip"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(104,"li",10)(105,"a",38),e.\u0275\u0275text(106,"TDS Policy"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(107,"li",10)(108,"a",39),e.\u0275\u0275text(109,"P-TAX Rule"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(110,"li",10)(111,"a",40),e.\u0275\u0275text(112,"LWF Rule"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(113,"li",3)(114,"a",7),e.\u0275\u0275element(115,"i",14),e.\u0275\u0275elementStart(116,"span",6),e.\u0275\u0275text(117,"Package"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(118,"ul",9)(119,"li",10)(120,"a",41),e.\u0275\u0275text(121,"Client Package"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(122,"li",10)(123,"a",42),e.\u0275\u0275text(124,"Client Plan"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"li",10)(126,"a",43),e.\u0275\u0275text(127,"Credit Settings"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(128,"li",3)(129,"a",7),e.\u0275\u0275element(130,"i",44),e.\u0275\u0275elementStart(131,"span",6),e.\u0275\u0275text(132,"Reports"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(133,"ul",9)(134,"li",10)(135,"a",45)(136,"span",6),e.\u0275\u0275text(137,"Invoice Listing"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(138,"li",10)(139,"a",46)(140,"span",6),e.\u0275\u0275text(141,"Sales Ledger"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(142,"li",10)(143,"a",47)(144,"span",6),e.\u0275\u0275text(145,"Usage Ledger"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(146,"li",10)(147,"a",48)(148,"span",6),e.\u0275\u0275text(149,"Client Ledger"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(150,"li",3)(151,"a",49),e.\u0275\u0275element(152,"i",50),e.\u0275\u0275elementStart(153,"span",6),e.\u0275\u0275text(154,"Promotion Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(155,"li",3)(156,"a",51),e.\u0275\u0275element(157,"i",52),e.\u0275\u0275elementStart(158,"span",6),e.\u0275\u0275text(159,"SMTP Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(160,"li",3)(161,"a",7),e.\u0275\u0275element(162,"i",28),e.\u0275\u0275elementStart(163,"span",6),e.\u0275\u0275text(164,"Landing Page"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(165,"ul",9)(166,"li",10)(167,"a",53),e.\u0275\u0275text(168,"Page"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(169,"li",10)(170,"a",54),e.\u0275\u0275text(171,"Posts"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(172,"li",10)(173,"a",55),e.\u0275\u0275text(174,"Membership"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(175,"li",10)(176,"a",56),e.\u0275\u0275text(177,"Settings"),e.\u0275\u0275elementEnd()()()()()()),2&n&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(38,I)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(39,se).includes(t.router.url)),e.\u0275\u0275advance(6),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(40,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(41,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(42,I)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(43,de).includes(t.router.url)),e.\u0275\u0275advance(6),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(44,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(45,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(46,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(47,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(48,I)),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(49,me).includes(t.router.url)),e.\u0275\u0275advance(6),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(50,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(51,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(52,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(53,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(54,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(55,I)),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(56,ce).includes(t.router.url)),e.\u0275\u0275advance(42),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(57,pe).includes(t.router.url)),e.\u0275\u0275advance(6),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(58,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(59,I)),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(60,I)),e.\u0275\u0275advance(3),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(61,ue).includes(t.router.url)),e.\u0275\u0275advance(6),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(62,I)),e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(63,I)),e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(64,I)),e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(65,I)),e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(66,I)),e.\u0275\u0275advance(5),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(67,I)),e.\u0275\u0275advance(5),e.\u0275\u0275classProp("active",e.\u0275\u0275pureFunction0(68,_e).includes(t.router.url)))},dependencies:[h.yS,h.Od]}),o})();var W=k(7556);function fe(o,l){if(1&o&&e.\u0275\u0275element(0,"img",43),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate2("src","",n.Global.BACKEND_URL,"/",null==n.userDetails?null:n.userDetails.profile_pic,"",e.\u0275\u0275sanitizeUrl)}}function ge(o,l){1&o&&e.\u0275\u0275element(0,"img",44)}function be(o,l){if(1&o&&e.\u0275\u0275element(0,"img",45),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate2("src","",n.Global.BACKEND_URL,"/",null==n.userDetails?null:n.userDetails.profile_pic,"",e.\u0275\u0275sanitizeUrl)}}function ve(o,l){1&o&&e.\u0275\u0275element(0,"img",46)}const ye=function(){return{exact:!0}};let xe=(()=>{class o{constructor(n){this.authService=n,this.Global=d,localStorage.getItem("payroll-admin-user")&&(this.userDetails=localStorage.getItem("payroll-admin-user"),this.userDetails=JSON.parse(this.userDetails))}ngOnInit(){this.userDetails||this.getAccountDetails()}logout(){return this.authService.adminLogout()}getAccountDetails(){this.authService.getAdminAccountDetails().subscribe(n=>{"success"==n.status&&(this.userDetails=n.user_data)})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(W.e))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-dashboard-topbar"]],decls:110,vars:10,consts:[[1,"br-header"],[1,"br-header-left"],[1,"navicon-left","hidden-md-down"],["id","btnLeftMenu","href","javascript:void(0);"],[1,"icon","ion-navicon-round"],[1,"navicon-left","hidden-lg-up"],["id","btnLeftMenuMobile","href","javascript:void(0);"],[1,"br-header-right"],[1,"nav"],[1,"dropdown"],["href","javascript:void(0);","data-toggle","dropdown",1,"nav-link","pd-x-7","pos-relative"],[1,"icon","ion-ios-bell-outline","tx-24"],[1,"square-8","bg-danger","pos-absolute","t-15","r-5","rounded-circle"],[1,"dropdown-menu","dropdown-menu-header"],[1,"dropdown-menu-label"],["href","javascript:void(0);"],[1,"media-list"],["href","javascript:void(0);",1,"media-list-link","read"],[1,"media"],["src","https://via.placeholder.com/500","alt",""],[1,"media-body"],[1,"noti-text"],[1,"dropdown-footer"],[1,"fa","fa-angle-down"],["href","javascript:void(0);","data-toggle","dropdown",1,"nav-link","nav-link-profile"],[1,"logged-name","hidden-md-down","text-capitalize"],["class","wd-32 rounded-circle",3,"src",4,"ngIf","ngIfElse"],["noProfPic",""],[1,"square-10","bg-success"],[1,"dropdown-menu","dropdown-menu-header","wd-250"],[1,"tx-center"],["class","wd-80 rounded-circle",3,"src",4,"ngIf","ngIfElse"],[1,"logged-fullname","text-capitalize"],[1,"profile-earning-label"],[1,"profile-earning-amount"],[1,"icon","ion-ios-arrow-thin-up","tx-success"],[1,"profile-earning-text"],[1,"list-unstyled","user-profile-nav"],["routerLink","/admin/profile","routerLinkActive","active",3,"routerLinkActiveOptions"],[1,"icon","ion-ios-person"],[1,"icon","ion-ios-gear"],[2,"cursor","pointer",3,"click"],[1,"icon","ion-power"],[1,"wd-32","rounded-circle",3,"src"],["src","https://via.placeholder.com/500",1,"wd-32","rounded-circle"],[1,"wd-80","rounded-circle",3,"src"],["src","https://via.placeholder.com/500",1,"wd-80","rounded-circle"]],template:function(n,t){if(1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",5)(6,"a",6),e.\u0275\u0275element(7,"i",4),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",7)(9,"nav",8)(10,"div",9)(11,"a",10),e.\u0275\u0275element(12,"i",11)(13,"span",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"div",13)(15,"div",14)(16,"label"),e.\u0275\u0275text(17,"Notifications"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"a",15),e.\u0275\u0275text(19,"Mark All as Read"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"div",16)(21,"a",17)(22,"div",18),e.\u0275\u0275element(23,"img",19),e.\u0275\u0275elementStart(24,"div",20)(25,"p",21)(26,"strong"),e.\u0275\u0275text(27,"Suzzeth Bungaos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(28," tagged you and 18 others in a post."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"span"),e.\u0275\u0275text(30,"January 03, 2021 8:45am"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(31,"a",17)(32,"div",18),e.\u0275\u0275element(33,"img",19),e.\u0275\u0275elementStart(34,"div",20)(35,"p",21)(36,"strong"),e.\u0275\u0275text(37,"Mellisa Brown"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(38," appreciated your work "),e.\u0275\u0275elementStart(39,"strong"),e.\u0275\u0275text(40,"The Social Network"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"span"),e.\u0275\u0275text(42,"January 02, 2021 12:44am"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(43,"a",17)(44,"div",18),e.\u0275\u0275element(45,"img",19),e.\u0275\u0275elementStart(46,"div",20)(47,"p",21),e.\u0275\u0275text(48,"20+ new items added are for sale in your "),e.\u0275\u0275elementStart(49,"strong"),e.\u0275\u0275text(50,"Sale Group"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"span"),e.\u0275\u0275text(52,"January 01, 2021 10:20pm"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(53,"a",17)(54,"div",18),e.\u0275\u0275element(55,"img",19),e.\u0275\u0275elementStart(56,"div",20)(57,"p",21)(58,"strong"),e.\u0275\u0275text(59,"Julius Erving"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(60," wants to connect with you on your conversation with "),e.\u0275\u0275elementStart(61,"strong"),e.\u0275\u0275text(62,"Ronnie Mara"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"span"),e.\u0275\u0275text(64,"January 01, 2021 6:08pm"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(65,"div",22)(66,"a",15),e.\u0275\u0275element(67,"i",23),e.\u0275\u0275text(68," Show All Notifications"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(69,"div",9)(70,"a",24)(71,"span",25),e.\u0275\u0275text(72),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(73,fe,1,2,"img",26),e.\u0275\u0275template(74,ge,1,0,"ng-template",null,27,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(76,"span",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"div",29)(78,"div",30)(79,"a",15),e.\u0275\u0275template(80,be,1,2,"img",31),e.\u0275\u0275template(81,ve,1,0,"ng-template",null,27,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"h6",32),e.\u0275\u0275text(84),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(85,"p"),e.\u0275\u0275text(86),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(87,"hr"),e.\u0275\u0275elementStart(88,"div",30)(89,"span",33),e.\u0275\u0275text(90,"Earnings After Taxes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(91,"h3",34),e.\u0275\u0275text(92,"INR 13,230 "),e.\u0275\u0275element(93,"i",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"span",36),e.\u0275\u0275text(95,"Based on list price."),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(96,"hr"),e.\u0275\u0275elementStart(97,"ul",37)(98,"li")(99,"a",38),e.\u0275\u0275element(100,"i",39),e.\u0275\u0275text(101," Edit Profile"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(102,"li")(103,"a",15),e.\u0275\u0275element(104,"i",40),e.\u0275\u0275text(105," Settings"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(106,"li")(107,"a",41),e.\u0275\u0275listener("click",function(){return t.logout()}),e.\u0275\u0275element(108,"i",42),e.\u0275\u0275text(109," Sign Out"),e.\u0275\u0275elementEnd()()()()()()()()),2&n){const a=e.\u0275\u0275reference(75);e.\u0275\u0275advance(72),e.\u0275\u0275textInterpolate(t.userDetails.first_name),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null==t.userDetails?null:t.userDetails.profile_pic)("ngIfElse",a),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",null==t.userDetails?null:t.userDetails.profile_pic)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate2("",t.userDetails.first_name," ",t.userDetails.last_name,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.userDetails.email_id),e.\u0275\u0275advance(13),e.\u0275\u0275property("routerLinkActiveOptions",e.\u0275\u0275pureFunction0(9,ye))}},dependencies:[p.O5,h.yS,h.Od]}),o})(),Se=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-dashboard-rightbar"]],decls:362,vars:0,consts:[[1,"br-sideright"],["role","tablist",1,"nav","nav-tabs","sidebar-tabs"],[1,"nav-item"],["data-toggle","tab","role","tab","href","#contacts",1,"nav-link","active"],[1,"icon","ion-ios-contact-outline","tx-24"],["data-toggle","tab","role","tab","href","#attachments",1,"nav-link"],[1,"icon","ion-ios-folder-outline","tx-22"],["data-toggle","tab","role","tab","href","#calendar",1,"nav-link"],[1,"icon","ion-ios-calendar-outline","tx-24"],["data-toggle","tab","role","tab","href","#settings",1,"nav-link"],[1,"icon","ion-ios-gear-outline","tx-24"],[1,"tab-content"],["id","contacts","role","tabpanel",1,"tab-pane","pos-absolute","a-0","mg-t-60","contact-scrollbar","active"],[1,"sidebar-label","pd-x-25","mg-t-25"],[1,"contact-list","pd-x-10"],["href","",1,"contact-list-link","new"],[1,"d-flex"],[1,"pos-relative"],["src","https://via.placeholder.com/500","alt",""],[1,"contact-status-indicator","bg-success"],[1,"contact-person"],[1,"tx-info","tx-12"],[1,"square-8","bg-info","rounded-circle"],["href","",1,"contact-list-link"],[1,"mg-b-0"],[1,"contact-status-indicator","bg-gray-500"],["id","attachments","role","tabpanel",1,"tab-pane","pos-absolute","a-0","mg-t-60","attachment-scrollbar"],[1,"media-file-list"],[1,"media"],[1,"pd-10","bg-gray-500","bg-mojito","wd-50","ht-60","tx-center","d-flex","align-items-center","justify-content-center"],[1,"far","fa-file-image","tx-28","tx-white"],[1,"media-body"],[1,"mg-b-0","tx-13"],[1,"mg-b-0","tx-12","op-5"],["href","",1,"more"],[1,"icon","ion-android-more-vertical","tx-18"],[1,"media","mg-t-20"],[1,"pd-10","bg-gray-500","bg-purple","wd-50","ht-60","tx-center","d-flex","align-items-center","justify-content-center"],[1,"far","fa-file-video","tx-28","tx-white"],[1,"pd-10","bg-gray-500","bg-reef","wd-50","ht-60","tx-center","d-flex","align-items-center","justify-content-center"],[1,"far","fa-file-word","tx-28","tx-white"],[1,"pd-10","bg-gray-500","bg-firewatch","wd-50","ht-60","tx-center","d-flex","align-items-center","justify-content-center"],[1,"far","fa-file-pdf","tx-28","tx-white"],["id","calendar","role","tabpanel",1,"tab-pane","pos-absolute","a-0","mg-t-60","schedule-scrollbar"],[1,"pd-x-25"],["id","brTime",1,"br-time"],["id","brDate",1,"br-date"],[1,"datepicker","sidebar-datepicker"],[1,"list-group","sidebar-event-list","mg-b-20"],[1,"list-group-item"],["href","",1,"btn","btn-block","btn-outline-secondary","tx-uppercase","tx-12","tx-spacing-2"],["id","settings","role","tabpanel",1,"tab-pane","pos-absolute","a-0","mg-t-60","settings-scrollbar"],[1,"sidebar-settings-item"],[1,"tx-13","tx-normal"],[1,"op-5","tx-13"],[1,"br-switchbutton","checked"],["type","hidden","name","switch1","value","true"],[1,"br-switchbutton"],["type","hidden","name","switch2","value","false"],["type","hidden","name","switch3","value","false"],["type","hidden","name","switch4","value","true"],["type","email","name","email","value","janedoe@domain.com",1,"form-control"],[1,"pd-y-20","pd-x-25"],[1,"tx-13","tx-normal","tx-white","mg-b-20"],["href","",1,"btn","btn-block","btn-outline-secondary","tx-uppercase","tx-11","tx-spacing-2"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"li",2)(6,"a",5),e.\u0275\u0275element(7,"i",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"li",2)(9,"a",7),e.\u0275\u0275element(10,"i",8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"li",2)(12,"a",9),e.\u0275\u0275element(13,"i",10),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"div",11)(15,"div",12)(16,"label",13),e.\u0275\u0275text(17,"Online Contacts"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"div",14)(19,"a",15)(20,"div",16)(21,"div",17),e.\u0275\u0275element(22,"img",18)(23,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",20)(25,"p"),e.\u0275\u0275text(26,"Marilyn Tarter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"span"),e.\u0275\u0275text(28,"Clemson, CA"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"span",21),e.\u0275\u0275element(30,"span",22),e.\u0275\u0275text(31," 1 new"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"a",23)(33,"div",16)(34,"div",17),e.\u0275\u0275element(35,"img",18)(36,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"div",20)(38,"p",24),e.\u0275\u0275text(39,"Belinda Connor"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"span"),e.\u0275\u0275text(41,"Fort Kent, ME"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(42,"a",15)(43,"div",16)(44,"div",17),e.\u0275\u0275element(45,"img",18)(46,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",20)(48,"p"),e.\u0275\u0275text(49,"Britanny Cevallos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"span"),e.\u0275\u0275text(51,"Shiboygan Falls, WI"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"span",21),e.\u0275\u0275element(53,"span",22),e.\u0275\u0275text(54," 3 new"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(55,"a",15)(56,"div",16)(57,"div",17),e.\u0275\u0275element(58,"img",18)(59,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",20)(61,"p"),e.\u0275\u0275text(62,"Brandon Lawrence"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"span"),e.\u0275\u0275text(64,"Snohomish, WA"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(65,"span",21),e.\u0275\u0275element(66,"span",22),e.\u0275\u0275text(67," 1 new"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(68,"a",23)(69,"div",16)(70,"div",17),e.\u0275\u0275element(71,"img",18)(72,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"div",20)(74,"p"),e.\u0275\u0275text(75,"Andrew Wiggins"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"span"),e.\u0275\u0275text(77,"Springfield, MA"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(78,"a",23)(79,"div",16)(80,"div",17),e.\u0275\u0275element(81,"img",18)(82,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"div",20)(84,"p"),e.\u0275\u0275text(85,"Theodore Gristen"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"span"),e.\u0275\u0275text(87,"Nashville, TN"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(88,"a",23)(89,"div",16)(90,"div",17),e.\u0275\u0275element(91,"img",18)(92,"div",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(93,"div",20)(94,"p"),e.\u0275\u0275text(95,"Deborah Miner"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"span"),e.\u0275\u0275text(97,"North Shore, CA"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(98,"label",13),e.\u0275\u0275text(99,"Offline Contacts"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"div",14)(101,"a",23)(102,"div",16)(103,"div",17),e.\u0275\u0275element(104,"img",18)(105,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"div",20)(107,"p"),e.\u0275\u0275text(108,"Marilyn Tarter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(109,"span"),e.\u0275\u0275text(110,"Clemson, CA"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(111,"a",23)(112,"div",16)(113,"div",17),e.\u0275\u0275element(114,"img",18)(115,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(116,"div",20)(117,"p"),e.\u0275\u0275text(118,"Belinda Connor"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(119,"span"),e.\u0275\u0275text(120,"Fort Kent, ME"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(121,"a",23)(122,"div",16)(123,"div",17),e.\u0275\u0275element(124,"img",18)(125,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(126,"div",20)(127,"p"),e.\u0275\u0275text(128,"Britanny Cevallos"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(129,"span"),e.\u0275\u0275text(130,"Shiboygan Falls, WI"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(131,"a",23)(132,"div",16)(133,"div",17),e.\u0275\u0275element(134,"img",18)(135,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(136,"div",20)(137,"p"),e.\u0275\u0275text(138,"Brandon Lawrence"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(139,"span"),e.\u0275\u0275text(140,"Snohomish, WA"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(141,"a",23)(142,"div",16)(143,"div",17),e.\u0275\u0275element(144,"img",18)(145,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(146,"div",20)(147,"p"),e.\u0275\u0275text(148,"Andrew Wiggins"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(149,"span"),e.\u0275\u0275text(150,"Springfield, MA"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(151,"a",23)(152,"div",16)(153,"div",17),e.\u0275\u0275element(154,"img",18)(155,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(156,"div",20)(157,"p"),e.\u0275\u0275text(158,"Theodore Gristen"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"span"),e.\u0275\u0275text(160,"Nashville, TN"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(161,"a",23)(162,"div",16)(163,"div",17),e.\u0275\u0275element(164,"img",18)(165,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(166,"div",20)(167,"p"),e.\u0275\u0275text(168,"Deborah Miner"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(169,"span"),e.\u0275\u0275text(170,"North Shore, CA"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(171,"div",26)(172,"label",13),e.\u0275\u0275text(173,"Recent Attachments"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(174,"div",27)(175,"div",28)(176,"div",29),e.\u0275\u0275element(177,"i",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(178,"div",31)(179,"p",32),e.\u0275\u0275text(180,"IMG_43445"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(181,"p",33),e.\u0275\u0275text(182,"JPG Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(183,"p",33),e.\u0275\u0275text(184,"1.2mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(185,"a",34),e.\u0275\u0275element(186,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(187,"div",36)(188,"div",37),e.\u0275\u0275element(189,"i",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(190,"div",31)(191,"p",32),e.\u0275\u0275text(192,"VID_6543"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(193,"p",33),e.\u0275\u0275text(194,"MP4 Video"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(195,"p",33),e.\u0275\u0275text(196,"24.8mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(197,"a",34),e.\u0275\u0275element(198,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(199,"div",36)(200,"div",39),e.\u0275\u0275element(201,"i",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(202,"div",31)(203,"p",32),e.\u0275\u0275text(204,"Tax_Form"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(205,"p",33),e.\u0275\u0275text(206,"Word Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(207,"p",33),e.\u0275\u0275text(208,"5.5mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(209,"a",34),e.\u0275\u0275element(210,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(211,"div",36)(212,"div",41),e.\u0275\u0275element(213,"i",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(214,"div",31)(215,"p",32),e.\u0275\u0275text(216,"Getting_Started"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(217,"p",33),e.\u0275\u0275text(218,"PDF Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(219,"p",33),e.\u0275\u0275text(220,"12.7mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(221,"a",34),e.\u0275\u0275element(222,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(223,"div",36)(224,"div",41),e.\u0275\u0275element(225,"i",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(226,"div",31)(227,"p",32),e.\u0275\u0275text(228,"Introduction"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(229,"p",33),e.\u0275\u0275text(230,"PDF Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(231,"p",33),e.\u0275\u0275text(232,"7.7mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(233,"a",34),e.\u0275\u0275element(234,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(235,"div",36)(236,"div",29),e.\u0275\u0275element(237,"i",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(238,"div",31)(239,"p",32),e.\u0275\u0275text(240,"IMG_43420"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(241,"p",33),e.\u0275\u0275text(242,"JPG Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(243,"p",33),e.\u0275\u0275text(244,"2.2mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(245,"a",34),e.\u0275\u0275element(246,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(247,"div",36)(248,"div",29),e.\u0275\u0275element(249,"i",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(250,"div",31)(251,"p",32),e.\u0275\u0275text(252,"IMG_43447"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(253,"p",33),e.\u0275\u0275text(254,"JPG Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(255,"p",33),e.\u0275\u0275text(256,"3.2mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(257,"a",34),e.\u0275\u0275element(258,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(259,"div",36)(260,"div",37),e.\u0275\u0275element(261,"i",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(262,"div",31)(263,"p",32),e.\u0275\u0275text(264,"VID_6545"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(265,"p",33),e.\u0275\u0275text(266,"AVI Video"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(267,"p",33),e.\u0275\u0275text(268,"14.8mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(269,"a",34),e.\u0275\u0275element(270,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(271,"div",36)(272,"div",39),e.\u0275\u0275element(273,"i",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(274,"div",31)(275,"p",32),e.\u0275\u0275text(276,"Secret_Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(277,"p",33),e.\u0275\u0275text(278,"Word Document"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(279,"p",33),e.\u0275\u0275text(280,"4.5mb"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(281,"a",34),e.\u0275\u0275element(282,"i",35),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(283,"div",43)(284,"label",13),e.\u0275\u0275text(285,"Time & Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(286,"div",44),e.\u0275\u0275element(287,"h2",45)(288,"h6",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(289,"label",13),e.\u0275\u0275text(290,"Events Calendar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(291,"div",47),e.\u0275\u0275elementStart(292,"label",13),e.\u0275\u0275text(293,"Event Today"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(294,"div",44)(295,"div",48)(296,"div",49)(297,"div")(298,"h6"),e.\u0275\u0275text(299,"Roven's 32th Birthday"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(300,"p"),e.\u0275\u0275text(301,"2:30PM"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(302,"a",34),e.\u0275\u0275element(303,"i",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(304,"div",49)(305,"div")(306,"h6"),e.\u0275\u0275text(307,"Regular Workout Schedule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(308,"p"),e.\u0275\u0275text(309,"7:30PM"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(310,"a",34),e.\u0275\u0275element(311,"i",35),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(312,"a",50),e.\u0275\u0275text(313,"+ Add Event"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(314,"br"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(315,"div",51)(316,"label",13),e.\u0275\u0275text(317,"Quick Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(318,"div",52)(319,"h6",53),e.\u0275\u0275text(320,"Sound Notification"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(321,"p",54),e.\u0275\u0275text(322,"Play an alert sound everytime there is a new notification."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(323,"div",55),e.\u0275\u0275element(324,"input",56)(325,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(326,"div",52)(327,"h6",53),e.\u0275\u0275text(328,"2 Steps Verification"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(329,"p",54),e.\u0275\u0275text(330,"Sign in using a two step verification by sending a verification code to your phone."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(331,"div",57),e.\u0275\u0275element(332,"input",58)(333,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(334,"div",52)(335,"h6",53),e.\u0275\u0275text(336,"Location Services"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(337,"p",54),e.\u0275\u0275text(338,"Allowing us to access your location"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(339,"div",57),e.\u0275\u0275element(340,"input",59)(341,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(342,"div",52)(343,"h6",53),e.\u0275\u0275text(344,"Newsletter Subscription"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(345,"p",54),e.\u0275\u0275text(346,"Enables you to send us news and updates send straight to your email."),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(347,"div",55),e.\u0275\u0275element(348,"input",60)(349,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(350,"div",52)(351,"h6",53),e.\u0275\u0275text(352,"Your email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(353,"div",17),e.\u0275\u0275element(354,"input",61),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(355,"div",62)(356,"h6",63),e.\u0275\u0275text(357,"More Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(358,"a",64),e.\u0275\u0275text(359,"Account Settings"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(360,"a",64),e.\u0275\u0275text(361,"Privacy Settings"),e.\u0275\u0275elementEnd()()()()())}}),o})(),y=(()=>{class o{constructor(){let n=localStorage.getItem("payroll-admin-user");n&&(this.userDetails=JSON.parse(n))}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-dashboard-header"]],decls:10,vars:0,consts:[[1,"br-logo"],["routerLink","/admin",2,"font-size","19px"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"a",1),e.\u0275\u0275element(2,"span"),e.\u0275\u0275text(3,"PAYROLL "),e.\u0275\u0275elementStart(4,"i"),e.\u0275\u0275text(5,"SOFTWARE"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(7,"admin-app-dashboard-sidebar")(8,"admin-app-dashboard-topbar")(9,"admin-app-dashboard-rightbar"))},dependencies:[h.yS,he,xe,Se]}),o})(),x=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-dashboard-footer"]],decls:5,vars:0,consts:[[1,"br-footer"],[1,"footer-left"],[1,"mg-b-2"],[1,"footer-right","d-flex","align-items-center"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"footer",0)(1,"div",1)(2,"div",2),e.\u0275\u0275text(3,"Copyright \xa9 2021 Payroll Software"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(4,"div",3),e.\u0275\u0275elementEnd())}}),o})();function Ee(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ce(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function we(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"Please enter a numeric value"),e.\u0275\u0275elementEnd())}function ke(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ie(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Fe(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",65),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Te(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ae(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function De(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",66),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Pe(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Re(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Me(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",67),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Oe(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ne(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Le(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",68),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Ve(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function qe(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function $e(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",69),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Be(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function je(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ue(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",70),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function He(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ye(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",63),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ge(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",71),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275property("checked",null==n?null:n.isChecked)("disabled",null==n?null:n.isDisable),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Je(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"li")(1,"label",64),e.\u0275\u0275element(2,"input",77),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit,t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("name","permission[",t.slug,"]"),e.\u0275\u0275propertyInterpolate("value",n.key),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.value)}}function ze(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",32)(1,"div",22)(2,"div",72)(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",73),e.\u0275\u0275listener("click",function(a){const s=e.\u0275\u0275restoreView(n).$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.toggleOnOff(a,s))}),e.\u0275\u0275elementStart(6,"div",74),e.\u0275\u0275listener("click",function(a){const s=e.\u0275\u0275restoreView(n).$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.toggleOnOff(a,s))}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(7,"div",34)(8,"ul",75)(9,"li")(10,"label",64)(11,"input",76),e.\u0275\u0275listener("change",function(a){const s=e.\u0275\u0275restoreView(n).$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.permissionCheckboxChanged(a,s.slug,"all-fields"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"span"),e.\u0275\u0275text(13,"Select All"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(14,Je,5,3,"li",38),e.\u0275\u0275elementEnd()()()}if(2&o){const n=l.$implicit,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(n.name),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","",n.slug,"-toggle-switch"),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","",n.slug,"-toggle-switch-nested"),e.\u0275\u0275advance(5),e.\u0275\u0275propertyInterpolate1("name","permission[",n.slug,"]-all"),e.\u0275\u0275property("disabled",!t.isToggleOn(n)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.permission)}}function We(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",78),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save Package"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.packageForm.valid)}}function Qe(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",78),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Package"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.packageForm.valid)}}const D=function(){return{search:!1,placeholder:"Choose One"}},P=function(){return{search:!1,placeholder:"Choose Type"}};let Ze=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.dtOptions={},this.pfRulesMaster=[],this.pfRuleTypesMaster=[],this.gratuityRulesMaster=[],this.gratuityRuleTypesMaster=[],this.esicRulesMaster=[],this.esicRuleTypesMaster=[],this.ptaxRulesMaster=[],this.ptaxRuleTypesMaster=[],this.bonusRulesMaster=[],this.bonusRuleTypesMaster=[],this.lwfRulesMaster=[],this.lwfRuleTypesMaster=[],this.tdsRulesMaster=[],this.tdsRuleTypesMaster=[],this.rulesPermissionMaster=[],this.permissionMaster=[],this.restrict_fields=["listing_add_approve","attendance_upload","attendance_edit","attendance_report","run_payroll","salary_earning_report","apply_incentive","bonus_run"],this.pfRulesMaster=[{value:"yes",description:"PF Applicable"},{value:"no",description:"PF Not Applicable"}],this.pfRuleTypesMaster=[{value:"default",description:"Default PF Rule"},{value:"customizable",description:"Customizable PF Rule"}],this.gratuityRulesMaster=[{value:"yes",description:"Gratuity Applicable"},{value:"no",description:"Gratuity Not Applicable"}],this.gratuityRuleTypesMaster=[{value:"default",description:"Default Gratuity Rule"},{value:"customizable",description:"Customizable Gratuity Rule"}],this.esicRulesMaster=[{value:"yes",description:"ESIC Applicable"},{value:"no",description:"ESIC Not Applicable"}],this.esicRuleTypesMaster=[{value:"default",description:"Default ESIC Rule"},{value:"customizable",description:"Customizable ESIC Rule"}],this.ptaxRulesMaster=[{value:"yes",description:"P-Tax Applicable"},{value:"no",description:"P-Tax Not Applicable"}],this.ptaxRuleTypesMaster=[{value:"default",description:"Default P-Tax Rule"},{value:"customizable",description:"Customizable P-Tax Rule"}],this.bonusRulesMaster=[{value:"yes",description:"Bonus Applicable"},{value:"no",description:"Bonus Not Applicable"}],this.bonusRuleTypesMaster=[{value:"default",description:"Default Bonus Rule"},{value:"customizable",description:"Customizable Bonus Rule"}],this.lwfRulesMaster=[{value:"yes",description:"Lwf Applicable"},{value:"no",description:"Lwf Not Applicable"}],this.lwfRuleTypesMaster=[{value:"default",description:"Default Lwf Rule"},{value:"customizable",description:"Customizable Lwf Rule"}],this.tdsRulesMaster=[{value:"yes",description:"TDS Applicable"},{value:"no",description:"TDS Not Applicable"}],this.tdsRuleTypesMaster=[{value:"default",description:"Default TDS Rule"},{value:"customizable",description:"Customizable TDS Rule"}],this.rulesPermissionMaster={providentFunds:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!0,isChecked:!0},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1},{value:"summary_briefcase",description:"Summary Briefcase",isDisable:!1,isChecked:!1}],esic:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!0,isChecked:!0},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1},{value:"summary_briefcase",description:"Summary Briefcase",isDisable:!1,isChecked:!1}],gratuity:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!1,isChecked:!1},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1},{value:"audit_report",description:"Audit report",isDisable:!1,isChecked:!1},{value:"summary_briefcase",description:"Summary Briefcase",isDisable:!1,isChecked:!1},{value:"govt_forms",description:"Govt Forms",isDisable:!1,isChecked:!1}],professionalTax:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!1,isChecked:!1},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1},{value:"audit_report",description:"Audit report",isDisable:!1,isChecked:!1},{value:"summary_briefcase",description:"Summary Briefcase",isDisable:!1,isChecked:!1},{value:"govt_forms",description:"Govt Forms",isDisable:!1,isChecked:!1}],bonus:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!1,isChecked:!1},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1}],tds:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!1,isChecked:!1},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1}],lwf:[{value:"internal_report",description:"Internal Report",isDisable:!1,isChecked:!1},{value:"compliance_report",description:"Compliance Report",isDisable:!1,isChecked:!1},{value:"compliance_confirmation",description:"Compliance Confirmation",isDisable:!1,isChecked:!1},{value:"compliance_audit_summary",description:"Compliance Audit Summary",isDisable:!1,isChecked:!1},{value:"govt_forms",description:"Govt Forms",isDisable:!1,isChecked:!1}]},this.permissionMaster=[],this.restrict_toggles=["employee","attendance","salary"],this.packageForm=n.group({package_name:[null,i.kI.compose([i.kI.required])],employee_vault:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],gov_pf_rule:[null,i.kI.compose([i.kI.required])],gov_pf_rule_type:[null,i.kI.compose([i.kI.required])],gov_pf_permission:this.formBuilder.array([]),gov_esic_rule:[null,i.kI.compose([i.kI.required])],gov_esic_rule_type:[null,i.kI.compose([i.kI.required])],gov_esic_permission:this.formBuilder.array([]),gov_gratuity_rule:[null,i.kI.compose([i.kI.required])],gov_gratuity_rule_type:[null,i.kI.compose([i.kI.required])],gov_gratuity_permission:this.formBuilder.array([]),gov_ptax_rule:[null,i.kI.compose([i.kI.required])],gov_ptax_rule_type:[null,i.kI.compose([i.kI.required])],gov_ptax_permission:this.formBuilder.array([]),gov_bonus_rule:[null,i.kI.compose([i.kI.required])],gov_bonus_rule_type:[null,i.kI.compose([i.kI.required])],gov_bonus_permission:this.formBuilder.array([]),gov_lwf_rule:[null,i.kI.compose([i.kI.required])],gov_lwf_rule_type:[null,i.kI.compose([i.kI.required])],gov_lwf_permission:this.formBuilder.array([]),gov_tds_rule:[null,i.kI.compose([i.kI.required])],gov_tds_rule_type:[null,i.kI.compose([i.kI.required])],gov_tds_permission:this.formBuilder.array([])}),this.editActionId="",this.packageForm.get("gov_pf_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-pf-rule-fields").show(500),this.packageForm.controls.gov_pf_rule_type.setValidators([i.kI.required])):($(".gov-pf-rule-fields").hide(500),this.packageForm.controls.gov_pf_rule_type.clearValidators()),this.packageForm.controls.gov_pf_rule_type.updateValueAndValidity()}),this.packageForm.get("gov_esic_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-esic-rule-fields").show(500),this.packageForm.controls.gov_esic_rule_type.setValidators([i.kI.required])):($(".gov-esic-rule-fields").hide(500),this.packageForm.controls.gov_esic_rule_type.clearValidators()),this.packageForm.controls.gov_esic_rule_type.updateValueAndValidity()}),this.packageForm.get("gov_gratuity_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-gratuity-rule-fields").show(500),this.packageForm.controls.gov_gratuity_rule_type.setValidators([i.kI.required])):($(".gov-gratuity-rule-fields").hide(500),this.packageForm.controls.gov_gratuity_rule_type.clearValidators()),this.packageForm.controls.gov_gratuity_rule_type.updateValueAndValidity()}),this.packageForm.get("gov_ptax_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-ptax-rule-fields").show(500),this.packageForm.controls.gov_ptax_rule_type.setValidators([i.kI.required])):($(".gov-ptax-rule-fields").hide(500),this.packageForm.controls.gov_ptax_rule_type.clearValidators()),this.packageForm.controls.gov_ptax_rule_type.updateValueAndValidity()}),this.packageForm.get("gov_bonus_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-bonus-rule-fields").show(500),this.packageForm.controls.gov_bonus_rule_type.setValidators([i.kI.required])):($(".gov-bonus-rule-fields").hide(500),this.packageForm.controls.gov_bonus_rule_type.clearValidators()),this.packageForm.controls.gov_bonus_rule_type.updateValueAndValidity()}),this.packageForm.get("gov_tds_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-tds-rule-fields").show(500),this.packageForm.controls.gov_tds_rule_type.setValidators([i.kI.required])):($(".gov-tds-rule-fields").hide(500),this.packageForm.controls.gov_tds_rule_type.clearValidators()),this.packageForm.controls.gov_tds_rule_type.updateValueAndValidity()}),this.packageForm.get("gov_lwf_rule")?.valueChanges.subscribe(c=>{"yes"==c.value?($(".gov-lwf-rule-fields").show(500),this.packageForm.controls.gov_lwf_rule_type.setValidators([i.kI.required])):($(".gov-lwf-rule-fields").hide(500),this.packageForm.controls.gov_lwf_rule_type.clearValidators()),this.packageForm.controls.gov_lwf_rule_type.updateValueAndValidity()})}ngOnInit(){this.titleService.setTitle("Client Package - "+d.AppName),this.fetch(),this.fetchPermissions()}fetchPermissions(){this.spinner.show(),this.adminService.fetchPackagePermissionList().subscribe(n=>{if("success"==n.status){this.permissionMaster=n.package_option;let t=this;setTimeout(function(){t.resetSelectedPermissions()},100)}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchClientPackages({pageno:n.start/d.DataTableLength+1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.package_list.totalDocs,recordsFiltered:a.package_list.totalDocs,data:a.package_list.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.package_name},orderable:!0,name:"package_name"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.created_at,"dd/MM/yyyy")},orderable:!0,name:"created_at"}],drawCallback:function(n){},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.checkPermissionsforEdit(n.module),this.packageForm.patchValue({package_name:n.package_name,employee_vault:n.employee_vault,gov_pf_rule:this.pfRulesMaster.find(t=>t.value==n.gov_pf_rule?.rule_apply),gov_pf_rule_type:this.pfRuleTypesMaster.find(t=>t.value==n.gov_pf_rule?.rule_type),gov_esic_rule:this.esicRulesMaster.find(t=>t.value==n.gov_esic_rule?.rule_apply),gov_esic_rule_type:this.esicRuleTypesMaster.find(t=>t.value==n.gov_esic_rule?.rule_type),gov_gratuity_rule:this.gratuityRulesMaster.find(t=>t.value==n.gov_gratuity_rule?.rule_apply),gov_gratuity_rule_type:this.gratuityRuleTypesMaster.find(t=>t.value==n.gov_gratuity_rule?.rule_type),gov_ptax_rule:this.ptaxRulesMaster.find(t=>t.value==n.gov_ptax_rule?.rule_apply),gov_ptax_rule_type:this.ptaxRuleTypesMaster.find(t=>t.value==n.gov_ptax_rule?.rule_type),gov_bonus_rule:this.bonusRulesMaster.find(t=>t.value==n.gov_bonus_rule?.rule_apply),gov_bonus_rule_type:this.bonusRuleTypesMaster.find(t=>t.value==n.gov_bonus_rule?.rule_type),gov_tds_rule:this.tdsRulesMaster.find(t=>t.value==n.gov_tds_rule?.rule_apply),gov_tds_rule_type:this.tdsRuleTypesMaster.find(t=>t.value==n.gov_tds_rule?.rule_type),gov_lwf_rule:this.lwfRulesMaster.find(t=>t.value==n.gov_lwf_rule?.rule_apply),gov_lwf_rule_type:this.lwfRuleTypesMaster.find(t=>t.value==n.gov_lwf_rule?.rule_type)}),n.gov_pf_rule?.rule_permission.forEach(t=>{$('input[name="gov_pf_permission[]"][value="'+t+'"]').prop("checked",!0)}),n.gov_esic_rule?.rule_permission.forEach(t=>{$('input[name="gov_esic_permission[]"][value="'+t+'"]').prop("checked",!0)}),n.gov_gratuity_rule?.rule_permission.forEach(t=>{$('input[name="gov_gratuity_permission[]"][value="'+t+'"]').prop("checked",!0)}),n.gov_ptax_rule?.rule_permission.forEach(t=>{$('input[name="gov_ptax_permission[]"][value="'+t+'"]').prop("checked",!0)}),n.gov_bonus_rule?.rule_permission.forEach(t=>{$('input[name="gov_bonus_permission[]"][value="'+t+'"]').prop("checked",!0)}),n.gov_lwf_rule?.rule_permission.forEach(t=>{$('input[name="gov_lwf_permission[]"][value="'+t+'"]').prop("checked",!0)}),$("html, body").animate({scrollTop:$("#clientpackage-submit-section").position().top})}cancelEdit(){this.editActionId="",this.packageForm.reset();for(const n in this.packageForm.controls)if(Object.prototype.hasOwnProperty.call(this.packageForm.controls,n)){const t=this.packageForm.controls[n];t.markAsUntouched(),t.markAsPristine()}this.resetSelectedPermissions(),this.permissionCheckboxChanged()}create(n){if(this.packageForm.valid){let t=this.getSelectedPermissions();if(!1===t)return;if(Object.keys(t).length<1)return void this.toastr.error("You need to select atleast one permission module for submitting");n.target.classList.add("btn-loading"),this.adminService.createClientPackage({package_name:this.packageForm.value.package_name,employee_vault:this.packageForm.value.employee_vault,gov_pf_rule:this.packageForm.value.gov_pf_rule?.value,gov_pf_rule_type:this.packageForm.value.gov_pf_rule_type?.value,gov_pf_permission:JSON.stringify($('[name="gov_pf_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_esic_rule:this.packageForm.value.gov_esic_rule?.value,gov_esic_rule_type:this.packageForm.value.gov_esic_rule_type?.value,gov_esic_permission:JSON.stringify($('[name="gov_esic_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_gratuity_rule:this.packageForm.value.gov_gratuity_rule?.value,gov_gratuity_rule_type:this.packageForm.value.gov_gratuity_rule_type?.value,gov_gratuity_permission:JSON.stringify($('[name="gov_gratuity_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_ptax_rule:this.packageForm.value.gov_ptax_rule?.value,gov_ptax_rule_type:this.packageForm.value.gov_ptax_rule_type?.value,gov_ptax_permission:JSON.stringify($('[name="gov_ptax_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_bonus_rule:this.packageForm.value.gov_bonus_rule?.value,gov_bonus_rule_type:this.packageForm.value.gov_bonus_rule_type?.value,gov_bonus_permission:JSON.stringify($('[name="gov_bonus_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_tds_rule:this.packageForm.value.gov_tds_rule?.value,gov_tds_rule_type:this.packageForm.value.gov_tds_rule_type?.value,gov_tds_permission:JSON.stringify($('[name="gov_tds_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_lwf_rule:this.packageForm.value.gov_lwf_rule?.value,gov_lwf_rule_type:this.packageForm.value.gov_lwf_rule_type?.value,gov_lwf_permission:JSON.stringify($('[name="gov_lwf_permission[]"]:checked').map(function(){return $(this).val()}).get()),module:JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteClientPackage({package_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.packageForm.valid){let t=this.getSelectedPermissions();if(!1===t)return;if(Object.keys(t).length<1)return void this.toastr.error("You need to select atleast one permission module for submitting");n.target.classList.add("btn-loading"),this.adminService.updateClientPackage({package_id:this.editActionId,package_name:this.packageForm.value.package_name,employee_vault:this.packageForm.value.employee_vault,gov_pf_rule:this.packageForm.value.gov_pf_rule?.value,gov_pf_rule_type:this.packageForm.value.gov_pf_rule_type?.value,gov_pf_permission:JSON.stringify($('[name="gov_pf_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_esic_rule:this.packageForm.value.gov_esic_rule?.value,gov_esic_rule_type:this.packageForm.value.gov_esic_rule_type?.value,gov_esic_permission:JSON.stringify($('[name="gov_esic_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_gratuity_rule:this.packageForm.value.gov_gratuity_rule?.value,gov_gratuity_rule_type:this.packageForm.value.gov_gratuity_rule_type?.value,gov_gratuity_permission:JSON.stringify($('[name="gov_gratuity_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_ptax_rule:this.packageForm.value.gov_ptax_rule?.value,gov_ptax_rule_type:this.packageForm.value.gov_ptax_rule_type?.value,gov_ptax_permission:JSON.stringify($('[name="gov_ptax_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_bonus_rule:this.packageForm.value.gov_bonus_rule?.value,gov_bonus_rule_type:this.packageForm.value.gov_bonus_rule_type?.value,gov_bonus_permission:JSON.stringify($('[name="gov_bonus_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_tds_rule:this.packageForm.value.gov_tds_rule?.value,gov_tds_rule_type:this.packageForm.value.gov_tds_rule_type?.value,gov_tds_permission:JSON.stringify($('[name="gov_tds_permission[]"]:checked').map(function(){return $(this).val()}).get()),gov_lwf_rule:this.packageForm.value.gov_lwf_rule?.value,gov_lwf_rule_type:this.packageForm.value.gov_lwf_rule_type?.value,gov_lwf_permission:JSON.stringify($('[name="gov_lwf_permission[]"]:checked').map(function(){return $(this).val()}).get()),module:JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getSelectedPermissions(){const n={};var t=!0;return this.permissionMaster.forEach(a=>{const r=[];$('input[name="permission['+a.slug+']"]:checked').each(function(){r.push($(this).val())}),(this.restrict_toggles.includes(a.slug)||$("#"+a.slug+"-toggle-switch").hasClass("on"))&&r.length<1&&(this.toastr.warning("You need to select atleast one permission for "+a.name+" Module"),t=!1),r.length>0&&(n[a.slug]=r)}),1==t&&n}resetSelectedPermissions(n=!1){this.permissionMaster.forEach(t=>{$(".br-toggle").removeClass("on"),$('input[name="gov_gratuity_permission[]"]').each(function(){$(this).prop("checked",!1)}),$('input[name="gov_ptax_permission[]"]').each(function(){$(this).prop("checked",!1)}),$('input[name="gov_bonus_permission[]"]').each(function(){$(this).prop("checked",!1)}),$('input[name="gov_tds_permission[]"]').each(function(){$(this).prop("checked",!1)}),$('input[name="permission['+t.slug+']"]').each(function(){$(this).prop("checked",!1),$(this).attr("disabled","true")}),this.restrict_toggles.includes(t.slug)&&($("#"+t.slug+"-toggle-switch").addClass("disabled"),$("#"+t.slug+"-toggle-switch").addClass("on"),$('input[name="permission['+t.slug+']"]').each(function(){n||$(this).prop("checked",!0),$(this).removeAttr("disabled")})),t.permission.forEach(a=>{this.restrict_fields.includes(a.key)&&$(`input[name="permission[${t.slug}]"][value="${a.key}"]`).each(function(){$(this).prop("checked",!0),$(this).prop("disabled",!0)})}),this.permissionCheckboxChanged()})}checkPermissionsforEdit(n){this.resetSelectedPermissions(!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const a=n[t];Array.isArray(a)&&a.forEach(r=>{$("#"+t+"-toggle-switch").addClass("on"),$('input[name="permission['+t+']"][value="'+r+'"]').prop("checked",!0)})}this.permissionCheckboxChanged()}permissionCheckboxChanged(n=null,t,a=null,r=null){if(t&&this.restrict_fields.includes(t))return n.target.checked=!0,void(n.target.disabled=!0);a&&"all-fields"==a?document.getElementById(`${t}-toggle-switch`)?.classList.contains("on")&&document.getElementsByName(`permission[${t}]`).forEach(s=>{this.restrict_fields.includes(s.value)||(s.checked=n.target.checked)}):this.permissionMaster.forEach(s=>{let m=this.restrict_fields;this.restrict_toggles.includes(s.slug)&&($("#"+s.slug+"-toggle-switch").addClass("disabled"),$("#"+s.slug+"-toggle-switch").addClass("on"),$('input[name="permission['+s.slug+']"]').each(function(){$(this).removeAttr("disabled")})),$("#"+s.slug+"-toggle-switch").hasClass("on")?$('input[name="permission['+s.slug+']"]').each(function(){m.includes($(this).val())?$(this).prop("disabled",!0):$(this).removeAttr("disabled")}):$('input[name="permission['+s.slug+']"]').each(function(){m.includes($(this).val())||($(this).prop("checked",!1),$(this).prop("disabled",!0))})})}toggleOnOff(n,t){n.stopPropagation();let a=document.getElementById(`${t.slug}-toggle-switch`),r=document.getElementById(`${t.slug}-toggle-switch`);document.getElementsByName(`permission[${t.slug}]`).forEach(s=>{s.disabled=!!this.restrict_fields.includes(s.value)}),r&&(r.classList.contains("on")?document.getElementsByName(`permission[${t.slug}]`).forEach(s=>{this.restrict_fields.includes(s.value)?s.disabled=!0:(s.disabled=!0,s.checked=!1)}):r.classList.contains("off")&&document.getElementsByName(`permission[${t.slug}]`).forEach(s=>{s.disabled=!!this.restrict_fields.includes(s.value)})),this.isToggleOn(t)?(a?.classList.add("off"),a?.classList.remove("on")):(a?.classList.remove("off"),a?.classList.add("on"))}isToggleOn(n){return document.getElementById(`${n.slug}-toggle-switch`)?.classList.contains("on")}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-clientpackages"]],decls:160,vars:71,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-grid"],[1,"mg-b-0"],["id","clientpackage-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","package_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["type","text","formControlName","employee_vault",1,"form-control"],[1,"col-md",2,"border","1px solid #ced4da"],[1,"card","bd-0"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],["href","#rule","data-toggle","tab",1,"nav-link","active"],["href","#module","data-toggle","tab",1,"nav-link"],[1,"card-body","color-gray-lighter","pd-0"],[1,"tab-content"],["id","rule",1,"tab-pane","active"],[1,"col-12","col-sm-12",2,"padding","0px","border","0px"],[1,"card-columns","column-count-2","mg-t-10"],[1,"card","shadow-base","widget-11"],[1,"card-title"],[1,"card-body"],["formControlName","gov_pf_rule",1,"form-control",3,"options","config"],["formControlName","gov_pf_rule_type",1,"form-control","gov-pf-rule-fields",2,"display","none",3,"options","config"],[1,"list-unstyled","mg-b-0","mg-t-10"],[4,"ngFor","ngForOf"],["formControlName","gov_gratuity_rule",1,"form-control",3,"options","config"],["formControlName","gov_gratuity_rule_type",1,"form-control","gov-gratuity-rule-fields",2,"display","none",3,"options","config"],["formControlName","gov_bonus_rule",1,"form-control",3,"options","config"],["formControlName","gov_bonus_rule_type",1,"form-control","gov-bonus-rule-fields",2,"display","none",3,"options","config"],["formControlName","gov_lwf_rule",1,"form-control",3,"options","config"],["formControlName","gov_lwf_rule_type",1,"form-control","gov-lwf-rule-fields",2,"display","none",3,"options","config"],["formControlName","gov_esic_rule",1,"form-control",3,"options","config"],["formControlName","gov_esic_rule_type",1,"form-control","gov-esic-rule-fields",2,"display","none",3,"options","config"],["formControlName","gov_ptax_rule",1,"form-control",3,"options","config"],["formControlName","gov_ptax_rule_type",1,"form-control","gov-ptax-rule-fields",2,"display","none",3,"options","config"],["formControlName","gov_tds_rule",1,"form-control",3,"options","config"],["formControlName","gov_tds_rule_type",1,"form-control","gov-tds-rule-fields",2,"display","none",3,"options","config"],["id","module",1,"tab-pane"],[1,"card-columns","column-count-4","mg-t-10"],["class","card shadow-base widget-11",4,"ngFor","ngForOf"],[1,"row","no-gutters","bd-1",2,"border-right","1px solid #ced4da"],[1,"col-12","col-sm-12"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],[1,"text-center"],[1,"error-element"],[1,"ckbox"],["type","checkbox","name","gov_pf_permission[]",3,"checked","disabled","value"],["type","checkbox","name","gov_gratuity_permission[]",3,"checked","disabled","value"],["type","checkbox","name","gov_bonus_permission[]",3,"checked","disabled","value"],["type","checkbox","name","gov_lwf_permission[]",3,"checked","disabled","value"],["type","checkbox","name","gov_esic_permission[]",3,"checked","disabled","value"],["type","checkbox","name","gov_ptax_permission[]",3,"checked","disabled","value"],["type","checkbox","name","gov_tds_permission[]",3,"checked","disabled","value"],[1,"card-title",2,"display","contents"],[1,"toggle-btn","toggle-btn-rounded","toggle-btn-primary","off",3,"id","click"],[1,"toggle-btn-switch",3,"id","click"],[1,"list-unstyled","mg-b-0"],["type","checkbox","value","all",3,"name","disabled","change"],["type","checkbox","disabled","true",3,"name","value"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Client Package"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Client Package"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Create module/features combinations"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9)(17,"h6",10),e.\u0275\u0275text(18,"Define Client Package"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11)(20,"form",12)(21,"div",13)(22,"div",14),e.\u0275\u0275text(23," Client Package Name\xa0"),e.\u0275\u0275elementStart(24,"span",15),e.\u0275\u0275text(25,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",14),e.\u0275\u0275element(27,"input",16),e.\u0275\u0275template(28,Ee,2,0,"p",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275text(30," Document Storage Size (KB) (Per Employee)\xa0"),e.\u0275\u0275elementStart(31,"span",15),e.\u0275\u0275text(32,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",14),e.\u0275\u0275element(34,"input",19),e.\u0275\u0275template(35,Ce,2,0,"p",17),e.\u0275\u0275template(36,we,2,0,"p",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(37,"br"),e.\u0275\u0275elementStart(38,"div",13)(39,"div",20)(40,"div",21)(41,"div",22)(42,"ul",23)(43,"li",24)(44,"a",25),e.\u0275\u0275text(45,"Government Rule"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"li",24)(47,"a",26),e.\u0275\u0275text(48,"Modules"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(49,"div",27)(50,"div",28)(51,"div",29)(52,"div",13)(53,"div",30)(54,"div",31)(55,"div",32)(56,"div",22)(57,"div",33),e.\u0275\u0275text(58," Provident Fund "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",34),e.\u0275\u0275element(60,"ngx-select-dropdown",35),e.\u0275\u0275template(61,ke,2,0,"p",17),e.\u0275\u0275element(62,"ngx-select-dropdown",36),e.\u0275\u0275template(63,Ie,2,0,"p",17),e.\u0275\u0275elementStart(64,"ul",37),e.\u0275\u0275template(65,Fe,5,4,"li",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(66,"div",32)(67,"div",22)(68,"div",33),e.\u0275\u0275text(69," Gratuity "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"div",34),e.\u0275\u0275element(71,"ngx-select-dropdown",39),e.\u0275\u0275template(72,Te,2,0,"p",17),e.\u0275\u0275element(73,"ngx-select-dropdown",40),e.\u0275\u0275template(74,Ae,2,0,"p",17),e.\u0275\u0275elementStart(75,"ul",37),e.\u0275\u0275template(76,De,5,4,"li",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(77,"div",32)(78,"div",22)(79,"div",33),e.\u0275\u0275text(80," Bonus "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(81,"div",34),e.\u0275\u0275element(82,"ngx-select-dropdown",41),e.\u0275\u0275template(83,Pe,2,0,"p",17),e.\u0275\u0275element(84,"ngx-select-dropdown",42),e.\u0275\u0275template(85,Re,2,0,"p",17),e.\u0275\u0275elementStart(86,"ul",37),e.\u0275\u0275template(87,Me,5,4,"li",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(88,"div",32)(89,"div",22)(90,"div",33),e.\u0275\u0275text(91," LWF "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(92,"div",34),e.\u0275\u0275element(93,"ngx-select-dropdown",43),e.\u0275\u0275template(94,Oe,2,0,"p",17),e.\u0275\u0275element(95,"ngx-select-dropdown",44),e.\u0275\u0275template(96,Ne,2,0,"p",17),e.\u0275\u0275elementStart(97,"ul",37),e.\u0275\u0275template(98,Le,5,4,"li",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(99,"div",32)(100,"div",22)(101,"div",33),e.\u0275\u0275text(102," ESIC "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(103,"div",34),e.\u0275\u0275element(104,"ngx-select-dropdown",45),e.\u0275\u0275template(105,Ve,2,0,"p",17),e.\u0275\u0275element(106,"ngx-select-dropdown",46),e.\u0275\u0275template(107,qe,2,0,"p",17),e.\u0275\u0275elementStart(108,"ul",37),e.\u0275\u0275template(109,$e,5,4,"li",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(110,"div",32)(111,"div",22)(112,"div",33),e.\u0275\u0275text(113," P-Tax "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(114,"div",34),e.\u0275\u0275element(115,"ngx-select-dropdown",47),e.\u0275\u0275template(116,Be,2,0,"p",17),e.\u0275\u0275element(117,"ngx-select-dropdown",48),e.\u0275\u0275template(118,je,2,0,"p",17),e.\u0275\u0275elementStart(119,"ul",37),e.\u0275\u0275template(120,Ue,5,4,"li",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(121,"div",32)(122,"div",22)(123,"div",33),e.\u0275\u0275text(124," TDS "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"div",34),e.\u0275\u0275element(126,"ngx-select-dropdown",49),e.\u0275\u0275template(127,He,2,0,"p",17),e.\u0275\u0275element(128,"ngx-select-dropdown",50),e.\u0275\u0275template(129,Ye,2,0,"p",17),e.\u0275\u0275elementStart(130,"ul",37),e.\u0275\u0275template(131,Ge,5,4,"li",38),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(132,"div",51)(133,"div",13)(134,"div",30)(135,"div",52),e.\u0275\u0275template(136,ze,15,6,"div",53),e.\u0275\u0275elementEnd()()()()()()()()(),e.\u0275\u0275elementStart(137,"div",54)(138,"div",55),e.\u0275\u0275template(139,We,3,1,"button",56),e.\u0275\u0275template(140,Qe,6,1,"ng-template",null,57,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(142,"div",58)(143,"div",9)(144,"h6",10),e.\u0275\u0275text(145,"Client Package List"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(146,"div",59)(147,"table",60)(148,"thead")(149,"tr")(150,"th",61),e.\u0275\u0275text(151,"Sl No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(152,"th",62),e.\u0275\u0275text(153,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(154,"th",61),e.\u0275\u0275text(155,"Package Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(156,"th",61),e.\u0275\u0275text(157,"Time"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(158,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(159,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(141);e.\u0275\u0275advance(20),e.\u0275\u0275property("formGroup",t.packageForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.packageForm.controls.package_name.hasError("required")&&t.packageForm.controls.package_name.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.packageForm.controls.employee_vault.hasError("required")&&t.packageForm.controls.employee_vault.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.employee_vault.hasError("pattern")&&t.packageForm.controls.employee_vault.dirty),e.\u0275\u0275advance(24),e.\u0275\u0275property("options",t.pfRulesMaster)("config",e.\u0275\u0275pureFunction0(57,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_pf_rule.hasError("required")&&t.packageForm.controls.gov_pf_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.pfRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(58,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_pf_rule_type.hasError("required")&&t.packageForm.controls.gov_pf_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.providentFunds),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.gratuityRulesMaster)("config",e.\u0275\u0275pureFunction0(59,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_gratuity_rule.hasError("required")&&t.packageForm.controls.gov_gratuity_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.gratuityRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(60,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_gratuity_rule_type.hasError("required")&&t.packageForm.controls.gov_gratuity_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.gratuity),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.bonusRulesMaster)("config",e.\u0275\u0275pureFunction0(61,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_bonus_rule.hasError("required")&&t.packageForm.controls.gov_bonus_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.bonusRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(62,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_bonus_rule_type.hasError("required")&&t.packageForm.controls.gov_bonus_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.bonus),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.lwfRulesMaster)("config",e.\u0275\u0275pureFunction0(63,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_lwf_rule.hasError("required")&&t.packageForm.controls.gov_lwf_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.lwfRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(64,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_lwf_rule_type.hasError("required")&&t.packageForm.controls.gov_lwf_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.lwf),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.esicRulesMaster)("config",e.\u0275\u0275pureFunction0(65,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_esic_rule.hasError("required")&&t.packageForm.controls.gov_esic_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.esicRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(66,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_esic_rule_type.hasError("required")&&t.packageForm.controls.gov_esic_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.esic),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.ptaxRulesMaster)("config",e.\u0275\u0275pureFunction0(67,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_ptax_rule.hasError("required")&&t.packageForm.controls.gov_ptax_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.ptaxRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(68,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_ptax_rule_type.hasError("required")&&t.packageForm.controls.gov_ptax_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.professionalTax),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.tdsRulesMaster)("config",e.\u0275\u0275pureFunction0(69,D)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_tds_rule.hasError("required")&&t.packageForm.controls.gov_tds_rule.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.tdsRuleTypesMaster)("config",e.\u0275\u0275pureFunction0(70,P)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.packageForm.controls.gov_tds_rule_type.hasError("required")&&t.packageForm.controls.gov_tds_rule_type.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",null==t.rulesPermissionMaster?null:t.rulesPermissionMaster.tds),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",t.permissionMaster),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x],styles:['.toggle-btn[_ngcontent-%COMP%]{width:56px;height:25px;background-color:#0000004d;display:inline-block;position:relative;overflow:hidden;cursor:pointer;border-radius:3px;transition:all .2s ease-in-out}@media screen and (prefers-reduced-motion: reduce){.toggle-btn[_ngcontent-%COMP%]{transition:none}}.toggle-btn.on[_ngcontent-%COMP%]{background-color:#141d28}.toggle-btn.on[_ngcontent-%COMP%]   .toggle-btn-switch[_ngcontent-%COMP%]{left:35px}.toggle-btn[_ngcontent-%COMP%] + .toggle-btn[_ngcontent-%COMP%]{margin-left:5px}.toggle-btn-rounded[_ngcontent-%COMP%]{border-radius:25px}.toggle-btn-rounded[_ngcontent-%COMP%]   .toggle-btn-switch[_ngcontent-%COMP%]{border-radius:100%}.toggle-btn-rounded[_ngcontent-%COMP%]   .toggle-btn-switch[_ngcontent-%COMP%]:before{left:-23px}.toggle-btn-rounded[_ngcontent-%COMP%]   .toggle-btn-switch[_ngcontent-%COMP%]:after{right:-27px}.toggle-btn-switch[_ngcontent-%COMP%]{position:absolute;top:3px;bottom:3px;left:3px;width:18px;background-color:#fff;border-radius:2px;transition:all .2s ease-in-out}@media screen and (prefers-reduced-motion: reduce){.toggle-btn-switch[_ngcontent-%COMP%]{transition:none}}.toggle-btn-switch[_ngcontent-%COMP%]:before, .toggle-btn-switch[_ngcontent-%COMP%]:after{position:absolute;top:2px;color:#fff;text-transform:uppercase;font-family:Roboto,Helvetica Neue,Arial,sans-serif;font-size:10px;font-weight:500;letter-spacing:1px;text-shadow:1px 1px rgba(33,37,41,.1)}.toggle-btn-switch[_ngcontent-%COMP%]:before{content:"on";left:-25px}.toggle-btn-switch[_ngcontent-%COMP%]:after{content:"off";right:-28px}.toggle-btn-primary.on[_ngcontent-%COMP%]{background-color:#0866c6}.toggle-btn-success.on[_ngcontent-%COMP%]{background-color:#23bf08}.toggle-btn-warning.on[_ngcontent-%COMP%]{background-color:#f49917}.toggle-btn-danger.on[_ngcontent-%COMP%]{background-color:#dc3545}.toggle-btn-info.on[_ngcontent-%COMP%]{background-color:#17a2b8}.toggle-btn.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}']}),o})();function Ke(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",38),e.\u0275\u0275text(1," Define Arrear Slip Template "),e.\u0275\u0275elementEnd())}function Xe(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",38),e.\u0275\u0275text(1,"Update Arrear Slip Template"),e.\u0275\u0275elementEnd())}function et(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function tt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",39),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function nt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function at(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",39),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function rt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function ot(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",39),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function it(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"label",43),e.\u0275\u0275element(2,"input",44),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function lt(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",40)(2,"div",29),e.\u0275\u0275text(3," Employee's Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,it,5,2,"div",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.employeeDetailsMaster)}}function st(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"label",43),e.\u0275\u0275element(2,"input",45),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function dt(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",40)(2,"div",29),e.\u0275\u0275text(3," Earning Heads "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,st,5,2,"div",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.earningHeadsMaster)}}function mt(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"label",43),e.\u0275\u0275element(2,"input",46),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function ct(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",40)(2,"div",29),e.\u0275\u0275text(3," Salary Deductions "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,mt,5,2,"div",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.salaryDeductionsMaster)}}function pt(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"label",43),e.\u0275\u0275element(2,"input",47),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function ut(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",40)(2,"div",29),e.\u0275\u0275text(3," Salary Contributions "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,pt,5,2,"div",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.salaryContributionsMaster)}}function _t(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"label",43),e.\u0275\u0275element(2,"input",48),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function ht(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",40)(2,"div",29),e.\u0275\u0275text(3," Other Payments "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,_t,5,2,"div",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.otherPaymentMaster)}}function ft(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",42)(1,"label",43),e.\u0275\u0275element(2,"input",49),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function gt(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",40)(2,"div",29),e.\u0275\u0275text(3," Other Deductions "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,ft,5,2,"div",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.otherDeductionMaster)}}function bt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function vt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",39),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function yt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",39),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function xt(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",50),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save Template"),e.\u0275\u0275elementEnd()()}}function St(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEntry())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",52),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}}const Et=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let Ct=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.Global=d,this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.editActionId="",this.earningHeadsMaster=[],this.employeeDetailsMaster=[{value:"emp_first_name",description:"Employee First Name"},{value:"emp_last_name",description:"Employee Last Name"},{value:"email_id",description:"Email ID"},{value:"emp_id",description:"Employee ID"},{value:"aadhar_no",description:"Aadhar No"},{value:"pan_no",description:"PAN No"},{value:"emp_father_name",description:"Employee Father Name"},{value:"bank_name",description:"Bank Name"},{value:"branch_name",description:"Branch Name"},{value:"account_no",description:"Account Number"},{value:"account_type",description:"Account Type"},{value:"ifsc_code",description:"IFSC Code"},{value:"department",description:"Department"},{value:"designation",description:"Designation"},{value:"branch",description:"Branch"}],this.otherPaymentMaster=[{value:"overtime",description:"Overtime"},{value:"bonus",description:"Bonus"},{value:"gratuity",description:"Gratuity"},{value:"incentive",description:"Incentive"},{value:"Ex-gratia",description:"Ex-Gratia"},{value:"arrear",description:"Arrear"},{value:"advance-given",description:"Advance Given"}],this.otherDeductionMaster=[{value:"advance-recover1",description:"Advance Recover 1"},{value:"advance-recover2",description:"Advance Recover 2"},{value:"advance-recover3",description:"Advance Recover 3"},{value:"advance-recover4",description:"Advance Recover 4"}],this.salaryContributionsMaster=this.salaryDeductionsMaster=[{value:"PF",description:"PF"},{value:"ESIC",description:"ESIC"},{value:"PT",description:"PT"},{value:"TDS",description:"TDS"}],this.arrearSlipForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],company_info:[null,i.kI.compose([i.kI.required])],employee_details:[null],earning_head:[null],statutory_deduction:[null],statutory_contribution:[null],other_payment:[null],other_deduction:[null],signature_message:[null,i.kI.compose([])],publish_status:[null],arrear_slip_temp_company_logo:[null,i.kI.compose([i.kI.required])],arrear_slip_temp_company_logo_file:[null,i.kI.compose([i.kI.required])]}),this.fetch(),this.fetchMaster()}ngOnInit(){this.titleService.setTitle("Arrear Slip Template - "+d.AppName)}onFileChanged(n,t,a,r){n.target.files.length>0&&t.patchValue({[r]:n.target.files[0]})}create(n){this.arrearSlipForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.arrearSlipForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createArrearSlipTemplate({template_name:this.arrearSlipForm.value.template_name??"",company_info:this.arrearSlipForm.value.company_info??"",employee_details:JSON.stringify(this.getSelectedModules("employee_details")),earning_head:JSON.stringify(this.getSelectedModules("earning_head")),statutory_deduction:JSON.stringify(this.getSelectedModules("statutory_deduction")),statutory_contribution:JSON.stringify(this.getSelectedModules("statutory_contribution")),other_payment:JSON.stringify(this.getSelectedModules("other_payment")),other_deduction:JSON.stringify(this.getSelectedModules("other_deduction")),signature_message:this.arrearSlipForm.value.signature_message??"",publish_status:this.arrearSlipForm.value.publish_status.value,arrear_slip_temp_company_logo:this.arrearSlipForm.value.arrear_slip_temp_company_logo_file??""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}update(n){this.arrearSlipForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.arrearSlipForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateArrearSlipTemplate({template_name:this.arrearSlipForm.value.template_name??"",company_info:this.arrearSlipForm.value.company_info??"",employee_details:JSON.stringify(this.getSelectedModules("employee_details")),earning_head:JSON.stringify(this.getSelectedModules("earning_head")),statutory_deduction:JSON.stringify(this.getSelectedModules("statutory_deduction")),statutory_contribution:JSON.stringify(this.getSelectedModules("statutory_contribution")),other_payment:JSON.stringify(this.getSelectedModules("other_payment")),other_deduction:JSON.stringify(this.getSelectedModules("other_deduction")),signature_message:this.arrearSlipForm.value.signature_message??"",arrear_slip_temp_company_logo:this.arrearSlipForm.value.arrear_slip_temp_company_logo_file??"",publish_status:this.arrearSlipForm.value.publish_status.publish_status??"",arrear_slip_temp_id:this.editActionId}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchArrearSlipTemplates({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.arrear_slip_temp.totalDocs,recordsFiltered:a.arrear_slip_temp.totalDocs,data:a.arrear_slip_temp.docs}):(this.toastr.error(a.message),t({recordsTotal:0,recordsFiltered:0,data:[]}))},a=>{this.toastr.error(d.showServerErrorMessage(a)),t({recordsTotal:0,recordsFiltered:0,data:[]})})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){let s="",m=!1;return d.checkCompanyModulePermission({staff_module:"company_rule",staff_operation:["edit"],company_strict:!0})&&(s+='<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                          <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                      </button>',m=!0),d.checkCompanyModulePermission({staff_module:"company_rule",staff_operation:["delete"],company_strict:!0})&&(s+='<button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                          <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                      </button>',m=!0),m?s:"-"},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name??"N/A"},orderable:!0,name:"template_name"},{render:function(n,t,a,r){return'<img class="img-thumbnail" style="max-width: 75px" src='+d.BACKEND_URL+"/"+a.company_logo+">"},orderable:!1,name:"company_logo",className:"text-center"},{render:function(n,t,a,r){return a.company_info},orderable:!0,name:"company_info"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.created_at,"dd/MM/yyyy hh:mm a")},orderable:!0,name:"created_at"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.cancelEntry(),n.publish_status&&(n.publish_status=this.publishStatusMaster.find(t=>t.value==n.publish_status)),this.arrearSlipForm.patchValue({template_name:n.template_name,company_info:n.company_info,signature_message:n.signature_message,publish_status:n.publish_status}),this.checkModulesForEdit("employee_details",n.employee_details),this.checkModulesForEdit("earning_head",n.earning_head),this.checkModulesForEdit("statutory_deduction",n.statutory_deduction),this.checkModulesForEdit("statutory_contribution",n.statutory_contribution),this.checkModulesForEdit("other_payment",n.other_payment),this.checkModulesForEdit("other_deduction",n.other_deduction),this.arrearSlipForm.controls.arrear_slip_temp_company_logo.clearValidators(),this.arrearSlipForm.controls.arrear_slip_temp_company_logo_file.clearValidators(),this.arrearSlipForm.controls.arrear_slip_temp_company_logo.updateValueAndValidity(),this.arrearSlipForm.controls.arrear_slip_temp_company_logo_file.updateValueAndValidity(),this.editActionId=n._id}cancelEntry(){this.editActionId="",this.resetSelectedModules(),d.resetForm(this.arrearSlipForm),this.arrearSlipForm.controls.arrear_slip_temp_company_logo.setValidators([i.kI.required]),this.arrearSlipForm.controls.arrear_slip_temp_company_logo_file.setValidators([i.kI.required]),this.arrearSlipForm.controls.arrear_slip_temp_company_logo.updateValueAndValidity(),this.arrearSlipForm.controls.arrear_slip_temp_company_logo_file.updateValueAndValidity(),$("html, body").animate({scrollTop:$("#rule-submit-section").position().top})}getSelectedModules(n){const t=[];return $('input[name="'+n+'[]"]:checked').each(function(){t.push($(this).val())}),t}checkModulesForEdit(n,t){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&$('input[name="'+n+'[]"][value="'+t[a]+'"]').prop("checked",!0)}resetSelectedModules(){["employee_details","earning_head","statutory_deduction","statutory_contribution","other_payment","other_deduction"].forEach(t=>{$('input[name="'+t+'[]"]:checked').each(function(){$(this).prop("checked",!1)})})}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteArrearSlipTemplate({arrear_slip_temp_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error(d.showServerErrorMessage(a))}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}fetchMaster(){this.spinner.show(),this.adminService.fetchArrearSlipTemplateMaster().subscribe(n=>{"success"==n.status?(this.earningHeadsMaster=[],n.masters.temp_head.forEach(t=>{this.earningHeadsMaster.push({value:t._id,description:t.full_name})})):this.toastr.error(n.message),this.spinner.hide()},n=>{this.toastr.error(d.showServerErrorMessage(n)),this.spinner.hide()})}changePublishStatus(n){this.spinner.show(),this.adminService.changeArrearSlipTemplatePublishStatus({template_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),this.toastr.success(t.message)):this.toastr.error(t.message),this.spinner.hide()},t=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-arrearslip-template"]],decls:100,vars:24,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"mg-b-0"],["id","rule-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["class","text-danger",4,"ngIf"],[1,"col-9","col-sm-9"],["formControlName","template_name","type","text",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","arrear_slip_temp_company_logo","type","file","accept","image/*",1,"form-control",3,"change"],["formControlName","company_info","rows","3","cols","100%",1,"form-control"],[4,"ngIf"],["formControlName","signature_message","rows","3","cols","100%",1,"form-control"],[1,"text-danger"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12"],["class","btn btn-info",3,"click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"br-section-label","mb-5"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"row","no-gutters",2,"border-right","1px solid #ced4da"],["class","col-3 col-sm-3","style","background:#fff;",4,"ngFor","ngForOf"],[1,"col-3","col-sm-3",2,"background","#fff"],[1,"ckbox","mb-0"],["type","checkbox","name","employee_details[]",3,"value"],["type","checkbox","name","earning_head[]",3,"value"],["type","checkbox","name","statutory_deduction[]",3,"value"],["type","checkbox","name","statutory_contribution[]",3,"value"],["type","checkbox","name","other_payment[]",3,"value"],["type","checkbox","name","other_deduction[]",3,"value"],[1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["type","submit",1,"btn","btn-info",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Arrear Slip Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Arrear Slip Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Customize Arrear Slip"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,Ke,2,0,"h6",11),e.\u0275\u0275template(20,Xe,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Template Name\xa0 "),e.\u0275\u0275template(27,et,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",18),e.\u0275\u0275element(29,"input",19),e.\u0275\u0275template(30,tt,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",15)(32,"div",16),e.\u0275\u0275text(33," Company Logo\xa0 "),e.\u0275\u0275template(34,nt,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",18)(36,"input",21),e.\u0275\u0275listener("change",function(r){return t.onFileChanged(r,t.arrearSlipForm,"arrear_slip_temp_company_logo","arrear_slip_temp_company_logo_file")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,at,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",15)(39,"div",16),e.\u0275\u0275text(40," Company Name "),e.\u0275\u0275element(41,"br"),e.\u0275\u0275text(42," Address "),e.\u0275\u0275element(43,"br"),e.\u0275\u0275text(44," Phone No\xa0 "),e.\u0275\u0275template(45,rt,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",18),e.\u0275\u0275element(47,"textarea",22),e.\u0275\u0275template(48,ot,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,lt,6,1,"ng-container",23),e.\u0275\u0275template(50,dt,6,1,"ng-container",23),e.\u0275\u0275template(51,ct,6,1,"ng-container",23),e.\u0275\u0275template(52,ut,6,1,"ng-container",23),e.\u0275\u0275template(53,ht,6,1,"ng-container",23),e.\u0275\u0275template(54,gt,6,1,"ng-container",23),e.\u0275\u0275elementStart(55,"div",15)(56,"div",16),e.\u0275\u0275text(57," Signature Message Box\xa0 "),e.\u0275\u0275template(58,bt,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"div",18),e.\u0275\u0275element(60,"textarea",24),e.\u0275\u0275template(61,vt,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",15)(63,"div",16),e.\u0275\u0275text(64," Publish Status\xa0"),e.\u0275\u0275elementStart(65,"span",25),e.\u0275\u0275text(66,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",16),e.\u0275\u0275element(68,"ngx-select-dropdown",26),e.\u0275\u0275template(69,yt,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(70,"div",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"div",28)(72,"div",29),e.\u0275\u0275template(73,xt,3,0,"button",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(74,St,6,0,"ng-template",null,31,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(76,"div",32)(77,"div",10)(78,"h6",33),e.\u0275\u0275text(79,"Arrear Slip Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"div",34)(81,"table",35)(82,"thead")(83,"tr")(84,"th",36),e.\u0275\u0275text(85,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"th",37),e.\u0275\u0275text(87,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",37),e.\u0275\u0275text(89,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",36),e.\u0275\u0275text(91,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th",36),e.\u0275\u0275text(93,"Company Logo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th",36),e.\u0275\u0275text(95,"Company Info"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th",36),e.\u0275\u0275text(97,"Created At"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(98,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(99,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(75);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.arrearSlipForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.arrearSlipForm,"template_name","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.arrearSlipForm.controls.template_name.hasError("required")&&(t.arrearSlipForm.controls.template_name.dirty||t.arrearSlipForm.controls.template_name.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.arrearSlipForm,"arrear_slip_temp_company_logo","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.arrearSlipForm.controls.arrear_slip_temp_company_logo.hasError("required")&&(t.arrearSlipForm.controls.arrear_slip_temp_company_logo.dirty||t.arrearSlipForm.controls.arrear_slip_temp_company_logo.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.arrearSlipForm,"company_info","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.arrearSlipForm.controls.company_info.hasError("required")&&(t.arrearSlipForm.controls.company_info.dirty||t.arrearSlipForm.controls.company_info.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.employeeDetailsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.earningHeadsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryDeductionsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryContributionsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.otherPaymentMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.otherDeductionMaster.length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.arrearSlipForm,"signature_message","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.arrearSlipForm.controls.signature_message.hasError("required")&&(t.arrearSlipForm.controls.signature_message.dirty||t.arrearSlipForm.controls.signature_message.touched)),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(23,Et)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.arrearSlipForm.controls.publish_status.hasError("required")&&t.arrearSlipForm.controls.publish_status.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".pt-modal-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5em}.pt-modal-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;border-radius:50%;border:2px solid #17a2b8}"]}),o})();function wt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",66),e.\u0275\u0275text(1,"Define Attendance Rule"),e.\u0275\u0275elementEnd())}function kt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",66),e.\u0275\u0275text(1,"Update Attendance Rule"),e.\u0275\u0275elementEnd())}function It(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ft(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Tt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function At(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Dt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Pt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The minimum value allowed is 1"),e.\u0275\u0275elementEnd())}function Rt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The minimum value allowed is 28"),e.\u0275\u0275elementEnd())}function Mt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ot(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Nt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The minimum value allowed is 1"),e.\u0275\u0275elementEnd())}function Lt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The minimum value allowed is 28"),e.\u0275\u0275elementEnd())}function Vt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function qt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function $t(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",68)(1,"input",69),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.fieldsChanged("register-types"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Bt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function jt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Ut(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ht(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Yt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Gt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Jt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function zt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Wt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",67),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Qt(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",70),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}}function Zt(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",70),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE RULE"),e.\u0275\u0275elementEnd()()}}const U=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let Kt=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewPolicyDetail=null,this.initialValueBeforeUpdate=null,this.editActionId="",this.registerTypes=[{value:"time",description:"Time"},{value:"wholeday",description:"Whole Day"},{value:"halfday",description:"Half Day"},{value:"monthly",description:"Monthly"}],this.attendancePolicyForm=n.group({cut_off_day_custom:[null,i.kI.compose([])],no_of_days:[null,[i.kI.pattern("^[0-9]*$"),i.kI.min(1),i.kI.max(28)]],absent:[null,i.kI.compose([i.kI.pattern("^[0-9]*$"),i.kI.min(1),i.kI.max(28)])],grace_period:[null,i.kI.compose([i.kI.pattern("^[0-9]*$")])],full_day_max_hours:[null,i.kI.compose([])],half_day_max_hours:[null,i.kI.compose([])],custom_days:[null,i.kI.compose([])],reporting_time:[null,i.kI.compose([i.kI.required])],closing_time:[null,i.kI.compose([i.kI.required])],template_name:[null,i.kI.compose([i.kI.required])],register_type:[null,i.kI.compose([i.kI.required])],publish_status:[null,i.kI.compose([i.kI.required])]}),this.calendarDaysMaster=[];for(let u=1;u<=28;u++)this.calendarDaysMaster.push({value:u,description:u});this.calendarDaysTwoMaster=[];for(let u=1;u<=31;u++)this.calendarDaysTwoMaster.push({value:u,description:u});this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}]}ngOnInit(){this.titleService.setTitle("Attendance Policy Rule - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.template_name?a.template_name:"N/A"}},{render:function(n,t,a,r){return a.cut_off_day_custom?a.cut_off_day_custom:"N/A"}},{render:function(n,t,a,r){return a.no_of_days?a.no_of_days:"N/A"}},{render:function(n,t,a,r){return a.absent?a.absent:"N/A"}},{render:function(n,t,a,r){return a.grace_period?a.grace_period:"N/A"}},{render:function(n,t,a,r){let s="";return Array.isArray(a.register_type)?a.register_type.forEach(m=>{s+="<span class='text-capitalize badge badge-primary rg-badges'>"+m.replace(/_/gi," ")+"</span>"}):s+="<span class='text-capitalize badge badge-primary rg-badges'>"+a.register_type.replace(/_/gi," ").replace(/_/gi," ")+"</span>",s},className:"text-center"},{render:function(n,t,a,r){return a.full_day_max_hours?a.full_day_max_hours:"N/A"}},{render:function(n,t,a,r){return a.half_day_max_hours?a.half_day_max_hours:"N/A"}},{render:function(n,t,a,r){return a.reporting_time?a.reporting_time:"N/A"}},{render:function(n,t,a,r){return a.closing_time?a.closing_time:"N/A"}},{render:function(n,t,a,r){return'<span class="text-uppercase">'+(a.comp_off?a.comp_off:"N/A")+"</span>"}},{render:function(n,t,a,r){return'<span class="text-uppercase">'+(a.sandwich_leave?a.sandwich_leave:"N/A")+"</span>"}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchAttendancePolicies({pageno:Math.round(Math.floor((n.start+n.length)/n.length)),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.attendancerule.totalDocs,recordsFiltered:a.attendancerule.totalDocs,data:a.attendancerule.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name?a.template_name:"N/A"},orderable:!0,name:"template_name"},{render:function(n,t,a,r){return a.cut_off_day_custom?a.cut_off_day_custom:"N/A"},orderable:!0,name:"cut_off_day_custom"},{render:function(n,t,a,r){return a.no_of_days?a.no_of_days:"N/A"},orderable:!0,name:"no_of_days"},{render:function(n,t,a,r){return a.absent?a.absent:"N/A"},orderable:!0,name:"absent"},{render:function(n,t,a,r){return a.grace_period?a.grace_period:"N/A"},orderable:!0,name:"grace_period"},{render:function(n,t,a,r){let s="";return Array.isArray(a.register_type)?a.register_type.forEach(m=>{s+="<span class='text-capitalize badge badge-primary rg-badges'>"+m.replace(/_/gi," ")+"</span>"}):s+="<span class='text-capitalize badge badge-primary rg-badges'>"+a.register_type.replace(/_/gi," ").replace(/_/gi," ")+"</span>",s},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.full_day_max_hours?a.full_day_max_hours:"N/A"},orderable:!0,name:"full_day_max_hours"},{render:function(n,t,a,r){return a.half_day_max_hours?a.half_day_max_hours:"N/A"},orderable:!0,name:"half_day_max_hours"},{render:function(n,t,a,r){return a.reporting_time?a.reporting_time:"N/A"},orderable:!0,name:"reporting_time"},{render:function(n,t,a,r){return a.closing_time?a.closing_time:"N/A"},orderable:!0,name:"closing_time"},{render:function(n,t,a,r){return'<span class="text-uppercase">'+(a.comp_off?a.comp_off:"N/A")+"</span>"},orderable:!0,name:"comp_off"},{render:function(n,t,a,r){return'<span class="text-uppercase">'+(a.sandwich_leave?a.sandwich_leave:"N/A")+"</span>"},orderable:!0,name:"sandwich_leave"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changePublishStatus(n){this.adminService.updateAttendancePublishStatus({attedance_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getEdit(n){this.editActionId=n._id,this.attendancePolicyForm.patchValue({cut_off_day_custom:this.calendarDaysMaster.find(t=>t.value===n.cut_off_day_custom),no_of_days:n.no_of_days,absent:n.absent,grace_period:n.grace_period,full_day_max_hours:n.full_day_max_hours,half_day_max_hours:n.half_day_max_hours,custom_days:this.calendarDaysTwoMaster.find(t=>t.value===n.custom_days),reporting_time:n.reporting_time,closing_time:n.closing_time,template_name:n.template_name,register_type:n.register_type,publish_status:this.publishStatusMaster.find(t=>t.value==n.publish_status)}),"yes"==n.last_day_of_month?$("#policy-last-day-of-month").addClass("on"):$("#policy-last-day-of-month").removeClass("on"),"yes"==n.full_month_days?$("#policy-full-month-days").addClass("on"):$("#policy-full-month-days").removeClass("on"),"yes"==n.comp_off?$("#comp-off").addClass("on"):$("#comp-off").removeClass("on"),"yes"==n.sandwich_leave?$("#sandwich-leave").addClass("on"):$("#sandwich-leave").removeClass("on"),this.fieldsChanged("policy-last-day-of-month"),this.fieldsChanged("register-types"),this.fieldsChanged("policy-full-month-days"),this.initialValueBeforeUpdate={attedance_id:this.editActionId,last_day_of_month:n.last_day_of_month,full_month_days:n.full_month_days,register_type:this.attendancePolicyForm.value.register_type,cut_off_day_custom:this.attendancePolicyForm.value.cut_off_day_custom?.value??"",no_of_days:(this.attendancePolicyForm.value.no_of_days?this.attendancePolicyForm.value.no_of_days:"").toString().trim(),absent:(this.attendancePolicyForm.value.absent?this.attendancePolicyForm.value.absent:"").toString().trim(),grace_period:(this.attendancePolicyForm.value.grace_period?this.attendancePolicyForm.value.grace_period:"").toString().trim(),full_day_max_hours:(this.attendancePolicyForm.value.full_day_max_hours?this.attendancePolicyForm.value.full_day_max_hours:"").toString().trim(),half_day_max_hours:(this.attendancePolicyForm.value.half_day_max_hours?this.attendancePolicyForm.value.half_day_max_hours:"").toString().trim(),custom_days:this.attendancePolicyForm.value.custom_days?.value??"",reporting_time:(this.attendancePolicyForm.value.reporting_time?this.attendancePolicyForm.value.reporting_time:"").toString().trim(),closing_time:(this.attendancePolicyForm.value.closing_time?this.attendancePolicyForm.value.closing_time:"").toString().trim(),template_name:(this.attendancePolicyForm.value.template_name?this.attendancePolicyForm.value.template_name:"").toString().trim(),comp_off:n.comp_off,sandwich_leave:n.sandwich_leave,publish_status:this.attendancePolicyForm.value.publish_status.value},$("html, body").animate({scrollTop:$("#policy-submit-section").position().top})}cancelEdit(){this.editActionId="",this.attendancePolicyForm.reset(),this.resetSelectedRegisterTypes();for(const n in this.attendancePolicyForm.controls)if(Object.prototype.hasOwnProperty.call(this.attendancePolicyForm.controls,n)){const t=this.attendancePolicyForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){if(this.attendancePolicyForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.attendancePolicyForm.valid){let t=1==$("#policy-last-day-of-month").hasClass("on")?"yes":"no",a=1==$("#policy-full-month-days").hasClass("on")?"yes":"no",r=1==$("#comp-off").hasClass("on")?"yes":"no",s=1==$("#sandwich-leave").hasClass("on")?"yes":"no";n.target.classList.add("btn-loading"),this.adminService.createAttendancePolicy({last_day_of_month:t,full_month_days:a,register_type:this.attendancePolicyForm.value.register_type,cut_off_day_custom:this.attendancePolicyForm.value.cut_off_day_custom?.value??"",no_of_days:this.attendancePolicyForm.value.no_of_days?this.attendancePolicyForm.value.no_of_days:"",absent:this.attendancePolicyForm.value.absent?this.attendancePolicyForm.value.absent:"",grace_period:this.attendancePolicyForm.value.grace_period?this.attendancePolicyForm.value.grace_period:"",full_day_max_hours:this.attendancePolicyForm.value.full_day_max_hours?this.attendancePolicyForm.value.full_day_max_hours:"",half_day_max_hours:this.attendancePolicyForm.value.half_day_max_hours?this.attendancePolicyForm.value.half_day_max_hours:"",custom_days:this.attendancePolicyForm.value.custom_days?.value??"",reporting_time:this.attendancePolicyForm.value.reporting_time?this.attendancePolicyForm.value.reporting_time:"",closing_time:this.attendancePolicyForm.value.closing_time?this.attendancePolicyForm.value.closing_time:"",template_name:this.attendancePolicyForm.value.template_name?this.attendancePolicyForm.value.template_name:"",comp_off:r,sandwich_leave:s,publish_status:this.attendancePolicyForm.value.publish_status.value}).subscribe(m=>{"success"==m.status?(this.toastr.success(m.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(c){},!1)):this.toastr.error("val_err"==m.status?d.showValidationMessage(m.val_msg):m.message),n.target.classList.remove("btn-loading")},m=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteAttendancePolicy({attedance_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.attendancePolicyForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.attendancePolicyForm.valid){let t=1==$("#policy-last-day-of-month").hasClass("on")?"yes":"no",a=1==$("#policy-full-month-days").hasClass("on")?"yes":"no",r=1==$("#comp-off").hasClass("on")?"yes":"no",s=1==$("#sandwich-leave").hasClass("on")?"yes":"no";const m={attedance_id:this.editActionId,last_day_of_month:t,full_month_days:a,register_type:this.attendancePolicyForm.value.register_type,cut_off_day_custom:this.attendancePolicyForm.value.cut_off_day_custom?.value??"",no_of_days:(this.attendancePolicyForm.value.no_of_days?this.attendancePolicyForm.value.no_of_days:"").toString().trim(),absent:(this.attendancePolicyForm.value.absent?this.attendancePolicyForm.value.absent:"").toString().trim(),grace_period:(this.attendancePolicyForm.value.grace_period?this.attendancePolicyForm.value.grace_period:"").toString().trim(),full_day_max_hours:(this.attendancePolicyForm.value.full_day_max_hours?this.attendancePolicyForm.value.full_day_max_hours:"").toString().trim(),half_day_max_hours:(this.attendancePolicyForm.value.half_day_max_hours?this.attendancePolicyForm.value.half_day_max_hours:"").toString().trim(),custom_days:this.attendancePolicyForm.value.custom_days?.value??"",reporting_time:(this.attendancePolicyForm.value.reporting_time?this.attendancePolicyForm.value.reporting_time:"").toString().trim(),closing_time:(this.attendancePolicyForm.value.closing_time?this.attendancePolicyForm.value.closing_time:"").toString().trim(),template_name:(this.attendancePolicyForm.value.template_name?this.attendancePolicyForm.value.template_name:"").toString().trim(),comp_off:r,sandwich_leave:s,publish_status:this.attendancePolicyForm.value.publish_status.value};if(JSON.stringify(m)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateAttendancePolicy(m).subscribe(c=>{"success"==c.status?(this.toastr.success(c.message),this.initialValueBeforeUpdate=m,$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):this.toastr.error("val_err"==c.status?d.showValidationMessage(c.val_msg):c.message),n.target.classList.remove("btn-loading")},c=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getSelectedRegisterTypes(){const n=[];return $('input[name="register_type[]"]:checked').each(function(){n.push($(this).val())}),n}resetSelectedRegisterTypes(){$('input[name="register_type[]"]:checked').each(function(){$(this).prop("checked",!1)}),$("#policy-last-day-of-month").addClass("on"),$("#policy-full-month-days").addClass("on"),$("#comp-off").addClass("on"),$("#sandwich-leave").addClass("on"),this.fieldsChanged("policy-last-day-of-month"),this.fieldsChanged("register-types"),this.fieldsChanged("policy-full-month-days")}checkRegisterTypesforEdit(n){this.resetSelectedRegisterTypes();for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&$('input[name="register_type[]"][value="'+n[t]+'"]').prop("checked",!0)}fieldsChanged(n){var t=this;setTimeout(function(){switch(n){case"policy-last-day-of-month":0==$("#policy-last-day-of-month").hasClass("on")?(t.attendancePolicyForm.controls.cut_off_day_custom.setValidators([i.kI.required]),$(".cut-off-day-custom-fields").show(300)):(t.attendancePolicyForm.controls.cut_off_day_custom.clearValidators(),$(".cut-off-day-custom-fields").hide(300)),t.attendancePolicyForm.controls.cut_off_day_custom.updateValueAndValidity();break;case"register-types":t.attendancePolicyForm.value.register_type&&["time","halfday"].includes(t.attendancePolicyForm.value.register_type)?(t.attendancePolicyForm.controls.full_day_max_hours.setValidators([i.kI.required]),t.attendancePolicyForm.controls.half_day_max_hours.setValidators([i.kI.required]),$(".full-day-max-hours-fields").show(300),$(".half-day-max-hours-fields").show(300)):(t.attendancePolicyForm.controls.full_day_max_hours.clearValidators(),t.attendancePolicyForm.controls.half_day_max_hours.clearValidators(),$(".full-day-max-hours-fields").hide(300),$(".half-day-max-hours-fields").hide(300)),t.attendancePolicyForm.controls.full_day_max_hours.updateValueAndValidity(),t.attendancePolicyForm.controls.half_day_max_hours.updateValueAndValidity();break;case"policy-full-month-days":0==$("#policy-full-month-days").hasClass("on")?(t.attendancePolicyForm.controls.custom_days.setValidators([i.kI.required]),$(".custom-days-fields").show(300)):(t.attendancePolicyForm.controls.custom_days.clearValidators(),$(".custom-days-fields").hide(300)),t.attendancePolicyForm.controls.custom_days.updateValueAndValidity();break;default:alert(n)}},100)}showUpdateHistory(n){this.viewPolicyDetail=n,null!=this.viewPolicyDetail.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPolicyDetail&&null!=this.viewPolicyDetail.history&&Array.isArray(this.viewPolicyDetail.history)?this.viewPolicyDetail.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-attendance-policy"]],decls:248,vars:40,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],["id","policy-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-6","col-sm-6"],[1,"text-danger"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"row","no-gutters",2,"border-right","1px solid #ced4da"],[1,"col-12","col-sm-12"],[1,"col-3","col-sm-3"],["id","policy-last-day-of-month",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on",3,"click"],[1,"br-toggle-switch"],[1,"col-3","col-sm-3","sameasfirst"],[1,"cut-off-day-custom-fields",2,"display","none"],["formControlName","cut_off_day_custom",1,"form-control",3,"options","config"],["type","number","formControlName","no_of_days",1,"form-control"],["type","number","formControlName","absent",1,"form-control"],["type","number","formControlName","grace_period",1,"form-control"],["class","rdiobox",4,"ngFor","ngForOf"],[1,"col-3","col-sm-3","full-day-max-hours-fields",2,"display","none"],["type","number","formControlName","full_day_max_hours",1,"form-control"],[1,"col-3","col-sm-3","sameasfirst","half-day-max-hours-fields",2,"display","none"],[1,"col-3","col-sm-3","half-day-max-hours-fields",2,"display","none"],["type","number","formControlName","half_day_max_hours",1,"form-control"],["id","policy-full-month-days",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on",3,"click"],[1,"custom-days-fields",2,"display","none"],["formControlName","custom_days",1,"form-control",3,"options","config"],["type","time","formControlName","reporting_time",1,"form-control"],["type","time","formControlName","closing_time",1,"form-control"],["id","comp-off",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","sandwich-leave",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"rdiobox"],["formControlName","register_type","type","radio",3,"value","change"],["type","submit",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Attendance Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Attendance Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,wt,2,0,"h6",10),e.\u0275\u0275template(18,kt,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," Template Name\xa0"),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",15),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275template(29,It,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",19)(31,"div",20),e.\u0275\u0275text(32," Cut off Date "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",14)(34,"div",21),e.\u0275\u0275text(35," Last Date of the month\xa0"),e.\u0275\u0275elementStart(36,"span",16),e.\u0275\u0275text(37,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",21)(39,"div",22),e.\u0275\u0275listener("click",function(){return t.fieldsChanged("policy-last-day-of-month")}),e.\u0275\u0275element(40,"div",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"div",24)(42,"div",25),e.\u0275\u0275text(43," Cut Off Date Custom\xa0"),e.\u0275\u0275elementStart(44,"span",16),e.\u0275\u0275text(45,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(46,"div",21)(47,"div",25),e.\u0275\u0275element(48,"ngx-select-dropdown",26),e.\u0275\u0275template(49,Ft,2,0,"p",18),e.\u0275\u0275template(50,Tt,2,0,"p",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(51,"div",14)(52,"div",21),e.\u0275\u0275text(53," No of Late (day) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"div",21),e.\u0275\u0275element(55,"input",27),e.\u0275\u0275template(56,At,2,0,"p",18),e.\u0275\u0275template(57,Dt,2,0,"p",18),e.\u0275\u0275template(58,Pt,2,0,"p",18),e.\u0275\u0275template(59,Rt,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",24),e.\u0275\u0275text(61," Absent "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"div",21),e.\u0275\u0275element(63,"input",28),e.\u0275\u0275template(64,Mt,2,0,"p",18),e.\u0275\u0275template(65,Ot,2,0,"p",18),e.\u0275\u0275template(66,Nt,2,0,"p",18),e.\u0275\u0275template(67,Lt,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"div",14)(69,"div",21),e.\u0275\u0275text(70," Grace Period (miniute) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"div",21),e.\u0275\u0275element(72,"input",29),e.\u0275\u0275template(73,Vt,2,0,"p",18),e.\u0275\u0275template(74,qt,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"div",24),e.\u0275\u0275text(76," Register Type\xa0"),e.\u0275\u0275elementStart(77,"span",16),e.\u0275\u0275text(78,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"div",21),e.\u0275\u0275template(80,$t,4,2,"label",30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(81,"div",14)(82,"div",31),e.\u0275\u0275text(83," Minimum Hours for Full day (hours)\xa0"),e.\u0275\u0275elementStart(84,"span",16),e.\u0275\u0275text(85,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(86,"div",31),e.\u0275\u0275element(87,"input",32),e.\u0275\u0275template(88,Bt,2,0,"p",18),e.\u0275\u0275template(89,jt,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"div",33),e.\u0275\u0275text(91," Minimum Hours for Half day (hours)\xa0"),e.\u0275\u0275elementStart(92,"span",16),e.\u0275\u0275text(93,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(94,"div",34),e.\u0275\u0275element(95,"input",35),e.\u0275\u0275template(96,Ut,2,0,"p",18),e.\u0275\u0275template(97,Ht,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(98,"div",19)(99,"div",20),e.\u0275\u0275text(100," Define Month Days "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(101,"div",14)(102,"div",21),e.\u0275\u0275text(103," Full Month Days "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"div",21)(105,"div",36),e.\u0275\u0275listener("click",function(){return t.fieldsChanged("policy-full-month-days")}),e.\u0275\u0275element(106,"div",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(107,"div",24)(108,"div",37),e.\u0275\u0275text(109," Custom Days\xa0"),e.\u0275\u0275elementStart(110,"span",16),e.\u0275\u0275text(111,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(112,"div",21)(113,"div",37),e.\u0275\u0275element(114,"ngx-select-dropdown",38),e.\u0275\u0275template(115,Yt,2,0,"p",18),e.\u0275\u0275template(116,Gt,2,0,"p",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(117,"div",14)(118,"div",21),e.\u0275\u0275text(119," Reporting Time\xa0"),e.\u0275\u0275elementStart(120,"span",16),e.\u0275\u0275text(121,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(122,"div",21),e.\u0275\u0275element(123,"input",39),e.\u0275\u0275template(124,Jt,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"div",24),e.\u0275\u0275text(126," Closing Time\xa0"),e.\u0275\u0275elementStart(127,"span",16),e.\u0275\u0275text(128,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(129,"div",21),e.\u0275\u0275element(130,"input",40),e.\u0275\u0275template(131,zt,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(132,"div",19)(133,"div",20),e.\u0275\u0275text(134," Additional Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(135,"div",14)(136,"div",21),e.\u0275\u0275text(137," Comp Off "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(138,"div",21)(139,"div",41),e.\u0275\u0275element(140,"div",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(141,"div",21),e.\u0275\u0275text(142," Sandwich Leave "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(143,"div",21)(144,"div",42),e.\u0275\u0275element(145,"div",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(146,"div",14)(147,"div",21),e.\u0275\u0275text(148," Publish Status\xa0"),e.\u0275\u0275elementStart(149,"span",16),e.\u0275\u0275text(150,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(151,"div",21),e.\u0275\u0275element(152,"ngx-select-dropdown",43),e.\u0275\u0275template(153,Wt,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(154,"div",44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"div",45)(156,"div",46),e.\u0275\u0275template(157,Qt,3,0,"button",47),e.\u0275\u0275template(158,Zt,6,0,"ng-template",null,48,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(160,"div",49)(161,"div",9)(162,"h6",50),e.\u0275\u0275text(163,"Attendance Templates"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(164,"div",51)(165,"table",52)(166,"thead")(167,"tr")(168,"th",53),e.\u0275\u0275text(169,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(170,"th",53),e.\u0275\u0275text(171,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(172,"th",53),e.\u0275\u0275text(173,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(174,"th",53),e.\u0275\u0275text(175,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(176,"th",53),e.\u0275\u0275text(177,"Cut off date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(178,"th",53),e.\u0275\u0275text(179,"No of Late"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(180,"th",53),e.\u0275\u0275text(181,"Absent"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(182,"th",53),e.\u0275\u0275text(183,"Grace Period"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(184,"th",53),e.\u0275\u0275text(185,"Register Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(186,"th",53),e.\u0275\u0275text(187,"Full day@"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(188,"th",53),e.\u0275\u0275text(189,"Half day@"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(190,"th",53),e.\u0275\u0275text(191,"Open Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(192,"th",53),e.\u0275\u0275text(193,"Close Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(194,"th",53),e.\u0275\u0275text(195,"Comp Off"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(196,"th",53),e.\u0275\u0275text(197,"Sandwich Leave"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(198,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(199,"button",54),e.\u0275\u0275elementStart(200,"div",55)(201,"div",56)(202,"div",57)(203,"div",58)(204,"h6",59),e.\u0275\u0275text(205,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(206,"button",60)(207,"span",61),e.\u0275\u0275text(208,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(209,"div",62)(210,"div",53)(211,"table",63)(212,"thead")(213,"th",53),e.\u0275\u0275text(214,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(215,"th",53),e.\u0275\u0275text(216,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(217,"th",53),e.\u0275\u0275text(218,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(219,"th",53),e.\u0275\u0275text(220,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(221,"th",53),e.\u0275\u0275text(222,"Cut off date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(223,"th",53),e.\u0275\u0275text(224,"No of Late"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(225,"th",53),e.\u0275\u0275text(226,"Absent"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(227,"th",53),e.\u0275\u0275text(228,"Grace Period"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(229,"th",53),e.\u0275\u0275text(230,"Register Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(231,"th",53),e.\u0275\u0275text(232,"Full day@"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(233,"th",53),e.\u0275\u0275text(234,"Half day@"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(235,"th",53),e.\u0275\u0275text(236,"Open Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(237,"th",53),e.\u0275\u0275text(238,"Close Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(239,"th",53),e.\u0275\u0275text(240,"Comp Off"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(241,"th",53),e.\u0275\u0275text(242,"Sandwich Leave"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(243,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(244,"div",64)(245,"button",65),e.\u0275\u0275text(246,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(247,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(159);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.attendancePolicyForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.template_name.hasError("required")&&(t.attendancePolicyForm.controls.template_name.dirty||t.attendancePolicyForm.controls.template_name.touched)),e.\u0275\u0275advance(19),e.\u0275\u0275property("options",t.calendarDaysMaster)("config",e.\u0275\u0275pureFunction0(37,U)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.cut_off_day_custom.hasError("required")&&(t.attendancePolicyForm.controls.cut_off_day_custom.dirty||t.attendancePolicyForm.controls.cut_off_day_custom.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.cut_off_day_custom.hasError("pattern")&&(t.attendancePolicyForm.controls.cut_off_day_custom.dirty||t.attendancePolicyForm.controls.cut_off_day_custom.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.no_of_days.hasError("required")&&(t.attendancePolicyForm.controls.no_of_days.dirty||t.attendancePolicyForm.controls.no_of_days.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.no_of_days.hasError("pattern")&&(t.attendancePolicyForm.controls.no_of_days.dirty||t.attendancePolicyForm.controls.no_of_days.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.no_of_days.hasError("min")&&(t.attendancePolicyForm.controls.no_of_days.dirty||t.attendancePolicyForm.controls.no_of_days.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.no_of_days.hasError("max")&&(t.attendancePolicyForm.controls.no_of_days.dirty||t.attendancePolicyForm.controls.no_of_days.touched)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.absent.hasError("required")&&(t.attendancePolicyForm.controls.absent.dirty||t.attendancePolicyForm.controls.absent.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.absent.hasError("pattern")&&(t.attendancePolicyForm.controls.absent.dirty||t.attendancePolicyForm.controls.absent.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.absent.hasError("min")&&(t.attendancePolicyForm.controls.absent.dirty||t.attendancePolicyForm.controls.absent.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.absent.hasError("max")&&(t.attendancePolicyForm.controls.absent.dirty||t.attendancePolicyForm.controls.absent.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.grace_period.hasError("required")&&(t.attendancePolicyForm.controls.grace_period.dirty||t.attendancePolicyForm.controls.grace_period.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.grace_period.hasError("pattern")&&(t.attendancePolicyForm.controls.grace_period.dirty||t.attendancePolicyForm.controls.grace_period.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.registerTypes),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.full_day_max_hours.hasError("required")&&(t.attendancePolicyForm.controls.full_day_max_hours.dirty||t.attendancePolicyForm.controls.full_day_max_hours.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.full_day_max_hours.hasError("pattern")&&(t.attendancePolicyForm.controls.full_day_max_hours.dirty||t.attendancePolicyForm.controls.full_day_max_hours.touched)),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.half_day_max_hours.hasError("required")&&(t.attendancePolicyForm.controls.half_day_max_hours.dirty||t.attendancePolicyForm.controls.half_day_max_hours.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.half_day_max_hours.hasError("pattern")&&(t.attendancePolicyForm.controls.half_day_max_hours.dirty||t.attendancePolicyForm.controls.half_day_max_hours.touched)),e.\u0275\u0275advance(17),e.\u0275\u0275property("options",t.calendarDaysTwoMaster)("config",e.\u0275\u0275pureFunction0(38,U)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.custom_days.hasError("required")&&(t.attendancePolicyForm.controls.custom_days.dirty||t.attendancePolicyForm.controls.custom_days.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.custom_days.hasError("pattern")&&(t.attendancePolicyForm.controls.custom_days.dirty||t.attendancePolicyForm.controls.custom_days.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.reporting_time.hasError("required")&&(t.attendancePolicyForm.controls.reporting_time.dirty||t.attendancePolicyForm.controls.reporting_time.touched)),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.closing_time.hasError("required")&&(t.attendancePolicyForm.controls.closing_time.dirty||t.attendancePolicyForm.controls.closing_time.touched)),e.\u0275\u0275advance(21),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(39,U)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.attendancePolicyForm.controls.publish_status.hasError("required")&&(t.attendancePolicyForm.controls.publish_status.dirty||t.attendancePolicyForm.controls.publish_status.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(34),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i._,i.JJ,i.JL,i.sg,i.u,y,x],styles:["input[type=time][_ngcontent-%COMP%]{background:transparent!important}  span.rg-badges{font-size:13px;padding:6px;margin:0 2px}"]}),o})();function Xt(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",55),e.\u0275\u0275text(1,"Define Bonus Template"),e.\u0275\u0275elementEnd())}function en(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",55),e.\u0275\u0275text(1,"Update Bonus Template"),e.\u0275\u0275elementEnd())}function tn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function nn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function an(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function rn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function on(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function ln(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function sn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function dn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function mn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function cn(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"label",57),e.\u0275\u0275element(1,"input",58),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function pn(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"label",57),e.\u0275\u0275element(1,"input",59),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function un(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function _n(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",60),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.bonusPolicyForm.valid)}}function hn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",61),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",60),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.bonusPolicyForm.valid)}}const fn=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let gn=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.adminService=r,this.datePipe=s,this.dtOptions={},this.dtOptionsHistory={},this.viewPolicyDetail=null,this.initialValueBeforeUpdate=null,this.editActionId="",this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.frequencyMaster=[{value:"monthly",description:"Monthly"},{value:"quaterly",description:"Quaterly"},{value:"half_yearly",description:"Half Yearly"},{value:"yearly",description:"Yearly"}],this.disburesmentMaster=[{value:"fixed",description:"Fixed Amount"},{value:"percent",description:"Percent"}],this.bonusPolicyForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],min_service:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],max_bonus:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],max_bonus_wage:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],eligible_capping:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],disbursement_frequency:[null,i.kI.compose([i.kI.required])],disbursement_type:[null,i.kI.compose([i.kI.required])],publish_status:[null,i.kI.compose([i.kI.required])]})}ngOnInit(){this.titleService.setTitle("Bonus Policy Template - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.template_name}},{render:function(n,t,a,r){let s="";return Array.isArray(a.disbursement_frequency)?a.disbursement_frequency.forEach(m=>{s+="<span class='text-capitalize badge badge-primary rg-badges'>"+m.replace(/_/gi," ")+"</span>"}):s+="<span class='text-capitalize badge badge-primary rg-badges'>"+a.disbursement_frequency.replace(/_/gi," ").replace(/_/gi," ")+"</span>",s},className:"text-center"},{render:function(n,t,a,r){let s="";return Array.isArray(a.disbursement_type)?a.disbursement_type.forEach(m=>{s+="<span class='text-capitalize badge badge-primary rg-badges'>"+m.replace(/_/gi," ")+"</span>"}):s+="<span class='text-capitalize badge badge-primary rg-badges'>"+a.disbursement_type.replace(/_/gi," ").replace(/_/gi," ")+"</span>",s},className:"text-center"},{render:function(n,t,a,r){return a.min_service}},{render:function(n,t,a,r){return a.max_bonus}},{render:function(n,t,a,r){return a.max_bonus_wage}},{render:function(n,t,a,r){return a.eligible_capping}},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.esic_apply+"</span>"},className:"text-capitalize"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.epfo_apply+"</span>"},className:"text-capitalize"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.pt_apply+"</span>"},className:"text-capitalize"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.tds_apply+"</span>"},className:"text-capitalize"}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchBonusPolicies({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.bonus_policy.totalDocs,recordsFiltered:a.bonus_policy.totalDocs,data:a.bonus_policy.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name},orderable:!0,name:"template_name"},{render:function(n,t,a,r){let s="";return Array.isArray(a.disbursement_frequency)?a.disbursement_frequency.forEach(m=>{s+="<span class='text-capitalize badge badge-primary rg-badges'>"+m.replace(/_/gi," ")+"</span>"}):s+="<span class='text-capitalize badge badge-primary rg-badges'>"+a.disbursement_frequency.replace(/_/gi," ").replace(/_/gi," ")+"</span>",s},className:"text-center",orderable:!1},{render:function(n,t,a,r){let s="";return Array.isArray(a.disbursement_type)?a.disbursement_type.forEach(m=>{s+="<span class='text-capitalize badge badge-primary rg-badges'>"+m.replace(/_/gi," ")+"</span>"}):s+="<span class='text-capitalize badge badge-primary rg-badges'>"+a.disbursement_type.replace(/_/gi," ").replace(/_/gi," ")+"</span>",s},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.min_service},orderable:!0,name:"min_service"},{render:function(n,t,a,r){return a.max_bonus},orderable:!0,name:"max_bonus"},{render:function(n,t,a,r){return a.max_bonus_wage},orderable:!0,name:"max_bonus_wage"},{render:function(n,t,a,r){return a.eligible_capping},orderable:!0,name:"eligible_capping"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.esic_apply+"</span>"},className:"text-capitalize",orderable:!0,name:"esic_apply"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.epfo_apply+"</span>"},className:"text-capitalize",orderable:!0,name:"epfo_apply"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.pt_apply+"</span>"},className:"text-capitalize",orderable:!0,name:"pt_apply"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.tds_apply+"</span>"},className:"text-capitalize",orderable:!0,name:"tds_apply"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changePublishStatus(n){this.adminService.updateBonusPolicyPublishStatus({bonus_policy_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getEdit(n){this.editActionId=n._id,this.bonusPolicyForm.patchValue({template_name:n.template_name,min_service:n.min_service,max_bonus:n.max_bonus,max_bonus_wage:n.max_bonus_wage,eligible_capping:n.eligible_capping,disbursement_frequency:n.disbursement_frequency,disbursement_type:n.disbursement_type,publish_status:this.publishStatusMaster.find(t=>t.value==n.publish_status)}),"yes"==n.auto_fill_archive?$("#template-auto-fill-archive").addClass("on"):$("#template-auto-fill-archive").removeClass("on"),"yes"==n.esic_apply?$("#template-esic-apply").addClass("on"):$("#template-esic-apply").removeClass("on"),"yes"==n.pt_apply?$("#template-pt-apply").addClass("on"):$("#template-pt-apply").removeClass("on"),"yes"==n.tds_apply?$("#template-tds-apply").addClass("on"):$("#template-tds-apply").removeClass("on"),"yes"==n.epfo_apply?$("#template-epfo-apply").addClass("on"):$("#template-epfo-apply").removeClass("on"),$("html, body").animate({scrollTop:$("#policy-submit-section").position().top}),this.initialValueBeforeUpdate={bonus_policy_id:this.editActionId,template_name:this.bonusPolicyForm.value.template_name.toString().trim(),auto_fill_archive:n.auto_fill_archive,min_service:this.bonusPolicyForm.value.min_service.toString().trim(),max_bonus:this.bonusPolicyForm.value.max_bonus.toString().trim(),max_bonus_wage:this.bonusPolicyForm.value.max_bonus_wage.toString().trim(),eligible_capping:this.bonusPolicyForm.value.eligible_capping.toString().trim(),tds_apply:n.tds_apply,esic_apply:n.esic_apply,epfo_apply:n.epfo_apply,pt_apply:n.pt_apply,disbursement_frequency:this.bonusPolicyForm.value.disbursement_frequency,disbursement_type:this.bonusPolicyForm.value.disbursement_type,publish_status:this.bonusPolicyForm.value.publish_status.value}}cancelEdit(){this.editActionId="",this.bonusPolicyForm.reset(),this.resetSelectedCheckboxes();for(const n in this.bonusPolicyForm.controls)if(Object.prototype.hasOwnProperty.call(this.bonusPolicyForm.controls,n)){const t=this.bonusPolicyForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){if(this.bonusPolicyForm.valid){let t=1==$("#template-auto-fill-archive").hasClass("on")?"yes":"no",a=1==$("#template-esic-apply").hasClass("on")?"yes":"no",r=1==$("#template-pt-apply").hasClass("on")?"yes":"no",s=1==$("#template-tds-apply").hasClass("on")?"yes":"no",m=1==$("#template-epfo-apply").hasClass("on")?"yes":"no";n.target.classList.add("btn-loading"),this.adminService.createBonusPolicy({template_name:this.bonusPolicyForm.value.template_name,auto_fill_archive:t,min_service:this.bonusPolicyForm.value.min_service,max_bonus:this.bonusPolicyForm.value.max_bonus,max_bonus_wage:this.bonusPolicyForm.value.max_bonus_wage,eligible_capping:this.bonusPolicyForm.value.eligible_capping,tds_apply:a,esic_apply:r,epfo_apply:s,pt_apply:m,disbursement_frequency:this.bonusPolicyForm.value.disbursement_frequency,disbursement_type:this.bonusPolicyForm.value.disbursement_type,publish_status:this.bonusPolicyForm.value.publish_status.value}).subscribe(c=>{"success"==c.status?(this.toastr.success(c.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):this.toastr.error("val_err"==c.status?d.showValidationMessage(c.val_msg):c.message),n.target.classList.remove("btn-loading")},c=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteBonusPolicy({bonus_policy_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.bonusPolicyForm.valid){let t=1==$("#template-auto-fill-archive").hasClass("on")?"yes":"no",a=1==$("#template-esic-apply").hasClass("on")?"yes":"no",r=1==$("#template-pt-apply").hasClass("on")?"yes":"no",s=1==$("#template-tds-apply").hasClass("on")?"yes":"no",m=1==$("#template-epfo-apply").hasClass("on")?"yes":"no";const c={bonus_policy_id:this.editActionId,template_name:this.bonusPolicyForm.value.template_name.toString().trim(),auto_fill_archive:t,min_service:this.bonusPolicyForm.value.min_service.toString().trim(),max_bonus:this.bonusPolicyForm.value.max_bonus.toString().trim(),max_bonus_wage:this.bonusPolicyForm.value.max_bonus_wage.toString().trim(),eligible_capping:this.bonusPolicyForm.value.eligible_capping.toString().trim(),tds_apply:s,esic_apply:a,epfo_apply:m,pt_apply:r,disbursement_frequency:this.bonusPolicyForm.value.disbursement_frequency,disbursement_type:this.bonusPolicyForm.value.disbursement_type,publish_status:this.bonusPolicyForm.value.publish_status.value};if(JSON.stringify(c)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateBonusPolicy(c).subscribe(u=>{"success"==u.status?(this.toastr.success(u.message),this.initialValueBeforeUpdate=c,$("#my-datatable").dataTable().api().ajax.reload(function(f){},!1)):this.toastr.error("val_err"==u.status?d.showValidationMessage(u.val_msg):u.message),n.target.classList.remove("btn-loading")},u=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getSelectedDisbursementFrequencies(){const n=[];return $('input[name="disbursement_frequency[]"]:checked').each(function(){n.push($(this).val())}),n}getSelectedDisbursementTypes(){const n=[];return $('input[name="disbursement_type[]"]:checked').each(function(){n.push($(this).val())}),n}resetSelectedCheckboxes(){$('input[name="disbursement_frequency[]"]:checked').each(function(){$(this).prop("checked",!1)}),$('input[name="disbursement_type[]"]:checked').each(function(){$(this).prop("checked",!1)}),$("#template-auto-fill-archive").addClass("on"),$("#template-esic-apply").addClass("on"),$("#template-pt-apply").addClass("on"),$("#template-tds-apply").addClass("on"),$("#template-epfo-apply").addClass("on")}selectCheckboxForEdit(n,t){this.resetSelectedCheckboxes();for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&$('input[name="disbursement_frequency[]"][value="'+n[a]+'"]').prop("checked",!0);for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&$('input[name="disbursement_type[]"][value="'+t[a]+'"]').prop("checked",!0)}showUpdateHistory(n){this.viewPolicyDetail=n,null!=this.viewPolicyDetail.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPolicyDetail&&null!=this.viewPolicyDetail.history&&Array.isArray(this.viewPolicyDetail.history)?this.viewPolicyDetail.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-bonus-policy"]],decls:207,vars:23,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],["id","policy-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["id","template-auto-fill-archive",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],[1,"br-toggle-switch"],["type","number","formControlName","min_service",1,"form-control"],["type","number","formControlName","max_bonus",1,"form-control"],["type","number","formControlName","max_bonus_wage",1,"form-control"],["type","number","formControlName","eligible_capping",1,"form-control"],[1,"col-12","col-sm-12"],["class","rdiobox",4,"ngFor","ngForOf"],["id","template-esic-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","template-pt-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","template-tds-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","template-epfo-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"rdiobox"],["formControlName","disbursement_frequency","type","radio",3,"value"],["formControlName","disbursement_type","type","radio",3,"value"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Bonus Templates"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Bonus Templates"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,Xt,2,0,"h6",10),e.\u0275\u0275template(18,en,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," Template Name\xa0"),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",15),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275template(29,tn,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",19),e.\u0275\u0275text(31," Auto-fill From Archive\xa0"),e.\u0275\u0275elementStart(32,"span",16),e.\u0275\u0275text(33,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",15)(35,"div",20),e.\u0275\u0275element(36,"div",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(37,"div",14)(38,"div",15),e.\u0275\u0275text(39," Min Service to Qualify (Months)\xa0"),e.\u0275\u0275elementStart(40,"span",16),e.\u0275\u0275text(41,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",15),e.\u0275\u0275element(43,"input",22),e.\u0275\u0275template(44,nn,2,0,"p",18),e.\u0275\u0275template(45,an,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",19),e.\u0275\u0275text(47," Maximum Bonus (%)\xa0"),e.\u0275\u0275elementStart(48,"span",16),e.\u0275\u0275text(49,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",15),e.\u0275\u0275element(51,"input",23),e.\u0275\u0275template(52,rn,2,0,"p",18),e.\u0275\u0275template(53,on,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",14)(55,"div",15),e.\u0275\u0275text(56," Max Bonus Wage (Rs)\xa0"),e.\u0275\u0275elementStart(57,"span",16),e.\u0275\u0275text(58,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",15),e.\u0275\u0275element(60,"input",24),e.\u0275\u0275template(61,ln,2,0,"p",18),e.\u0275\u0275template(62,sn,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div",19),e.\u0275\u0275text(64," Eligible Capping\xa0"),e.\u0275\u0275elementStart(65,"span",16),e.\u0275\u0275text(66,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",15),e.\u0275\u0275element(68,"input",25),e.\u0275\u0275template(69,dn,2,0,"p",18),e.\u0275\u0275template(70,mn,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"div",14)(72,"div",26),e.\u0275\u0275text(73," Preference "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"div",14)(75,"div",15),e.\u0275\u0275text(76," Disbursement Frequency\xa0"),e.\u0275\u0275elementStart(77,"span",16),e.\u0275\u0275text(78,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"div",15),e.\u0275\u0275template(80,cn,4,2,"label",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"div",19),e.\u0275\u0275text(82," Disbursement Type\xa0"),e.\u0275\u0275elementStart(83,"span",16),e.\u0275\u0275text(84,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(85,"div",15),e.\u0275\u0275template(86,pn,4,2,"label",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(87,"div",14)(88,"div",15),e.\u0275\u0275text(89," ESIC Applicable "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"div",15)(91,"div",28),e.\u0275\u0275element(92,"div",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(93,"div",19),e.\u0275\u0275text(94," PT Applicable "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(95,"div",15)(96,"div",29),e.\u0275\u0275element(97,"div",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(98,"div",14)(99,"div",15),e.\u0275\u0275text(100," TDS Applicable "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(101,"div",15)(102,"div",30),e.\u0275\u0275element(103,"div",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(104,"div",19),e.\u0275\u0275text(105," EPFO Applicable "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"div",15)(107,"div",31),e.\u0275\u0275element(108,"div",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(109,"div",14)(110,"div",15),e.\u0275\u0275text(111," Publish Status\xa0"),e.\u0275\u0275elementStart(112,"span",16),e.\u0275\u0275text(113,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(114,"div",15),e.\u0275\u0275element(115,"ngx-select-dropdown",32),e.\u0275\u0275template(116,un,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(117,"div",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(118,"div",34)(119,"div",35),e.\u0275\u0275template(120,_n,3,1,"button",36),e.\u0275\u0275template(121,hn,6,1,"ng-template",null,37,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(123,"div",38)(124,"div",9)(125,"h6",39),e.\u0275\u0275text(126,"Bonus Templates"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"div",40)(128,"table",41)(129,"thead")(130,"tr")(131,"th",42),e.\u0275\u0275text(132,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(133,"th",42),e.\u0275\u0275text(134,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(135,"th",42),e.\u0275\u0275text(136,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(137,"th",42),e.\u0275\u0275text(138,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(139,"th",42),e.\u0275\u0275text(140,"Frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(141,"th",42),e.\u0275\u0275text(142,"Amt/%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(143,"th",42),e.\u0275\u0275text(144,"Min Service"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(145,"th",42),e.\u0275\u0275text(146,"Max Bonus%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(147,"th",42),e.\u0275\u0275text(148,"Max Bonus Wage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(149,"th",42),e.\u0275\u0275text(150,"Wage Ceiling "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(151,"th",42),e.\u0275\u0275text(152,"ESI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(153,"th",42),e.\u0275\u0275text(154,"PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"th",42),e.\u0275\u0275text(156,"PT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(157,"th",42),e.\u0275\u0275text(158,"TDS"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(159,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(160,"button",43),e.\u0275\u0275elementStart(161,"div",44)(162,"div",45)(163,"div",46)(164,"div",47)(165,"h6",48),e.\u0275\u0275text(166,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(167,"button",49)(168,"span",50),e.\u0275\u0275text(169,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(170,"div",51)(171,"div",42)(172,"table",52)(173,"thead")(174,"th",42),e.\u0275\u0275text(175,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(176,"th",42),e.\u0275\u0275text(177,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(178,"th",42),e.\u0275\u0275text(179,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(180,"th",42),e.\u0275\u0275text(181,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(182,"th",42),e.\u0275\u0275text(183,"Frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(184,"th",42),e.\u0275\u0275text(185,"Amt/%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(186,"th",42),e.\u0275\u0275text(187,"Min Service"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(188,"th",42),e.\u0275\u0275text(189,"Max Bonus%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(190,"th",42),e.\u0275\u0275text(191,"Max Bonus Wage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(192,"th",42),e.\u0275\u0275text(193,"Wage Ceiling "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(194,"th",42),e.\u0275\u0275text(195,"ESI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(196,"th",42),e.\u0275\u0275text(197,"PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(198,"th",42),e.\u0275\u0275text(199,"PT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(200,"th",42),e.\u0275\u0275text(201,"TDS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(202,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(203,"div",53)(204,"button",54),e.\u0275\u0275text(205,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(206,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(122);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.bonusPolicyForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.template_name.hasError("required")&&t.bonusPolicyForm.controls.template_name.dirty),e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.min_service.hasError("required")&&t.bonusPolicyForm.controls.min_service.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.min_service.hasError("pattern")&&t.bonusPolicyForm.controls.min_service.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.max_bonus.hasError("required")&&t.bonusPolicyForm.controls.max_bonus.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.max_bonus.hasError("pattern")&&t.bonusPolicyForm.controls.max_bonus.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.max_bonus_wage.hasError("required")&&t.bonusPolicyForm.controls.max_bonus_wage.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.max_bonus_wage.hasError("pattern")&&t.bonusPolicyForm.controls.max_bonus_wage.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.eligible_capping.hasError("required")&&t.bonusPolicyForm.controls.eligible_capping.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.eligible_capping.hasError("pattern")&&t.bonusPolicyForm.controls.eligible_capping.dirty),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",t.frequencyMaster),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",t.disburesmentMaster),e.\u0275\u0275advance(29),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(22,fn)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusPolicyForm.controls.publish_status.hasError("required")&&t.bonusPolicyForm.controls.publish_status.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(32),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i._,i.JJ,i.JL,i.sg,i.u,y,x],styles:["span.rg-badges{font-size:13px;padding:6px;margin:0 2px}"]}),o})();function bn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",37),e.\u0275\u0275text(1," Define Bonus Slip Template "),e.\u0275\u0275elementEnd())}function vn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",37),e.\u0275\u0275text(1,"Update Bonus Slip Template"),e.\u0275\u0275elementEnd())}function yn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",24),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function xn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",38),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Sn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",24),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function En(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",38),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Cn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",24),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function wn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",38),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function kn(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",41)(1,"label",42),e.\u0275\u0275element(2,"input",43),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function In(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",39)(2,"div",28),e.\u0275\u0275text(3," Employee's Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",14),e.\u0275\u0275template(5,kn,5,2,"div",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.employeeDetailsMaster)}}function Fn(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",41)(1,"label",42),e.\u0275\u0275element(2,"input",44),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Tn(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",39)(2,"div",28),e.\u0275\u0275text(3," Bonus Details "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",14),e.\u0275\u0275template(5,Fn,5,2,"div",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.bonusDetailsMaster)}}function An(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",24),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Dn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",38),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Pn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",38),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Rn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",45),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save Template"),e.\u0275\u0275elementEnd()()}}function Mn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",46),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEntry())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",47),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}}const On=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let Nn=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.Global=d,this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.editActionId="",this.employeeDetailsMaster=[{value:"emp_id",description:"Employee ID"},{value:"emp_name",description:"Employee Name"},{value:"client",description:"Client"},{value:"branch",description:"Branch"},{value:"department",description:"Department"},{value:"designation",description:"Designation"},{value:"hod",description:"HOD"},{value:"gender",description:"Gender"},{value:"dob",description:"DOB"},{value:"doj",description:"DOJ"},{value:"email_id",description:"Email ID"},{value:"phone",description:"Phone"},{value:"bank_name",description:"Bank Name"},{value:"account_no",description:"Account Number"},{value:"ifsc_code",description:"IFSC Code"},{value:"account_type",description:"Account Type"},{value:"aadhar_no",description:"Aadhar No"},{value:"pan_no",description:"PAN No"},{value:"uan_no",description:"UAN No"},{value:"pf_no",description:"PF No"},{value:"esic_ip_no",description:"ESIC/IP No"}],this.bonusDetailsMaster=[{value:"bonus-period",description:"Bonus Period"},{value:"advance",description:"Advance"},{value:"bonus-details",description:"Bonus Details"}],this.otherPaymentMaster=[{value:"overtime",description:"Overtime"},{value:"bonus",description:"Bonus"},{value:"gratuity",description:"Gratuity"},{value:"incentive",description:"Incentive"},{value:"Ex-gratia",description:"Ex-Gratia"},{value:"arrear",description:"Arrear"},{value:"advance-given",description:"Advance Given"}],this.otherDeductionMaster=[{value:"advance-recover1",description:"Advance Recover 1"},{value:"advance-recover2",description:"Advance Recover 2"},{value:"advance-recover3",description:"Advance Recover 3"},{value:"advance-recover4",description:"Advance Recover 4"}],this.bonusSlipForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],company_info:[null,i.kI.compose([i.kI.required])],employee_details:[null],bonus_details:[null],other_payment:[null],other_deduction:[null],signature_message:[null,i.kI.compose([])],publish_status:[null],bonus_temp_company_logo:[null,i.kI.compose([i.kI.required])],bonus_temp_company_logo_file:[null,i.kI.compose([i.kI.required])]}),this.fetch()}ngOnInit(){this.titleService.setTitle("Bonus Slip Template - "+d.AppName)}onFileChanged(n,t,a,r){n.target.files.length>0&&t.patchValue({[r]:n.target.files[0]})}create(n){this.bonusSlipForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.bonusSlipForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createBonusSlipTemplate({template_name:this.bonusSlipForm.value.template_name??"",company_info:this.bonusSlipForm.value.company_info??"",employee_details:JSON.stringify(this.getSelectedModules("employee_details")),bonus_details:JSON.stringify(this.getSelectedModules("bonus_details")),other_payment:JSON.stringify(this.getSelectedModules("other_payment")),other_deduction:JSON.stringify(this.getSelectedModules("other_deduction")),signature_message:this.bonusSlipForm.value.signature_message??"",publish_status:this.bonusSlipForm.value.publish_status.value??"",bonus_temp_company_logo:this.bonusSlipForm.value.bonus_temp_company_logo_file??""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}update(n){this.bonusSlipForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.bonusSlipForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateBonusSlipTemplate({template_name:this.bonusSlipForm.value.template_name??"",company_info:this.bonusSlipForm.value.company_info??"",employee_details:JSON.stringify(this.getSelectedModules("employee_details")),bonus_details:JSON.stringify(this.getSelectedModules("bonus_details")),other_payment:JSON.stringify(this.getSelectedModules("other_payment")),other_deduction:JSON.stringify(this.getSelectedModules("other_deduction")),signature_message:this.bonusSlipForm.value.signature_message??"",bonus_temp_company_logo:this.bonusSlipForm.value.bonus_temp_company_logo_file??"",bonus_slip_temp_id:this.editActionId,publish_status:this.bonusSlipForm.value.publish_status.value}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchBonusSlipTemplates({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.bonus_slip_temp.totalDocs,recordsFiltered:a.bonus_slip_temp.totalDocs,data:a.bonus_slip_temp.docs}):(this.toastr.error(a.message),t({recordsTotal:0,recordsFiltered:0,data:[]}))},a=>{this.toastr.error(d.showServerErrorMessage(a)),t({recordsTotal:0,recordsFiltered:0,data:[]})})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){let s="";return s+='<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>',s+='<button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>',s},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name??"N/A"},orderable:!0,name:"template_name"},{render:function(n,t,a,r){return'<img class="img-thumbnail" style="max-width: 75px" src='+d.BACKEND_URL+"/"+a.company_logo+">"},orderable:!1,name:"company_logo",className:"text-center"},{render:function(n,t,a,r){return a.company_info},orderable:!0,name:"company_info"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.created_at,"dd/MM/yyyy hh:mm a")},orderable:!0,name:"created_at"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.cancelEntry(),n.publish_status&&(n.publish_status=this.publishStatusMaster.find(t=>t.value==n.publish_status)),this.bonusSlipForm.patchValue({template_name:n.template_name,company_info:n.company_info,signature_message:n.signature_message,publish_status:n.publish_status}),this.checkModulesForEdit("employee_details",n.employee_details),this.checkModulesForEdit("bonus_details",n.bonus_details),this.checkModulesForEdit("other_payment",n.other_payment),this.checkModulesForEdit("other_deduction",n.other_deduction),this.bonusSlipForm.controls.bonus_temp_company_logo.clearValidators(),this.bonusSlipForm.controls.bonus_temp_company_logo_file.clearValidators(),this.bonusSlipForm.controls.bonus_temp_company_logo.updateValueAndValidity(),this.bonusSlipForm.controls.bonus_temp_company_logo_file.updateValueAndValidity(),this.editActionId=n._id}cancelEntry(){this.editActionId="",this.resetSelectedModules(),d.resetForm(this.bonusSlipForm),this.bonusSlipForm.controls.bonus_temp_company_logo.setValidators([i.kI.required]),this.bonusSlipForm.controls.bonus_temp_company_logo_file.setValidators([i.kI.required]),this.bonusSlipForm.controls.bonus_temp_company_logo.updateValueAndValidity(),this.bonusSlipForm.controls.bonus_temp_company_logo_file.updateValueAndValidity(),$("html, body").animate({scrollTop:$("#rule-submit-section").position().top})}getSelectedModules(n){const t=[];return $('input[name="'+n+'[]"]:checked').each(function(){t.push($(this).val())}),t}checkModulesForEdit(n,t){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&$('input[name="'+n+'[]"][value="'+t[a]+'"]').prop("checked",!0)}resetSelectedModules(){["employee_details","bonus_details","other_payment","other_deduction"].forEach(t=>{$('input[name="'+t+'[]"]:checked').each(function(){$(this).prop("checked",!1)})})}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteBonusSlipTemplate({bonus_slip_temp_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error(d.showServerErrorMessage(a))}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}changePublishStatus(n){this.spinner.show(),this.adminService.changeBonusSlipTemplatePublishStatus({template_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),this.toastr.success(t.message)):this.toastr.error(t.message),this.spinner.hide()},t=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-bonusslip-template"]],decls:94,vars:20,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"mg-b-0"],["id","rule-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["class","text-danger",4,"ngIf"],[1,"col-9","col-sm-9"],["formControlName","template_name","type","text",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","bonus_temp_company_logo","type","file","accept","image/*",1,"form-control",3,"change"],["formControlName","company_info","rows","3","cols","100%",1,"form-control"],[4,"ngIf"],["formControlName","signature_message","rows","3","cols","100%",1,"form-control"],[1,"text-danger"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12"],["class","btn btn-info",3,"click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"br-section-label","mb-5"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"row","no-gutters",2,"border-right","1px solid #ced4da"],["class","col-3 col-sm-3","style","background:#fff;",4,"ngFor","ngForOf"],[1,"col-3","col-sm-3",2,"background","#fff"],[1,"ckbox","mb-0"],["type","checkbox","name","employee_details[]",3,"value"],["type","checkbox","name","bonus_details[]",3,"value"],[1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["type","submit",1,"btn","btn-info",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Bonus Slip Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Customize Bonus Slip"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,bn,2,0,"h6",10),e.\u0275\u0275template(18,vn,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," Template Name\xa0 "),e.\u0275\u0275template(25,yn,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",17),e.\u0275\u0275element(27,"input",18),e.\u0275\u0275template(28,xn,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",14)(30,"div",15),e.\u0275\u0275text(31," Company Logo\xa0 "),e.\u0275\u0275template(32,Sn,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",17)(34,"input",20),e.\u0275\u0275listener("change",function(r){return t.onFileChanged(r,t.bonusSlipForm,"bonus_temp_company_logo","bonus_temp_company_logo_file")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(35,En,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",14)(37,"div",15),e.\u0275\u0275text(38," Company Name "),e.\u0275\u0275element(39,"br"),e.\u0275\u0275text(40," Address "),e.\u0275\u0275element(41,"br"),e.\u0275\u0275text(42," Phone No\xa0 "),e.\u0275\u0275template(43,Cn,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",17),e.\u0275\u0275element(45,"textarea",21),e.\u0275\u0275template(46,wn,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(47,In,6,1,"ng-container",22),e.\u0275\u0275template(48,Tn,6,1,"ng-container",22),e.\u0275\u0275elementStart(49,"div",14)(50,"div",15),e.\u0275\u0275text(51," Signature Message Box\xa0 "),e.\u0275\u0275template(52,An,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"div",17),e.\u0275\u0275element(54,"textarea",23),e.\u0275\u0275template(55,Dn,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"div",14)(57,"div",15),e.\u0275\u0275text(58," Publish Status\xa0"),e.\u0275\u0275elementStart(59,"span",24),e.\u0275\u0275text(60,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(61,"div",15),e.\u0275\u0275element(62,"ngx-select-dropdown",25),e.\u0275\u0275template(63,Pn,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(64,"div",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"div",27)(66,"div",28),e.\u0275\u0275template(67,Rn,3,0,"button",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(68,Mn,6,0,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(70,"div",31)(71,"div",9)(72,"h6",32),e.\u0275\u0275text(73,"Bonus Slip Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"div",33)(75,"table",34)(76,"thead")(77,"tr")(78,"th",35),e.\u0275\u0275text(79,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"th",36),e.\u0275\u0275text(81,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"th",36),e.\u0275\u0275text(83,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"th",35),e.\u0275\u0275text(85,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"th",35),e.\u0275\u0275text(87,"Company Logo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",35),e.\u0275\u0275text(89,"Company Info"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",35),e.\u0275\u0275text(91,"Created At"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(92,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(93,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(69);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.bonusSlipForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.bonusSlipForm,"template_name","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.bonusSlipForm.controls.template_name.hasError("required")&&(t.bonusSlipForm.controls.template_name.dirty||t.bonusSlipForm.controls.template_name.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.bonusSlipForm,"bonus_temp_company_logo","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.bonusSlipForm.controls.bonus_temp_company_logo.hasError("required")&&(t.bonusSlipForm.controls.bonus_temp_company_logo.dirty||t.bonusSlipForm.controls.bonus_temp_company_logo.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.bonusSlipForm,"company_info","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.bonusSlipForm.controls.company_info.hasError("required")&&(t.bonusSlipForm.controls.company_info.dirty||t.bonusSlipForm.controls.company_info.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.employeeDetailsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusDetailsMaster.length>0),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.bonusSlipForm,"signature_message","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.bonusSlipForm.controls.signature_message.hasError("required")&&(t.bonusSlipForm.controls.signature_message.dirty||t.bonusSlipForm.controls.signature_message.touched)),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(19,On)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusSlipForm.controls.publish_status.hasError("required")&&t.bonusSlipForm.controls.publish_status.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".pt-modal-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5em}.pt-modal-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;border-radius:50%;border:2px solid #17a2b8}"]}),o})();function Ln(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",51),e.\u0275\u0275text(1,"Define Incentive Template"),e.\u0275\u0275elementEnd())}function Vn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",51),e.\u0275\u0275text(1,"Update Incentive Template"),e.\u0275\u0275elementEnd())}function qn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function $n(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Bn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function jn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Un(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Hn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Yn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",52),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Gn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",53),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.incentiveTemplateForm.valid)}}function Jn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",54),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",53),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.incentiveTemplateForm.valid)}}const Q=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let zn=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewPolicyDetail=null,this.initialValueBeforeUpdate=null,this.editActionId="",this.settlementFrequencyMaster=[{value:"daily",description:"Daily"},{value:"weekly",description:"Weekly"},{value:"fortnightly",description:"Fortnightly"},{value:"monthly",description:"Monthly"},{value:"quaterly",description:"Quaterly"},{value:"yearly",description:"Yearly"}],this.incentiveTemplateForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],min_hold:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],max_hold:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],settlement_frequency:[null,i.kI.compose([i.kI.required])],publish_status:[null,i.kI.compose([i.kI.required])]}),this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}]}ngOnInit(){this.titleService.setTitle("Incentive Policy Template - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.template_name}},{render:function(n,t,a,r){return a.eligble_disburse}},{render:function(n,t,a,r){return a.min_hold}},{render:function(n,t,a,r){return a.max_hold}},{render:function(n,t,a,r){return a.settlement_frequency},className:"text-capitalize"},{render:function(n,t,a,r){return a.esic_apply},className:"text-capitalize"},{render:function(n,t,a,r){return a.pf_apply},className:"text-capitalize"},{render:function(n,t,a,r){return a.pt_apply},className:"text-capitalize"},{render:function(n,t,a,r){return a.tds_apply},className:"text-capitalize"}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchIncentiveTemplates({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.incentive_policy.totalDocs,recordsFiltered:a.incentive_policy.totalDocs,data:a.incentive_policy.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name},orderable:!0,name:"template_name"},{render:function(n,t,a,r){return a.eligble_disburse},orderable:!0,name:"eligble_disburse"},{render:function(n,t,a,r){return a.min_hold},orderable:!0,name:"min_hold"},{render:function(n,t,a,r){return a.max_hold},orderable:!0,name:"max_hold"},{render:function(n,t,a,r){return a.settlement_frequency},className:"text-capitalize",orderable:!0,name:"settlement_frequency"},{render:function(n,t,a,r){return a.esic_apply},className:"text-capitalize",orderable:!0,name:"esic_apply"},{render:function(n,t,a,r){return a.pf_apply},className:"text-capitalize",orderable:!0,name:"pf_apply"},{render:function(n,t,a,r){return a.pt_apply},className:"text-capitalize",orderable:!0,name:"pt_apply"},{render:function(n,t,a,r){return a.tds_apply},className:"text-capitalize",orderable:!0,name:"tds_apply"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changePublishStatus(n){this.adminService.updateIncentiveTemplatePublishStatus({incentive_policy_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getEdit(n){this.editActionId=n._id,this.incentiveTemplateForm.patchValue({template_name:n.template_name,min_hold:n.min_hold,max_hold:n.max_hold,settlement_frequency:this.settlementFrequencyMaster.find(t=>t.value===n.settlement_frequency),publish_status:this.publishStatusMaster.find(t=>t.value==n.publish_status)}),"yes"==n.tds_apply?$("#template-tds-apply").addClass("on"):$("#template-tds-apply").removeClass("on"),"yes"==n.esic_apply?$("#template-esic-apply").addClass("on"):$("#template-esic-apply").removeClass("on"),"yes"==n.pf_apply?$("#template-pf-apply").addClass("on"):$("#template-pf-apply").removeClass("on"),"yes"==n.pt_apply?$("#template-pt-apply").addClass("on"):$("#template-pt-apply").removeClass("on"),"yes"==n.eligble_disburse?$("#template-eligble-disburse").addClass("on"):$("#template-eligble-disburse").removeClass("on"),this.initialValueBeforeUpdate={incentive_policy_id:this.editActionId,template_name:this.incentiveTemplateForm.value.template_name.toString().trim(),min_hold:this.incentiveTemplateForm.value.min_hold.toString().trim(),max_hold:this.incentiveTemplateForm.value.max_hold.toString().trim(),settlement_frequency:this.incentiveTemplateForm.value.settlement_frequency.value,tds_apply:n.tds_apply,esic_apply:n.esic_apply,pf_apply:n.pf_apply,pt_apply:n.pt_apply,eligble_disburse:n.eligble_disburse,publish_status:this.incentiveTemplateForm.value.publish_status.value},$("html, body").animate({scrollTop:$("#template-submit-section").position().top})}cancelEdit(){this.editActionId="",this.incentiveTemplateForm.reset(),this.resetFormFields();for(const n in this.incentiveTemplateForm.controls)if(Object.prototype.hasOwnProperty.call(this.incentiveTemplateForm.controls,n)){const t=this.incentiveTemplateForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){if(this.incentiveTemplateForm.valid){let t=1==$("#template-tds-apply").hasClass("on")?"yes":"no",a=1==$("#template-esic-apply").hasClass("on")?"yes":"no",r=1==$("#template-pf-apply").hasClass("on")?"yes":"no",s=1==$("#template-pt-apply").hasClass("on")?"yes":"no",m=1==$("#template-eligble-disburse").hasClass("on")?"yes":"no";n.target.classList.add("btn-loading"),this.adminService.createIncentiveTemplate({template_name:this.incentiveTemplateForm.value.template_name,min_hold:this.incentiveTemplateForm.value.min_hold,max_hold:this.incentiveTemplateForm.value.max_hold,settlement_frequency:this.incentiveTemplateForm.value.settlement_frequency.value,tds_apply:t,esic_apply:a,pf_apply:r,pt_apply:s,eligble_disburse:m,publish_status:this.incentiveTemplateForm.value.publish_status.value}).subscribe(c=>{"success"==c.status?(this.toastr.success(c.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):this.toastr.error("val_err"==c.status?d.showValidationMessage(c.val_msg):c.message),n.target.classList.remove("btn-loading")},c=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteIncentiveTemplate({incentive_policy_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.incentiveTemplateForm.valid){let t=1==$("#template-tds-apply").hasClass("on")?"yes":"no",a=1==$("#template-esic-apply").hasClass("on")?"yes":"no",r=1==$("#template-pf-apply").hasClass("on")?"yes":"no",s=1==$("#template-pt-apply").hasClass("on")?"yes":"no",m=1==$("#template-eligble-disburse").hasClass("on")?"yes":"no";const c={incentive_policy_id:this.editActionId,template_name:this.incentiveTemplateForm.value.template_name.toString().trim(),min_hold:this.incentiveTemplateForm.value.min_hold.toString().trim(),max_hold:this.incentiveTemplateForm.value.max_hold.toString().trim(),settlement_frequency:this.incentiveTemplateForm.value.settlement_frequency.value,tds_apply:t,esic_apply:a,pf_apply:r,pt_apply:s,eligble_disburse:m,publish_status:this.incentiveTemplateForm.value.publish_status.value};if(JSON.stringify(c)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateIncentiveTemplate(c).subscribe(u=>{"success"==u.status?(this.toastr.success(u.message),this.initialValueBeforeUpdate=c,$("#my-datatable").dataTable().api().ajax.reload(function(f){},!1)):this.toastr.error("val_err"==u.status?d.showValidationMessage(u.val_msg):u.message),n.target.classList.remove("btn-loading")},u=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}resetFormFields(){$("#template-tds-apply").addClass("on"),$("#template-esic-apply").addClass("on"),$("#template-pf-apply").addClass("on"),$("#template-pt-apply").addClass("on"),$("#template-eligble-disburse").addClass("on")}showUpdateHistory(n){this.viewPolicyDetail=n,null!=this.viewPolicyDetail.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPolicyDetail&&null!=this.viewPolicyDetail.history&&Array.isArray(this.viewPolicyDetail.history)?this.viewPolicyDetail.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-incentive-policy"]],decls:170,vars:21,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],["id","template-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["type","number","formControlName","min_hold",1,"form-control"],["type","number","formControlName","max_hold",1,"form-control"],["formControlName","settlement_frequency",1,"form-control",3,"options","config"],["id","template-tds-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],[1,"br-toggle-switch"],["id","template-esic-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","template-pf-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","template-pt-apply",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["id","template-eligble-disburse",1,"br-toggle","br-toggle-rounded","br-toggle-primary","on"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Incentive Templates"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Incentive Templates"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,Ln,2,0,"h6",10),e.\u0275\u0275template(18,Vn,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," Template Name\xa0"),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",15),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275template(29,qn,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",19),e.\u0275\u0275text(31," Min Hold\xa0"),e.\u0275\u0275elementStart(32,"span",16),e.\u0275\u0275text(33,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",15),e.\u0275\u0275element(35,"input",20),e.\u0275\u0275template(36,$n,2,0,"p",18),e.\u0275\u0275template(37,Bn,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",14)(39,"div",15),e.\u0275\u0275text(40," Max Hold\xa0"),e.\u0275\u0275elementStart(41,"span",16),e.\u0275\u0275text(42,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",15),e.\u0275\u0275element(44,"input",21),e.\u0275\u0275template(45,jn,2,0,"p",18),e.\u0275\u0275template(46,Un,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",19),e.\u0275\u0275text(48," Settlement Frequency\xa0"),e.\u0275\u0275elementStart(49,"span",16),e.\u0275\u0275text(50,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",15),e.\u0275\u0275element(52,"ngx-select-dropdown",22),e.\u0275\u0275template(53,Hn,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",14)(55,"div",15),e.\u0275\u0275text(56," TDS Applied "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"div",15)(58,"div",23),e.\u0275\u0275element(59,"div",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",19),e.\u0275\u0275text(61," ESIC Applied "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"div",15)(63,"div",25),e.\u0275\u0275element(64,"div",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(65,"div",14)(66,"div",15),e.\u0275\u0275text(67," PF Applied "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"div",15)(69,"div",26),e.\u0275\u0275element(70,"div",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(71,"div",19),e.\u0275\u0275text(72," PT Applied "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"div",15)(74,"div",27),e.\u0275\u0275element(75,"div",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(76,"div",14)(77,"div",15),e.\u0275\u0275text(78," Eligible Advance Auto Disburse "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(79,"div",15)(80,"div",28),e.\u0275\u0275element(81,"div",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(82,"div",19),e.\u0275\u0275text(83," Publish Status\xa0"),e.\u0275\u0275elementStart(84,"span",16),e.\u0275\u0275text(85,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(86,"div",15),e.\u0275\u0275element(87,"ngx-select-dropdown",29),e.\u0275\u0275template(88,Yn,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(89,"div",30)(90,"div",31),e.\u0275\u0275template(91,Gn,3,1,"button",32),e.\u0275\u0275template(92,Jn,6,1,"ng-template",null,33,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(94,"div",34)(95,"div",9)(96,"h6",35),e.\u0275\u0275text(97,"Incentive Templates"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"div",36)(99,"table",37)(100,"thead")(101,"tr")(102,"th",38),e.\u0275\u0275text(103,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"th",38),e.\u0275\u0275text(105,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"th",38),e.\u0275\u0275text(107,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(108,"th",38),e.\u0275\u0275text(109,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(110,"th",38),e.\u0275\u0275text(111,"Auto Disburse"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(112,"th",38),e.\u0275\u0275text(113,"Min Hold"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(114,"th",38),e.\u0275\u0275text(115,"Max Hold"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(116,"th",38),e.\u0275\u0275text(117,"Frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(118,"th",38),e.\u0275\u0275text(119,"ESIC"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(120,"th",38),e.\u0275\u0275text(121,"PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(122,"th",38),e.\u0275\u0275text(123,"PT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(124,"th",38),e.\u0275\u0275text(125,"TDS"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(126,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(127,"button",39),e.\u0275\u0275elementStart(128,"div",40)(129,"div",41)(130,"div",42)(131,"div",43)(132,"h6",44),e.\u0275\u0275text(133,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(134,"button",45)(135,"span",46),e.\u0275\u0275text(136,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(137,"div",47)(138,"div",38)(139,"table",48)(140,"thead")(141,"th",38),e.\u0275\u0275text(142,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(143,"th",38),e.\u0275\u0275text(144,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(145,"th",38),e.\u0275\u0275text(146,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(147,"th",38),e.\u0275\u0275text(148,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(149,"th",38),e.\u0275\u0275text(150,"Auto Disburse"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(151,"th",38),e.\u0275\u0275text(152,"Min Hold"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(153,"th",38),e.\u0275\u0275text(154,"Max Hold"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"th",38),e.\u0275\u0275text(156,"Frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(157,"th",38),e.\u0275\u0275text(158,"ESI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"th",38),e.\u0275\u0275text(160,"PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(161,"th",38),e.\u0275\u0275text(162,"PT"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(163,"th",38),e.\u0275\u0275text(164,"TDS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(165,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(166,"div",49)(167,"button",50),e.\u0275\u0275text(168,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(169,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(93);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.incentiveTemplateForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.template_name.hasError("required")&&t.incentiveTemplateForm.controls.template_name.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.min_hold.hasError("required")&&t.incentiveTemplateForm.controls.min_hold.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.min_hold.hasError("pattern")&&t.incentiveTemplateForm.controls.min_hold.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.max_hold.hasError("required")&&t.incentiveTemplateForm.controls.max_hold.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.max_hold.hasError("pattern")&&t.incentiveTemplateForm.controls.max_hold.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.settlementFrequencyMaster)("config",e.\u0275\u0275pureFunction0(19,Q)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.settlement_frequency.hasError("required")&&t.incentiveTemplateForm.controls.settlement_frequency.dirty),e.\u0275\u0275advance(34),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(20,Q)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.incentiveTemplateForm.controls.publish_status.hasError("required")&&(t.incentiveTemplateForm.controls.publish_status.dirty||t.incentiveTemplateForm.controls.publish_status.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(28),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();var g=k(9671),H=k(137);function Wn(o,l){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1,"Define Leave Rule: Standard for administration"),e.\u0275\u0275elementContainerEnd())}function Qn(o,l){1&o&&e.\u0275\u0275text(0," Update Leave Rule: Standard for administration ")}function Zn(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Kn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",76),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.addTemplateRows("template_data"))}),e.\u0275\u0275elementStart(1,"div",77),e.\u0275\u0275element(2,"i",78),e.\u0275\u0275elementEnd()()}}function Xn(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",79),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeTemplateRow("template_data",a))}),e.\u0275\u0275elementStart(1,"div",77),e.\u0275\u0275element(2,"i",80),e.\u0275\u0275elementEnd()()}}const ea=function(){return{search:!0,placeholder:"Choose One",height:"200px"}},Z=function(){return{search:!0,placeholder:"Select Option",height:"200px"}};function ta(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",51)(1,"td")(2,"label",52),e.\u0275\u0275text(3,"Leave Type\xa0"),e.\u0275\u0275elementStart(4,"span",20),e.\u0275\u0275text(5,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"ngx-select-dropdown",53),e.\u0275\u0275listener("change",function(){const r=e.\u0275\u0275restoreView(n).index,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.templateLeaveTypeChanged(r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",54),e.\u0275\u0275text(8,"Restriction on Availment\xa0"),e.\u0275\u0275elementStart(9,"span",20),e.\u0275\u0275text(10,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",55)(12,"div",56)(13,"label",57),e.\u0275\u0275element(14,"input",58),e.\u0275\u0275elementStart(15,"span"),e.\u0275\u0275text(16,"Yes"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",56)(18,"label",57),e.\u0275\u0275element(19,"input",59),e.\u0275\u0275elementStart(20,"span"),e.\u0275\u0275text(21,"No"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(22,"td")(23,"span",60)(24,"label",52),e.\u0275\u0275text(25,"Number of Working Days\xa0"),e.\u0275\u0275elementStart(26,"span",20),e.\u0275\u0275text(27,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(28,"input",61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"label",54),e.\u0275\u0275text(30,"Number of Days\xa0"),e.\u0275\u0275elementStart(31,"span",20),e.\u0275\u0275text(32,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(33,"input",62),e.\u0275\u0275elementStart(34,"label",54),e.\u0275\u0275text(35,"Restriction Tenure\xa0"),e.\u0275\u0275elementStart(36,"span",20),e.\u0275\u0275text(37,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(38,"ngx-select-dropdown",63),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"td")(40,"label",52),e.\u0275\u0275text(41,"Leave Tenure\xa0"),e.\u0275\u0275elementStart(42,"span",20),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(44,"ngx-select-dropdown",64),e.\u0275\u0275elementStart(45,"label",54),e.\u0275\u0275text(46,"Restriction Days\xa0"),e.\u0275\u0275elementStart(47,"span",20),e.\u0275\u0275text(48,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(49,"input",65),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"td",66)(51,"label",52),e.\u0275\u0275text(52,"Carry Forward\xa0"),e.\u0275\u0275elementStart(53,"span",20),e.\u0275\u0275text(54,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",55)(56,"div",56)(57,"label",57),e.\u0275\u0275element(58,"input",67),e.\u0275\u0275elementStart(59,"span"),e.\u0275\u0275text(60,"Yes"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(61,"div",56)(62,"label",57),e.\u0275\u0275element(63,"input",68),e.\u0275\u0275elementStart(64,"span"),e.\u0275\u0275text(65,"No"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(66,"label",54),e.\u0275\u0275text(67,"Cashable\xa0"),e.\u0275\u0275elementStart(68,"span",20),e.\u0275\u0275text(69,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"div",55)(71,"div",56)(72,"label",57),e.\u0275\u0275element(73,"input",69),e.\u0275\u0275elementStart(74,"span"),e.\u0275\u0275text(75,"Yes"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(76,"div",56)(77,"label",57),e.\u0275\u0275element(78,"input",70),e.\u0275\u0275elementStart(79,"span"),e.\u0275\u0275text(80,"No"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(81,"td")(82,"label",52),e.\u0275\u0275text(83,"Carry Forward Years"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(84,"input",71),e.\u0275\u0275elementStart(85,"label",54),e.\u0275\u0275text(86,"Effective Form\xa0"),e.\u0275\u0275elementStart(87,"span",20),e.\u0275\u0275text(88,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(89,"input",72),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"td",73),e.\u0275\u0275template(91,Kn,3,0,"button",74),e.\u0275\u0275template(92,Xn,3,0,"button",75),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.index,t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroupName",n),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.leaveHeadMaster)("config",e.\u0275\u0275pureFunction0(10,ea)),e.\u0275\u0275advance(17),e.\u0275\u0275propertyInterpolate1("id","workingdays-field-",n,""),e.\u0275\u0275advance(15),e.\u0275\u0275property("options",t.tenureMaster)("config",e.\u0275\u0275pureFunction0(11,Z)),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.tenureMaster)("config",e.\u0275\u0275pureFunction0(12,Z)),e.\u0275\u0275advance(47),e.\u0275\u0275property("ngIf",t.getTemplateRows("template_data").length-1==n),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getTemplateRows("template_data").length>1)}}function na(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",81),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.add(a))}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Save"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!n.leaveRuleForm.valid)}}function aa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",82),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.edit(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.leaveRuleForm.valid)}}function ra(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",83),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function oa(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",83),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ia(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",83),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function la(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2),a=n.index;e.\u0275\u0275attribute("rowspan",n.$implicit.template_data.length),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(a+1)}}function sa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td")(1,"div",85),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.changeLeaveTypePublishStatus(a))}),e.\u0275\u0275element(2,"div",86),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275attribute("rowspan",n.template_data.length),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("on","published"==n.publish_status)}}function da(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td")(1,"button",87),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.getEdit(a))}),e.\u0275\u0275elementStart(2,"div",77),e.\u0275\u0275element(3,"i",88),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",89),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2).$implicit,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.deleteItem(a))}),e.\u0275\u0275elementStart(5,"div",77),e.\u0275\u0275element(6,"i",80),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275attribute("rowspan",n.template_data.length)}}function ma(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2).$implicit;e.\u0275\u0275attribute("rowspan",n.template_data.length),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.template_name)}}function ca(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275template(1,la,2,2,"td",48),e.\u0275\u0275template(2,sa,3,3,"td",48),e.\u0275\u0275template(3,da,7,1,"td",48),e.\u0275\u0275template(4,ma,2,2,"td",48),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td",84),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td",84),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td",84),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext(2);let r,s,m,c,u,f,F,T;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.effective_form?e.\u0275\u0275pipeBind2(7,14,n.effective_form,"mediumDate"):"N/A"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.leave_type?a.getLeaveTypeDetails(n.leave_type,"description"):"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(r=n.leave_tenure)&&void 0!==r?r:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(s=n.no_of_day)&&void 0!==s?s:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(m=n.carry_forward)&&void 0!==m?m:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(c=n.carry_forward_years)&&void 0!==c?c:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(u=n.restriction_on_availment)&&void 0!==u?u:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(f=n.restriction_tenure)&&void 0!==f?f:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(F=n.restriction_days)&&void 0!==F?F:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(T=n.cashable)&&void 0!==T?T:"N/A")}}function pa(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,ca,26,17,"tr",47),e.\u0275\u0275elementContainerEnd()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.template_data)}}function ua(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",90),e.\u0275\u0275text(2,"No records found"),e.\u0275\u0275elementEnd()())}const _a=function(){return{search:!0,placeholder:"Select One",height:"200px"}};let ha=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.toastr=a,this.adminService=r,this.spinner=s,this.datePipe=m,this.dtOptions={},this.leaveHeadTypeMaster=[],this.leaveHeadMaster=[],this.tenureMaster=[],this.templateRows=[],this.leaveRuleForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],template_data:this.formBuilder.array([this.initTemplateRows("template_data")])}),this.leaveHeadForm=n.group({head_type:[null,i.kI.compose([i.kI.required])],full_name:[null,i.kI.compose([i.kI.required])],abbreviation:[null,i.kI.compose([i.kI.required])]}),this.editActionId="",this.tenureMaster=[{value:"Annualy",description:"Annually"},{value:"Quaterly",description:"Quaterly"},{value:"Monthly",description:"Monthly"}],this.leaveHeadTypeMaster=[{value:"earned",description:"Earned Leave"},{value:"com_defined",description:"Company Defined Leave"}],this.paginationOptions={hasNextPage:!1,hasPrevPage:!1,limit:d.DataTableLength,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1}}ngOnInit(){var n=this;return(0,g.Z)(function*(){n.titleService.setTitle("Define Leave Rule - "+d.AppName),yield n.fetchLeaveHeads(),n.fetch()})()}initTemplateRows(n,t={}){return this.formBuilder.group("template_data"===n?{leave_type:[t.leave_type??null,i.kI.compose([i.kI.required])],restriction_on_availment:[t.restriction_on_availment??null,i.kI.compose([i.kI.required])],no_of_day:[t.no_of_day??null,i.kI.compose([i.kI.required])],no_of_working_day:[t.no_of_working_day??null,i.kI.compose([])],restriction_tenure:[t.restriction_tenure??null,i.kI.compose([i.kI.required])],leave_tenure:[t.leave_tenure??null,i.kI.compose([i.kI.required])],restriction_days:[t.restriction_days??null,i.kI.compose([i.kI.required])],carry_forward:[t.carry_forward??null,i.kI.compose([i.kI.required])],cashable:[t.cashable??null,i.kI.compose([i.kI.required])],carry_forward_years:[t.carry_forward_years??null,i.kI.compose([])],effective_form:[t.effective_form??null,i.kI.compose([i.kI.required])]}:{})}getTemplateRows(n){return this.leaveRuleForm.get(n).controls}removeTemplateRow(n,t){this.leaveRuleForm.get(n).removeAt(t)}addTemplateRows(n,t={}){this.leaveRuleForm.get(n).push(this.initTemplateRows(n,t)),d.loadCustomScripts("customJsScript")}resetAllTemplateRows(n=!1){let t=["template_data"];t.forEach(a=>{this.leaveRuleForm.get(a).clear()}),0==n&&t.forEach(a=>{this.addTemplateRows(a)})}fetchLeaveHeads(){const n=this;return new Promise((t,a)=>{n.spinner.show(),n.adminService.fetchLeaveTemplateHeads({}).subscribe(r=>{if("success"==r.status){n.leaveHeadMaster=[];for(const s in r.temp_head)if(Object.prototype.hasOwnProperty.call(r.temp_head,s)){const m=r.temp_head[s];n.leaveHeadMaster.push({id:m._id,description:m.full_name+" ("+m.abbreviation+")",full_name:m.full_name,head_type:m.head_type,abbreviation:m.abbreviation})}}else n.toastr.error(r.message);n.spinner.hide(),t(!0)},r=>{n.toastr.error(d.showServerErrorMessage(r)),n.spinner.hide(),t(!0)})})}cancelEntry(n=!1){this.editActionId="",this.resetAllTemplateRows(n),d.resetForm(this.leaveRuleForm),d.scrollToQuery("#leave-rule-form")}getEdit(n){this.cancelEntry(!0),this.editActionId=n._id;var t=new p.uU("en-US");n.template_data.forEach(a=>{let r={leave_type:this.leaveHeadMaster.find(s=>s.id==a.leave_type)??null,restriction_on_availment:a.restriction_on_availment??null,no_of_day:a.no_of_day??null,no_of_working_day:a.no_of_working_day??null,restriction_tenure:this.tenureMaster.find(s=>s.value==a.restriction_tenure)??null,leave_tenure:this.tenureMaster.find(s=>s.value==a.leave_tenure)??null,restriction_days:a.restriction_days??null,carry_forward:a.carry_forward??null,cashable:a.cashable??null,carry_forward_years:a.carry_forward_years??null,effective_form:a.effective_form?t.transform(a.effective_form,"yyyy-MM-dd"):null};this.addTemplateRows("template_data",r)}),d.scrollToQuery("#leave-rule-form")}add(n){this.leaveRuleForm.markAllAsTouched(),d.scrollToQuery("p.text-danger");let t=this.getTemplateDataForSubmit();this.leaveRuleForm.valid&&t&&(n.target.classList.add("btn-loading"),this.adminService.createLeaveTemplateRule({template_name:this.leaveRuleForm.value.template_name,template_data:JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.cancelEntry(),this.fetch()):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(a))}))}edit(n){this.leaveRuleForm.markAllAsTouched(),d.scrollToQuery("p.text-danger");let t=this.getTemplateDataForSubmit();this.leaveRuleForm.valid&&t&&(n.target.classList.add("btn-loading"),this.adminService.updateLeaveTemplateRule({template_id:this.editActionId,template_name:this.leaveRuleForm.value.template_name,template_data:JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.fetch()):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(a))}))}fetch(n=null){null!=n&&(this.paginationOptions.page=n),this.spinner.show(),this.adminService.fetchLeaveTemplateRules({pageno:this.paginationOptions.page}).subscribe(t=>{"success"==t.status?(this.templateRows=t.leave_rule.docs,this.paginationOptions={hasNextPage:t.leave_rule.hasNextPage,hasPrevPage:t.leave_rule.hasPrevPage,limit:t.leave_rule.limit,nextPage:t.leave_rule.nextPage,page:t.leave_rule.page,pagingCounter:t.leave_rule.pagingCounter,prevPage:t.leave_rule.prevPage,totalDocs:t.leave_rule.totalDocs,totalPages:t.leave_rule.totalPages}):(this.toastr.error(t.message),this.templateRows=[],this.paginationOptions={hasNextPage:!1,hasPrevPage:!1,limit:d.DataTableLength,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1}),this.spinner.hide(),d.loadCustomScripts("customJsScript")},t=>{this.templateRows=[],this.paginationOptions={hasNextPage:!1,hasPrevPage:!1,limit:d.DataTableLength,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1},this.spinner.hide(),this.toastr.error(d.showServerErrorMessage(t)),d.loadCustomScripts("customJsScript")})}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteLeaveTemplateRule({template_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.fetch()):this.toastr.error(a.message)},a=>{this.toastr.error(d.showServerErrorMessage(a))}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}getLeaveTypeDetails(n,t=null){let a=this.leaveHeadMaster.find(r=>r.id==n);return a?t?a[t]:a:null}getTemplateDataForSubmit(){let n=[],t=!0,a=1;return this.leaveRuleForm.value.template_data.forEach(r=>{"yes"==r.carry_forward&&!r.carry_forward_years&&(t=!1,this.toastr.error("For Row "+a+": When the Carry Forward is selected as YES, you must enter the Carry Forward Years")),"earned"==r.leave_type?.head_type&&!r.no_of_working_day&&(t=!1,this.toastr.error("For Row "+a+": When the Leave Type is earned, you must enter the number of working days")),n.push({leave_type:r.leave_type?.id??"",restriction_on_availment:r.restriction_on_availment,no_of_working_day:r.no_of_working_day??"",no_of_day:r.no_of_day??"",restriction_tenure:r.restriction_tenure?.value??"",leave_tenure:r.leave_tenure?.value??"",restriction_days:r.restriction_days,carry_forward:r.carry_forward,cashable:r.cashable,carry_forward_years:r.carry_forward_years,effective_form:r.effective_form}),a++}),!!t&&(n.length>0?n:(this.toastr.error("You must add atleast one template to submit the details"),!1))}addLeaveHead(){d.resetForm(this.leaveHeadForm),$("#leavehead-form-modal").show()}submitLeaveHead(n){this.leaveHeadForm.markAllAsTouched(),d.scrollToQuery("p.text-danger"),this.leaveHeadForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createLeaveTemplateHead({full_name:this.leaveHeadForm.value.full_name??"",abbreviation:this.leaveHeadForm.value.abbreviation??"",head_type:this.leaveHeadForm.value.head_type?.value??"",head_id:this.editActionId??""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEntry(),this.fetchLeaveHeads()):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}cancelLeaveHeadEntry(){d.resetForm(this.leaveHeadForm),$("#leavehead-form-modal").hide()}templateLeaveTypeChanged(n){"earned"==this.leaveRuleForm.value.template_data[n]?.leave_type?.head_type?$("#workingdays-field-"+n).show():$("#workingdays-field-"+n).hide()}changeLeaveTypePublishStatus(n){this.spinner.show(),this.adminService.updateLeaveTemplateRulePublishStatus({template_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.fetch(),this.toastr.success(t.message)):this.toastr.error(t.message),this.spinner.hide()},t=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-leave-rule"]],decls:119,vars:24,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"br-pagebody"],["id","leave-rule-form",1,"br-section-wrapper"],[1,"d-flex","align-items-center","justify-content-end","mg-b-10"],[1,"d-md-flex","pd-y-20","pd-md-y-0"],[1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-md-l-10","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2",3,"click"],[3,"formGroup"],[1,"br-section-label","mb-3"],[4,"ngIf","ngIfElse"],["updateHeadingText",""],[1,"form-layout","form-layout-6"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],[1,"col-9","col-sm-9"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"table","table-bordered","define-leave-rule-table"],["formArrayName","template_data"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-center"],["type","button",1,"btn","btn-danger","pd-y-13","pd-x-20","bd-0","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2","wd-150","mg-r-5",3,"click"],["updateButton",""],["id","leavehead-form-modal",1,"bd_rightside","animate__animated","animate__slideInRight"],[1,"pd-20","pd-xs-40","mg-t-40",2,"width","100%"],[1,"tx-gray-800","tx-uppercase","tx-bold"],[1,"btn","btn-info","pull-right",2,"float","right","clear","both",3,"click"],[1,"fa","fa-times"],[1,"form-group"],["formControlName","head_type",1,"form-control",2,"padding","4px",3,"options","config"],["class","mt-1 text-danger",4,"ngIf"],["type","text","placeholder","Enter Full Name","formControlName","full_name",1,"form-control"],["type","text","placeholder","Abbreviation","formControlName","abbreviation",1,"form-control"],[1,"btn","btn-info","btn-block","pd-y-10","mg-b-30",3,"click"],[1,"br-section-wrapper"],[1,"br-section-label","mb-4"],[1,"table-wrapper"],[1,"table-responsive"],[1,"table","nowrap","wd-100p","table-bordered"],[1,""],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"rows","paginationOptions","onPageClicked"],[1,"error-element"],[3,"formGroupName"],[1,"tx-medium"],["formControlName","leave_type",1,"form-control",3,"options","config","change"],[1,"tx-medium","mt-3"],[1,"d-flex","flex-wrap"],[1,"col-sm-6","col-12","p-0"],[1,"rdiobox"],["type","radio","formControlName","restriction_on_availment","value","yes"],["type","radio","formControlName","restriction_on_availment","value","no"],[2,"display","none",3,"id"],["type","number","formControlName","no_of_working_day","placeholder","Number of Working Days",1,"form-control","wd-200"],["type","number","formControlName","no_of_day","placeholder","Days",1,"form-control","wd-200"],["formControlName","restriction_tenure",1,"form-control",3,"options","config"],["formControlName","leave_tenure",1,"form-control",3,"options","config"],["type","number","formControlName","restriction_days","placeholder","Days",1,"form-control","wd-200"],[2,"width","150px"],["formControlName","carry_forward","type","radio","value","yes"],["formControlName","carry_forward","type","radio","value","no"],["formControlName","cashable","type","radio","value","yes"],["formControlName","cashable","type","radio","value","no"],["type","number","formControlName","carry_forward_years","placeholder","Years",1,"form-control","wd-150"],["type","date","formControlName","effective_form","placeholder","Effective Form",1,"form-control","wd-150"],[1,"text-center",2,"vertical-align","middle !important","white-space","nowrap"],["data-toggle","tooltip","data-placement","top","title","Add New","type","button","class","btn btn-primary btn-icon mg-r-5",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Remove","type","button","class","btn btn-danger btn-icon",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Add New","type","button",1,"btn","btn-primary","btn-icon","mg-r-5",3,"click"],[2,"width","25px","height","25px"],[1,"fa","fa-plus"],["data-toggle","tooltip","data-placement","top","title","Remove","type","button",1,"btn","btn-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["add","","type","button",1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2","wd-150",3,"disabled","click"],["type","button",1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2","wd-150",3,"disabled","click"],[1,"mt-1","text-danger"],[1,"text-capitalize"],[1,"br-toggle","br-toggle-rounded","br-toggle-primary",3,"click"],[1,"br-toggle-switch"],["data-toggle","tooltip","data-placement","top","title","Edit","id","editButton-` + meta.row + `",1,"btn","btn-primary","btn-icon","mx-1",3,"click"],[1,"fa","fa-pen"],["data-toggle","tooltip","data-placement","top","title","Delete","id","deleteButton-`+ meta.row + `",1,"btn","btn-danger","btn-icon","mx-1",3,"click"],["colspan","100%",1,"text-center"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Leave Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Define Leave Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"button",12),e.\u0275\u0275listener("click",function(){return t.addLeaveHead()}),e.\u0275\u0275text(20,"Add Leave Heads"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"form",13)(22,"h6",14),e.\u0275\u0275template(23,Wn,2,0,"ng-container",15),e.\u0275\u0275template(24,Qn,1,0,"ng-template",null,16,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",17)(27,"div",18)(28,"div",19),e.\u0275\u0275text(29," Template Name\xa0"),e.\u0275\u0275elementStart(30,"span",20),e.\u0275\u0275text(31,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",21),e.\u0275\u0275element(33,"input",22),e.\u0275\u0275template(34,Zn,2,0,"p",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(35,"table",24),e.\u0275\u0275elementContainerStart(36,25),e.\u0275\u0275elementStart(37,"tbody"),e.\u0275\u0275template(38,ta,93,13,"tr",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",27)(40,"button",28),e.\u0275\u0275listener("click",function(){return t.cancelEntry()}),e.\u0275\u0275elementStart(41,"span"),e.\u0275\u0275text(42,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(43,na,4,1,"ng-container",15),e.\u0275\u0275template(44,aa,3,1,"ng-template",null,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",30)(47,"div",31)(48,"h6",32),e.\u0275\u0275text(49,"Add Leave Heads "),e.\u0275\u0275elementStart(50,"button",33),e.\u0275\u0275listener("click",function(){return t.cancelLeaveHeadEntry()}),e.\u0275\u0275element(51,"i",34),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"form",13)(53,"div",35)(54,"label"),e.\u0275\u0275text(55,"Leave Type\xa0"),e.\u0275\u0275elementStart(56,"span",20),e.\u0275\u0275text(57,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(58,"ngx-select-dropdown",36),e.\u0275\u0275template(59,ra,2,0,"p",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",35)(61,"label"),e.\u0275\u0275text(62,"Full Name\xa0"),e.\u0275\u0275elementStart(63,"span",20),e.\u0275\u0275text(64,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(65,"input",38),e.\u0275\u0275template(66,oa,2,0,"p",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(67,"div",35)(68,"label"),e.\u0275\u0275text(69,"Abbreviation\xa0"),e.\u0275\u0275elementStart(70,"span",20),e.\u0275\u0275text(71,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(72,"input",39),e.\u0275\u0275template(73,ia,2,0,"p",37),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"button",40),e.\u0275\u0275listener("click",function(r){return t.submitLeaveHead(r)}),e.\u0275\u0275elementStart(75,"span"),e.\u0275\u0275text(76,"Add"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(77,"div",8)(78,"div",41)(79,"h6",42),e.\u0275\u0275text(80,"All Leave Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"div",43)(82,"div",44)(83,"table",45)(84,"thead")(85,"tr")(86,"th",46),e.\u0275\u0275text(87,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",27),e.\u0275\u0275text(89,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",27),e.\u0275\u0275text(91,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th"),e.\u0275\u0275text(93,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th"),e.\u0275\u0275text(95,"Effective Form"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th"),e.\u0275\u0275text(97,"Leave Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"th"),e.\u0275\u0275text(99,"Leave Type Tenure"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th"),e.\u0275\u0275text(101,"Num Of Days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"th"),e.\u0275\u0275text(103,"Carry Forward"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"th"),e.\u0275\u0275text(105,"Carry Forward Years"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"th"),e.\u0275\u0275text(107,"Restriction Availment"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(108,"th"),e.\u0275\u0275text(109,"Restriction Tenure"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(110,"th"),e.\u0275\u0275text(111,"Restriction Days"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(112,"th"),e.\u0275\u0275text(113,"Is Cashable"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(114,"tbody"),e.\u0275\u0275template(115,pa,2,1,"ng-container",47),e.\u0275\u0275template(116,ua,3,0,"tr",48),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(117,"app-custom-pagination",49),e.\u0275\u0275listener("onPageClicked",function(r){return t.fetch(r)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(118,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(25),r=e.\u0275\u0275reference(45);e.\u0275\u0275advance(21),e.\u0275\u0275property("formGroup",t.leaveRuleForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.leaveRuleForm.controls.template_name.hasError("required")&&(t.leaveRuleForm.controls.template_name.dirty||t.leaveRuleForm.controls.template_name.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.getTemplateRows("template_data")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(9),e.\u0275\u0275property("formGroup",t.leaveHeadForm),e.\u0275\u0275advance(6),e.\u0275\u0275classProp("error",t.leaveHeadForm.controls.head_type.dirty||t.leaveHeadForm.controls.head_type.touched),e.\u0275\u0275property("options",t.leaveHeadTypeMaster)("config",e.\u0275\u0275pureFunction0(23,_a)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveHeadForm.controls.head_type.hasError("required")&&(t.leaveHeadForm.controls.head_type.dirty||t.leaveHeadForm.controls.head_type.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275classProp("error",t.leaveHeadForm.controls.full_name.dirty||t.leaveHeadForm.controls.full_name.touched),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveHeadForm.controls.full_name.hasError("required")&&(t.leaveHeadForm.controls.full_name.dirty||t.leaveHeadForm.controls.full_name.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275classProp("error",t.leaveHeadForm.controls.abbreviation.dirty||t.leaveHeadForm.controls.abbreviation.touched),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.leaveHeadForm.controls.abbreviation.hasError("required")&&(t.leaveHeadForm.controls.abbreviation.dirty||t.leaveHeadForm.controls.abbreviation.touched)),e.\u0275\u0275advance(42),e.\u0275\u0275property("ngForOf",t.templateRows),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t.templateRows.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",t.templateRows)("paginationOptions",t.paginationOptions)}},dependencies:[p.sg,p.O5,h.yS,w.fY,H.W,i._Y,i.Fj,i.wV,i._,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,y,x,p.uU],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:initial!important}.table-bordered[_ngcontent-%COMP%]{border:1px solid #dee2e6}.define-leave-rule-table[_ngcontent-%COMP%]   ngx-select-dropdown[_ngcontent-%COMP%]{width:200px;padding:4px}table.nowrap[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.nowrap[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;vertical-align:middle!important}.form-control.ng-touched.ng-valid[_ngcontent-%COMP%]{border-color:inherit!important}.from-pf[_ngcontent-%COMP%], .bd_rightside[_ngcontent-%COMP%]{width:450px;height:100%;position:fixed;overflow-y:auto;top:0;right:0;display:none;background:#fff;box-shadow:-5px 0 10px #a3a3a34d;-webkit-box-shadow:-5px 0px 10px rgba(163,163,163,.3);-moz-box-shadow:-5px 0px 10px rgba(163,163,163,.3);-o-box-shadow:-5px 0px 10px rgba(163,163,163,.3)}.from-pf[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .bd_rightside[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .from-pf[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   span.select2[_ngcontent-%COMP%], .bd_rightside[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   span.select2[_ngcontent-%COMP%], .from-pf[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .bd_rightside[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%!important}"]}),o})();function fa(o,l){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1," Define LWF Rule "),e.\u0275\u0275elementContainerEnd())}function ga(o,l){1&o&&e.\u0275\u0275text(0," Update LWF Rule ")}function ba(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function va(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ya(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",61)(1,"input",62),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.configLastSlab(a.target,"template_data"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Last Slab "),e.\u0275\u0275elementEnd()()}}function xa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.addTemplateRows("template_data"))}),e.\u0275\u0275elementStart(1,"div",66),e.\u0275\u0275element(2,"i",67),e.\u0275\u0275elementEnd()()}}function Sa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",68),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2).index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeTemplateRow("template_data",a))}),e.\u0275\u0275elementStart(1,"div",66),e.\u0275\u0275element(2,"i",69),e.\u0275\u0275elementEnd()()}}function Ea(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td")(1,"div"),e.\u0275\u0275template(2,xa,3,0,"button",63),e.\u0275\u0275template(3,Sa,3,0,"button",64),e.\u0275\u0275elementEnd()()),2&o){const n=e.\u0275\u0275nextContext().index,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.lwfRuleForm.value.wage_band&&t.getTemplateRows("template_data").length-1==n),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getTemplateRows("template_data").length>1)}}function Ca(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr",55),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275elementStart(2,"td"),e.\u0275\u0275template(3,ya,4,0,"label",56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275element(5,"input",57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275element(7,"input",58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275element(9,"input",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275element(11,"input",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Ea,4,2,"td",52),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext();let r,s;e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",(null==(r=a.getTemplateRows("template_data"))?null:r.length)==t+1),e.\u0275\u0275advance(2),e.\u0275\u0275property("readOnly",0==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band)||null==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band)),e.\u0275\u0275advance(2),e.\u0275\u0275property("readOnly",0==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band)||null==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",0!=(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band)&&null!=(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band)&&!(null!=(s=n.get("last_slab"))&&s.value))}}function wa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",61)(1,"input",62),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.configLastSlab(a.target,"template_data_2"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Last Slab"),e.\u0275\u0275elementEnd()()}}function ka(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",68),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2).index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeTemplateRow("template_data_2",a))}),e.\u0275\u0275elementStart(1,"div",66),e.\u0275\u0275element(2,"i",69),e.\u0275\u0275elementEnd()()}}function Ia(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"td",71)(1,"div",23)(2,"button",65),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.addTemplateRows("template_data_2"))}),e.\u0275\u0275elementStart(3,"div",66),e.\u0275\u0275element(4,"i",67),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(5,ka,3,0,"button",64),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",n.getTemplateRows("template_data_2").length>1)}}function Fa(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr",55),e.\u0275\u0275elementContainerStart(1),e.\u0275\u0275elementStart(2,"td"),e.\u0275\u0275template(3,wa,4,0,"label",56),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275element(5,"input",57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275element(7,"input",58),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275element(9,"input",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275element(11,"input",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,Ia,6,1,"td",70),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext();let r,s;e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",(null==(r=a.getTemplateRows("template_data_2"))?null:r.length)==t+1),e.\u0275\u0275advance(2),e.\u0275\u0275property("readOnly",0==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band_2)||null==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band_2)),e.\u0275\u0275advance(2),e.\u0275\u0275property("readOnly",0==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band_2)||null==(null==a.lwfRuleForm.value?null:a.lwfRuleForm.value.wage_band_2)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",a.lwfRuleForm.value.wage_band_2&&a.getTemplateRows("template_data_2").length-1==t&&!(null!=(s=n.get("last_slab"))&&s.value))}}function Ta(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",72),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.add(a))}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Save"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!n.lwfRuleForm.valid)}}function Aa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",72),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.edit(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.lwfRuleForm.valid)}}const Da=function(o,l){return{on:o,off:l}};function Pa(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td")(4,"div",73),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.changePublishStatus(r))}),e.\u0275\u0275element(5,"div",74),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"td",44)(7,"button",75),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.getEdit(r))}),e.\u0275\u0275elementStart(8,"div",66),e.\u0275\u0275element(9,"i",76),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"button",77),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.deleteItem(r))}),e.\u0275\u0275elementStart(11,"div",66),e.\u0275\u0275element(12,"i",69),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"td"),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275pipe(17,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"td",78),e.\u0275\u0275text(19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td"),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td"),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext();let r;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t+1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(12,Da,"published"==(null==n?null:n.publish_status),"privet"==(null==n?null:n.publish_status))),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate1(" ",n.state?n.state:"N/A"," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.effective_form?e.\u0275\u0275pipeBind2(17,9,n.effective_form,"mediumDate"):"N/A"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null!==(r=n.gross_type)&&void 0!==r?r:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",null!=n.period_one.from_month?a.showMonth(n.period_one.from_month)+" - ":"","",null!=n.period_one.to_month?a.showMonth(n.period_one.to_month):"N/A",""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",null!=n.period_two.from_month?a.showMonth(n.period_two.from_month)+" - ":"","",null!=n.period_two.to_month?a.showMonth(n.period_two.to_month):"N/A","")}}function Ra(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",79),e.\u0275\u0275text(2,"No records found"),e.\u0275\u0275elementEnd()())}const Ma=function(){return{search:!0,placeholder:"Select State",height:"200px"}},Oa=function(){return{search:!0,placeholder:"Choose One",height:"200px"}},Y=function(){return{search:!1,placeholder:"Form",height:"200px"}},Na=function(){return{search:!1,placeholder:"To",height:"200px"}};let La=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.toastr=a,this.adminService=r,this.spinner=s,this.datePipe=m,this.dtOptions={},this.Global=d,this.stateMaster=[],this.tenureMaster=[],this.templateRows=[],this.lwfRuleForm=n.group({state:[null,i.kI.compose([i.kI.required])],effective_form:[null,i.kI.compose([i.kI.required])],from_date:[null,i.kI.compose([i.kI.required])],to_date:[null,i.kI.compose([i.kI.required])],wage_band:[null,i.kI.compose([])],gross_type:[null,i.kI.compose([i.kI.required])],from_date_2:[null,i.kI.compose([i.kI.required])],to_date_2:[null,i.kI.compose([i.kI.required])],wage_band_2:[null,i.kI.compose([])],template_data:this.formBuilder.array([this.initTemplateRows("template_data")]),template_data_2:this.formBuilder.array([this.initTemplateRows("template_data")]),publish_status:[null,i.kI.compose([i.kI.required])]}),this.lwfRuleForm.get("wage_band")?.value||this.lwfRuleForm.get("template_data")?.value?.length&&this.getTemplateRows("template_data")[0].get("last_slab")?.disable(),this.lwfRuleForm.get("wage_band_2")?.value||this.lwfRuleForm.get("template_data_2")?.value?.length&&this.getTemplateRows("template_data_2")[0].get("last_slab")?.disable(),this.editActionId="",this.tenureMaster=[{value:"Annualy",description:"Annually"},{value:"Quaterly",description:"Quaterly"},{value:"Monthly",description:"Monthly"}],this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.paginationOptions={hasNextPage:!1,hasPrevPage:!1,limit:d.DataTableLength,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1}}ngOnInit(){var n=this;return(0,g.Z)(function*(){n.titleService.setTitle("LWF Rule - "+d.AppName),yield n.fetchStateMaster(),n.fetch()})()}initTemplateRows(n,t={},a=!1){switch(n){case"template_data":case"template_data_2":return this.formBuilder.group({wage_from:[t.wage_from??null,i.kI.compose([])],wage_to:[t.wage_to??null,i.kI.compose([])],employee_contribution:[t.employee_contribution??null,i.kI.compose([i.kI.required])],employer_contribution:[t.employer_contribution??null,i.kI.compose([i.kI.required])],last_slab:[a,i.kI.compose([i.kI.required])]});default:return this.formBuilder.group({})}}getTemplateRows(n){return this.lwfRuleForm.get(n).controls}removeTemplateRow(n,t){this.lwfRuleForm.get(n).removeAt(t)}addTemplateRows(n,t={},a=!1){"yes"==a?a=!0:"no"==a&&(a=!1),this.lwfRuleForm.get(n).push(this.initTemplateRows(n,t,a)),a&&this.configLastSlab({checked:a},n),d.loadCustomScripts("customJsScript")}resetAllTemplateRows(n=!1){let t=["template_data"];t.forEach(a=>{this.lwfRuleForm.get(a).clear()}),0==n&&t.forEach(a=>{this.addTemplateRows(a)})}fetchStateMaster(){const n=this;return new Promise((t,a)=>{n.spinner.show(),n.adminService.fetchStates().subscribe(r=>{if("success"==r.status){n.stateMaster=[];for(const s in r.state_list[0].states)if(Object.prototype.hasOwnProperty.call(r.state_list[0].states,s)){const m=r.state_list[0].states[s];n.stateMaster.push({state_code:m.state_code,description:m.name})}}else n.toastr.error(r.message);n.spinner.hide(),t(!0)},r=>{n.toastr.error(d.showServerErrorMessage(r)),n.spinner.hide(),t(!0)})})}cancelEntry(n=!1){this.editActionId="",this.resetAllTemplateRows(n),d.resetForm(this.lwfRuleForm),this.lwfRuleForm.controls.template_data.clear(),this.addTemplateRows("template_data"),this.lwfRuleForm.controls.template_data_2.clear(),this.addTemplateRows("template_data_2"),d.scrollToQuery("#lwf-rule-form")}getEdit(n){this.cancelEntry(!0),this.editActionId=n._id;var t=new p.uU("en-US");this.lwfRuleForm.patchValue({state:this.stateMaster.find(a=>a.state_code==n.state)??null,gross_type:n.gross_type,effective_form:n.effective_form?t.transform(n.effective_form,"yyyy-MM-dd"):null,wage_band:"yes"==n.period_one.wage_band,wage_band_2:"yes"==n.period_two.wage_band,from_date:d.monthMaster.find(a=>a.index==n.period_one.from_month)??null,to_date:d.monthMaster.find(a=>a.index==n.period_one.to_month)??null,from_date_2:d.monthMaster.find(a=>a.index==n.period_two.from_month)??null,to_date_2:d.monthMaster.find(a=>a.index==n.period_two.to_month)??null}),this.lwfRuleForm.controls.template_data.clear(),n.period_one.lwf_slab.forEach(a=>{this.addTemplateRows("template_data",{wage_from:a.wage_from??null,wage_to:a.wage_to??null,employee_contribution:a.employee_contribution??null,employer_contribution:a.employer_contribution??null,last_slab:a.last_slab},a.last_slab)}),this.lwfRuleForm.controls.template_data_2.clear(),n.period_two.lwf_slab.forEach(a=>{this.addTemplateRows("template_data_2",{wage_from:a.wage_from??null,wage_to:a.wage_to??null,employee_contribution:a.employee_contribution??null,employer_contribution:a.employer_contribution??null,last_slab:a.last_slab},a.last_slab)}),d.scrollToQuery("#lwf-rule-form")}add(n){this.lwfRuleForm.markAllAsTouched(),d.scrollToQuery("p.text-danger");let t=this.getTemplateDataForSubmit(),a=this.getTemplateDataForSubmit_2();if(this.lwfRuleForm.valid&&t){n.target.classList.add("btn-loading");let r=this.lwfRuleForm.value;r={state:this.lwfRuleForm.value.state?.state_code??"",gross_type:this.lwfRuleForm.value?.gross_type??"",effective_form:this.lwfRuleForm.value?.effective_form??"",period_one:JSON.stringify({wage_band:this.lwfRuleForm.value?.wage_band?"yes":"no",from_month:this.lwfRuleForm.value.from_date?.index??"",to_month:this.lwfRuleForm.value.to_date?.index??"",lwf_slab:t}),period_two:JSON.stringify({wage_band:this.lwfRuleForm.value?.wage_band_2?"yes":"no",from_month:this.lwfRuleForm.value.from_date_2?.index??"",to_month:this.lwfRuleForm.value.to_date_2.index??"",lwf_slab:a})},this.adminService.createLwfRule(r).subscribe(s=>{"success"==s.status?(this.toastr.success(s.message),this.cancelEntry(),this.fetch()):this.toastr.error("val_err"==s.status?d.showValidationMessage(s.val_msg):s.message),n.target.classList.remove("btn-loading")},s=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(s))})}}edit(n){this.lwfRuleForm.markAllAsTouched(),d.scrollToQuery("p.text-danger");let t=this.getTemplateDataForSubmit(),a=this.getTemplateDataForSubmit_2();if(this.lwfRuleForm.valid&&t){n.target.classList.add("btn-loading");let r=this.lwfRuleForm.value;r={template_id:this.editActionId,publish_status:"published",state:this.lwfRuleForm.value.state?.state_code??"",gross_type:this.lwfRuleForm.value?.gross_type??"",effective_form:this.lwfRuleForm.value?.effective_form??"",period_one:JSON.stringify({wage_band:this.lwfRuleForm.value?.wage_band?"yes":"no",from_month:this.lwfRuleForm.value.from_date?.index??"",to_month:this.lwfRuleForm.value.to_date?.index??"",lwf_slab:t}),period_two:JSON.stringify({wage_band:this.lwfRuleForm.value?.wage_band_2?"yes":"no",from_month:this.lwfRuleForm.value.from_date_2?.index??"",to_month:this.lwfRuleForm.value.to_date_2.index??"",lwf_slab:a})},this.adminService.updateLwfRule(r).subscribe(s=>{"success"==s.status?(this.toastr.success(s.message),this.fetch()):this.toastr.error("val_err"==s.status?d.showValidationMessage(s.val_msg):s.message),n.target.classList.remove("btn-loading")},s=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(s))})}}fetch(n=null){null!=n&&(this.paginationOptions.page=n),this.spinner.show(),this.adminService.fetchLwfRules({pageno:this.paginationOptions.page}).subscribe(t=>{"success"==t.status?(this.templateRows=t.lwf_rule.docs,this.paginationOptions={hasNextPage:t.lwf_rule.hasNextPage,hasPrevPage:t.lwf_rule.hasPrevPage,limit:t.lwf_rule.limit,nextPage:t.lwf_rule.nextPage,page:t.lwf_rule.page,pagingCounter:t.lwf_rule.pagingCounter,prevPage:t.lwf_rule.prevPage,totalDocs:t.lwf_rule.totalDocs,totalPages:t.lwf_rule.totalPages}):(this.toastr.error(t.message),this.templateRows=[],this.paginationOptions={hasNextPage:!1,hasPrevPage:!1,limit:d.DataTableLength,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1}),this.spinner.hide(),d.loadCustomScripts("customJsScript")},t=>{this.templateRows=[],this.paginationOptions={hasNextPage:!1,hasPrevPage:!1,limit:d.DataTableLength,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1},this.spinner.hide(),this.toastr.error(d.showServerErrorMessage(t)),d.loadCustomScripts("customJsScript")})}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteLwfRule({template_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.fetch()):this.toastr.error(a.message)},a=>{this.toastr.error(d.showServerErrorMessage(a))}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}getStateDetails(n,t=null){let a=this.stateMaster.find(r=>r.state_code==n);return a?t?a[t]:a:null}getTemplateDataForSubmit(){let n=[],t=!0,a=1;return this.lwfRuleForm.value.template_data.forEach(r=>{1==r.wage_band&&!(r.wage_from&&r.wage_to)&&(t=!1,this.toastr.error("For Row "+a+": When the wage band is enabled, please enter starting and ending wage value")),n.push({wage_from:r.wage_from??"",wage_to:r.wage_to??"",employee_contribution:r.employee_contribution??"",employer_contribution:r.employer_contribution??"",last_slab:r.last_slab}),a++}),!!t&&(n.length>0?n:(this.toastr.error("You must add atleast one template to submit the details"),!1))}getTemplateDataForSubmit_2(){let n=[],t=!0,a=1;return this.lwfRuleForm.value.template_data_2.forEach(r=>{1==r.wage_band&&!(r.wage_from&&r.wage_to)&&(t=!1,this.toastr.error("For Row "+a+": When the wage band is enabled, please enter starting and ending wage value")),n.push({wage_from:r.wage_from??"",wage_to:r.wage_to??"",employee_contribution:r.employee_contribution??"",employer_contribution:r.employer_contribution??"",last_slab:r.last_slab}),a++}),!!t&&(n.length>0?n:(this.toastr.error("You must add atleast one template to submit the details"),!1))}changePublishStatus(n){this.adminService.updateLwfRulePublishStatus({lwf_rule_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.fetch(),this.toastr.success(t.message)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}show_addmore(n,t="template_data"){if(n.target.checked){let a=this.lwfRuleForm.get(t)?.value?.length-1;a>=0&&this.getTemplateRows(t)[a].get("last_slab")?.enable()}else{let a=this.lwfRuleForm.controls[t].value[0];this.lwfRuleForm.get(t)?.setValue(this.initTemplateRows(t,a)),this.lwfRuleForm.controls[t].reset(),this.addTemplateRows(t,a);let r=this.lwfRuleForm.get(t)?.value?.length-1;r>=0&&this.getTemplateRows(t)[r].get("last_slab")?.disable()}}showMonth(n){return d.monthMaster.find(t=>t.index==n)?.sf}configLastSlab(n,t){let a=this.lwfRuleForm.get(t)?.value?.length-1;if(a>=0){const r=this.getTemplateRows(t)[a];n.checked?(r.get("wage_to")?.disable(),r.get("wage_to")?.clearValidators(),r.get("wage_to")?.setValue(null),r.get("wage_to")?.updateValueAndValidity()):(r.get("wage_to")?.enable(),r.get("wage_to")?.setValidators([i.kI.required]),r.get("wage_to")?.setValue(null),r.get("wage_to")?.updateValueAndValidity())}}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-lwf-rule"]],decls:144,vars:31,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/company",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"mg-b-0"],[1,"br-pagebody"],["id","lwf-rule-form",1,"br-section-wrapper"],[3,"formGroup"],[1,"br-section-label","mb-3"],[4,"ngIf","ngIfElse"],["updateHeadingText",""],[1,"form-layout","form-layout-6"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["formControlName","state",1,"form-control",3,"options","config"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,""],[1,"table","table-bordered","define-lwf-rule-table","nowrap","table-responsive"],[1,"tx-medium","m-0"],["type","date","formControlName","effective_form","placeholder","Select a date",1,"form-control","wd-200"],[1,"row"],[1,"col-sm-4"],[1,"rdiobox"],["type","radio","formControlName","gross_type","value","rate"],[2,"padding-left","1px"],["type","radio","formControlName","gross_type","value","earned"],["type","radio","formControlName","gross_type","value","na"],[1,"ckbox","m-0"],["type","checkbox","formControlName","wage_band",3,"change"],["formControlName","from_date",1,"form-control",3,"options","config"],["formControlName","to_date",1,"form-control",3,"options","config"],["formArrayName","template_data"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","checkbox","formControlName","wage_band_2",3,"change"],["formControlName","from_date_2",1,"form-control",3,"options","config"],["formControlName","to_date_2",1,"form-control",3,"options","config"],["formArrayName","template_data_2"],[1,"text-center"],["type","button",1,"btn","btn-danger","pd-y-13","pd-x-20","bd-0","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2","wd-150","mg-r-5",3,"click"],["updateButton",""],[1,"br-section-wrapper"],[1,"br-section-label","mb-4"],[1,"table-wrapper"],[1,"table","nowrap","wd-100p","table-bordered",2,"width","100%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"rows","paginationOptions","onPageClicked"],[1,"error-element"],[3,"formGroupName"],["class","ckbox",4,"ngIf"],["type","number","formControlName","wage_from","placeholder","Enter Starting Wage",1,"form-control","wd-200",3,"readOnly"],["type","number","formControlName","wage_to","placeholder","Enter Ending Wage",1,"form-control","wd-200",3,"readOnly"],["type","number","formControlName","employee_contribution","placeholder","Enter Employee Contribution",1,"form-control"],["type","number","formControlName","employer_contribution","placeholder","Enter Employer Contribution",1,"form-control"],[1,"ckbox"],["type","checkbox","formControlName","last_slab",3,"change"],["data-toggle","tooltip","data-placement","top","title","Add New","type","button","class","btn btn-primary btn-icon mg-r-5",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Remove","type","button","class","btn btn-danger btn-icon",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Add New","type","button",1,"btn","btn-primary","btn-icon","mg-r-5",3,"click"],[2,"width","25px","height","25px"],[1,"fa","fa-plus"],["data-toggle","tooltip","data-placement","top","title","Remove","type","button",1,"btn","btn-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["class","","style","vertical-align:bottom !important;",4,"ngIf"],[1,"",2,"vertical-align","bottom !important"],["type","button",1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2","wd-150",3,"disabled","click"],[1,"br-toggle","br-toggle-rounded","br-toggle-primary",3,"ngClass","click"],[1,"br-toggle-switch"],["data-toggle","tooltip","data-placement","top","title","Edit","id","editButton-` + meta.row + `",1,"btn","btn-primary","btn-icon","mx-1",3,"click"],[1,"fa","fa-pen"],["data-toggle","tooltip","data-placement","top","title","Delete","id","deleteButton-`+ meta.row + `",1,"btn","btn-danger","btn-icon","mx-1",3,"click"],[1,"text-uppercase"],["colspan","12",1,"text-center"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"LWF Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"LWF Rule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Define State-wise LWF"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"form",11)(20,"h6",12),e.\u0275\u0275template(21,fa,2,0,"ng-container",13),e.\u0275\u0275template(22,ga,1,0,"ng-template",null,14,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",15)(25,"div",16)(26,"div",17),e.\u0275\u0275text(27," State\xa0"),e.\u0275\u0275elementStart(28,"span",18),e.\u0275\u0275text(29,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",17),e.\u0275\u0275element(31,"ngx-select-dropdown",19),e.\u0275\u0275template(32,ba,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",21),e.\u0275\u0275text(34," Publish Status\xa0"),e.\u0275\u0275elementStart(35,"span",18),e.\u0275\u0275text(36,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",17),e.\u0275\u0275element(38,"ngx-select-dropdown",22),e.\u0275\u0275template(39,va,2,0,"p",20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(40,"div",23)(41,"table",24)(42,"tbody")(43,"tr")(44,"td")(45,"label",25),e.\u0275\u0275text(46,"Effective From\xa0"),e.\u0275\u0275elementStart(47,"span",18),e.\u0275\u0275text(48,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(49,"td"),e.\u0275\u0275element(50,"input",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"td")(52,"label",25),e.\u0275\u0275text(53,"Gross Type\xa0"),e.\u0275\u0275elementStart(54,"span",18),e.\u0275\u0275text(55,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(56,"td")(57,"div",27)(58,"div",28)(59,"label",29),e.\u0275\u0275element(60,"input",30),e.\u0275\u0275elementStart(61,"span",31),e.\u0275\u0275text(62,"Rate of Gross"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(63,"div",28)(64,"label",29),e.\u0275\u0275element(65,"input",32),e.\u0275\u0275elementStart(66,"span",31),e.\u0275\u0275text(67,"Earned Gross "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(68,"div",28)(69,"label",29),e.\u0275\u0275element(70,"input",33),e.\u0275\u0275elementStart(71,"span",31),e.\u0275\u0275text(72,"NA"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(73,"tr")(74,"td")(75,"label",34)(76,"input",35),e.\u0275\u0275listener("change",function(r){return t.show_addmore(r,"template_data")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"span"),e.\u0275\u0275text(78,"Wage Band"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(79,"td")(80,"label",25),e.\u0275\u0275text(81,"Period\xa0"),e.\u0275\u0275elementStart(82,"span",18),e.\u0275\u0275text(83,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(84,"td"),e.\u0275\u0275element(85,"ngx-select-dropdown",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"td"),e.\u0275\u0275element(87,"ngx-select-dropdown",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(88,38),e.\u0275\u0275template(89,Ca,13,5,"tr",39),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(90,"tr")(91,"td")(92,"label",34)(93,"input",40),e.\u0275\u0275listener("change",function(r){return t.show_addmore(r,"template_data_2")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"span"),e.\u0275\u0275text(95,"Wage Band"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(96,"td")(97,"label",25),e.\u0275\u0275text(98,"Period\xa0"),e.\u0275\u0275elementStart(99,"span",18),e.\u0275\u0275text(100,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(101,"td"),e.\u0275\u0275element(102,"ngx-select-dropdown",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(103,"td"),e.\u0275\u0275element(104,"ngx-select-dropdown",42),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(105,43),e.\u0275\u0275template(106,Fa,13,5,"tr",39),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(107,"div",44)(108,"button",45),e.\u0275\u0275listener("click",function(){return t.cancelEntry()}),e.\u0275\u0275elementStart(109,"span"),e.\u0275\u0275text(110,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(111,Ta,4,1,"ng-container",13),e.\u0275\u0275template(112,Aa,3,1,"ng-template",null,46,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(114,"div",9)(115,"div",47)(116,"h6",48),e.\u0275\u0275text(117,"All LWF Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(118,"div",49)(119,"div",23)(120,"table",50)(121,"thead")(122,"tr")(123,"th",23),e.\u0275\u0275text(124,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"th",23),e.\u0275\u0275text(126,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"th",44),e.\u0275\u0275text(128,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(129,"th"),e.\u0275\u0275text(130,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(131,"th"),e.\u0275\u0275text(132,"Effective From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(133,"th"),e.\u0275\u0275text(134,"Gross Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(135,"th"),e.\u0275\u0275text(136,"P1"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(137,"th"),e.\u0275\u0275text(138,"P2"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(139,"tbody"),e.\u0275\u0275template(140,Pa,24,15,"tr",51),e.\u0275\u0275template(141,Ra,3,0,"tr",52),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(142,"app-custom-pagination",53),e.\u0275\u0275listener("onPageClicked",function(r){return t.fetch(r)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(143,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(23),r=e.\u0275\u0275reference(113);e.\u0275\u0275advance(19),e.\u0275\u0275property("formGroup",t.lwfRuleForm),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(10),e.\u0275\u0275property("options",t.stateMaster)("config",e.\u0275\u0275pureFunction0(25,Ma)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.lwfRuleForm.controls.state.hasError("required")&&(t.lwfRuleForm.controls.state.dirty||t.lwfRuleForm.controls.state.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(26,Oa)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.lwfRuleForm.controls.publish_status.hasError("required")&&t.lwfRuleForm.controls.publish_status.dirty),e.\u0275\u0275advance(46),e.\u0275\u0275property("options",t.Global.monthMaster)("config",e.\u0275\u0275pureFunction0(27,Y)),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.Global.monthMaster)("config",e.\u0275\u0275pureFunction0(28,Na)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.getTemplateRows("template_data")),e.\u0275\u0275advance(13),e.\u0275\u0275property("options",t.Global.monthMaster)("config",e.\u0275\u0275pureFunction0(29,Y)),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.Global.monthMaster)("config",e.\u0275\u0275pureFunction0(30,Y)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.getTemplateRows("template_data_2")),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(29),e.\u0275\u0275property("ngForOf",t.templateRows),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t.templateRows.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",t.templateRows)("paginationOptions",t.paginationOptions)}},dependencies:[p.mk,p.sg,p.O5,h.yS,w.fY,H.W,i._Y,i.Fj,i.wV,i.Wl,i._,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,y,x,p.uU],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:initial!important}td[_ngcontent-%COMP%]{border:1px solid #dee2e6!important}.define-lwf-rule-table[_ngcontent-%COMP%]   ngx-select-dropdown[_ngcontent-%COMP%]{width:200px;padding:4px}table.nowrap[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table.nowrap[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{white-space:nowrap;vertical-align:middle!important}.form-control.ng-touched.ng-valid[_ngcontent-%COMP%]{border-color:inherit!important}table[_ngcontent-%COMP%]{border-collapse:collapse}"]}),o})();function Va(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",44),e.\u0275\u0275text(1,"Define Over Time Policy Rule"),e.\u0275\u0275elementEnd())}function qa(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",44),e.\u0275\u0275text(1,"Update Over Time Policy Rule"),e.\u0275\u0275elementEnd())}function $a(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",45),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ba(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"label",46),e.\u0275\u0275element(1,"input",47),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function ja(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",45),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ua(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",45),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Ha(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",45),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ya(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",48),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.overtimePolicyForm.valid)}}function Ga(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",49),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",48),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Rule"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.overtimePolicyForm.valid)}}const Ja=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let za=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.adminService=r,this.datePipe=s,this.dtOptions={},this.dtOptionsHistory={},this.registerTypes=[],this.viewPolicyDetail=null,this.initialValueBeforeUpdate=null,this.editActionId="",this.overTimeMaster=[{value:"hourly_fix",description:"Amount Rate Hourly Basis"},{value:"daily_fix",description:"Amount Rate Daily Basis"},{value:"hourly_per",description:"Percentage Rate Hourly Basis"},{value:"daily_per",description:"Percentage Daily Basis"}],this.overtimePolicyForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],overtime_type:[null,i.kI.compose([i.kI.required])],overtime_rate:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],publish_status:[null,i.kI.compose([i.kI.required])]}),this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}]}ngOnInit(){this.titleService.setTitle("Over Time Policy Rule - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.template_name}},{render:function(n,t,a,r){switch(a.overtime_type){case"hourly_fix":return"Amount Rate Hourly Basis";case"daily_fix":return"Amount Rate Daily Basis";case"hourly_per":return"Percentage Rate Hourly Basis";case"daily_per":return"Percentage Daily Basis";default:return a.overtime_type}}},{render:function(n,t,a,r){return a.overtime_rate}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchOvertimePolicies({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.overtime_policy.totalDocs,recordsFiltered:a.overtime_policy.totalDocs,data:a.overtime_policy.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name},orderable:!0,name:"template_name"},{render:function(n,t,a,r){switch(a.overtime_type){case"hourly_fix":return"Amount Rate Hourly Basis";case"daily_fix":return"Amount Rate Daily Basis";case"hourly_per":return"Percentage Rate Hourly Basis";case"daily_per":return"Percentage Daily Basis";default:return a.overtime_type}},orderable:!0,name:"overtime_type"},{render:function(n,t,a,r){return a.overtime_rate},orderable:!0,name:"overtime_rate"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changePublishStatus(n){this.adminService.updateOvertimePublishStatus({overtime_policy_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getEdit(n){this.editActionId=n._id,this.overtimePolicyForm.setValue({template_name:n.template_name,overtime_type:n.overtime_type,overtime_rate:n.overtime_rate,publish_status:this.publishStatusMaster.find(t=>t.value==n.publish_status)}),this.initialValueBeforeUpdate={overtime_policy_id:this.editActionId,template_name:this.overtimePolicyForm.value.template_name.toString().trim(),overtime_type:this.overtimePolicyForm.value.overtime_type.toString().trim(),overtime_rate:this.overtimePolicyForm.value.overtime_rate.toString().trim(),publish_status:this.overtimePolicyForm.value.publish_status.value},$("html, body").animate({scrollTop:$("#policy-submit-section").position().top})}cancelEdit(){this.editActionId="",this.overtimePolicyForm.reset();for(const n in this.overtimePolicyForm.controls)if(Object.prototype.hasOwnProperty.call(this.overtimePolicyForm.controls,n)){const t=this.overtimePolicyForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.overtimePolicyForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createOvertimePolicy({template_name:this.overtimePolicyForm.value.template_name,overtime_type:this.overtimePolicyForm.value.overtime_type,overtime_rate:this.overtimePolicyForm.value.overtime_rate,publish_status:this.overtimePolicyForm.value.publish_status.value}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteOvertimePolicy({overtime_policy_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.overtimePolicyForm.valid){const t={overtime_policy_id:this.editActionId,template_name:this.overtimePolicyForm.value.template_name.toString().trim(),overtime_type:this.overtimePolicyForm.value.overtime_type.toString().trim(),overtime_rate:this.overtimePolicyForm.value.overtime_rate.toString().trim(),publish_status:this.overtimePolicyForm.value.publish_status.value};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateOvertimePolicy(t).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.initialValueBeforeUpdate=t,$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}showUpdateHistory(n){this.viewPolicyDetail=n,null!=this.viewPolicyDetail.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPolicyDetail&&null!=this.viewPolicyDetail.history&&Array.isArray(this.viewPolicyDetail.history)?this.viewPolicyDetail.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-overtime-policy"]],decls:111,vars:16,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],["id","policy-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],[1,"col-9","col-sm-9"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],["class","rdiobox",4,"ngFor","ngForOf"],["type","number","formControlName","overtime_rate",1,"form-control"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"rdiobox"],["formControlName","overtime_type","type","radio",3,"value"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Over Time Policy Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Over Time Policy Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,Va,2,0,"h6",10),e.\u0275\u0275template(18,qa,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," Template Name\xa0"),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,$a,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",14)(31,"div",15),e.\u0275\u0275text(32," Over-Time Type\xa0"),e.\u0275\u0275elementStart(33,"span",16),e.\u0275\u0275text(34,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",17),e.\u0275\u0275template(36,Ba,4,2,"label",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",14)(38,"div",15),e.\u0275\u0275text(39," Rate (Rs / %)\xa0"),e.\u0275\u0275elementStart(40,"span",16),e.\u0275\u0275text(41,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",17),e.\u0275\u0275element(43,"input",21),e.\u0275\u0275template(44,ja,2,0,"p",19),e.\u0275\u0275template(45,Ua,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",14)(47,"div",15),e.\u0275\u0275text(48," Publish Status\xa0"),e.\u0275\u0275elementStart(49,"span",16),e.\u0275\u0275text(50,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",17),e.\u0275\u0275element(52,"ngx-select-dropdown",22),e.\u0275\u0275template(53,Ha,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",23)(55,"div",24),e.\u0275\u0275template(56,Ya,3,1,"button",25),e.\u0275\u0275template(57,Ga,6,1,"ng-template",null,26,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(59,"div",27)(60,"div",9)(61,"h6",28),e.\u0275\u0275text(62,"Over time policy template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div",29)(64,"table",30)(65,"thead")(66,"tr")(67,"th",31),e.\u0275\u0275text(68,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"th",31),e.\u0275\u0275text(70,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"th",31),e.\u0275\u0275text(72,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(73,"th",31),e.\u0275\u0275text(74,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"th",31),e.\u0275\u0275text(76,"OT Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"th",31),e.\u0275\u0275text(78,"Rate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(79,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(80,"button",32),e.\u0275\u0275elementStart(81,"div",33)(82,"div",34)(83,"div",35)(84,"div",36)(85,"h6",37),e.\u0275\u0275text(86,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"button",38)(88,"span",39),e.\u0275\u0275text(89,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(90,"div",40)(91,"div",31)(92,"table",41)(93,"thead")(94,"th",31),e.\u0275\u0275text(95,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th",31),e.\u0275\u0275text(97,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"th",31),e.\u0275\u0275text(99,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th",31),e.\u0275\u0275text(101,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"th",31),e.\u0275\u0275text(103,"OT Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"th",31),e.\u0275\u0275text(105,"Rate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(106,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(107,"div",42)(108,"button",43),e.\u0275\u0275text(109,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(110,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(58);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.overtimePolicyForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.overtimePolicyForm.controls.template_name.hasError("required")&&t.overtimePolicyForm.controls.template_name.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.overTimeMaster),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.overtimePolicyForm.controls.overtime_rate.hasError("required")&&t.overtimePolicyForm.controls.overtime_rate.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.overtimePolicyForm.controls.overtime_rate.hasError("pattern")&&t.overtimePolicyForm.controls.overtime_rate.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(15,Ja)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.overtimePolicyForm.controls.publish_status.hasError("required")&&t.overtimePolicyForm.controls.publish_status.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(16),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i._,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function Wa(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",42),e.\u0275\u0275text(1," Define Pay Slip Template "),e.\u0275\u0275elementEnd())}function Qa(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",42),e.\u0275\u0275text(1,"Update Pay Slip Template"),e.\u0275\u0275elementEnd())}function Za(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Ka(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",43),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Xa(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function er(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",43),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function tr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function nr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",43),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ar(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",24)(1,"label",25),e.\u0275\u0275element(2,"input",46),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function rr(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",44)(2,"div",33),e.\u0275\u0275text(3,"Header Section"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,ar,5,2,"div",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.employeeDetailsMaster)}}function or(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",24)(1,"label",25),e.\u0275\u0275element(2,"input",47),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function ir(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",44)(2,"div",33),e.\u0275\u0275text(3,"Payroll Section"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,or,5,2,"div",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.salaryDeductionsMaster)}}function lr(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",24)(1,"label",25),e.\u0275\u0275element(2,"input",48),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function sr(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",44)(2,"div",33),e.\u0275\u0275text(3,"Others Section"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"div",15),e.\u0275\u0275template(5,lr,5,2,"div",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("ngForOf",n.otherPaymentMaster)}}function dr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",29),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function mr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",43),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function cr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",43),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function pr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",49),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save Template"),e.\u0275\u0275elementEnd()()}}function ur(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",50),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEntry())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",51),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}}const _r=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let hr=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.Global=d,this.editActionId="",this.employeeDetailsMaster=[{value:"company_info",description:"Company Information"},{value:"payslip_period",description:"Pay Slip Period"},{value:"emp_code",description:"Emp Code"},{value:"emp_name",description:"Emp Name"},{value:"client",description:"Client"},{value:"branch",description:"Branch"},{value:"department",description:"Department"},{value:"hod",description:"HOD"},{value:"gender",description:"Gender"},{value:"dob",description:"DOB"},{value:"doj",description:"DOJ"},{value:"email_id",description:"Email ID"},{value:"phone",description:"Phone"},{value:"bank_name",description:"Bank Name"},{value:"account_no",description:"Account No"},{value:"ifsc_code",description:"IFSC Code"},{value:"account_type",description:"Account Type"},{value:"aadhar_no",description:"Aadhar No"},{value:"pan_no",description:"PAN No"},{value:"uan_no",description:"UAN No"},{value:"pf_no",description:"PF No"},{value:"esic_ip_no",description:"ESIC/IP No"},{value:"month_days",description:"Month Days"},{value:"week_off",description:"Week Offs"},{value:"pay_days",description:"Pay days"},{value:"paid_leave",description:"Paid Leave"},{value:"holidays",description:"Holidays"},{value:"present_days",description:"Present Days"},{value:"lop_days",description:"LOP Days"},{value:"arrear_leave",description:"Arrear Period"}],this.salaryDeductionsMaster=[{value:"salary_heads",description:"Salary Heads"},{value:"incentive",description:"Incentive"},{value:"bonus",description:"Bonus"},{value:"ex_gratia",description:"Ex-Gratia"},{value:"ot",description:"Overtime"},{value:"arrear",description:"Arrear"},{value:"leave_encash",description:"Leave Encash"},{value:"extra_earnings",description:"Extra Earnings"},{value:"deduction",description:"Deductions"},{value:"er_contri",description:"ER Contri"},{value:"gross",description:"Gross"},{value:"net_pay",description:"Net Pay"},{value:"ctc",description:"CTC"},{value:"shift_allowance",description:"Shift Allowance"}],this.otherPaymentMaster=[{value:"advance",description:"Advance"},{value:"reimbursement",description:"Reimbursement"},{value:"leave_details",description:"Leave Details"},{value:"advance_details",description:"Advance Details"}],this.otherDeductionMaster=[{value:"advance-recover1",description:"Advance Recover 1"},{value:"advance-recover2",description:"Advance Recover 2"},{value:"advance-recover3",description:"Advance Recover 3"},{value:"advance-recover4",description:"Advance Recover 4"}],this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.paySlipForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],company_info:[null,i.kI.compose([i.kI.required])],employee_details:[null],payroll_details:[null],other_details:[null],other_payment:[null],other_deduction:[null],signature_message:[null,i.kI.compose([])],leave_status:[null],tds_status:[null],publish_status:[null],payslip_temp_company_logo:[null,i.kI.compose([i.kI.required])],payslip_temp_company_logo_file:[null,i.kI.compose([i.kI.required])],logo_path:[null],logo_status:[null]}),this.fetch()}ngOnInit(){this.titleService.setTitle("Pay Slip Template - "+d.AppName)}onFileChanged(n,t,a,r){n.target.files.length>0&&t.patchValue({[r]:n.target.files[0]})}create(n){this.paySlipForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.paySlipForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createPaySlipTemplate({template_name:this.paySlipForm.value.template_name??"",company_info:this.paySlipForm.value.company_info??"",employee_details:JSON.stringify(this.getSelectedModules("employee_details")),payroll_details:JSON.stringify(this.getSelectedModules("payroll_details")),other_details:JSON.stringify(this.getSelectedModules("other_details")),other_payment:JSON.stringify(this.getSelectedModules("other_payment")),other_deduction:JSON.stringify(this.getSelectedModules("other_deduction")),signature_message:this.paySlipForm.value.signature_message??"",leave_status:this.paySlipForm.value.leave_status??"",tds_status:this.paySlipForm.value.tds_status??"",publish_status:this.paySlipForm.value.publish_status.value??"",payslip_temp_company_logo:this.paySlipForm.value.payslip_temp_company_logo_file??"",logo_path:this.paySlipForm.value.logo_path??"",logo_status:"unchanged"==this.paySlipForm.value.logo_status?"unchanged":"changed"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}update(n){this.paySlipForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.paySlipForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updatePaySlipTemplate({template_name:this.paySlipForm.value.template_name??"",company_info:this.paySlipForm.value.company_info??"",employee_details:JSON.stringify(this.getSelectedModules("employee_details")),payroll_details:JSON.stringify(this.getSelectedModules("payroll_details")),other_details:JSON.stringify(this.getSelectedModules("other_details")),other_payment:JSON.stringify(this.getSelectedModules("other_payment")),other_deduction:JSON.stringify(this.getSelectedModules("other_deduction")),signature_message:this.paySlipForm.value.signature_message??"",leave_status:this.paySlipForm.value.leave_status??"",tds_status:this.paySlipForm.value.tds_status??"",payslip_temp_company_logo:this.paySlipForm.value.payslip_temp_company_logo_file??"",payslip_temp_id:this.editActionId,publish_status:this.paySlipForm.value.publish_status.value??""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchPaySlipTemplates({pageno:n.start/d.DataTableLength+1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.payslip_temp.totalDocs,recordsFiltered:a.payslip_temp.totalDocs,data:a.payslip_temp.docs}):(this.toastr.error(a.message),t({recordsTotal:0,recordsFiltered:0,data:[]}))},a=>{this.toastr.error(d.showServerErrorMessage(a)),t({recordsTotal:0,recordsFiltered:0,data:[]})})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){let s="";return s+='<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                          <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                      </button>',s+='<button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                          <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                      </button>',s},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name??"N/A"},orderable:!0,name:"template_name"},{render:function(n,t,a,r){return'<img class="img-thumbnail" style="max-width: 75px" src='+d.BACKEND_URL+"/"+a.company_logo+">"},orderable:!1,name:"company_logo",className:"text-center"},{render:function(n,t,a,r){return a.company_info},orderable:!0,name:"company_info"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.created_at,"dd/MM/yyyy hh:mm a")},orderable:!0,name:"created_at"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.cancelEntry(),n.publish_status&&(n.publish_status=this.publishStatusMaster.find(t=>t.value==n.publish_status)),this.paySlipForm.patchValue({template_name:n.template_name,company_info:n.company_info,signature_message:n.signature_message,leave_status:n.leave_status,tds_status:n.tds_status,publish_status:n.publish_status}),this.checkModulesForEdit("employee_details",n.employee_details),this.checkModulesForEdit("statutory_deduction",n.statutory_deduction),this.checkModulesForEdit("statutory_contribution",n.statutory_contribution),this.checkModulesForEdit("other_payment",n.other_payment),this.checkModulesForEdit("other_deduction",n.other_deduction),this.paySlipForm.controls.payslip_temp_company_logo.clearValidators(),this.paySlipForm.controls.payslip_temp_company_logo_file.clearValidators(),this.paySlipForm.controls.payslip_temp_company_logo.updateValueAndValidity(),this.paySlipForm.controls.payslip_temp_company_logo_file.updateValueAndValidity(),this.editActionId=n._id}cancelEntry(){this.editActionId="",this.resetSelectedModules(),d.resetForm(this.paySlipForm),this.paySlipForm.controls.payslip_temp_company_logo.setValidators([i.kI.required]),this.paySlipForm.controls.payslip_temp_company_logo_file.setValidators([i.kI.required]),this.paySlipForm.controls.payslip_temp_company_logo.updateValueAndValidity(),this.paySlipForm.controls.payslip_temp_company_logo_file.updateValueAndValidity(),$("html, body").animate({scrollTop:$("#rule-submit-section").position().top})}getSelectedModules(n){const t=[];return $('input[name="'+n+'[]"]:checked').each(function(){t.push($(this).val())}),t}checkModulesForEdit(n,t){for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&$('input[name="'+n+'[]"][value="'+t[a]+'"]').prop("checked",!0)}resetSelectedModules(){["employee_details","statutory_deduction","statutory_contribution","other_payment","other_deduction"].forEach(t=>{$('input[name="'+t+'[]"]:checked').each(function(){$(this).prop("checked",!1)})})}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deletePaySlipTemplate({payslip_temp_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error(d.showServerErrorMessage(a))}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}changePublishStatus(n){this.spinner.show(),this.adminService.changePaySipTemplatePublishStatus({template_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),this.toastr.success(t.message)):this.toastr.error(t.message),this.spinner.hide()},t=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-payslip-template"]],decls:108,vars:21,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"mg-b-0"],["id","rule-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["class","text-danger",4,"ngIf"],[1,"col-9","col-sm-9"],["formControlName","template_name","type","text",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","payslip_temp_company_logo","type","file","accept","image/*",1,"form-control",3,"change"],["formControlName","company_info","rows","3","cols","100%",1,"form-control"],[4,"ngIf"],[1,"col-3","col-sm-3",2,"background","#fff"],[1,"ckbox","mb-0"],["formControlName","leave_status","type","checkbox","name","other_details[]","value","leave_status"],["formControlName","tds_status","type","checkbox","name","other_details[]","value","tds_status"],["formControlName","signature_message","rows","3","cols","100%",1,"form-control"],[1,"text-danger"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12"],["class","btn btn-info",3,"click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"br-section-label","mb-5"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"row","no-gutters",2,"border-right","1px solid #ced4da"],["class","col-3 col-sm-3","style","background: #fff",4,"ngFor","ngForOf"],["type","checkbox","name","employee_details[]",3,"value"],["type","checkbox","name","payroll_details[]",3,"value"],["type","checkbox","name","other_details[]",3,"value"],[1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["type","submit",1,"btn","btn-info",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Pay Slip Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Payslip Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Customize Payslip"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,Wa,2,0,"h6",11),e.\u0275\u0275template(20,Qa,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Template Name\xa0 "),e.\u0275\u0275template(27,Za,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",18),e.\u0275\u0275element(29,"input",19),e.\u0275\u0275template(30,Ka,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",15)(32,"div",16),e.\u0275\u0275text(33," Company Logo\xa0 "),e.\u0275\u0275template(34,Xa,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",18)(36,"input",21),e.\u0275\u0275listener("change",function(r){return t.onFileChanged(r,t.paySlipForm,"payslip_temp_company_logo","payslip_temp_company_logo_file")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,er,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",15)(39,"div",16),e.\u0275\u0275text(40," Company Name "),e.\u0275\u0275element(41,"br"),e.\u0275\u0275text(42," Address "),e.\u0275\u0275element(43,"br"),e.\u0275\u0275text(44," Phone No\xa0 "),e.\u0275\u0275template(45,tr,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",18),e.\u0275\u0275element(47,"textarea",22),e.\u0275\u0275template(48,nr,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(49,rr,6,1,"ng-container",23),e.\u0275\u0275template(50,ir,6,1,"ng-container",23),e.\u0275\u0275template(51,sr,6,1,"ng-container",23),e.\u0275\u0275elementStart(52,"div",15)(53,"div",24)(54,"label",25),e.\u0275\u0275element(55,"input",26),e.\u0275\u0275elementStart(56,"span"),e.\u0275\u0275text(57,"Leave Status"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(58,"div",24)(59,"label",25),e.\u0275\u0275element(60,"input",27),e.\u0275\u0275elementStart(61,"span"),e.\u0275\u0275text(62,"TDS Status"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(63,"div",15)(64,"div",16),e.\u0275\u0275text(65," Signature Message Box\xa0 "),e.\u0275\u0275template(66,dr,2,0,"span",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(67,"div",18),e.\u0275\u0275element(68,"textarea",28),e.\u0275\u0275template(69,mr,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"div",15)(71,"div",16),e.\u0275\u0275text(72," Publish Status\xa0"),e.\u0275\u0275elementStart(73,"span",29),e.\u0275\u0275text(74,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(75,"div",16),e.\u0275\u0275element(76,"ngx-select-dropdown",30),e.\u0275\u0275template(77,cr,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(78,"div",31),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(79,"div",32)(80,"div",33),e.\u0275\u0275template(81,pr,3,0,"button",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(82,ur,6,0,"ng-template",null,35,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(84,"div",36)(85,"div",10)(86,"h6",37),e.\u0275\u0275text(87,"Pay Slip Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"div",38)(89,"table",39)(90,"thead")(91,"tr")(92,"th",40),e.\u0275\u0275text(93,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th",41),e.\u0275\u0275text(95,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th",41),e.\u0275\u0275text(97,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"th",40),e.\u0275\u0275text(99,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th",40),e.\u0275\u0275text(101,"Company Logo"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"th",40),e.\u0275\u0275text(103,"Company Info"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"th",40),e.\u0275\u0275text(105,"Created At"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(106,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(107,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(83);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.paySlipForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.paySlipForm,"template_name","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.paySlipForm.controls.template_name.hasError("required")&&(t.paySlipForm.controls.template_name.dirty||t.paySlipForm.controls.template_name.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.paySlipForm,"payslip_temp_company_logo","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.paySlipForm.controls.payslip_temp_company_logo.hasError("required")&&(t.paySlipForm.controls.payslip_temp_company_logo.dirty||t.paySlipForm.controls.payslip_temp_company_logo.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.paySlipForm,"company_info","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.paySlipForm.controls.company_info.hasError("required")&&(t.paySlipForm.controls.company_info.dirty||t.paySlipForm.controls.company_info.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.employeeDetailsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryDeductionsMaster.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.otherPaymentMaster.length>0),e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.paySlipForm,"signature_message","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.paySlipForm.controls.signature_message.hasError("required")&&(t.paySlipForm.controls.signature_message.dirty||t.paySlipForm.controls.signature_message.touched)),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(20,_r)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.paySlipForm.controls.publish_status.hasError("required")&&t.paySlipForm.controls.publish_status.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".pt-modal-logo[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5em}.pt-modal-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;border-radius:50%;border:2px solid #17a2b8}"]}),o})();function fr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",53),e.\u0275\u0275text(1," Define P-TAX Template "),e.\u0275\u0275elementEnd())}function gr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",53),e.\u0275\u0275text(1," Update P-TAX Template "),e.\u0275\u0275elementEnd())}function br(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function vr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function yr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function xr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Sr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",54),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Er(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",69)(1,"input",70),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(r.configLastSlab(a.target))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Last Slab"),e.\u0275\u0275elementEnd()()}}function Cr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.removeTemplateRow("tax_range_amount",a))}),e.\u0275\u0275element(1,"i",72),e.\u0275\u0275text(2," Remove"),e.\u0275\u0275elementEnd()}}function wr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.addTemplateRows("tax_range_amount"))}),e.\u0275\u0275element(1,"i",74),e.\u0275\u0275text(2," Add More"),e.\u0275\u0275elementEnd()}}function kr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",17),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Ir(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0)(1,57),e.\u0275\u0275elementStart(2,"div",15)(3,"div",58),e.\u0275\u0275text(4),e.\u0275\u0275template(5,Er,4,0,"label",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",60),e.\u0275\u0275template(7,Cr,3,0,"button",61),e.\u0275\u0275template(8,wr,3,0,"button",62),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",15)(10,"div",63),e.\u0275\u0275text(11," Amount From\xa0"),e.\u0275\u0275elementStart(12,"span",17),e.\u0275\u0275text(13,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",63),e.\u0275\u0275element(15,"input",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",65),e.\u0275\u0275text(17," Amount To\xa0"),e.\u0275\u0275template(18,kr,2,0,"span",66),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",63),e.\u0275\u0275element(20,"input",67),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",65),e.\u0275\u0275text(22," P-TAX Amount\xa0"),e.\u0275\u0275elementStart(23,"span",17),e.\u0275\u0275text(24,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",63),e.\u0275\u0275element(26,"input",68),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()()),2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext(2);let r,s,m;e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Row - ",t+1," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(r=a.getTemplateRows("tax_range_amount"))?null:r.length)==t+1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",a.getTemplateRows("tax_range_amount").length>1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=(s=n.get("last_slab"))&&s.value)&&a.getTemplateRows("tax_range_amount").length-1==t),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",n.controls.amount_to.hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("readOnly",null==(m=n.get("last_slab"))?null:m.value)}}function Fr(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0)(1,55),e.\u0275\u0275template(2,Ir,27,7,"ng-container",56),e.\u0275\u0275elementContainerEnd()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.getTemplateRows("tax_range_amount"))}}function Tr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.removeperiodTemp("periods",a))}),e.\u0275\u0275element(1,"i",72),e.\u0275\u0275text(2," Remove Period"),e.\u0275\u0275elementEnd()}}function Ar(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.addPeriodTemp("periods"))}),e.\u0275\u0275element(1,"i",74),e.\u0275\u0275text(2," Add Period"),e.\u0275\u0275elementEnd()}}function Dr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",69)(1,"input",70),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2).index,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.configLastSlabNested(a.target,"periods","tax_range_amount",r))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Last Slab"),e.\u0275\u0275elementEnd()()}}function Pr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext().index,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.removeNestedTaxSlab("periods","tax_range_amount",r,a))}),e.\u0275\u0275element(1,"i",72),e.\u0275\u0275text(2," Remove"),e.\u0275\u0275elementEnd()}}function Rr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",73),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2).index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.addNestedTaxSlab("periods","tax_range_amount",a))}),e.\u0275\u0275element(1,"i",74),e.\u0275\u0275text(2," Add More"),e.\u0275\u0275elementEnd()}}function Mr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",17),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Or(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0)(1,57),e.\u0275\u0275elementStart(2,"div",15)(3,"div",58),e.\u0275\u0275text(4),e.\u0275\u0275template(5,Dr,4,0,"label",59),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",60),e.\u0275\u0275template(7,Pr,3,0,"button",61),e.\u0275\u0275template(8,Rr,3,0,"button",62),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",15)(10,"div",63),e.\u0275\u0275text(11," Amount From\xa0"),e.\u0275\u0275elementStart(12,"span",17),e.\u0275\u0275text(13,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",63),e.\u0275\u0275element(15,"input",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",65),e.\u0275\u0275text(17," Amount To\xa0"),e.\u0275\u0275template(18,Mr,2,0,"span",66),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",63),e.\u0275\u0275element(20,"input",67),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",65),e.\u0275\u0275text(22," P-TAX Amount\xa0"),e.\u0275\u0275elementStart(23,"span",17),e.\u0275\u0275text(24,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"div",63),e.\u0275\u0275element(26,"input",68),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()()),2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(2);let s,m,c;e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",t),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Row - ",t+1," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(s=r.getPeriodTempRows("periods","tax_range_amount",a))?null:s.length)==t+1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",r.getPeriodTempRows("periods","tax_range_amount",a).length>1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(null!=(m=n.get("last_slab"))&&m.value)&&r.getPeriodTempRows("periods","tax_range_amount",a).length-1==t),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",n.controls.amount_to.hasError("required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("readOnly",null==(c=n.get("last_slab"))?null:c.value)}}function Nr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275element(1,"div",80),e.\u0275\u0275elementEnd())}const Lr=function(){return{search:!1,placeholder:"From",height:"200px"}},Vr=function(){return{search:!1,placeholder:"To",height:"200px"}};function qr(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0)(1,57),e.\u0275\u0275elementStart(2,"div",15),e.\u0275\u0275element(3,"div",63),e.\u0275\u0275elementStart(4,"div",63)(5,"span"),e.\u0275\u0275text(6),e.\u0275\u0275elementStart(7,"span",17),e.\u0275\u0275text(8,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(9,"div",63),e.\u0275\u0275element(10,"ngx-select-dropdown",76),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"div",63),e.\u0275\u0275element(12,"ngx-select-dropdown",77),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",78),e.\u0275\u0275template(14,Tr,3,0,"button",61),e.\u0275\u0275template(15,Ar,3,0,"button",62),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(16,55),e.\u0275\u0275template(17,Or,27,7,"ng-container",56),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(18,Nr,2,0,"div",79),e.\u0275\u0275elementContainerEnd()()),2&o){const n=l.index,t=e.\u0275\u0275nextContext(2);let a;e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",n),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("Period ",n+1," \xa0"),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",t.Global.monthMaster)("config",e.\u0275\u0275pureFunction0(10,Lr)),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.Global.monthMaster)("config",e.\u0275\u0275pureFunction0(11,Vr)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.getTemplateRows("periods").length>1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getTemplateRows("periods").length-1==n),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.getPeriodTempRows("periods","tax_range_amount",n)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(null==(a=t.getTemplateRows("periods"))?null:a.length)-1!=n)}}function $r(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0)(1,75),e.\u0275\u0275template(2,qr,19,12,"ng-container",56),e.\u0275\u0275elementContainerEnd()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",n.getTemplateRows("periods"))}}function Br(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",81),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.pTaxRuleForm.valid)}}function jr(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",82),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",81),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.pTaxRuleForm.valid)}}function Ur(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",88),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",88),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",88),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",n.amount_from.toFixed(2),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",n.amount_to.toFixed(2),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",n.tax_amount.toFixed(2),"")}}function Hr(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",49)(1,"div",83)(2,"table",84)(3,"tbody")(4,"tr")(5,"th",41),e.\u0275\u0275text(6,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"tr")(10,"th",41),e.\u0275\u0275text(11,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"tr")(15,"th",41),e.\u0275\u0275text(16,"Effective From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(19,"div",85)(20,"table",84)(21,"thead")(22,"tr")(23,"th",86)(24,"h6",87),e.\u0275\u0275text(25,"Amount Slab wise P-TAX"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(26,"tr")(27,"th",88),e.\u0275\u0275text(28,"Amount From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",88),e.\u0275\u0275text(30,"Amount To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"th",88),e.\u0275\u0275text(32,"P-TAX Amount"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"tbody"),e.\u0275\u0275template(34,Ur,7,3,"tr",56),e.\u0275\u0275elementEnd()()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(n.viewPTaxTemplate.template_name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.viewPTaxTemplate.state_name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.formatDate(n.viewPTaxTemplate.effective_from)),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.viewPTaxTemplate.tax_range_amount)}}function Yr(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",88),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td",88),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td",88),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",n.amount_from.toFixed(2),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",n.amount_to.toFixed(2),""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("\u20b9",n.tax_amount.toFixed(2),"")}}function Gr(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",49)(1,"div",83)(2,"table",84)(3,"tbody")(4,"tr")(5,"th",41),e.\u0275\u0275text(6,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"tr")(10,"th",41),e.\u0275\u0275text(11,"Effective From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(14,"div",85)(15,"table",84)(16,"thead")(17,"tr")(18,"th",86)(19,"h6",87),e.\u0275\u0275text(20,"Amount Slab wise P-TAX"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(21,"tr")(22,"th",88),e.\u0275\u0275text(23,"Amount From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"th",88),e.\u0275\u0275text(25,"Amount To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"th",88),e.\u0275\u0275text(27,"P-TAX Amount"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"tbody"),e.\u0275\u0275template(29,Yr,7,3,"tr",56),e.\u0275\u0275elementEnd()()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(n.viewPTaxTemplateHistory.state_name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.formatDate(n.viewPTaxTemplateHistory.effective_from)),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.viewPTaxTemplateHistory.tax_range_amount)}}const O=function(){return{search:!0,placeholder:"Choose One",height:"200px"}},Jr=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}};let zr=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewPTaxTemplate=null,this.viewPTaxTemplateHistory=null,this.initialValueBeforeUpdate=null,this.presentSettlement="",this.Global=d,this.pTaxRuleForm=n.group({state:[null,i.kI.compose([i.kI.required])],effective_from:[null,i.kI.compose([i.kI.required])],salary_type:[null,i.kI.compose([i.kI.required])],settlement_frequency:[null,i.kI.compose([i.kI.required])],publish_status:[null,i.kI.compose([])],tax_range_amount:this.formBuilder.array([]),periods:this.formBuilder.array([]),template_name:[null,i.kI.compose([])]}),this.editActionId="",this.stateMaster=[],this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.salaryTypeMaster=[{value:"fixed",description:"Fixed Salary"},{value:"earned",description:"Earned Salary"}],this.settlementMaster=[{value:"monthly",description:"Monthly"},{value:"quaterly",description:"Quaterly"},{value:"half_yearly",description:"Half Yearly"},{value:"yearly",description:"Yearly"}]}ngOnInit(){this.titleService.setTitle("P-TAX Template - "+d.AppName),this.fetchStates(),this.fetch(),this.pTaxRuleForm.get("tax_range_amount").push(this.initTemplateRows("tax_range_amount")),this.pTaxRuleForm.get("settlement_frequency")?.valueChanges.subscribe(t=>{this.presentSettlement=t?.value,"monthly"==t?.value?(this.pTaxRuleForm.get("tax_range_amount").clear(),this.pTaxRuleForm.get("periods").push(this.initPeriodsRows("tax_range_amount"))):(this.pTaxRuleForm.get("tax_range_amount").clear(),this.pTaxRuleForm.get("periods").clear(),this.pTaxRuleForm.get("tax_range_amount").push(this.initTemplateRows("tax_range_amount")))})}fetchStates(){this.spinner.show(),this.adminService.fetchStates().subscribe(n=>{if("success"==n.status){this.stateMaster=[];for(const t in n.state_list[0].states)if(Object.prototype.hasOwnProperty.call(n.state_list[0].states,t)){const a=n.state_list[0].states[t];this.stateMaster.push({id:a.id,description:a.name})}this.stateMaster.push({id:"option_1",description:"Option 1"},{id:"option_2",description:"Option 2"},{id:"option_3",description:"Option 3"},{id:"option_4",description:"Option 4"},{id:"option_5",description:"Option 5"},{id:"option_6",description:"Option 6"})}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}initTemplateRows(n,t=null,a=null,r=null,s=!1){return this.formBuilder.group("tax_range_amount"===n?{amount_from:[t,i.kI.compose([i.kI.required])],amount_to:[a,i.kI.compose([i.kI.required])],tax_amount:[r,i.kI.compose([i.kI.required])],last_slab:[s,i.kI.compose([i.kI.required])]}:{})}initNestedTemplateRows(n,t=null){return this.formBuilder.group("tax_range_amount"===n?{amount_from:[t?.amount_from??null,i.kI.compose([i.kI.required])],amount_to:[t?.amount_to??null,i.kI.compose([i.kI.required])],tax_amount:[t?.tax_amount??null,i.kI.compose([i.kI.required])],last_slab:["yes"==t?.last_slab,i.kI.compose([i.kI.required])]}:{})}initPeriodsRows(n,t=null,a=null,r=null){if("tax_range_amount"===n){const s=this.formBuilder.group({from_month:[d.monthMaster.find(c=>c.index==t)??null,i.kI.compose([i.kI.required])],to_month:[d.monthMaster.find(c=>c.index==a)??null,i.kI.compose([i.kI.required])],tax_range_amount:this.formBuilder.array([])}),m=s.get("tax_range_amount");return r&&Array.isArray(r)?r?.forEach(c=>{m.push(this.initNestedTemplateRows("tax_range_amount",c))}):m.push(this.initNestedTemplateRows("tax_range_amount")),s}return this.formBuilder.group({})}getTemplateRows(n){return this.pTaxRuleForm.get(n).controls}getPeriodTempRows(n,t,a){return this.pTaxRuleForm.get(n).at(a).get(t).controls}removeTemplateRow(n,t){this.pTaxRuleForm.get(n).removeAt(t)}removeNestedTaxSlab(n,t,a,r){this.pTaxRuleForm.get(n).at(a).get(t).removeAt(r)}addNestedTaxSlab(n,t,a,r={}){this.pTaxRuleForm.get(n).at(a).get(t).push(this.initTemplateRows("tax_range_amount"))}addPeriodTemp(n,t=null,a=null,r=null){this.pTaxRuleForm.get(n).push(this.initPeriodsRows("tax_range_amount",t,a,r))}removeperiodTemp(n,t){this.pTaxRuleForm.get(n).removeAt(t)}addTemplateRows(n,t=null,a=null,r=null,s=!1){"yes"==s?s=!0:"no"==s&&(s=!1),this.pTaxRuleForm.get(n).push(this.initTemplateRows(n,t,a,r,s))}resetAllTemplateRows(n=!1){let t=["tax_range_amount","periods"];t.forEach(a=>{this.pTaxRuleForm.get(a).clear()}),0==n&&"monthly"!=this.pTaxRuleForm.get("settlement_frequency")?.value&&t.forEach(a=>{"tax_range_amount"==a&&this.addTemplateRows(a)})}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchPTaxRules({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.ptax_rule.totalDocs,recordsFiltered:a.ptax_rule.totalDocs,data:a.ptax_rule.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-info btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="View Details" id="viewButton-'+r.row+'">\n                      <div style="width:25px; height:25px;"><i class="fa fa-eye"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-primary btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                      <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                      <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.state_name},orderable:!0,name:"state_name"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_from,"dd/MM/yyyy")},orderable:!0,name:"effective_from"},{render:function(n,t,a,r){return a.salary_type?'<span class="text-capitalize">'+a.salary_type+"</span>":"N/A"},orderable:!0,name:"salary_type"},{render:function(n,t,a,r){return a.settlement_frequency?'<span class="text-capitalize">'+a.settlement_frequency+"</span>":"N/A"},orderable:!0,name:"settlement_frequency"}],rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#viewButton-"+a,function(){r.view(t)}),$("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.viewHistoryDetails(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},drawCallback:function(n){d.loadCustomScripts("customJsScript")},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changePublishStatus(n){this.adminService.updatePTaxPublishStatus({ptax_rule_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getPeriods(n){const t=[];return n?.forEach(a=>{t.push({from_month:a?.from_month?.index.toString(),to_month:a?.to_month?.index?.toString(),tax_range_amount:a?.tax_range_amount})}),t}getEdit(n){this.editActionId=n._id,this.pTaxRuleForm.patchValue({state:this.stateMaster.find(a=>a.description==n.state_name),salary_type:this.salaryTypeMaster.find(a=>a.value==n.salary_type),settlement_frequency:this.settlementMaster.find(a=>a.value==n.settlement_frequency),template_name:n.template_name,effective_from:this.datePipe.transform(n.effective_from,"MM/dd/YYYY"),publish_status:this.publishStatusMaster.find(a=>a.value==n.publish_status)}),this.resetAllTemplateRows(!0);let t=[];"monthly"!=n.settlement_frequency?n.tax_range_amount.forEach(a=>{this.addTemplateRows("tax_range_amount",a.amount_from,a.amount_to,a.tax_amount,a.last_slab)}):(n?.periods?.forEach(a=>{this.addPeriodTemp("periods",a?.from_month,a?.to_month,a?.tax_range_amount)}),t=this.getPeriods(this.pTaxRuleForm.value.periods)),this.initialValueBeforeUpdate={ptax_rule_id:this.editActionId,state_name:this.pTaxRuleForm.value.state?.description??"",template_name:this.pTaxRuleForm.value.template_name?this.pTaxRuleForm.value.template_name.toString().trim():null,effective_from:this.datePipe.transform(this.pTaxRuleForm.value.effective_from,"Y-MM-dd"),salary_type:this.pTaxRuleForm.value.salary_type.value,settlement_frequency:this.pTaxRuleForm.value.settlement_frequency.value,tax_range_amount:JSON.stringify(this.pTaxRuleForm.value.tax_range_amount),periods:JSON.stringify(t),publish_status:this.pTaxRuleForm.value.publish_status?.value??"published"},$("html, body").animate({scrollTop:$("#ptax-submit-section").position().top})}cancelEdit(){this.editActionId="",this.pTaxRuleForm.reset();for(const n in this.pTaxRuleForm.controls)if(Object.prototype.hasOwnProperty.call(this.pTaxRuleForm.controls,n)){const t=this.pTaxRuleForm.controls[n];t.markAsUntouched(),t.markAsPristine()}this.resetAllTemplateRows(),$("html, body").animate({scrollTop:$("#ptax-submit-section").position().top})}validatePeriods(){const n=this;return new Promise(function(t,a){for(let r=0;r<n.pTaxRuleForm.value.periods.length;r++){const s=n.pTaxRuleForm.value.periods[r];if(!s.tax_range_amount||!Array.isArray(s.tax_range_amount))return n.toastr.error(`Period ${r+1}: Invalid tax range data.`),void t(!1);for(let m=0;m<s.tax_range_amount.length;m++){const c=s.tax_range_amount[m];if(!c.last_slab&&c.amount_to<=c.amount_from)return n.toastr.error(`Period ${r+1}, Slab ${m+1}: The amount range entered is not acceptable.`),void t(!1);if(m>0&&c.amount_from<=s.tax_range_amount[m-1]?.amount_to)return n.toastr.error(`Period ${r+1}, Slab ${m+1}: The amount range starting should be greater than the previous slab's range.`),void t(!1)}}t(!0)})}create(n){var t=this;return(0,g.Z)(function*(){if(t.pTaxRuleForm.valid){n.target.classList.add("btn-loading");let a=[];if("monthly"==t.presentSettlement){if(!(yield t.validatePeriods()))return void n.target.classList.remove("btn-loading");a=t.getPeriods(t.pTaxRuleForm.value.periods)}else if(!(yield t.validate_ptax_data()))return void n.target.classList.remove("btn-loading");t.adminService.createPTaxRule({state_name:t.pTaxRuleForm.value.state?.description??"",template_name:t.pTaxRuleForm.value.template_name,effective_from:t.datePipe.transform(t.pTaxRuleForm.value.effective_from,"Y-MM-dd"),salary_type:t.pTaxRuleForm.value.salary_type.value,settlement_frequency:t.pTaxRuleForm.value.settlement_frequency.value,tax_range_amount:JSON.stringify(t.pTaxRuleForm.value.tax_range_amount),periods:JSON.stringify(a),publish_status:t.pTaxRuleForm.value.publish_status.value}).subscribe(r=>{"success"==r.status?(t.toastr.success(r.message),t.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(s){},!1)):t.toastr.error("val_err"==r.status?d.showValidationMessage(r.val_msg):r.message),n.target.classList.remove("btn-loading")},r=>{n.target.classList.remove("btn-loading"),t.toastr.error("Internal server error occured. Please try again later.")})}})()}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deletePTaxRule({ptax_rule_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){var t=this;return(0,g.Z)(function*(){if(t.pTaxRuleForm.valid){let a=[];"monthly"==t.pTaxRuleForm.get("settlement_frequency")?.value.value&&(a=t.getPeriods(t.pTaxRuleForm.value.periods));const r={ptax_rule_id:t.editActionId,state_name:t.pTaxRuleForm.value.state?.description??"",effective_from:t.datePipe.transform(t.pTaxRuleForm.value.effective_from,"Y-MM-dd"),salary_type:t.pTaxRuleForm.value.salary_type.value,settlement_frequency:t.pTaxRuleForm.value.settlement_frequency.value,tax_range_amount:JSON.stringify(t.pTaxRuleForm.value.tax_range_amount),periods:JSON.stringify(a),publish_status:t.pTaxRuleForm.value.publish_status.value,template_name:t.pTaxRuleForm.value.template_name};if(JSON.stringify(r)===JSON.stringify(t.initialValueBeforeUpdate))return void t.toastr.warning("No change detected to update");if(n.target.classList.add("btn-loading"),!(yield t.validate_ptax_data()))return void n.target.classList.remove("btn-loading");t.adminService.updatePTaxRule(r).subscribe(m=>{"success"==m.status?(t.toastr.success(m.message),t.initialValueBeforeUpdate=r,$("#my-datatable").dataTable().api().ajax.reload(function(c){},!1)):t.toastr.error("val_err"==m.status?d.showValidationMessage(m.val_msg):m.message),n.target.classList.remove("btn-loading")},m=>{n.target.classList.remove("btn-loading"),t.toastr.error("Internal server error occured. Please try again later.")})}})()}view(n){$("#viewmmodalbutton").click(),this.viewPTaxTemplate=n}getUpdateHistory(){return null!=this.viewPTaxTemplate&&null!=this.viewPTaxTemplate.history&&Array.isArray(this.viewPTaxTemplate.history)?this.viewPTaxTemplate.history:[]}viewHistoryDetails(n){$("#viewhistorymodalbutton").click(),this.viewPTaxTemplateHistory=n}formatDate(n){return new p.uU("en-US").transform(n,"dd/MM/yyyy")}validate_ptax_data(){const n=this;return new Promise(function(t,a){for(const r in n.pTaxRuleForm.value.tax_range_amount)if(Object.prototype.hasOwnProperty.call(n.pTaxRuleForm.value.tax_range_amount,r)){const s=n.pTaxRuleForm.value.tax_range_amount[r];if(!s.last_slab&&s.amount_to<=s.amount_from)return n.toastr.error("For Income Tax Slab "+(parseInt(r)+1)+": The amount range entered is not acceptable"),void t(!1);if(parseInt(r)>0&&s.amount_from<=n.pTaxRuleForm.value.tax_range_amount[parseInt(r)-1]?.amount_to)return n.toastr.error("For Income Tax Slab "+(parseInt(r)+1)+": The amount range starting should be greater than the previous one"),void t(!1)}t(!0)})}cloneItem(n){$('[data-dismiss="modal"]')?.click(),this.cancelEdit(),this.pTaxRuleForm.patchValue({salary_type:this.salaryTypeMaster.find(t=>t.value==n.salary_type),settlement_frequency:this.settlementMaster.find(t=>t.value==n.settlement_frequency),state:this.stateMaster.find(t=>t.description==n.state_name),effective_from:this.datePipe.transform(n.effective_from,"MM/dd/YYYY"),publish_status:this.publishStatusMaster.find(t=>t.value==n.publish_status)}),this.resetAllTemplateRows(!0),n.tax_range_amount.forEach(t=>{this.addTemplateRows("tax_range_amount",t.amount_from,t.amount_to,t.tax_amount,t.last_slab)}),$("html, body").animate({scrollTop:$("#ptax-submit-section").position().top})}configLastSlab(n){let t=this.pTaxRuleForm.get("tax_range_amount")?.value?.length-1;if(t>=0){const a=this.getTemplateRows("tax_range_amount")[t];n.checked?(a.get("amount_to")?.disable(),a.get("amount_to")?.clearValidators(),a.get("amount_to")?.setValue(0),a.get("amount_to")?.updateValueAndValidity()):(a.get("amount_to")?.enable(),a.get("amount_to")?.setValidators([i.kI.required]),a.get("amount_to")?.setValue(null),a.get("amount_to")?.updateValueAndValidity())}}configLastSlabNested(n,t,a,r){const m=this.pTaxRuleForm.get(t).at(r).get(a)?.value?.length-1;if(m>=0){const c=this.getPeriodTempRows(t,a,r)[m];n.checked?(c.get("amount_to")?.disable(),c.get("amount_to")?.clearValidators(),c.get("amount_to")?.setValue(0),c.get("amount_to")?.updateValueAndValidity()):(c.get("amount_to")?.enable(),c.get("amount_to")?.setValidators([]),c.get("amount_to")?.setValue(null),c.get("amount_to")?.updateValueAndValidity())}}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-ptax-rule"]],decls:159,vars:33,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"mg-b-0"],["id","ptax-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["formControlName","state",1,"form-control",3,"options","config"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","effective_from","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],["formControlName","salary_type",1,"form-control",3,"options","config"],["formControlName","settlement_frequency",1,"form-control",3,"options","config"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[4,"ngIf"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","viewmmodalbutton","data-toggle","modal","data-target","#viewmodal",3,"hidden"],["id","viewmodal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-body pd-20",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],["id","viewhistorymodalbutton","data-toggle","modal","data-target","#viewhistorymodal",3,"hidden"],["id","viewhistorymodal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],[1,"br-section-label","mb-3"],[1,"error-element"],["formArrayName","tax_range_amount"],[4,"ngFor","ngForOf"],[3,"formGroupName"],[1,"col-6","col-sm-6","d-flex","align-items-baseline"],["class","ckbox ml-3",4,"ngIf"],[1,"col-6","col-sm-6","text-right","tr-slab"],["type","button","class","btn btn-sm btn-danger mr-2",3,"click",4,"ngIf"],["type","button","class","btn btn-sm btn-info",3,"click",4,"ngIf"],[1,"col-2","col-sm-2"],["formControlName","amount_from","type","number",1,"form-control"],[1,"col-2","col-sm-2","sameasfirst"],["class","text-danger",4,"ngIf"],["formControlName","amount_to","type","number",1,"form-control",3,"readOnly"],["formControlName","tax_amount","type","number",1,"form-control"],[1,"ckbox","ml-3"],["type","checkbox","formControlName","last_slab",3,"change"],["type","button",1,"btn","btn-sm","btn-danger","mr-2",3,"click"],[1,"fa","fa-times"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-plus"],["formArrayName","periods"],["formControlName","from_month",1,"form-control",3,"options","config"],["formControlName","to_month",1,"form-control",3,"options","config"],[1,"col-4","col-sm-4","tr-slab"],["class","row no-gutters",4,"ngIf"],[1,"col-12","col-sm-12","sameasfirst"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],[1,"bd","bd-gray-300","rounded","table-responsive"],[1,"table","table-striped","mg-b-0"],[1,"bd","bd-gray-300","rounded","table-responsive","mg-t-10"],["colspan","3",1,"bg-info","text-center"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold","text-white"],[1,"text-center"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"P-TAX Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"P-TAX Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Define State-wise P-TAX"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,fr,2,0,"h6",11),e.\u0275\u0275template(20,gr,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(22,"br"),e.\u0275\u0275elementStart(23,"div",13)(24,"form",14)(25,"div",15)(26,"div",16),e.\u0275\u0275text(27," State\xa0"),e.\u0275\u0275elementStart(28,"span",17),e.\u0275\u0275text(29,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",16),e.\u0275\u0275element(31,"ngx-select-dropdown",18),e.\u0275\u0275template(32,br,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",20),e.\u0275\u0275text(34," Effective From\xa0"),e.\u0275\u0275elementStart(35,"span",17),e.\u0275\u0275text(36,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",16),e.\u0275\u0275element(38,"dp-date-picker",21),e.\u0275\u0275template(39,vr,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",15)(41,"div",16),e.\u0275\u0275text(42," Salary Type\xa0"),e.\u0275\u0275elementStart(43,"span",17),e.\u0275\u0275text(44,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",16),e.\u0275\u0275element(46,"ngx-select-dropdown",22),e.\u0275\u0275template(47,yr,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"div",20),e.\u0275\u0275text(49," Settlement Frequency\xa0"),e.\u0275\u0275elementStart(50,"span",17),e.\u0275\u0275text(51,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",16),e.\u0275\u0275element(53,"ngx-select-dropdown",23),e.\u0275\u0275template(54,xr,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",15)(56,"div",16),e.\u0275\u0275text(57," Publish Status\xa0"),e.\u0275\u0275elementStart(58,"span",17),e.\u0275\u0275text(59,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",16),e.\u0275\u0275element(61,"ngx-select-dropdown",24),e.\u0275\u0275template(62,Sr,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(63,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(64,Fr,3,1,"ng-container",26),e.\u0275\u0275template(65,$r,3,1,"ng-container",26),e.\u0275\u0275elementStart(66,"div",27)(67,"div",28),e.\u0275\u0275template(68,Br,3,1,"button",29),e.\u0275\u0275template(69,jr,6,1,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(71,"div",31)(72,"div",10)(73,"h6",32),e.\u0275\u0275text(74,"P-Tax Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"div",33)(76,"table",34)(77,"thead")(78,"tr")(79,"th",35),e.\u0275\u0275text(80,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"th",35),e.\u0275\u0275text(82,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"th",35),e.\u0275\u0275text(84,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(85,"th",35),e.\u0275\u0275text(86,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"th",35),e.\u0275\u0275text(88,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(89,"th",35),e.\u0275\u0275text(90,"Salary Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(91,"th",35),e.\u0275\u0275text(92,"Frequency"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(93,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(94,"button",36),e.\u0275\u0275elementStart(95,"div",37)(96,"div",38)(97,"div",39)(98,"div",40)(99,"h6",41),e.\u0275\u0275text(100,"View Template Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(101,"button",42)(102,"span",43),e.\u0275\u0275text(103,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(104,Hr,35,4,"div",44),e.\u0275\u0275elementStart(105,"div",45)(106,"button",46),e.\u0275\u0275text(107,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(108,"button",47),e.\u0275\u0275elementStart(109,"div",48)(110,"div",38)(111,"div",39)(112,"div",40)(113,"h6",41),e.\u0275\u0275text(114,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(115,"button",42)(116,"span",43),e.\u0275\u0275text(117,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(118,"div",49)(119,"div",35)(120,"table",50)(121,"thead")(122,"th",35),e.\u0275\u0275text(123,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(124,"th",35),e.\u0275\u0275text(125,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(126,"th",35),e.\u0275\u0275text(127,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(128,"th",35),e.\u0275\u0275text(129,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(130,"th",35),e.\u0275\u0275text(131,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(132,"th",35),e.\u0275\u0275text(133,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(134,"th",35),e.\u0275\u0275text(135,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(136,"th",35),e.\u0275\u0275text(137,"Salary Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(138,"th",35),e.\u0275\u0275text(139,"Frequency"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(140,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(141,"div",45)(142,"button",46),e.\u0275\u0275text(143,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(144,"button",51),e.\u0275\u0275elementStart(145,"div",52)(146,"div",38)(147,"div",39)(148,"div",40)(149,"h6",41),e.\u0275\u0275text(150,"Previous Version of the Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(151,"button",42)(152,"span",43),e.\u0275\u0275text(153,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(154,Gr,30,3,"div",44),e.\u0275\u0275elementStart(155,"div",45)(156,"button",46),e.\u0275\u0275text(157,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(158,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(70);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",t.pTaxRuleForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.stateMaster)("config",e.\u0275\u0275pureFunction0(28,O)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.pTaxRuleForm.controls.state.hasError("required")&&t.pTaxRuleForm.controls.state.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(29,Jr)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.pTaxRuleForm.controls.effective_from.hasError("required")&&t.pTaxRuleForm.controls.effective_from.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.salaryTypeMaster)("config",e.\u0275\u0275pureFunction0(30,O)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.pTaxRuleForm.controls.salary_type.hasError("required")&&t.pTaxRuleForm.controls.salary_type.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.settlementMaster)("config",e.\u0275\u0275pureFunction0(31,O)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.pTaxRuleForm.controls.settlement_frequency.hasError("required")&&t.pTaxRuleForm.controls.settlement_frequency.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(32,O)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.pTaxRuleForm.controls.publish_status.hasError("required")&&t.pTaxRuleForm.controls.publish_status.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf","monthly"!=t.presentSettlement),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","monthly"==t.presentSettlement),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(18),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",null!=t.viewPTaxTemplate),e.\u0275\u0275advance(4),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory),e.\u0275\u0275advance(24),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",null!=t.viewPTaxTemplateHistory)}},dependencies:[p.sg,p.O5,h.yS,w.fY,A.Lr,C.G,i._Y,i.Fj,i.wV,i.Wl,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,y,x],styles:[".tr-slab[_ngcontent-%COMP%]{border-right:1px solid #ced4da!important;border-left:0;background:#f8f9fa}"]}),o})();var Wr=k(5041);function Qr(o,l){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1," Define Salary Template "),e.\u0275\u0275elementContainerEnd())}function Zr(o,l){1&o&&e.\u0275\u0275text(0," Update Salary Template ")}function Kr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Xr(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function eo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function to(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function no(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," Enter a valid number "),e.\u0275\u0275elementEnd())}function ao(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," Enter a value equal to or below 88% "),e.\u0275\u0275elementEnd())}function ro(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function oo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," Enter a valid number "),e.\u0275\u0275elementEnd())}function io(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function lo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," Enter a valid number "),e.\u0275\u0275elementEnd())}function so(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",97),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function mo(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.percentage_amount?n.percentage_amount+" %":"N/A"," ")}}function co(o,l){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1," N/A "),e.\u0275\u0275elementContainerEnd())}function po(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;let t;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",null!==(t=null==n.dependent_head?null:n.dependent_head.description)&&void 0!==t?t:"N/A"," ")}}function uo(o,l){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275text(1," N/A "),e.\u0275\u0275elementContainerEnd())}function _o(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",106),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n)}}function ho(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,_o,3,1,"ng-container",98),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.head_include_in)}}function fo(o,l){1&o&&e.\u0275\u0275text(0," - ")}function go(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",107),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.removeEarning(a))}),e.\u0275\u0275elementStart(1,"div",103),e.\u0275\u0275element(2,"i",108),e.\u0275\u0275elementEnd()()}}function bo(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275template(10,mo,2,1,"ng-container",99),e.\u0275\u0275template(11,co,2,0,"ng-container",99),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275template(13,po,2,1,"ng-container",99),e.\u0275\u0275template(14,uo,2,0,"ng-container",99),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td"),e.\u0275\u0275template(18,ho,2,1,"ng-container",11),e.\u0275\u0275template(19,fo,1,0,"ng-template",null,100,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td"),e.\u0275\u0275text(24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"td",101)(26,"button",102),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(n),r=a.$implicit,s=a.index,m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.editEarning(r,s))}),e.\u0275\u0275elementStart(27,"div",103),e.\u0275\u0275element(28,"i",104),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(29,go,3,0,"button",105),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275reference(20),r=e.\u0275\u0275nextContext(2);let s,m,c,u,f,F;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.is_percentage?"Yes":"No"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(s=null==n.head_id?null:n.head_id.description)&&void 0!==s?s:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(m=null==n.priority?null:n.priority.description)&&void 0!==m?m:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==r.salaryTemplateForm.value.advance),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1!=r.salaryTemplateForm.value.advance),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",1==r.salaryTemplateForm.value.advance),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",1!=r.salaryTemplateForm.value.advance),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null!==(c=null==n.attendance_relation?null:n.attendance_relation.description)&&void 0!==c?c:"N/A"," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.head_include_in.length>0)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null!==(u=null==n.earning_type?null:n.earning_type.description)&&void 0!==u?u:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(f=n.earning_value)&&void 0!==f?f:"N/A"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!(null!=(F=r.salaryTemplateForm.get("advance"))&&F.value)||"yes"!==(null==n||null==n.head_id?null:n.head_id.pre_def_head))}}function vo(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tbody"),e.\u0275\u0275template(1,bo,30,14,"tr",98),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.earnings)}}function yo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tbody")(1,"tr")(2,"td",109),e.\u0275\u0275text(3," No Earnings Added "),e.\u0275\u0275elementEnd()()())}function xo(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",110),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.addSalaryTemplate(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add Template"),e.\u0275\u0275elementEnd()()}}function So(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",110),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updateSalaryTemplate(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Update Template"),e.\u0275\u0275elementEnd()()}}function Eo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",111),e.\u0275\u0275text(1," Add your earnings below "),e.\u0275\u0275elementEnd())}function Co(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",111),e.\u0275\u0275text(1,"Edit your earnings below"),e.\u0275\u0275elementEnd())}function wo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function ko(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Io(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Fo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function To(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Ao(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Do(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," Enter valid number "),e.\u0275\u0275elementEnd())}function Po(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Ro(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Mo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Oo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function No(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"label",27),e.\u0275\u0275element(1,"input",113),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("value",n.value),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function Lo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Vo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function qo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function $o(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Bo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1," Enter valid number "),e.\u0275\u0275elementEnd())}function jo(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",62)(1,"label"),e.\u0275\u0275text(2," Earning Value\xa0 "),e.\u0275\u0275template(3,qo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"input",114),e.\u0275\u0275template(5,$o,2,0,"p",64),e.\u0275\u0275template(6,Bo,2,0,"p",64),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.Global.isValidationAvailable(n.salaryEarningForm,"earning_value","required")),e.\u0275\u0275advance(1),e.\u0275\u0275property("readOnly",n.isAdvancePreDefiend)("disabled",n.isAdvancePreDefiend),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.salaryEarningForm.controls.earning_value.hasError("required")&&(n.salaryEarningForm.controls.earning_value.dirty||n.salaryEarningForm.controls.earning_value.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.salaryEarningForm.controls.earning_value.hasError("pattern")&&(n.salaryEarningForm.controls.earning_value.dirty||n.salaryEarningForm.controls.earning_value.touched))}}function Uo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Ho(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Yo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Go(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Jo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",96),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function zo(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",112),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Wo(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"span",106),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n)}}function Qo(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Wo,3,1,"ng-container",98),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.head_include_in)}}function Zo(o,l){1&o&&e.\u0275\u0275text(0," - ")}function Ko(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",118),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td"),e.\u0275\u0275template(16,Qo,2,1,"ng-container",11),e.\u0275\u0275template(17,Zo,1,0,"ng-template",null,100,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",118),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275reference(18);let r,s,m,c,u,f;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("yes"==n.is_percentage?"Yes":"No"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(r=n.head_full_name)&&void 0!==r?r:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(s=n.priority)&&void 0!==s?s:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.percentage_amount?n.percentage_amount+" %":"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(m=n.dependent_head_full_name)&&void 0!==m?m:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(c=n.attendance_relation)&&void 0!==c?c:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.head_include_in.length>0)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(null!==(u=n.type)&&void 0!==u?u:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(f=n.earning_value)&&void 0!==f?f:"N/A")}}function Xo(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tbody"),e.\u0275\u0275template(1,Ko,23,11,"tr",98),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.salaryTempateDetails.earnings)}}function ei(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tbody")(1,"tr")(2,"td",124),e.\u0275\u0275text(3,"No Earnings Added"),e.\u0275\u0275elementEnd()()())}function ti(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",83)(1,"div",115)(2,"table",116)(3,"tbody")(4,"tr")(5,"th",80),e.\u0275\u0275text(6,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"tr")(10,"th",80),e.\u0275\u0275text(11,"Restricted PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td",117),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"tr")(15,"th",80),e.\u0275\u0275text(16,"Voluntary PF "),e.\u0275\u0275elementStart(17,"small"),e.\u0275\u0275text(18,"(% of PF wages)"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"td"),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(21,"tr")(22,"th",80),e.\u0275\u0275text(23,"No Pension"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td",117),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"tr")(27,"th",80),e.\u0275\u0275text(28,"Advance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"td",117),e.\u0275\u0275text(30),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"tr")(32,"th",80),e.\u0275\u0275text(33,"Minimum Wage Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"td"),e.\u0275\u0275text(35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"tr")(37,"th",80),e.\u0275\u0275text(38,"Minimum Wage Percentage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"td"),e.\u0275\u0275text(40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"tr")(42,"th",80),e.\u0275\u0275text(43,"Wage Applicable"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"td",118),e.\u0275\u0275text(45),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(46,"div",119)(47,"table",120)(48,"thead",121)(49,"tr")(50,"th",122),e.\u0275\u0275text(51,"Earnings"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(52,"thead",41)(53,"tr")(54,"th",42),e.\u0275\u0275text(55,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"th",42),e.\u0275\u0275text(57,"% OF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"th",42),e.\u0275\u0275text(59,"Full Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"th",42),e.\u0275\u0275text(61,"Priority"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th",42),e.\u0275\u0275text(63,"Percentage (%)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th",42),e.\u0275\u0275text(65,"Dependent Head"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"th",42),e.\u0275\u0275text(67,"Attendance Relateion"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"th",42),e.\u0275\u0275text(69,"Head Include in"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(70,"th",42),e.\u0275\u0275text(71,"Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"th",42),e.\u0275\u0275text(73,"Value"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(74,Xo,2,1,"tbody",11),e.\u0275\u0275template(75,ei,4,0,"ng-template",null,123,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275reference(76),t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.template_name),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.restricted_pf),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.voluntary_pf),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.no_pension),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.advance),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.minimum_wage_amount),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.minimum_wage_percentage),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==t.salaryTempateDetails?null:t.salaryTempateDetails.wage_applicable),e.\u0275\u0275advance(29),e.\u0275\u0275property("ngIf",t.salaryTempateDetails.earnings.length>0)("ngIfElse",n)}}const R=function(){return{search:!1,placeholder:"Choose One",height:"200px"}};let ni=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.adminService=a,this.toastr=r,this.spinner=s,this.AppComponent=m,this.router=c,this.dtOptions={},this.earningSalaryHeads=[],this.dependentSalaryHeads=[],this.dependentSalaryHeadsId=[],this.Global=d,this.isAdvancePreDefiend=!1,this.salaryTemplateForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],voluntary_pf:[null,i.kI.compose([i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],advance:[null],minimum_wage_amount:[null,i.kI.compose([i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],minimum_wage_percentage:[null,i.kI.compose([i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],wage_applicable:[null]}),this.salaryEarningForm=n.group({head_id:[null,i.kI.compose([i.kI.required])],priority:[null,i.kI.compose([i.kI.required])],is_percentage:[null,i.kI.compose([])],percentage_amount:[null,i.kI.compose([i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],dependent_head:[null,i.kI.compose([])],attendance_relation:[null,i.kI.compose([i.kI.required])],head_include_in:[null],earning_type:[null,i.kI.compose([])],earning_value:[null,i.kI.compose([i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])]}),this.salaryHeadForm=n.group({full_name:[null,i.kI.compose([i.kI.required])],head_type:[null,i.kI.compose([i.kI.required])],abbreviation:[null,i.kI.compose([])]}),this.salaryTemplateForm.get("advance")?.valueChanges.subscribe(u=>{1==u?($(".advance-action").show(500),$("#salaryEarningForm").find(".advance-fields").show(),this.salaryTemplateForm.controls.minimum_wage_amount.setValidators([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")]),this.salaryTemplateForm.controls.minimum_wage_percentage.setValidators([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")]),this.salaryTemplateForm.controls.wage_applicable.setValidators([i.kI.required])):($(".advance-action").hide(500),$("#salaryEarningForm").find(".advance-fields").hide(),this.salaryTemplateForm.controls.minimum_wage_amount.clearValidators(),this.salaryTemplateForm.controls.minimum_wage_percentage.clearValidators(),this.salaryTemplateForm.controls.wage_applicable.clearValidators(),this.salaryTemplateForm.patchValue({minimum_wage_amount:null,minimum_wage_percentage:null,wage_applicable:null})),this.salaryTemplateForm.controls.minimum_wage_amount.updateValueAndValidity(),this.salaryTemplateForm.controls.minimum_wage_percentage.updateValueAndValidity(),this.salaryTemplateForm.controls.wage_applicable.updateValueAndValidity()}),this.salaryEarningForm.get("is_percentage")?.valueChanges.subscribe(u=>{1==u?(this.salaryEarningForm.controls.percentage_amount.setValidators([i.kI.required]),$('[formControlName="percentage_amount"]').removeAttr("readonly"),this.salaryEarningForm.get("earning_type")?.setValue({value:"auto",description:"Auto"})):(this.salaryEarningForm.controls.percentage_amount.clearValidators(),this.salaryEarningForm.patchValue({percentage_amount:null}),$('[formControlName="percentage_amount"]').attr("readonly","true")),this.salaryEarningForm.controls.percentage_amount.updateValueAndValidity(),this.isAdvancePreDefiend&&this.salaryEarningForm.get("earning_type")?.setValue({value:"auto",description:"Auto"})}),this.salaryEarningForm.get("earning_type")?.valueChanges.subscribe(u=>{"percent"==u?.value?(this.salaryEarningForm.controls.earning_value.setValidators([i.kI.required]),$('[formControlName="earning_value"]').attr("placeholder","Enter Earning Percentage")):"amount"==u?.value?(this.salaryEarningForm.controls.earning_value.setValidators([i.kI.required]),$('[formControlName="earning_value"]').attr("placeholder","Enter Earning Amount")):(this.salaryEarningForm.controls.earning_value.clearValidators(),$('[formControlName="earning_value"]').attr("placeholder","Enter Earning Value")),this.salaryEarningForm.controls.earning_value.updateValueAndValidity()}),this.priorityMaster=[{value:1,description:"1"},{value:2,description:"2"},{value:3,description:"3"},{value:4,description:"4"},{value:5,description:"5"}],this.attendanceRelationMaster=[{value:"dependent",description:"Dependent"},{value:"non_dependent",description:"Non-Dependent"}],this.headsIncludeMaster=[{value:"PF",description:"PF"},{value:"ESI",description:"ESI"},{value:"PT",description:"PT"},{value:"TDS",description:"TDS"},{value:"OT",description:"OT"},{value:"Bonus",description:"Bonus"},{value:"Gratuity",description:"Gratuity"}],this.earningTypeMaster=this.earningTypeOptions=[{value:"percent",description:"Percent"},{value:"amount",description:"Amount"}],this.salaryHeads=[],this.earnings=[],this.earningEditActionIndex="",this.tempEditActionId="",this.salaryTempateDetails=null}ngOnInit(){this.titleService.setTitle("Salary Template - "+d.AppName),this.fetchSalaryHeads(),this.fetchSalaryTemplate()}fetchSalaryTemplate(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchSalaryTemplates({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.salary_template.totalDocs,recordsFiltered:a.salary_template.totalDocs,data:a.salary_template.docs}):(this.toastr.error(a.message),t({recordsTotal:0,recordsFiltered:0,data:[]}))},a=>{this.toastr.error(d.showServerErrorMessage(a)),t({recordsTotal:0,recordsFiltered:0,data:[]})})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){let s="";return s+='<button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="View" id="viewButton">\n                        <div style="width:25px; height:25px;"><i class="fa fa-eye"></i></div>\n                    </button>',"active"==a.edit_status&&(s+='<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton">\n                          <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                      </button>'),s},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name},orderable:!0,name:"template_name"},{render:function(n,t,a,r){return'<span class="text-uppercase">'+a.restricted_pf+"</span>"},orderable:!0,name:"restricted_pf"},{render:function(n,t,a,r){return a.voluntary_pf},orderable:!0,name:"voluntary_pf"},{render:function(n,t,a,r){return'<span class="text-uppercase">'+a.no_pension+"</span>"},orderable:!0,name:"no_pension"},{render:function(n,t,a,r){return a.minimum_wage_amount??"N/A"},orderable:!0,name:"minimum_wage_amount"},{render:function(n,t,a,r){return a.minimum_wage_percentage??"N/A"},orderable:!0,name:"minimum_wage_percentage"},{render:function(n,t,a,r){return'<span class="text-uppercase">'+a.wage_applicable+"</span>"},orderable:!0,name:"wage_applicable"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("#viewButton",n).bind("click",()=>{r.viewSalaryTemplate(t)}),$("#editButton",n).bind("click",()=>{r.getEditSalaryTemplate(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeSalaryTemplatePlublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}viewSalaryTemplate(n){n.earnings.forEach(t=>{t.attendance_relation=t.attendance_relation.replace(/_/gi," ")}),this.salaryTempateDetails=n,$("#viewSalaryTemplateModalButton").click()}getEditSalaryTemplate(n,t=!1){this.cancelSalaryTemplateEntry(),t||(this.tempEditActionId=n._id),this.salaryTemplateForm.patchValue({template_name:n.template_name??null,restricted_pf:n.restricted_pf??null,voluntary_pf:n.voluntary_pf??null,no_pension:n.no_pension??null,advance:"yes"==n.advance,minimum_wage_amount:n.minimum_wage_amount??null,minimum_wage_percentage:n.minimum_wage_percentage??null,wage_applicable:n.wage_applicable??null}),this.earnings=[],n.earnings.forEach(a=>{let r={head_id:this.salaryHeads.find(s=>s.id==a.head_id)??null,priority:this.priorityMaster.find(s=>s.value==a.priority)??null,dependent_head:this.salaryHeads.find(s=>s.id==a.dependent_head)??null,attendance_relation:this.attendanceRelationMaster.find(s=>s.value==a.attendance_relation)??null,is_percentage:"yes"==a.is_percentage,percentage_amount:a.percentage_amount??null,head_include_in:a.head_include_in??[],earning_value:a.earning_value??null};r.earning_type="auto"==a?.earning_type?{value:"auto",description:"Auto"}:this.earningTypeMaster.find(s=>s.value==a.earning_type),this.earnings.push(r),this.dependentSalaryHeadsId.push(a?.head_id)}),"yes"==n.no_pension&&$("#no-pension").addClass("on"),"yes"==n.restricted_pf&&$("#restricted-pf").addClass("on"),d.scrollToQuery("#salarytemplate-submit-section")}addSalaryTemplate(n){let t=this.fetchEarningsForSubmit();this.salaryTemplateForm.markAllAsTouched(),d.scrollToQuery("p.error-element"),this.salaryTemplateForm.valid&&0!=t&&(n.target.classList.add("btn-loading"),this.adminService.addSalaryTemplate({template_name:this.salaryTemplateForm.value.template_name??"",restricted_pf:1==$("#restricted-pf").hasClass("on")?"yes":"no",voluntary_pf:this.salaryTemplateForm.value.voluntary_pf??"0",no_pension:1==$("#no-pension").hasClass("on")?"yes":"no",advance:1==this.salaryTemplateForm.value.advance?"yes":"no",minimum_wage_amount:this.salaryTemplateForm.value.minimum_wage_amount??"",minimum_wage_percentage:this.salaryTemplateForm.value.minimum_wage_percentage??"",wage_applicable:this.salaryTemplateForm.value.wage_applicable??"higher",earning:JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.cancelSalaryTemplateEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(a))}))}updateSalaryTemplate(n){let t=this.fetchEarningsForSubmit();this.salaryTemplateForm.markAllAsTouched(),d.scrollToQuery("p.error-element"),this.salaryTemplateForm.valid&&0!=t&&(n.target.classList.add("btn-loading"),this.adminService.updateSalaryTemplate({template_id:this.tempEditActionId,template_name:this.salaryTemplateForm.value.template_name??"",restricted_pf:1==$("#restricted-pf").hasClass("on")?"yes":"no",voluntary_pf:this.salaryTemplateForm.value.voluntary_pf??"0",no_pension:1==$("#no-pension").hasClass("on")?"yes":"no",advance:1==this.salaryTemplateForm.value.advance?"yes":"no",minimum_wage_amount:this.salaryTemplateForm.value.minimum_wage_amount??"",minimum_wage_percentage:this.salaryTemplateForm.value.minimum_wage_percentage??"",wage_applicable:this.salaryTemplateForm.value.wage_applicable??"higher",earning:JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(a))}))}fetchEarningsForSubmit(){if(this.earnings.length<1)return this.toastr.error("Please add atleast one earning to create salary template"),!1;let n="false",t=0,a="false",r=0,s=[];return this.earnings.forEach(m=>{let c={head_id:m.head_id?.id??"",head_full_name:m.head_id?.full_name??"",head_abbreviation:m.head_id?.abbreviation??"",type:m.head_id?.head_type??"",priority:m.priority?.value??"",is_percentage:1==m.is_percentage?"yes":"no",percentage_amount:m.percentage_amount??"",attendance_relation:m.attendance_relation?.value??"",head_include_in:m.head_include_in??[],earning_type:m.earning_type?.value??"",earning_value:m.earning_value??""};1!=this.salaryTemplateForm.value.advance&&(c.is_percentage="no",c.percentage_amount="",m.dependent_head=""),m.dependent_head?.id?(c.dependent_head=m.dependent_head?.id??"",c.dependent_head_full_name=m.dependent_head?.full_name??"",c.dependent_head_abbreviation=m.dependent_head?.abbreviation??"",c.dependent_head_type=m.dependent_head?.head_type??""):(c.dependent_head="",c.dependent_head_full_name="",c.dependent_head_abbreviation="",c.dependent_head_type=""),"percent"==c.earning_type&&(n="true",t+=parseFloat(c.earning_value)),"auto"==c.earning_type&&(a="true"),c.percentage_amount&&(r+=parseFloat(c.percentage_amount)),s.push(c)}),"true"==n&&100!=t?(this.toastr.error("The total earning percentage must be 100"),!1):r&&100!=parseFloat(r)?(this.toastr.error("The total percentage applicable for the template must be 100"),!1):"true"==a&&1!=this.salaryTemplateForm.value.advance?(this.toastr.error("Auto Earning Type option is only available for Advance Templates"),!1):s}cancelSalaryTemplateEntry(){this.tempEditActionId="",this.earnings=[],this.salaryTemplateForm.reset();for(const n in this.salaryTemplateForm.controls)if(Object.prototype.hasOwnProperty.call(this.salaryTemplateForm.controls,n)){const t=this.salaryTemplateForm.controls[n];t.markAsUntouched(),t.markAsPristine()}$("#no-pension").removeClass("on"),$("#restricted-pf").removeClass("on"),d.scrollToQuery("#salarytemplate-submit-section")}removeEarning(n){this.earnings.splice(n,1)}cancelEarningEntry(){$(".earning-desc").hide(),this.earningEditActionIndex="",this.resetSelectedEarningHead(),this.salaryEarningForm.reset();for(const n in this.salaryEarningForm.controls)if(Object.prototype.hasOwnProperty.call(this.salaryEarningForm.controls,n)){const t=this.salaryEarningForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}submitEarning(n){if(this.salaryEarningForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.salaryEarningForm.valid){let t=this.getSelectedEarningHeadIncludes();this.salaryEarningForm.patchValue({head_include_in:t}),""===this.earningEditActionIndex?this.earnings.push(this.salaryEarningForm.value):this.earnings[this.earningEditActionIndex]=this.salaryEarningForm.value,this.cancelEarningEntry()}}fetchSalaryHeads(){this.spinner.show(),this.adminService.fetchSalaryHeads().subscribe(n=>{"success"==n.status?(this.salaryHeads=[],n.temp_head.forEach(t=>{this.salaryHeads.push({id:t._id,description:t.full_name,full_name:t.full_name,abbreviation:t.abbreviation,head_type:t.head_type,pre_def_head:t.pre_def_head})})):this.toastr.error("val_err"==n.status?d.showValidationMessage(n.val_msg):n.message),this.spinner.hide()},n=>{this.spinner.hide(),this.toastr.error(d.showServerErrorMessage(n))})}changeSalaryTemplatePlublishStatus(n){this.spinner.show(),this.adminService.updateSalaryTemplatePublishStatus({template_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),this.toastr.success(t.message)):this.toastr.error(t.message),this.spinner.hide()},t=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}addSalaryHead(n){this.salaryHeadForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.salaryHeadForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.addSalaryHead({full_name:this.salaryHeadForm.value.full_name,head_type:this.salaryHeadForm.value.head_type,abbreviation:this.salaryHeadForm.value.abbreviation}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelSalaryHeadEntry(),this.fetchSalaryHeads()):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(t))}))}cancelSalaryHeadEntry(){$("#salary-head-modal").modal("hide"),this.salaryHeadForm.reset()}getSelectedEarningHeadIncludes(){let n=[];return $('input[name="head_include_in[]"]:checked').each(function(){n.push($(this).val())}),n}selectedEarningHeadForEdit(n){this.resetSelectedEarningHead();for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&$('input[name="head_include_in[]"][value="'+n[t]+'"]').prop("checked",!0)}resetSelectedEarningHead(){$('input[name="head_include_in[]"]:checked').each(function(){$(this).prop("checked",!1)})}editEarning(n,t){this.earningEditActionIndex=t,this.salaryEarningForm.patchValue({head_id:n.head_id,priority:n.priority,is_percentage:n.is_percentage,percentage_amount:n.percentage_amount,dependent_head:n.dependent_head,attendance_relation:n.attendance_relation,earning_type:n.earning_type,earning_value:n.earning_value}),"yes"===n?.head_id?.pre_def_head&&0==t&&1==n?.priority?.value&&this.salaryEarningForm.get("earning_type")?.setValue({value:"auto",description:"Auto"}),"yes"===n?.head_id?.pre_def_head&&this.salaryTemplateForm.get("advance")?.value?(this.isAdvancePreDefiend=!0,this.salaryEarningForm.get("is_percentage")?.disable()):(this.mapDataForEarning(),this.isAdvancePreDefiend=!1,this.salaryEarningForm.get("is_percentage")?.enable()),this.selectedEarningHeadForEdit(n.head_include_in),$(".earning-desc").show()}mapDataForEarning(){this.earningSalaryHeads=this.salaryHeads.filter(t=>!this.dependentSalaryHeadsId.includes(t.id)),this.dependentSalaryHeads=this.salaryHeads.filter(t=>this.dependentSalaryHeadsId.includes(t.id));const n=this.earnings?.find(t=>1===t?.priority?.value)?.priority.value;if(n){const t=this.priorityMaster.findIndex(a=>a.value===n);t>=0&&this.priorityMaster.splice(t,1)}else this.priorityMaster.findIndex(t=>1===t.value)<0&&this.priorityMaster.unshift({value:1,description:"1"});this.isAdvancePreDefiend=!1,this.salaryEarningForm.get("is_percentage")?.enable()}addEarning(){this.mapDataForEarning(),this.cancelEarningEntry(),$(".earning-desc").show()}markAdvance(n){if(this.earnings.length)_().fire({title:"Warning!",text:"All current earnings will be removed with this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Okay",cancelButtonText:"Cancel"}).then(t=>{if(t.value){if(this.salaryTemplateForm.get("advance")?.setValue(n?.target?.checked),this.earnings=[],this.earningSalaryHeads=[],this.dependentSalaryHeads=[],this.dependentSalaryHeadsId=[],n.target.checked){let a=this.salaryEarningForm.value;a.head_id=this.salaryHeads.find(r=>"yes"==r.pre_def_head),a.priority={value:1,description:"1"},a.earning_type={value:"auto",description:"Auto"},a.attendance_relation={value:"dependent",description:"Dependent"},a.dependent_head=[],a.head_include_in=[],this.earnings.push(a),this.dependentSalaryHeadsId.push(a?.head_id?.id),this.salaryTemplateForm.get("advance")?.setValue(!0)}}else t.dismiss===_().DismissReason.cancel&&(n.target.checked=!n.target.checked)});else{let t=this.salaryEarningForm.value;t.head_id=this.salaryHeads.find(a=>"yes"==a.pre_def_head),t.priority={value:1,description:"1"},t.earning_type={value:"auto",description:"Auto"},t.attendance_relation={value:"dependent",description:"Dependent"},t.dependent_head=[],t.head_include_in=[],this.earnings.push(t),this.dependentSalaryHeadsId.push(t?.head_id?.id),this.salaryTemplateForm.get("advance")?.setValue(!0)}}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(Wr.y),e.\u0275\u0275directiveInject(h.F0))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-salary-template"]],decls:274,vars:80,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-list"],["id","salarytemplate-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[4,"ngIf","ngIfElse"],["updateTextBlock",""],["data-toggle","modal","data-target","#salary-head-modal",1,"btn","btn-info","pull-right",2,"float","right","clear","both"],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["class","text-danger",4,"ngIf"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["id","restricted-pf",1,"br-toggle","br-toggle-rounded","br-toggle-primary"],[1,"br-toggle-switch"],["type","number","formControlName","voluntary_pf",1,"form-control"],[1,"row","no-gutters",2,"border-right","1px solid #ced4da"],[1,"col-12","col-sm-12"],[1,"ckbox","mg-t-15"],["type","checkbox",3,"checked","change"],[1,"advance-action"],["formControlName","minimum_wage_amount","type","text","placeholder","Amount",1,"form-control"],["formControlName","minimum_wage_percentage","type","text","placeholder","Percentage",1,"form-control"],[1,"rdiobox"],["type","radio","formControlName","wage_applicable","value","higher"],["type","radio","formControlName","wage_applicable","value","lower"],[1,"col-6","col-sm-6","sameasfirst"],[1,"col-9","col-sm-9",2,"text-align","center"],[1,"btn","btn-sm","btn-info","add-earnings","float-right",3,"click"],[1,"col-12","col-sm-12",2,"background","transparent"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","text-center",2,"border","1px solid #dee2e6"],[1,"bg-dark"],[1,"text-white",2,"white-space","nowrap"],["noEarningFound",""],[1,"row","no-gutters","bd-1",2,"border-right","1px solid #ced4da"],["type","button",1,"btn","btn-danger","mr-2",3,"click"],["class","btn btn-info","type","submit",3,"click",4,"ngIf","ngIfElse"],["editButtonBlock",""],[1,"br-pagebody"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-15p","text-center"],[1,"wd-25p","text-center"],[1,"earning-desc","animate__animated","animate__slideInRight","bd_rightside"],["id","salaryEarningForm",3,"formGroup"],[1,"pd-20","pd-xs-40","mg-t-40",2,"width","100%"],[1,"tx-gray-800","tx-uppercase","tx-bold"],[1,"btn","btn-info","pull-right","close-earnings","float-right",3,"click"],[1,"fa","fa-times"],["class","tx-gray-600 mg-b-30",4,"ngIf","ngIfElse"],["earningEditTextBlock",""],[1,"form-group"],["formControlName","head_id",1,"form-control","p-1",3,"options","config","disabled"],["class","mt-1 text-danger",4,"ngIf"],["formControlName","priority",1,"form-control","p-1",3,"options","config","disabled"],[1,"form-group","advance-fields",2,"display","none"],["type","checkbox","formControlName","is_percentage",3,"readOnly","disabled"],["type","text","placeholder","Percentage","formControlName","percentage_amount",1,"form-control","pd-y-12",3,"readOnly"],["formControlName","dependent_head",1,"form-control","p-1",3,"options","disabled","config"],["formControlName","attendance_relation",1,"form-control","p-1",3,"options","config","disabled"],[1,"mb-0"],["class","ckbox mg-t-15",4,"ngFor","ngForOf"],["formControlName","earning_type",1,"form-control","p-1",3,"options","config","disabled"],["class","form-group",4,"ngIf"],[1,"btn","btn-info","btn-block","pd-y-10",3,"click"],["id","salary-head-modal",1,"modal","fade"],["role","document",1,"modal-dialog","modal-sm","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["type","text","formControlName","full_name",1,"form-control","pd-y-12"],["type","text","formControlName","abbreviation",1,"form-control","pd-y-12"],["formControlName","head_type","value","earning","type","radio"],["formControlName","head_type","value","deduction","type","radio"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","tx-size-xs",3,"click"],["type","button",1,"btn","btn-secondary","tx-size-xs",3,"click"],["id","viewSalaryTemplateModalButton","data-toggle","modal","data-target","#viewSalaryTemplateModal",3,"hidden"],["id","viewSalaryTemplateModal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],["class","modal-body pd-20",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"text-danger"],[1,"error-element"],[4,"ngFor","ngForOf"],[4,"ngIf"],["noHeadIncludeFound",""],[2,"white-space","nowrap"],[1,"btn","btn-primary","btn-icon","mg-r-5","add-earnings",3,"click"],[2,"width","25px","height","25px"],[1,"fa","fa-pen"],["class","btn btn-danger btn-icon",3,"click",4,"ngIf"],[1,"badge","badge-primary",2,"font-size","12px","margin","3px","padding","4px 10px"],[1,"btn","btn-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["colspan","11",1,"text-center"],["type","submit",1,"btn","btn-info",3,"click"],[1,"tx-gray-600","mg-b-30"],[1,"mt-1","text-danger"],["type","checkbox","name","head_include_in[]",3,"value"],["type","text","placeholder","Earning Value","formControlName","earning_value",1,"form-control","pd-y-12",3,"readOnly","disabled"],[1,"bd","bd-gray-300","rounded","table-responsive"],[1,"table","table-striped","mg-b-0"],[1,"text-uppercase"],[1,"text-capitalize"],[1,"bd","bd-gray-300","rounded","table-responsive","mg-t-10"],[1,"table","table-striped","mg-b-0","text-center"],[1,"bg-info"],["colspan","10",1,"text-uppercase","text-white"],["noViewEarningFound",""],["colspan","10",1,"text-center"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashbaord"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"span",5),e.\u0275\u0275text(9,"Salary Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Salary Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9)(17,"h6",10),e.\u0275\u0275template(18,Qr,2,0,"ng-container",11),e.\u0275\u0275template(19,Zr,1,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(21,"button",13),e.\u0275\u0275text(22,"Add Salary Heads"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(23,"br"),e.\u0275\u0275elementStart(24,"div",14)(25,"form",15)(26,"div",16)(27,"div",17),e.\u0275\u0275text(28," Template Name\xa0 "),e.\u0275\u0275template(29,Kr,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",17),e.\u0275\u0275element(31,"input",19),e.\u0275\u0275template(32,Xr,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",21),e.\u0275\u0275text(34,"Restricted PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",17)(36,"div",22),e.\u0275\u0275element(37,"div",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(38,"div",16)(39,"div",17),e.\u0275\u0275text(40," Voluntary PF (% of PF Wages)\xa0 "),e.\u0275\u0275template(41,eo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",17),e.\u0275\u0275element(43,"input",24),e.\u0275\u0275template(44,to,2,0,"p",20),e.\u0275\u0275template(45,no,2,0,"p",20),e.\u0275\u0275template(46,ao,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(47,"div",21)(48,"div",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",25)(50,"div",26)(51,"label",27)(52,"input",28),e.\u0275\u0275listener("change",function(r){return t.markAdvance(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"span"),e.\u0275\u0275text(54,"Advance"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(55,"div",29)(56,"div",16)(57,"div",17),e.\u0275\u0275text(58,"Minimum Wage Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"div",17),e.\u0275\u0275element(60,"input",30),e.\u0275\u0275template(61,ro,2,0,"p",20),e.\u0275\u0275template(62,oo,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"div",21),e.\u0275\u0275text(64," Minimum Wage Percentage "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"div",17),e.\u0275\u0275element(66,"input",31),e.\u0275\u0275template(67,io,2,0,"p",20),e.\u0275\u0275template(68,lo,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"div",16)(70,"div",17),e.\u0275\u0275text(71,"Applicable (Which Ever is )"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"div",17)(73,"label",32),e.\u0275\u0275element(74,"input",33),e.\u0275\u0275elementStart(75,"span"),e.\u0275\u0275text(76,"Higher"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(77,"label",32),e.\u0275\u0275element(78,"input",34),e.\u0275\u0275elementStart(79,"span"),e.\u0275\u0275text(80,"Lower"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(81,so,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(82,"div",35),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"div",16)(84,"div",36),e.\u0275\u0275text(85," Earnings "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"div",17)(87,"button",37),e.\u0275\u0275listener("click",function(){return t.addEarning()}),e.\u0275\u0275text(88," Add Row "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(89,"div",25)(90,"div",38)(91,"div",39)(92,"table",40)(93,"thead",41)(94,"tr")(95,"th",42),e.\u0275\u0275text(96," SL No "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(97,"th",42),e.\u0275\u0275text(98," % OF "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(99,"th",42),e.\u0275\u0275text(100," Full Name "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(101,"th",42),e.\u0275\u0275text(102," Priority "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(103,"th",42),e.\u0275\u0275text(104," Percentage (%) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(105,"th",42),e.\u0275\u0275text(106," Dependent Head "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(107,"th",42),e.\u0275\u0275text(108," Attendance Relateion "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(109,"th",42),e.\u0275\u0275text(110," Head Include in "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(111,"th",42),e.\u0275\u0275text(112," Type "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(113,"th",42),e.\u0275\u0275text(114," Value "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(115,"th",42),e.\u0275\u0275text(116," Action "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(117,vo,2,1,"tbody",11),e.\u0275\u0275template(118,yo,4,0,"ng-template",null,43,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(120,"div",44)(121,"div",26)(122,"button",45),e.\u0275\u0275listener("click",function(){return t.cancelSalaryTemplateEntry()}),e.\u0275\u0275elementStart(123,"span"),e.\u0275\u0275text(124,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(125,xo,3,0,"button",46),e.\u0275\u0275template(126,So,3,0,"ng-template",null,47,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(128,"div",48)(129,"div",9)(130,"h6",10),e.\u0275\u0275text(131," All Salary Template "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(132,"div",49)(133,"table",50)(134,"thead")(135,"tr")(136,"th",51),e.\u0275\u0275text(137,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(138,"th",52),e.\u0275\u0275text(139,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(140,"th",53),e.\u0275\u0275text(141,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(142,"th",51),e.\u0275\u0275text(143,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(144,"th",51),e.\u0275\u0275text(145,"PF Restricted"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(146,"th",51),e.\u0275\u0275text(147,"Voluntary PF"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(148,"th",51),e.\u0275\u0275text(149,"No Pension"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(150,"th",51),e.\u0275\u0275text(151,"Min Wage Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(152,"th",51),e.\u0275\u0275text(153,"Min Wage Percentage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(154,"th",51),e.\u0275\u0275text(155,"Wage Applicable"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(156,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(157,"div",54)(158,"form",55)(159,"div",56)(160,"h6",57),e.\u0275\u0275text(161," Earnings "),e.\u0275\u0275elementStart(162,"button",58),e.\u0275\u0275listener("click",function(){return t.cancelEarningEntry()}),e.\u0275\u0275element(163,"i",59),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(164,Eo,2,0,"p",60),e.\u0275\u0275template(165,Co,2,0,"ng-template",null,61,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(167,"div",62)(168,"label"),e.\u0275\u0275text(169," Full Name\xa0 "),e.\u0275\u0275template(170,wo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(171,"ngx-select-dropdown",63),e.\u0275\u0275template(172,ko,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(173,"div",62)(174,"label"),e.\u0275\u0275text(175," Priority\xa0 "),e.\u0275\u0275template(176,Io,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(177,"ngx-select-dropdown",65),e.\u0275\u0275template(178,Fo,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(179,"div",66)(180,"label",27),e.\u0275\u0275element(181,"input",67),e.\u0275\u0275elementStart(182,"span"),e.\u0275\u0275text(183,"is % OF?"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(184,"div",66)(185,"label"),e.\u0275\u0275text(186," Percentage\xa0 "),e.\u0275\u0275template(187,To,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(188,"input",68),e.\u0275\u0275template(189,Ao,2,0,"p",64),e.\u0275\u0275template(190,Do,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(191,"div",66)(192,"label"),e.\u0275\u0275text(193," Dependent Head\xa0 "),e.\u0275\u0275template(194,Po,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(195,"ngx-select-dropdown",69),e.\u0275\u0275template(196,Ro,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(197,"div",62)(198,"label"),e.\u0275\u0275text(199," Attendance Relation\xa0 "),e.\u0275\u0275template(200,Mo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(201,"ngx-select-dropdown",70),e.\u0275\u0275template(202,Oo,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(203,"div",62)(204,"label",71),e.\u0275\u0275text(205,"Heads Included in"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(206,No,4,2,"label",72),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(207,"div",62)(208,"label"),e.\u0275\u0275text(209," Earning Type\xa0 "),e.\u0275\u0275template(210,Lo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(211,"ngx-select-dropdown",73),e.\u0275\u0275template(212,Vo,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(213,jo,7,5,"div",74),e.\u0275\u0275elementStart(214,"button",75),e.\u0275\u0275listener("click",function(r){return t.submitEarning(r)}),e.\u0275\u0275elementStart(215,"span"),e.\u0275\u0275text(216,"Save"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(217,"div",76)(218,"div",77)(219,"div",78)(220,"div",79)(221,"h6",80),e.\u0275\u0275text(222,"Add Salary Head"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(223,"button",81)(224,"span",82),e.\u0275\u0275text(225,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(226,"form",15)(227,"div",83)(228,"div",62)(229,"label"),e.\u0275\u0275text(230,"Full Name\xa0"),e.\u0275\u0275template(231,Uo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(232,"input",84),e.\u0275\u0275template(233,Ho,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(234,"div",62)(235,"label"),e.\u0275\u0275text(236,"Abbreviation\xa0"),e.\u0275\u0275template(237,Yo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(238,"input",85),e.\u0275\u0275template(239,Go,2,0,"p",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(240,"div",62)(241,"label"),e.\u0275\u0275text(242,"Type\xa0"),e.\u0275\u0275template(243,Jo,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(244,"label",32),e.\u0275\u0275element(245,"input",86),e.\u0275\u0275elementStart(246,"span"),e.\u0275\u0275text(247,"Earning"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(248,"label",32),e.\u0275\u0275element(249,"input",87),e.\u0275\u0275elementStart(250,"span"),e.\u0275\u0275text(251,"Deduction"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(252,zo,2,0,"p",64),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(253,"div",88)(254,"button",89),e.\u0275\u0275listener("click",function(r){return t.addSalaryHead(r)}),e.\u0275\u0275elementStart(255,"span"),e.\u0275\u0275text(256,"Save changes"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(257,"button",90),e.\u0275\u0275listener("click",function(){return t.cancelSalaryHeadEntry()}),e.\u0275\u0275text(258,"Cancel"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275element(259,"button",91),e.\u0275\u0275elementStart(260,"div",92)(261,"div",93)(262,"div",78)(263,"div",79)(264,"h6",80),e.\u0275\u0275text(265,"View Salary Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(266,"button",81)(267,"span",82),e.\u0275\u0275text(268,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(269,ti,77,10,"div",94),e.\u0275\u0275elementStart(270,"div",88)(271,"button",95),e.\u0275\u0275text(272,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(273,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(20),r=e.\u0275\u0275reference(119),s=e.\u0275\u0275reference(127),m=e.\u0275\u0275reference(166);let c,u,f,F,T;e.\u0275\u0275advance(18),e.\u0275\u0275property("ngIf",!t.tempEditActionId)("ngIfElse",a),e.\u0275\u0275advance(7),e.\u0275\u0275property("formGroup",t.salaryTemplateForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryTemplateForm,"template_name","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.template_name.hasError("required")&&(t.salaryTemplateForm.controls.template_name.dirty||t.salaryTemplateForm.controls.template_name.touched)),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryTemplateForm,"voluntary_pf","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.voluntary_pf.hasError("required")&&(t.salaryTemplateForm.controls.voluntary_pf.dirty||t.salaryTemplateForm.controls.voluntary_pf.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.voluntary_pf.hasError("pattern")&&(t.salaryTemplateForm.controls.voluntary_pf.dirty||t.salaryTemplateForm.controls.voluntary_pf.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.voluntary_pf.hasError("max")&&(t.salaryTemplateForm.controls.voluntary_pf.dirty||t.salaryTemplateForm.controls.voluntary_pf.touched)),e.\u0275\u0275advance(6),e.\u0275\u0275property("checked",null==(c=t.salaryTemplateForm.get("advance"))?null:c.value),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.minimum_wage_amount.hasError("required")&&(t.salaryTemplateForm.controls.minimum_wage_amount.dirty||t.salaryTemplateForm.controls.minimum_wage_amount.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.minimum_wage_amount.hasError("pattern")&&(t.salaryTemplateForm.controls.minimum_wage_amount.dirty||t.salaryTemplateForm.controls.minimum_wage_amount.touched)),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.minimum_wage_percentage.hasError("required")&&(t.salaryTemplateForm.controls.minimum_wage_percentage.dirty||t.salaryTemplateForm.controls.minimum_wage_percentage.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.minimum_wage_percentage.hasError("pattern")&&(t.salaryTemplateForm.controls.minimum_wage_percentage.dirty||t.salaryTemplateForm.controls.minimum_wage_percentage.touched)),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",t.salaryTemplateForm.controls.wage_applicable.hasError("required")&&(t.salaryTemplateForm.controls.wage_applicable.dirty||t.salaryTemplateForm.controls.wage_applicable.touched)),e.\u0275\u0275advance(36),e.\u0275\u0275property("ngIf",t.earnings.length>0)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",!t.tempEditActionId)("ngIfElse",s),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(25),e.\u0275\u0275property("formGroup",t.salaryEarningForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",""==t.earningEditActionIndex)("ngIfElse",m),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryEarningForm,"head_id","required")),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("error",t.salaryEarningForm.controls.head_id.dirty||t.salaryEarningForm.controls.head_id.touched),e.\u0275\u0275property("options",t.earningSalaryHeads)("config",e.\u0275\u0275pureFunction0(75,R))("disabled",t.isAdvancePreDefiend),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.head_id.hasError("required")&&(t.salaryEarningForm.controls.head_id.dirty||t.salaryEarningForm.controls.head_id.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryEarningForm,"priority","required")),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("error",t.salaryEarningForm.controls.priority.dirty||t.salaryEarningForm.controls.priority.touched),e.\u0275\u0275property("options",t.priorityMaster)("config",e.\u0275\u0275pureFunction0(76,R))("disabled",t.isAdvancePreDefiend),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.priority.hasError("required")&&(t.salaryEarningForm.controls.priority.dirty||t.salaryEarningForm.controls.priority.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("readOnly",t.isAdvancePreDefiend)("disabled",t.isAdvancePreDefiend),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryEarningForm,"percentage_amount","required")),e.\u0275\u0275advance(1),e.\u0275\u0275property("readOnly",!(null!=(u=t.salaryEarningForm.get("is_percentage"))&&u.value)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.percentage_amount.hasError("required")&&(t.salaryEarningForm.controls.percentage_amount.dirty||t.salaryEarningForm.controls.percentage_amount.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.percentage_amount.hasError("pattern")&&(t.salaryEarningForm.controls.percentage_amount.dirty||t.salaryEarningForm.controls.percentage_amount.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryEarningForm,"dependent_head","required")),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("error",t.salaryEarningForm.controls.dependent_head.dirty||t.salaryEarningForm.controls.dependent_head.touched),e.\u0275\u0275property("options",t.dependentSalaryHeads)("disabled",!(null!=(f=t.salaryEarningForm.get("is_percentage"))&&f.value))("config",e.\u0275\u0275pureFunction0(77,R)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.dependent_head.hasError("required")&&(t.salaryEarningForm.controls.dependent_head.dirty||t.salaryEarningForm.controls.dependent_head.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryEarningForm,"attendance_relation","required")),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("error",t.salaryEarningForm.controls.attendance_relation.dirty||t.salaryEarningForm.controls.attendance_relation.touched),e.\u0275\u0275property("options",t.attendanceRelationMaster)("config",e.\u0275\u0275pureFunction0(78,R))("disabled",t.isAdvancePreDefiend),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.attendance_relation.hasError("required")&&(t.salaryEarningForm.controls.attendance_relation.dirty||t.salaryEarningForm.controls.attendance_relation.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.headsIncludeMaster),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryEarningForm,"earning_type","required")),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("error",t.salaryEarningForm.controls.earning_type.dirty||t.salaryEarningForm.controls.earning_type.touched),e.\u0275\u0275property("options",t.earningTypeOptions)("config",e.\u0275\u0275pureFunction0(79,R))("disabled",t.isAdvancePreDefiend||(null==(F=t.salaryEarningForm.get("is_percentage"))?null:F.value)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryEarningForm.controls.earning_type.hasError("required")&&(t.salaryEarningForm.controls.earning_type.dirty||t.salaryEarningForm.controls.earning_type.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","auto"!==(null==(T=t.salaryEarningForm.get("earning_type"))||null==T.value?null:T.value.value)),e.\u0275\u0275advance(13),e.\u0275\u0275property("formGroup",t.salaryHeadForm),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryHeadForm,"full_name","required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.salaryHeadForm.controls.full_name.hasError("required")&&(t.salaryHeadForm.controls.full_name.dirty||t.salaryHeadForm.controls.full_name.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryHeadForm,"abbreviation","required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.salaryHeadForm.controls.abbreviation.hasError("required")&&(t.salaryHeadForm.controls.abbreviation.dirty||t.salaryHeadForm.controls.abbreviation.touched)),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.salaryHeadForm,"head_type","required")),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.salaryHeadForm.controls.head_type.hasError("required")&&(t.salaryHeadForm.controls.head_type.dirty||t.salaryHeadForm.controls.head_type.touched)),e.\u0275\u0275advance(7),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",null!=t.salaryTempateDetails)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i.Wl,i._,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".select2.select2-container[_ngcontent-%COMP%]{margin-bottom:5px}.earning-desc[_ngcontent-%COMP%]{width:450px;height:100%;position:fixed;overflow-y:auto;top:0;right:0;display:none;background:#fff;box-shadow:-5px 0 10px #a3a3a34d;-webkit-box-shadow:-5px 0px 10px rgba(163,163,163,.3);-moz-box-shadow:-5px 0px 10px rgba(163,163,163,.3);-o-box-shadow:-5px 0px 10px rgba(163,163,163,.3)}.earning-desc[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .earning-desc[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   span.select2[_ngcontent-%COMP%], .earning-desc[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%!important}.advance-action[_ngcontent-%COMP%]{display:none}"]}),o})();function ai(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",33),e.\u0275\u0275text(1,"Define TDS Template"),e.\u0275\u0275elementEnd())}function ri(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",33),e.\u0275\u0275text(1,"Update TDS Template"),e.\u0275\u0275elementEnd())}function oi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ii(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function li(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function si(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function di(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function mi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ci(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",50),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.tdsRuleForm.valid)}}function pi(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Template"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.tdsRuleForm.valid)}}const K=function(){return{search:!0,placeholder:"Choose One"}},G=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let ui=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.datePipe=m,this.dtOptions={},this.dtOptionsHistory={},this.viewPolicyDetail=null,this.initialValueBeforeUpdate=null,this.tdsRuleForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],application_methode:[null,i.kI.compose([i.kI.required])],frequency:[null,i.kI.compose([i.kI.required])],deadline_day:[null,i.kI.compose([i.kI.required])],deadline_month:[null,i.kI.compose([i.kI.required])],publish_status:[null,i.kI.compose([i.kI.required])]}),this.editActionId="",this.publishStatusMaster=[{value:"privet",description:"Private"},{value:"published",description:"Published"}],this.applicationMethodMaster=[{value:"assumed",description:"Assumed"},{value:"progreesive_acual_investment",description:"Progressive with Actual Investment"},{value:"progreesive_assumed_investment",description:"Progressive with Assumed Investment"},{value:"one_time",description:"One Time"}],this.frequencyMaster=[{value:"monthly",description:"Monthly"},{value:"quaterly",description:"Quaterly"},{value:"half_yearly",description:"Half Yearly"},{value:"yearly",description:"Yearly"},{value:"not_defined",description:"Not Defined"}],this.deadlineDayMaster=[];for(let c=1;c<=31;c++)this.deadlineDayMaster.push({value:c,description:c});this.deadlineMonthMaster=[{value:"1",description:"January"},{value:"2",description:"February"},{value:"3",description:"March"},{value:"4",description:"April"},{value:"5",description:"May"},{value:"6",description:"June"},{value:"7",description:"July"},{value:"8",description:"August"},{value:"9",description:"September"},{value:"10",description:"October"},{value:"11",description:"November"},{value:"12",description:"December"}]}ngOnInit(){this.titleService.setTitle("TDS Template - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.template_name}},{render:function(n,t,a,r){switch(a.application_methode){case"assumed":return"Assumed";case"progreesive_acual_investment":return"Progressive with Actual Investment";case"progreesive_assumed_investment":return"Progressive with Assumed Investment";case"one_time":return"One Time";default:return a.application_methode}}},{render:function(n,t,a,r){switch(a.frequency){case"monthly":return"Monthly";case"quaterly":return"Quaterly";case"half_yearly":return"Half Yearly";case"yearly":return"Yearly";case"not_defined":return"Not Defined";default:return a.frequency}}},{render:function(n,t,a,r){return a.deadline_day+"/"+a.deadline_month}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchTDSTemplates({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.tds_policy.totalDocs,recordsFiltered:a.tds_policy.totalDocs,data:a.tds_policy.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("published"==a.publish_status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name},orderable:!0,name:"template_name"},{render:function(n,t,a,r){switch(a.application_methode){case"assumed":return"Assumed";case"progreesive_acual_investment":return"Progressive with Actual Investment";case"progreesive_assumed_investment":return"Progressive with Assumed Investment";case"one_time":return"One Time";default:return a.application_methode}},orderable:!0,name:"application_methode"},{render:function(n,t,a,r){switch(a.frequency){case"monthly":return"Monthly";case"quaterly":return"Quaterly";case"half_yearly":return"Half Yearly";case"yearly":return"Yearly";case"not_defined":return"Not Defined";default:return a.frequency}},orderable:!0,name:"frequency"},{render:function(n,t,a,r){return a.deadline_day+"/"+a.deadline_month},orderable:!1}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changePublishStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changePublishStatus(n){this.adminService.updateTdsPublishStatus({tds_policy_id:n._id,status:"published"==n.publish_status?"privet":"published"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getEdit(n){this.editActionId=n._id,this.tdsRuleForm.patchValue({template_name:n.template_name,application_methode:this.applicationMethodMaster.find(t=>t.value==n.application_methode),frequency:this.frequencyMaster.find(t=>t.value==n.frequency),deadline_day:this.deadlineDayMaster.find(t=>t.value==n.deadline_day),deadline_month:this.deadlineMonthMaster.find(t=>t.value==n.deadline_month),publish_status:this.publishStatusMaster.find(t=>t.value==n.publish_status)}),this.initialValueBeforeUpdate={tds_policy_id:this.editActionId,template_name:this.tdsRuleForm.value.template_name.toString().trim(),application_methode:this.tdsRuleForm.value.application_methode.value,frequency:this.tdsRuleForm.value.frequency.value,deadline_day:this.tdsRuleForm.value.deadline_day.value,deadline_month:this.tdsRuleForm.value.deadline_month.value,publish_status:this.tdsRuleForm.value.publish_status.value},$("html, body").animate({scrollTop:$("#tdsrule-submit-section").position().top})}cancelEdit(){this.editActionId="",this.tdsRuleForm.reset();for(const n in this.tdsRuleForm.controls)if(Object.prototype.hasOwnProperty.call(this.tdsRuleForm.controls,n)){const t=this.tdsRuleForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){var t=this;return(0,g.Z)(function*(){if(t.tdsRuleForm.valid){if(!(yield t.validate_tds_template()))return;n.target.classList.add("btn-loading"),t.adminService.createTDSTemplate({template_name:t.tdsRuleForm.value.template_name,application_methode:t.tdsRuleForm.value.application_methode.value,frequency:t.tdsRuleForm.value.frequency.value,deadline_day:t.tdsRuleForm.value.deadline_day.value,deadline_month:t.tdsRuleForm.value.deadline_month.value,publish_status:t.tdsRuleForm.value.publish_status.value}).subscribe(r=>{"success"==r.status?(t.toastr.success(r.message),t.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(s){},!1)):t.toastr.error(r.message),n.target.classList.remove("btn-loading")},r=>{n.target.classList.remove("btn-loading"),t.toastr.error("Internal server error occured. Please try again later.")})}})()}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteTDSTemplate({tds_policy_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){var t=this;return(0,g.Z)(function*(){if(t.tdsRuleForm.valid){if(!(yield t.validate_tds_template()))return;const r={tds_policy_id:t.editActionId,template_name:t.tdsRuleForm.value.template_name.toString().trim(),application_methode:t.tdsRuleForm.value.application_methode.value,frequency:t.tdsRuleForm.value.frequency.value,deadline_day:t.tdsRuleForm.value.deadline_day.value,deadline_month:t.tdsRuleForm.value.deadline_month.value,publish_status:t.tdsRuleForm.value.publish_status.value};if(JSON.stringify(r)===JSON.stringify(t.initialValueBeforeUpdate))return void t.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),t.adminService.updateTDSTemplate(r).subscribe(s=>{"success"==s.status?(t.toastr.success(s.message),t.initialValueBeforeUpdate=r,$("#my-datatable").dataTable().api().ajax.reload(function(m){},!1)):t.toastr.error(s.message),n.target.classList.remove("btn-loading")},s=>{n.target.classList.remove("btn-loading"),t.toastr.error("Internal server error occured. Please try again later.")})}})()}showUpdateHistory(n){this.viewPolicyDetail=n,null!=this.viewPolicyDetail.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPolicyDetail&&null!=this.viewPolicyDetail.history&&Array.isArray(this.viewPolicyDetail.history)?this.viewPolicyDetail.history:[]}validate_tds_template(){const n=this;return new Promise(function(t,a){return"one_time"==n.tdsRuleForm.value.application_methode.value&&"yearly"!=n.tdsRuleForm.value.frequency.value?(n.toastr.error("For One-Time application method, the frequency value must be Yearly"),void t(!1)):2==parseInt(n.tdsRuleForm.value.deadline_month.value)&&parseInt(n.tdsRuleForm.value.deadline_day.value)>28?(n.toastr.error("For deadline month selected the deadline day value cannot be more than 28"),void t(!1)):[4,6,9,11].includes(parseInt(n.tdsRuleForm.value.deadline_month.value))&&parseInt(n.tdsRuleForm.value.deadline_day.value)>30?(n.toastr.error("For deadline month selected the deadline day value cannot be more than 30"),void t(!1)):void t(!0)})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-tds-rule"]],decls:132,vars:29,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-briefcase"],[1,"mg-b-0"],["id","tdsrule-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],[1,"col-9","col-sm-9"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","application_methode",1,"form-control",3,"options","config"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","frequency",1,"form-control",3,"options","config"],["formControlName","deadline_day",1,"form-control",3,"options","config"],["formControlName","deadline_month",1,"form-control",3,"options","config"],["formControlName","publish_status",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst"],[1,"row","no-gutters","bd-1",2,"border-right","1px solid #ced4da"],[1,"col-12","col-sm-12"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"br-section-label","mb-3"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Company Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"TDS Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"TDS Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Define TDS Policy"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,ai,2,0,"h6",11),e.\u0275\u0275template(20,ri,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Template Name\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275element(30,"input",19),e.\u0275\u0275template(31,oi,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",15)(33,"div",16),e.\u0275\u0275text(34," Method of Application\xa0"),e.\u0275\u0275elementStart(35,"span",17),e.\u0275\u0275text(36,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",16),e.\u0275\u0275element(38,"ngx-select-dropdown",21),e.\u0275\u0275template(39,ii,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",22),e.\u0275\u0275text(41," Frequency\xa0"),e.\u0275\u0275elementStart(42,"span",17),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",16),e.\u0275\u0275element(45,"ngx-select-dropdown",23),e.\u0275\u0275template(46,li,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"div",15)(48,"div",16),e.\u0275\u0275text(49," Deadline Day\xa0"),e.\u0275\u0275elementStart(50,"span",17),e.\u0275\u0275text(51,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",16),e.\u0275\u0275element(53,"ngx-select-dropdown",24),e.\u0275\u0275template(54,si,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",22),e.\u0275\u0275text(56," Deadline Month\xa0"),e.\u0275\u0275elementStart(57,"span",17),e.\u0275\u0275text(58,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",16),e.\u0275\u0275element(60,"ngx-select-dropdown",25),e.\u0275\u0275template(61,di,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",15)(63,"div",16),e.\u0275\u0275text(64," Publish Status\xa0"),e.\u0275\u0275elementStart(65,"span",17),e.\u0275\u0275text(66,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(67,"div",16),e.\u0275\u0275element(68,"ngx-select-dropdown",26),e.\u0275\u0275template(69,mi,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(70,"div",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(71,"div",28)(72,"div",29),e.\u0275\u0275template(73,ci,3,1,"button",30),e.\u0275\u0275template(74,pi,6,1,"ng-template",null,31,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(76,"div",32)(77,"div",10)(78,"h6",33),e.\u0275\u0275text(79,"TDS Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"div",34)(81,"table",35)(82,"thead")(83,"tr")(84,"th",36),e.\u0275\u0275text(85,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"th",36),e.\u0275\u0275text(87,"Publish"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",36),e.\u0275\u0275text(89,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",36),e.\u0275\u0275text(91,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th",36),e.\u0275\u0275text(93,"Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th",36),e.\u0275\u0275text(95,"Frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th",36),e.\u0275\u0275text(97,"Deadline"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(98,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(99,"button",37),e.\u0275\u0275elementStart(100,"div",38)(101,"div",39)(102,"div",40)(103,"div",41)(104,"h6",42),e.\u0275\u0275text(105,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"button",43)(107,"span",44),e.\u0275\u0275text(108,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(109,"div",45)(110,"div",36)(111,"table",46)(112,"thead")(113,"th",36),e.\u0275\u0275text(114,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(115,"th",36),e.\u0275\u0275text(116,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(117,"th",36),e.\u0275\u0275text(118,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(119,"th",36),e.\u0275\u0275text(120,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(121,"th",36),e.\u0275\u0275text(122,"Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"th",36),e.\u0275\u0275text(124,"Frequency"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"th",36),e.\u0275\u0275text(126,"Deadline"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(127,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(128,"div",47)(129,"button",48),e.\u0275\u0275text(130,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(131,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(75);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.tdsRuleForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.tdsRuleForm.controls.template_name.hasError("required")&&t.tdsRuleForm.controls.template_name.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.applicationMethodMaster)("config",e.\u0275\u0275pureFunction0(24,K)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tdsRuleForm.controls.application_methode.hasError("required")&&t.tdsRuleForm.controls.application_methode.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.frequencyMaster)("config",e.\u0275\u0275pureFunction0(25,K)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tdsRuleForm.controls.frequency.hasError("required")&&t.tdsRuleForm.controls.frequency.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.deadlineDayMaster)("config",e.\u0275\u0275pureFunction0(26,G)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tdsRuleForm.controls.deadline_day.hasError("required")&&t.tdsRuleForm.controls.deadline_day.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.deadlineMonthMaster)("config",e.\u0275\u0275pureFunction0(27,G)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tdsRuleForm.controls.deadline_month.hasError("required")&&t.tdsRuleForm.controls.deadline_month.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.publishStatusMaster)("config",e.\u0275\u0275pureFunction0(28,G)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.tdsRuleForm.controls.publish_status.hasError("required")&&t.tdsRuleForm.controls.publish_status.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(18),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function _i(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",47),e.\u0275\u0275text(1,"Define Bonus Rule"),e.\u0275\u0275elementEnd())}function hi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",47),e.\u0275\u0275text(1,"Update Bonus Rule"),e.\u0275\u0275elementEnd())}function fi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function gi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function bi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function vi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function yi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function xi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Si(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ei(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Ci(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function wi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",48),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function ki(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",49),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.bonusRuleForm.valid)}}function Ii(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",50),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",49),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE RULE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.bonusRuleForm.valid)}}const Fi=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}};let Ti=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewRuleDetails=null,this.initialValueBeforeUpdate=null,this.bonusRuleForm=n.group({gov_document_no:[null,i.kI.compose([i.kI.required])],effective_date:[null,[i.kI.required]],min_service_qualify:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],max_bonus:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],max_bonus_wage:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],eligible_capping:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])]}),this.editActionId=""}ngOnInit(){this.titleService.setTitle("Bonus Rule - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.gov_document_no}},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")}},{render:function(n,t,a,r){return a.min_service_qualify}},{render:function(n,t,a,r){return a.max_bonus}},{render:function(n,t,a,r){return a.max_bonus_wage}},{render:function(n,t,a,r){return a.eligible_capping}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchBonusRules({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.bonus.totalDocs,recordsFiltered:r.bonus.totalDocs,data:r.bonus.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.gov_document_no},orderable:!0,name:"gov_document_no"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")},orderable:!0,name:"effective_date"},{render:function(n,t,a,r){return a.min_service_qualify},orderable:!0,name:"min_service_qualify"},{render:function(n,t,a,r){return a.max_bonus},orderable:!0,name:"max_bonus"},{render:function(n,t,a,r){return a.max_bonus_wage},orderable:!0,name:"max_bonus_wage"},{render:function(n,t,a,r){return a.eligible_capping},orderable:!0,name:"eligible_capping"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.bonusRuleForm.setValue({gov_document_no:n.gov_document_no,effective_date:this.datePipe.transform(n.effective_date,"MM/dd/YYYY"),min_service_qualify:n.min_service_qualify,max_bonus:n.max_bonus,max_bonus_wage:n.max_bonus_wage,eligible_capping:n.eligible_capping}),this.initialValueBeforeUpdate={bonus_id:this.editActionId,gov_document_no:this.bonusRuleForm.value.gov_document_no.toString().trim(),effective_date:this.datePipe.transform(this.bonusRuleForm.value.effective_date,"Y-MM-dd"),min_service_qualify:this.bonusRuleForm.value.min_service_qualify.toString().trim(),max_bonus:this.bonusRuleForm.value.max_bonus.toString().trim(),max_bonus_wage:this.bonusRuleForm.value.max_bonus_wage.toString().trim(),eligible_capping:this.bonusRuleForm.value.eligible_capping.toString().trim()},$("html, body").animate({scrollTop:$("#bonus-submit-section").position().top})}cancelEdit(){this.editActionId="",this.bonusRuleForm.reset();for(const n in this.bonusRuleForm.controls)if(Object.prototype.hasOwnProperty.call(this.bonusRuleForm.controls,n)){const t=this.bonusRuleForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.bonusRuleForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createBonusRule({gov_document_no:this.bonusRuleForm.value.gov_document_no,effective_date:this.datePipe.transform(this.bonusRuleForm.value.effective_date,"Y-MM-dd"),min_service_qualify:this.bonusRuleForm.value.min_service_qualify,max_bonus:this.bonusRuleForm.value.max_bonus,max_bonus_wage:this.bonusRuleForm.value.max_bonus_wage,eligible_capping:this.bonusRuleForm.value.eligible_capping}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteBonusRule({bonus_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.bonusRuleForm.valid){const t={bonus_id:this.editActionId,gov_document_no:this.bonusRuleForm.value.gov_document_no.toString().trim(),effective_date:this.datePipe.transform(this.bonusRuleForm.value.effective_date,"Y-MM-dd"),min_service_qualify:this.bonusRuleForm.value.min_service_qualify.toString().trim(),max_bonus:this.bonusRuleForm.value.max_bonus.toString().trim(),max_bonus_wage:this.bonusRuleForm.value.max_bonus_wage.toString().trim(),eligible_capping:this.bonusRuleForm.value.eligible_capping.toString().trim()};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateBonusRule(t).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.initialValueBeforeUpdate=t,$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}showUpdateHistory(n){this.viewRuleDetails=n,null!=this.viewRuleDetails.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewRuleDetails&&null!=this.viewRuleDetails.history&&Array.isArray(this.viewRuleDetails.history)?this.viewRuleDetails.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-bonus-rules"]],decls:140,vars:20,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-card"],[1,"mg-b-0"],["id","bonus-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","gov_document_no",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","effective_date","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],["type","number","formControlName","min_service_qualify",1,"form-control"],["type","number","formControlName","max_bonus",1,"form-control"],["type","number","formControlName","max_bonus_wage",1,"form-control"],["type","number","formControlName","eligible_capping",1,"form-control"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Bonus Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Bonus Rule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create, define bonus rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,_i,2,0,"h6",11),e.\u0275\u0275template(20,hi,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Govt Document No\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16),e.\u0275\u0275element(30,"input",18),e.\u0275\u0275template(31,fi,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",20),e.\u0275\u0275text(33," Effective Date\xa0"),e.\u0275\u0275elementStart(34,"span",17),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",16),e.\u0275\u0275element(37,"dp-date-picker",21),e.\u0275\u0275template(38,gi,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",15)(40,"div",16),e.\u0275\u0275text(41," Min Service to Qualify (Months)\xa0"),e.\u0275\u0275elementStart(42,"span",17),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",16),e.\u0275\u0275element(45,"input",22),e.\u0275\u0275template(46,bi,2,0,"p",19),e.\u0275\u0275template(47,vi,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"div",20),e.\u0275\u0275text(49," Maximum Bonus (%)\xa0"),e.\u0275\u0275elementStart(50,"span",17),e.\u0275\u0275text(51,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",16),e.\u0275\u0275element(53,"input",23),e.\u0275\u0275template(54,yi,2,0,"p",19),e.\u0275\u0275template(55,xi,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"div",15)(57,"div",16),e.\u0275\u0275text(58," Max Bonus Wage (Rs)\xa0"),e.\u0275\u0275elementStart(59,"span",17),e.\u0275\u0275text(60,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(61,"div",16),e.\u0275\u0275element(62,"input",24),e.\u0275\u0275template(63,Si,2,0,"p",19),e.\u0275\u0275template(64,Ei,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"div",20),e.\u0275\u0275text(66," Eligible Capping\xa0"),e.\u0275\u0275elementStart(67,"span",17),e.\u0275\u0275text(68,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"div",16),e.\u0275\u0275element(70,"input",25),e.\u0275\u0275template(71,Ci,2,0,"p",19),e.\u0275\u0275template(72,wi,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(73,"div",26)(74,"div",27),e.\u0275\u0275template(75,ki,3,1,"button",28),e.\u0275\u0275template(76,Ii,6,1,"ng-template",null,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(78,"div",30)(79,"div",10)(80,"h6",31),e.\u0275\u0275text(81,"View, manage, update Bonus rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"div",32)(83,"table",33)(84,"thead")(85,"tr")(86,"th",34),e.\u0275\u0275text(87,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",34),e.\u0275\u0275text(89,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",34),e.\u0275\u0275text(91,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th",34),e.\u0275\u0275text(93,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th",34),e.\u0275\u0275text(95,"Min Service"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th",34),e.\u0275\u0275text(97,"Max Bonus%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"th",34),e.\u0275\u0275text(99,"Max Bonus Wage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th",34),e.\u0275\u0275text(101,"Wage Ceiling "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(102,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(103,"button",35),e.\u0275\u0275elementStart(104,"div",36)(105,"div",37)(106,"div",38)(107,"div",39)(108,"h6",40),e.\u0275\u0275text(109,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(110,"button",41)(111,"span",42),e.\u0275\u0275text(112,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(113,"div",43)(114,"div",34)(115,"table",44)(116,"thead")(117,"th",34),e.\u0275\u0275text(118,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(119,"th",34),e.\u0275\u0275text(120,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(121,"th",34),e.\u0275\u0275text(122,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"th",34),e.\u0275\u0275text(124,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"th",34),e.\u0275\u0275text(126,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"th",34),e.\u0275\u0275text(128,"Min Service"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(129,"th",34),e.\u0275\u0275text(130,"Max Bonus%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(131,"th",34),e.\u0275\u0275text(132,"Max Bonus Wage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(133,"th",34),e.\u0275\u0275text(134,"Wage Ceiling "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(135,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(136,"div",45)(137,"button",46),e.\u0275\u0275text(138,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(139,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(77);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.bonusRuleForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.gov_document_no.hasError("required")&&t.bonusRuleForm.controls.gov_document_no.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(19,Fi)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.effective_date.hasError("required")&&t.bonusRuleForm.controls.effective_date.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.min_service_qualify.hasError("required")&&t.bonusRuleForm.controls.min_service_qualify.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.min_service_qualify.hasError("pattern")&&t.bonusRuleForm.controls.min_service_qualify.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.max_bonus.hasError("required")&&t.bonusRuleForm.controls.max_bonus.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.max_bonus.hasError("pattern")&&t.bonusRuleForm.controls.max_bonus.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.max_bonus_wage.hasError("required")&&t.bonusRuleForm.controls.max_bonus_wage.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.max_bonus_wage.hasError("pattern")&&t.bonusRuleForm.controls.max_bonus_wage.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.eligible_capping.hasError("required")&&t.bonusRuleForm.controls.eligible_capping.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bonusRuleForm.controls.eligible_capping.hasError("pattern")&&t.bonusRuleForm.controls.eligible_capping.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(20),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,A.Lr,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function Ai(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",63),e.\u0275\u0275text(1,"Define EPFO Rule"),e.\u0275\u0275elementEnd())}function Di(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",63),e.\u0275\u0275text(1,"Update EPFO Rule"),e.\u0275\u0275elementEnd())}function Pi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ri(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Mi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Oi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ni(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Li(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Vi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function qi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function $i(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Bi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ji(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Ui(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Hi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Yi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Gi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Ji(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function zi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Wi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Qi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Zi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ki(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Xi(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function el(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function tl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",64),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function nl(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",65),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.epfoRuleForm.valid)}}function al(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",66),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",65),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE RULE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.epfoRuleForm.valid)}}const rl=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}};let ol=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewRuleDetails=null,this.initialValueBeforeUpdate=null,this.epfoRuleForm=n.group({circular_no:[null,i.kI.compose([i.kI.required])],pf_employer_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],total_employer_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],pf_employee_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],total_employee_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],pension_employer_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],pension_employer_contribution_restrict:[!1],retirement_age:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],edli_employer_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],edli_employer_contribution_restrict:[!1],wage_ceiling:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],admin_charges:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],admin_charges_restrict:[!1],minimum_admin_charges:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],edli_admin_charges:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],edli_admin_charges_restrict:[!1],round_off:[null,[i.kI.required]],effective_date:[null,[i.kI.required]]}),this.editActionId=""}ngOnInit(){this.titleService.setTitle("EPFO Rule - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.circular_no}},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")}},{render:function(n,t,a,r){return a.pf_employer_contribution+"%"}},{render:function(n,t,a,r){return a.pension_employer_contribution+"%"}},{render:function(n,t,a,r){return a.pf_employee_contribution+"%"}},{render:function(n,t,a,r){return a.edli_employer_contribution+"%"}},{render:function(n,t,a,r){return a.edli_admin_charges+"%"}},{render:function(n,t,a,r){return a.admin_charges}},{render:function(n,t,a,r){return a.minimum_admin_charges}},{render:function(n,t,a,r){return a.retirement_age}},{render:function(n,t,a,r){return a.wage_ceiling}},{render:function(n,t,a,r){return a.total_employer_contribution}},{render:function(n,t,a,r){return a.total_employee_contribution}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchEpfoRules({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.epfo.totalDocs,recordsFiltered:r.epfo.totalDocs,data:r.epfo.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.updated_at,"dd/MM/yyyy")},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){return a.circular_no},orderable:!0,name:"circular_no"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")},orderable:!0,name:"effective_date"},{render:function(n,t,a,r){return a.pf_employer_contribution+"%"},orderable:!0,name:"pf_employer_contribution"},{render:function(n,t,a,r){return a.pension_employer_contribution+"%"},orderable:!0,name:"pension_employer_contribution"},{render:function(n,t,a,r){return a.pf_employee_contribution+"%"},orderable:!0,name:"pf_employee_contribution"},{render:function(n,t,a,r){return a.edli_employer_contribution+"%"},orderable:!0,name:"edli_employer_contribution"},{render:function(n,t,a,r){return a.edli_admin_charges+"%"},orderable:!0,name:"edli_admin_charges"},{render:function(n,t,a,r){return a.admin_charges},orderable:!0,name:"admin_charges"},{render:function(n,t,a,r){return a.minimum_admin_charges},orderable:!0,name:"minimum_admin_charges"},{render:function(n,t,a,r){return a.retirement_age},orderable:!0,name:"retirement_age"},{render:function(n,t,a,r){return a.wage_ceiling},orderable:!0,name:"wage_ceiling"},{render:function(n,t,a,r){return a.total_employer_contribution},orderable:!0,name:"total_employer_contribution"},{render:function(n,t,a,r){return a.total_employee_contribution},orderable:!0,name:"total_employee_contribution"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.epfoRuleForm.setValue({circular_no:n.circular_no,pf_employer_contribution:n.pf_employer_contribution,total_employer_contribution:n.total_employer_contribution,pf_employee_contribution:n.pf_employee_contribution,total_employee_contribution:n.total_employee_contribution,pension_employer_contribution:n.pension_employer_contribution,pension_employer_contribution_restrict:"yes"==n.pension_employer_contribution_restrict,retirement_age:n.retirement_age,edli_employer_contribution:n.edli_employer_contribution,edli_employer_contribution_restrict:"yes"==n.edli_employer_contribution_restrict,wage_ceiling:n.wage_ceiling,admin_charges:n.admin_charges,admin_charges_restrict:"yes"==n.admin_charges_restrict,minimum_admin_charges:n.minimum_admin_charges,edli_admin_charges:n.edli_admin_charges,edli_admin_charges_restrict:"yes"==n.edli_admin_charges_restrict,round_off:n.round_off,effective_date:this.datePipe.transform(n.effective_date,"MM/dd/YYYY")}),this.initialValueBeforeUpdate={epfo_id:this.editActionId,circular_no:this.epfoRuleForm.value.circular_no.toString().trim(),pf_employer_contribution:this.epfoRuleForm.value.pf_employer_contribution.toString().trim(),total_employer_contribution:this.epfoRuleForm.value.total_employer_contribution.toString().trim(),pf_employee_contribution:this.epfoRuleForm.value.pf_employee_contribution.toString().trim(),total_employee_contribution:this.epfoRuleForm.value.total_employee_contribution.toString().trim(),pension_employer_contribution:this.epfoRuleForm.value.pension_employer_contribution.toString().trim(),pension_employer_contribution_restrict:1==this.epfoRuleForm.value.pension_employer_contribution_restrict?"yes":"no",retirement_age:this.epfoRuleForm.value.retirement_age.toString().trim(),edli_employer_contribution:this.epfoRuleForm.value.edli_employer_contribution.toString().trim(),edli_employer_contribution_restrict:1==this.epfoRuleForm.value.edli_employer_contribution_restrict?"yes":"no",admin_charges:this.epfoRuleForm.value.admin_charges.toString().trim(),admin_charges_restrict:1==this.epfoRuleForm.value.admin_charges_restrict?"yes":"no",minimum_admin_charges:this.epfoRuleForm.value.minimum_admin_charges.toString().trim(),edli_admin_charges:this.epfoRuleForm.value.edli_admin_charges.toString().trim(),edli_admin_charges_restrict:1==this.epfoRuleForm.value.edli_admin_charges_restrict?"yes":"no",effective_date:this.datePipe.transform(this.epfoRuleForm.value.effective_date,"Y-MM-dd"),wage_ceiling:this.epfoRuleForm.value.wage_ceiling.toString().trim(),round_off:this.epfoRuleForm.value.round_off.toString().trim()},$("html, body").animate({scrollTop:$("#epfo-submit-section").position().top})}cancelEdit(){this.editActionId="",this.epfoRuleForm.reset();for(const n in this.epfoRuleForm.controls)if(Object.prototype.hasOwnProperty.call(this.epfoRuleForm.controls,n)){const t=this.epfoRuleForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.epfoRuleForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createEpfoRule({circular_no:this.epfoRuleForm.value.circular_no,pf_employer_contribution:this.epfoRuleForm.value.pf_employer_contribution,total_employer_contribution:this.epfoRuleForm.value.total_employer_contribution,pf_employee_contribution:this.epfoRuleForm.value.pf_employee_contribution,total_employee_contribution:this.epfoRuleForm.value.total_employee_contribution,pension_employer_contribution:this.epfoRuleForm.value.pension_employer_contribution,pension_employer_contribution_restrict:1==this.epfoRuleForm.value.pension_employer_contribution_restrict?"yes":"no",retirement_age:this.epfoRuleForm.value.retirement_age,edli_employer_contribution:this.epfoRuleForm.value.edli_employer_contribution,edli_employer_contribution_restrict:1==this.epfoRuleForm.value.edli_employer_contribution_restrict?"yes":"no",admin_charges:this.epfoRuleForm.value.admin_charges,admin_charges_restrict:1==this.epfoRuleForm.value.admin_charges_restrict?"yes":"no",minimum_admin_charges:this.epfoRuleForm.value.minimum_admin_charges,edli_admin_charges:this.epfoRuleForm.value.edli_admin_charges,edli_admin_charges_restrict:1==this.epfoRuleForm.value.edli_admin_charges_restrict?"yes":"no",effective_date:this.datePipe.transform(this.epfoRuleForm.value.effective_date,"Y-MM-dd"),wage_ceiling:this.epfoRuleForm.value.wage_ceiling,round_off:this.epfoRuleForm.value.round_off}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteEpfoRule({epfo_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.epfoRuleForm.valid){const t={epfo_id:this.editActionId,circular_no:this.epfoRuleForm.value.circular_no.toString().trim(),pf_employer_contribution:this.epfoRuleForm.value.pf_employer_contribution.toString().trim(),total_employer_contribution:this.epfoRuleForm.value.total_employer_contribution.toString().trim(),pf_employee_contribution:this.epfoRuleForm.value.pf_employee_contribution.toString().trim(),total_employee_contribution:this.epfoRuleForm.value.total_employee_contribution.toString().trim(),pension_employer_contribution:this.epfoRuleForm.value.pension_employer_contribution.toString().trim(),pension_employer_contribution_restrict:1==this.epfoRuleForm.value.pension_employer_contribution_restrict?"yes":"no",retirement_age:this.epfoRuleForm.value.retirement_age.toString().trim(),edli_employer_contribution:this.epfoRuleForm.value.edli_employer_contribution.toString().trim(),edli_employer_contribution_restrict:1==this.epfoRuleForm.value.edli_employer_contribution_restrict?"yes":"no",admin_charges:this.epfoRuleForm.value.admin_charges.toString().trim(),admin_charges_restrict:1==this.epfoRuleForm.value.admin_charges_restrict?"yes":"no",minimum_admin_charges:this.epfoRuleForm.value.minimum_admin_charges.toString().trim(),edli_admin_charges:this.epfoRuleForm.value.edli_admin_charges.toString().trim(),edli_admin_charges_restrict:1==this.epfoRuleForm.value.edli_admin_charges_restrict?"yes":"no",effective_date:this.datePipe.transform(this.epfoRuleForm.value.effective_date,"Y-MM-dd"),wage_ceiling:this.epfoRuleForm.value.wage_ceiling.toString().trim(),round_off:this.epfoRuleForm.value.round_off.toString().trim()};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateEpfoRule(t).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.initialValueBeforeUpdate=t,$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}showUpdateHistory(n){this.viewRuleDetails=n,null!=this.viewRuleDetails.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewRuleDetails&&null!=this.viewRuleDetails.history&&Array.isArray(this.viewRuleDetails.history)?this.viewRuleDetails.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-epfo-rules"]],decls:259,vars:34,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-card"],[1,"mg-b-0"],["id","epfo-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["type","text","formControlName","circular_no",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],[1,"text-muted"],["type","number","formControlName","pf_employer_contribution",1,"form-control"],["type","number","formControlName","total_employer_contribution",1,"form-control"],["type","number","formControlName","pf_employee_contribution",1,"form-control"],["type","number","formControlName","total_employee_contribution",1,"form-control"],["type","number","formControlName","pension_employer_contribution",1,"form-control",2,"border-bottom","1px solid #eee"],[1,"ckbox","mg-t-15"],["type","checkbox","formControlName","pension_employer_contribution_restrict"],["type","number","formControlName","retirement_age",1,"form-control"],["type","number","formControlName","edli_employer_contribution",1,"form-control",2,"border-bottom","1px solid #eee"],["type","checkbox","formControlName","edli_employer_contribution_restrict"],["type","number","formControlName","wage_ceiling",1,"form-control"],["type","number","formControlName","admin_charges",1,"form-control",2,"border-bottom","1px solid #eee"],["type","checkbox","formControlName","admin_charges_restrict"],["type","number","formControlName","minimum_admin_charges",1,"form-control"],["type","number","formControlName","edli_admin_charges",1,"form-control",2,"border-bottom","1px solid #eee"],["type","checkbox","formControlName","edli_admin_charges_restrict"],[1,"rdiobox"],["formControlName","round_off","type","radio","value","up"],["formControlName","round_off","type","radio","value","off"],["formControlName","round_off","type","radio","value","down"],["formControlName","effective_date","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"EPFO Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"EPFO Rule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create, define EPFO rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,Ai,2,0,"h6",11),e.\u0275\u0275template(20,Di,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Circular No "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",16),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275template(29,Pi,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",19)(31,"p"),e.\u0275\u0275text(32," Provident Fund "),e.\u0275\u0275element(33,"br"),e.\u0275\u0275elementStart(34,"small",20),e.\u0275\u0275text(35,"(Employer Contribution)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",16),e.\u0275\u0275element(37,"input",21),e.\u0275\u0275template(38,Ri,2,0,"p",18),e.\u0275\u0275template(39,Mi,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",15)(41,"div",16),e.\u0275\u0275text(42," Total Employer Contribution (%) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"div",16),e.\u0275\u0275element(44,"input",22),e.\u0275\u0275template(45,Oi,2,0,"p",18),e.\u0275\u0275template(46,Ni,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",19)(48,"p"),e.\u0275\u0275text(49," Provident Fund "),e.\u0275\u0275element(50,"br"),e.\u0275\u0275elementStart(51,"small",20),e.\u0275\u0275text(52,"(Employee Contribution)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(53,"div",16),e.\u0275\u0275element(54,"input",23),e.\u0275\u0275template(55,Li,2,0,"p",18),e.\u0275\u0275template(56,Vi,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",15)(58,"div",16),e.\u0275\u0275text(59," Total Employee Contribution (%) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",16),e.\u0275\u0275element(61,"input",24),e.\u0275\u0275template(62,qi,2,0,"p",18),e.\u0275\u0275template(63,$i,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"div",19)(65,"p"),e.\u0275\u0275text(66," Pension Fund "),e.\u0275\u0275element(67,"br"),e.\u0275\u0275elementStart(68,"small",20),e.\u0275\u0275text(69,"(Employer Contribution)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(70,"div",16),e.\u0275\u0275element(71,"input",25),e.\u0275\u0275template(72,Bi,2,0,"p",18),e.\u0275\u0275template(73,ji,2,0,"p",18),e.\u0275\u0275elementStart(74,"label",26),e.\u0275\u0275element(75,"input",27),e.\u0275\u0275elementStart(76,"span"),e.\u0275\u0275text(77,"Restrict to Wage Ceiling"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(78,"div",15)(79,"div",16),e.\u0275\u0275text(80," Retirement Age "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"div",16),e.\u0275\u0275element(82,"input",28),e.\u0275\u0275template(83,Ui,2,0,"p",18),e.\u0275\u0275template(84,Hi,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(85,"div",19)(86,"p"),e.\u0275\u0275text(87," EDLI "),e.\u0275\u0275element(88,"br"),e.\u0275\u0275elementStart(89,"small",20),e.\u0275\u0275text(90,"(Employer Contribution)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(91,"div",16),e.\u0275\u0275element(92,"input",29),e.\u0275\u0275template(93,Yi,2,0,"p",18),e.\u0275\u0275template(94,Gi,2,0,"p",18),e.\u0275\u0275elementStart(95,"label",26),e.\u0275\u0275element(96,"input",30),e.\u0275\u0275elementStart(97,"span"),e.\u0275\u0275text(98,"Restrict to Wage Ceiling"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(99,"div",15)(100,"div",16),e.\u0275\u0275text(101," Wage Ceiling (Rs.) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"div",16),e.\u0275\u0275element(103,"input",31),e.\u0275\u0275template(104,Ji,2,0,"p",18),e.\u0275\u0275template(105,zi,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"div",19)(107,"p"),e.\u0275\u0275text(108," Admin Charges "),e.\u0275\u0275element(109,"br"),e.\u0275\u0275elementStart(110,"small",20),e.\u0275\u0275text(111,"(Employer Contribution)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(112,"div",16),e.\u0275\u0275element(113,"input",32),e.\u0275\u0275template(114,Wi,2,0,"p",18),e.\u0275\u0275template(115,Qi,2,0,"p",18),e.\u0275\u0275elementStart(116,"label",26),e.\u0275\u0275element(117,"input",33),e.\u0275\u0275elementStart(118,"span"),e.\u0275\u0275text(119,"Restrict to Wage Ceiling"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(120,"div",15)(121,"div",16),e.\u0275\u0275text(122," Minimum Admin (Rs.) "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"div",16),e.\u0275\u0275element(124,"input",34),e.\u0275\u0275template(125,Zi,2,0,"p",18),e.\u0275\u0275template(126,Ki,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"div",19)(128,"p"),e.\u0275\u0275text(129," EDLI Admin Charges "),e.\u0275\u0275element(130,"br"),e.\u0275\u0275elementStart(131,"small",20),e.\u0275\u0275text(132,"(Employer Contribution)"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(133,"div",16),e.\u0275\u0275element(134,"input",35),e.\u0275\u0275template(135,Xi,2,0,"p",18),e.\u0275\u0275template(136,el,2,0,"p",18),e.\u0275\u0275elementStart(137,"label",26),e.\u0275\u0275element(138,"input",36),e.\u0275\u0275elementStart(139,"span"),e.\u0275\u0275text(140,"Restrict to Wage Ceiling"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(141,"div",15)(142,"div",16),e.\u0275\u0275text(143," Round Off "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(144,"div",16)(145,"label",37),e.\u0275\u0275element(146,"input",38),e.\u0275\u0275elementStart(147,"span"),e.\u0275\u0275text(148,"Round Up"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(149,"label",37),e.\u0275\u0275element(150,"input",39),e.\u0275\u0275elementStart(151,"span"),e.\u0275\u0275text(152,"Round Off"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(153,"label",37),e.\u0275\u0275element(154,"input",40),e.\u0275\u0275elementStart(155,"span"),e.\u0275\u0275text(156,"Round Down"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(157,"div",19),e.\u0275\u0275text(158," Effective Date "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"div",16),e.\u0275\u0275element(160,"dp-date-picker",41),e.\u0275\u0275template(161,tl,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(162,"div",42)(163,"div",43),e.\u0275\u0275template(164,nl,3,1,"button",44),e.\u0275\u0275template(165,al,6,1,"ng-template",null,45,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(167,"div",46)(168,"div",10)(169,"h6",47),e.\u0275\u0275text(170,"View, manage, update EPFO rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(171,"div",48)(172,"table",49)(173,"thead")(174,"tr")(175,"th",50),e.\u0275\u0275text(176,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(177,"th",50),e.\u0275\u0275text(178,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(179,"th",50),e.\u0275\u0275text(180,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(181,"th",50),e.\u0275\u0275text(182,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(183,"th",50),e.\u0275\u0275text(184,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(185,"th",50),e.\u0275\u0275text(186,"ER PF %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(187,"th",50),e.\u0275\u0275text(188,"EE PF %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(189,"th",50),e.\u0275\u0275text(190,"EE PS %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(191,"th",50),e.\u0275\u0275text(192,"EDLI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(193,"th",50),e.\u0275\u0275text(194,"EDLI Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(195,"th",50),e.\u0275\u0275text(196,"Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(197,"th",50),e.\u0275\u0275text(198,"Min Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(199,"th",50),e.\u0275\u0275text(200,"Retirement"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(201,"th",50),e.\u0275\u0275text(202,"Wage Ceiling"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(203,"th",50),e.\u0275\u0275text(204,"Total ER%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(205,"th",50),e.\u0275\u0275text(206,"Total EE%"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(207,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(208,"button",51),e.\u0275\u0275elementStart(209,"div",52)(210,"div",53)(211,"div",54)(212,"div",55)(213,"h6",56),e.\u0275\u0275text(214,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(215,"button",57)(216,"span",58),e.\u0275\u0275text(217,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(218,"div",59)(219,"div",50)(220,"table",60)(221,"thead")(222,"th",50),e.\u0275\u0275text(223,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(224,"th",50),e.\u0275\u0275text(225,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(226,"th",50),e.\u0275\u0275text(227,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(228,"th",50),e.\u0275\u0275text(229,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(230,"th",50),e.\u0275\u0275text(231,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(232,"th",50),e.\u0275\u0275text(233,"ER PF %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(234,"th",50),e.\u0275\u0275text(235,"EE PF %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(236,"th",50),e.\u0275\u0275text(237,"EE PS %"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(238,"th",50),e.\u0275\u0275text(239,"EDLI"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(240,"th",50),e.\u0275\u0275text(241,"EDLI Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(242,"th",50),e.\u0275\u0275text(243,"Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(244,"th",50),e.\u0275\u0275text(245,"Min Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(246,"th",50),e.\u0275\u0275text(247,"Retirement"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(248,"th",50),e.\u0275\u0275text(249,"Wage Ceiling"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(250,"th",50),e.\u0275\u0275text(251,"Total ER%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(252,"th",50),e.\u0275\u0275text(253,"Total EE%"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(254,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(255,"div",61)(256,"button",62),e.\u0275\u0275text(257,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(258,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(166);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.epfoRuleForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.circular_no.hasError("required")&&t.epfoRuleForm.controls.circular_no.dirty),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.pf_employer_contribution.hasError("required")&&t.epfoRuleForm.controls.pf_employer_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.pf_employer_contribution.hasError("pattern")&&t.epfoRuleForm.controls.pf_employer_contribution.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.total_employer_contribution.hasError("required")&&t.epfoRuleForm.controls.total_employer_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.total_employer_contribution.hasError("pattern")&&t.epfoRuleForm.controls.total_employer_contribution.dirty),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.pf_employee_contribution.hasError("required")&&t.epfoRuleForm.controls.pf_employee_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.pf_employee_contribution.hasError("pattern")&&t.epfoRuleForm.controls.pf_employee_contribution.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.total_employee_contribution.hasError("required")&&t.epfoRuleForm.controls.total_employee_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.total_employee_contribution.hasError("pattern")&&t.epfoRuleForm.controls.total_employee_contribution.dirty),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.pension_employer_contribution.hasError("required")&&t.epfoRuleForm.controls.pension_employer_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.pension_employer_contribution.hasError("pattern")&&t.epfoRuleForm.controls.pension_employer_contribution.dirty),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.retirement_age.hasError("required")&&t.epfoRuleForm.controls.retirement_age.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.retirement_age.hasError("pattern")&&t.epfoRuleForm.controls.retirement_age.dirty),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.edli_employer_contribution.hasError("required")&&t.epfoRuleForm.controls.edli_employer_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.edli_employer_contribution.hasError("pattern")&&t.epfoRuleForm.controls.edli_employer_contribution.dirty),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.wage_ceiling.hasError("required")&&t.epfoRuleForm.controls.wage_ceiling.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.wage_ceiling.hasError("pattern")&&t.epfoRuleForm.controls.wage_ceiling.dirty),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.admin_charges.hasError("required")&&t.epfoRuleForm.controls.admin_charges.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.admin_charges.hasError("pattern")&&t.epfoRuleForm.controls.admin_charges.dirty),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.minimum_admin_charges.hasError("required")&&t.epfoRuleForm.controls.minimum_admin_charges.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.minimum_admin_charges.hasError("pattern")&&t.epfoRuleForm.controls.minimum_admin_charges.dirty),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.edli_admin_charges.hasError("required")&&t.epfoRuleForm.controls.edli_admin_charges.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.edli_admin_charges.hasError("pattern")&&t.epfoRuleForm.controls.edli_admin_charges.dirty),e.\u0275\u0275advance(24),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(33,rl)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.epfoRuleForm.controls.effective_date.hasError("required")&&t.epfoRuleForm.controls.effective_date.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(36),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,A.Lr,C.G,i._Y,i.Fj,i.wV,i.Wl,i._,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function il(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",54),e.\u0275\u0275text(1,"Define ESIC Rule"),e.\u0275\u0275elementEnd())}function ll(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",54),e.\u0275\u0275text(1,"Update ESIC Rule"),e.\u0275\u0275elementEnd())}function sl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function dl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ml(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function cl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function pl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ul(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function _l(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function hl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function fl(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",56),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.esicRuleForm.valid)}}function gl(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",56),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE RULE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.esicRuleForm.valid)}}const bl=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}},N=function(){return{search:!1,placeholder:"Choose One",height:"200px"}};let vl=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewRuleDetails=null,this.initialValueBeforeUpdate=null,this.esicRuleForm=n.group({circular_no:[null,i.kI.compose([i.kI.required])],wage_ceiling:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],round_off:[null,[i.kI.required]],employer_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],employee_contribution:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],effective_date:[null,[i.kI.required]],contribution_period_a_from:[null,[i.kI.required]],contribution_period_a_to:[null,[i.kI.required]],contribution_period_b_from:[null,[i.kI.required]],contribution_period_b_to:[null,[i.kI.required]]}),this.monthMaster=[{id:1,description:"January"},{id:2,description:"February"},{id:3,description:"March"},{id:4,description:"April"},{id:5,description:"May"},{id:6,description:"June"},{id:7,description:"July"},{id:8,description:"August"},{id:9,description:"September"},{id:10,description:"October"},{id:11,description:"November"},{id:12,description:"December"}],this.editActionId=""}ngOnInit(){this.titleService.setTitle("ESIC Rule - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.circular_no}},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")}},{render:function(n,t,a,r){return a.employer_contribution+"%"}},{render:function(n,t,a,r){return a.employee_contribution+"%"}},{render:function(n,t,a,r){return a.wage_ceiling}},{render:function(n,t,a,r){let s=["January","February","March","April","May","June","July","August","September","October","November","December"];return"Period A "+s[a.contribution_period_a_from-1]+" to "+s[a.contribution_period_a_to-1]+" <br>Period B "+s[a.contribution_period_b_from-1]+" to "+s[a.contribution_period_b_to-1]}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchEsicRules({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.esic.totalDocs,recordsFiltered:r.esic.totalDocs,data:r.esic.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.updated_at,"dd/MM/yyyy")},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){return a.circular_no},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){return a.employer_contribution+"%"},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){return a.employee_contribution+"%"},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){return a.wage_ceiling},orderable:!0,name:"updated_at"},{render:function(n,t,a,r){let s=["January","February","March","April","May","June","July","August","September","October","November","December"];return"Period A "+s[a.contribution_period_a_from-1]+" to "+s[a.contribution_period_a_to-1]+" <br>Period B "+s[a.contribution_period_b_from-1]+" to "+s[a.contribution_period_b_to-1]},orderable:!1}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){let t=this.monthMaster.find(m=>m.id==n.contribution_period_a_from),a=this.monthMaster.find(m=>m.id==n.contribution_period_a_to),r=this.monthMaster.find(m=>m.id==n.contribution_period_b_from),s=this.monthMaster.find(m=>m.id==n.contribution_period_b_to);this.editActionId=n._id,this.esicRuleForm.setValue({circular_no:n.circular_no,wage_ceiling:n.wage_ceiling,round_off:n.round_off,employer_contribution:n.employer_contribution,employee_contribution:n.employee_contribution,effective_date:this.datePipe.transform(n.effective_date,"MM/dd/YYYY"),contribution_period_a_from:t,contribution_period_a_to:a,contribution_period_b_from:r,contribution_period_b_to:s}),$("html, body").animate({scrollTop:$("#esic-submit-section").position().top}),this.initialValueBeforeUpdate={esic_id:this.editActionId,circular_no:this.esicRuleForm.value.circular_no.toString().trim(),wage_ceiling:this.esicRuleForm.value.wage_ceiling.toString().trim(),round_off:this.esicRuleForm.value.round_off.toString().trim(),employer_contribution:this.esicRuleForm.value.employer_contribution.toString().trim(),employee_contribution:this.esicRuleForm.value.employee_contribution.toString().trim(),effective_date:this.datePipe.transform(this.esicRuleForm.value.effective_date,"Y-MM-dd"),contribution_period_a_from:this.esicRuleForm.value.contribution_period_a_from.id,contribution_period_a_to:this.esicRuleForm.value.contribution_period_a_to.id,contribution_period_b_from:this.esicRuleForm.value.contribution_period_b_from.id,contribution_period_b_to:this.esicRuleForm.value.contribution_period_b_to.id}}cancelEdit(){this.editActionId="",this.esicRuleForm.reset();for(const n in this.esicRuleForm.controls)if(Object.prototype.hasOwnProperty.call(this.esicRuleForm.controls,n)){const t=this.esicRuleForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.esicRuleForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createEsicRule({circular_no:this.esicRuleForm.value.circular_no,wage_ceiling:this.esicRuleForm.value.wage_ceiling,round_off:this.esicRuleForm.value.round_off,employer_contribution:this.esicRuleForm.value.employer_contribution,employee_contribution:this.esicRuleForm.value.employee_contribution,effective_date:this.datePipe.transform(this.esicRuleForm.value.effective_date,"Y-MM-dd"),contribution_period_a_from:this.esicRuleForm.value.contribution_period_a_from.id,contribution_period_a_to:this.esicRuleForm.value.contribution_period_a_to.id,contribution_period_b_from:this.esicRuleForm.value.contribution_period_b_from.id,contribution_period_b_to:this.esicRuleForm.value.contribution_period_b_to.id}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteEsicRule({esic_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.esicRuleForm.valid){const t={esic_id:this.editActionId,circular_no:this.esicRuleForm.value.circular_no.toString().trim(),wage_ceiling:this.esicRuleForm.value.wage_ceiling.toString().trim(),round_off:this.esicRuleForm.value.round_off.toString().trim(),employer_contribution:this.esicRuleForm.value.employer_contribution.toString().trim(),employee_contribution:this.esicRuleForm.value.employee_contribution.toString().trim(),effective_date:this.datePipe.transform(this.esicRuleForm.value.effective_date,"Y-MM-dd"),contribution_period_a_from:this.esicRuleForm.value.contribution_period_a_from.id,contribution_period_a_to:this.esicRuleForm.value.contribution_period_a_to.id,contribution_period_b_from:this.esicRuleForm.value.contribution_period_b_from.id,contribution_period_b_to:this.esicRuleForm.value.contribution_period_b_to.id};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateEsicRule(t).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.initialValueBeforeUpdate=t,$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}showUpdateHistory(n){this.viewRuleDetails=n,null!=this.viewRuleDetails.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewRuleDetails&&null!=this.viewRuleDetails.history&&Array.isArray(this.viewRuleDetails.history)?this.viewRuleDetails.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-esic-rules"]],decls:180,vars:30,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-card"],[1,"mg-b-0"],["id","esic-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","circular_no",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","effective_date","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],["type","number","formControlName","employer_contribution",1,"form-control"],["type","number","formControlName","wage_ceiling",1,"form-control"],["type","number","formControlName","employee_contribution",1,"form-control"],[1,"rdiobox"],["formControlName","round_off","type","radio","value","up"],["formControlName","round_off","type","radio","value","off"],["formControlName","round_off","type","radio","value","down"],["formControlName","contribution_period_a_from",1,"form-control",3,"options","config"],["formControlName","contribution_period_a_to",1,"form-control",3,"options","config"],["formControlName","contribution_period_b_from",1,"form-control",3,"options","config"],["formControlName","contribution_period_b_to",1,"form-control",3,"options","config"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"ESIC Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"ESIC Rule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create, define ESIC rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,il,2,0,"h6",11),e.\u0275\u0275template(20,ll,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Circular No\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16),e.\u0275\u0275element(30,"input",18),e.\u0275\u0275template(31,sl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",20),e.\u0275\u0275text(33," Effective From\xa0"),e.\u0275\u0275elementStart(34,"span",17),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",16),e.\u0275\u0275element(37,"dp-date-picker",21),e.\u0275\u0275template(38,dl,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",15)(40,"div",16),e.\u0275\u0275text(41," Employer Contribution (%)\xa0"),e.\u0275\u0275elementStart(42,"span",17),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",16),e.\u0275\u0275element(45,"input",22),e.\u0275\u0275template(46,ml,2,0,"p",19),e.\u0275\u0275template(47,cl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"div",20),e.\u0275\u0275text(49," Wage Ceiling (Rs.)\xa0"),e.\u0275\u0275elementStart(50,"span",17),e.\u0275\u0275text(51,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",16),e.\u0275\u0275element(53,"input",23),e.\u0275\u0275template(54,pl,2,0,"p",19),e.\u0275\u0275template(55,ul,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"div",15)(57,"div",16),e.\u0275\u0275text(58," Employee Contribution (%)\xa0"),e.\u0275\u0275elementStart(59,"span",17),e.\u0275\u0275text(60,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(61,"div",16),e.\u0275\u0275element(62,"input",24),e.\u0275\u0275template(63,_l,2,0,"p",19),e.\u0275\u0275template(64,hl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"div",20),e.\u0275\u0275text(66," Round Off\xa0"),e.\u0275\u0275elementStart(67,"span",17),e.\u0275\u0275text(68,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"div",16)(70,"label",25),e.\u0275\u0275element(71,"input",26),e.\u0275\u0275elementStart(72,"span"),e.\u0275\u0275text(73,"Round Up"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"label",25),e.\u0275\u0275element(75,"input",27),e.\u0275\u0275elementStart(76,"span"),e.\u0275\u0275text(77,"Round Off"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(78,"label",25),e.\u0275\u0275element(79,"input",28),e.\u0275\u0275elementStart(80,"span"),e.\u0275\u0275text(81,"Round Down"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(82,"div",15)(83,"div",16),e.\u0275\u0275text(84," Contribution Period A\xa0"),e.\u0275\u0275elementStart(85,"span",17),e.\u0275\u0275text(86,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(87,"div",16)(88,"label")(89,"small"),e.\u0275\u0275text(90,"From"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(91,"ngx-select-dropdown",29)(92,"br"),e.\u0275\u0275elementStart(93,"label")(94,"small"),e.\u0275\u0275text(95,"To"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(96,"ngx-select-dropdown",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(97,"div",20),e.\u0275\u0275text(98," Contribution Period B\xa0"),e.\u0275\u0275elementStart(99,"span",17),e.\u0275\u0275text(100,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(101,"div",16)(102,"label")(103,"small"),e.\u0275\u0275text(104,"From"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(105,"ngx-select-dropdown",31)(106,"br"),e.\u0275\u0275elementStart(107,"label")(108,"small"),e.\u0275\u0275text(109,"To"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(110,"ngx-select-dropdown",32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(111,"div",33)(112,"div",34),e.\u0275\u0275template(113,fl,3,1,"button",35),e.\u0275\u0275template(114,gl,6,1,"ng-template",null,36,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(116,"div",37)(117,"div",10)(118,"h6",38),e.\u0275\u0275text(119,"View updates, manage ESIC rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(120,"div",39)(121,"table",40)(122,"thead")(123,"tr")(124,"th",41),e.\u0275\u0275text(125,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(126,"th",41),e.\u0275\u0275text(127,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(128,"th",41),e.\u0275\u0275text(129,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(130,"th",41),e.\u0275\u0275text(131,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(132,"th",41),e.\u0275\u0275text(133,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(134,"th",41),e.\u0275\u0275text(135,"ER%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(136,"th",41),e.\u0275\u0275text(137,"EE%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(138,"th",41),e.\u0275\u0275text(139,"Wage Ceiling"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(140,"th",41),e.\u0275\u0275text(141,"ContrI Period"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(142,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(143,"button",42),e.\u0275\u0275elementStart(144,"div",43)(145,"div",44)(146,"div",45)(147,"div",46)(148,"h6",47),e.\u0275\u0275text(149,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(150,"button",48)(151,"span",49),e.\u0275\u0275text(152,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(153,"div",50)(154,"div",41)(155,"table",51)(156,"thead")(157,"th",41),e.\u0275\u0275text(158,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"th",41),e.\u0275\u0275text(160,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(161,"th",41),e.\u0275\u0275text(162,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(163,"th",41),e.\u0275\u0275text(164,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(165,"th",41),e.\u0275\u0275text(166,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(167,"th",41),e.\u0275\u0275text(168,"ER%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(169,"th",41),e.\u0275\u0275text(170,"EE%"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(171,"th",41),e.\u0275\u0275text(172,"Wage Ceiling"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(173,"th",41),e.\u0275\u0275text(174,"ContrI Period"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(175,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(176,"div",52)(177,"button",53),e.\u0275\u0275text(178,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(179,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(115);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.esicRuleForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.circular_no.hasError("required")&&t.esicRuleForm.controls.circular_no.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(25,bl)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.effective_date.hasError("required")&&t.esicRuleForm.controls.effective_date.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.employer_contribution.hasError("required")&&t.esicRuleForm.controls.employer_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.employer_contribution.hasError("pattern")&&t.esicRuleForm.controls.employer_contribution.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.wage_ceiling.hasError("required")&&t.esicRuleForm.controls.wage_ceiling.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.wage_ceiling.hasError("pattern")&&t.esicRuleForm.controls.wage_ceiling.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.employee_contribution.hasError("required")&&t.esicRuleForm.controls.employee_contribution.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.esicRuleForm.controls.employee_contribution.hasError("pattern")&&t.esicRuleForm.controls.employee_contribution.dirty),e.\u0275\u0275advance(27),e.\u0275\u0275property("options",t.monthMaster)("config",e.\u0275\u0275pureFunction0(26,N)),e.\u0275\u0275advance(5),e.\u0275\u0275property("options",t.monthMaster)("config",e.\u0275\u0275pureFunction0(27,N)),e.\u0275\u0275advance(9),e.\u0275\u0275property("options",t.monthMaster)("config",e.\u0275\u0275pureFunction0(28,N)),e.\u0275\u0275advance(5),e.\u0275\u0275property("options",t.monthMaster)("config",e.\u0275\u0275pureFunction0(29,N)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(22),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,w.fY,A.Lr,C.G,i._Y,i.Fj,i.wV,i._,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function yl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",56),e.\u0275\u0275text(1,"Define Gratuity Rule"),e.\u0275\u0275elementEnd())}function xl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",56),e.\u0275\u0275text(1,"Update Gratuity Rule"),e.\u0275\u0275elementEnd())}function Sl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function El(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Cl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function wl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function kl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Il(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Fl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Tl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Al(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Dl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Pl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Rl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ml(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ol(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Nl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Ll(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Vl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ql(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",57),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function $l(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",58),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.gratuityRuleForm.valid)}}function Bl(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",59),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",58),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE RULE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.gratuityRuleForm.valid)}}const L=function(){return{search:!1,placeholder:"Select Operand"}},M=function(){return{search:!1,placeholder:"Choose One"}},jl=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}};let Ul=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewRuleDetails=null,this.initialValueBeforeUpdate=null,this.gratuityRuleForm=n.group({employee_no_rule:[null,i.kI.compose([i.kI.required])],employee_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],employee_no_applicable:[null,i.kI.compose([i.kI.required])],service_year_no_rule:[null,i.kI.compose([i.kI.required])],service_year_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],service_year_no_applicable:[null,i.kI.compose([i.kI.required])],fifth_year_atrendance_rule:[null,i.kI.compose([i.kI.required])],fifth_year_atrendance:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],fifth_year_atrendance_applicable:[null,i.kI.compose([i.kI.required])],max_gratuity_anual_rule:[null,i.kI.compose([i.kI.required])],max_gratuity_anual:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],max_gratuity_anual_applicable:[null,i.kI.compose([i.kI.required])],income_tax_applicable:[null,i.kI.compose([i.kI.required])],effective_date:[null,[i.kI.required]]}),this.editActionId="",this.rulesMaster=[{id:"greaterthanequal",description:"Greater then equal (>=)"},{id:"greater",description:"Greater then (>)"},{id:"less",description:"Less then (<)"},{id:"lessthanequal",description:"Less then equal (<=)"},{id:"equal",description:"Equal (=)"},{id:"none",description:"None"}],this.applicableMaster=[{id:"yes",description:"Applicable"},{id:"no",description:"Not Applicable"}]}ngOnInit(){this.titleService.setTitle("Gratuity Rule - "+d.AppName),this.fetch(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.corporate_id??"N/A"},className:"text-uppercase"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")}},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.employee_no_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.employee_no+"</span>",s+="yes"==a.employee_no_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center"},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.service_year_no_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.service_year_no+"</span>",s+="yes"==a.service_year_no_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center"},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.fifth_year_atrendance_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.fifth_year_atrendance+"</span>",s+="yes"==a.fifth_year_atrendance_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center"},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.max_gratuity_anual_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.max_gratuity_anual+"</span>",s+="yes"==a.max_gratuity_anual_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center"},{render:function(n,t,a,r){return"yes"==a.income_tax_applicable?"Applicable":"Not Applicable"}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchGratuityRules({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.gratuity.totalDocs,recordsFiltered:r.gratuity.totalDocs,data:r.gratuity.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.corporate_id},className:"text-uppercase",orderable:!0,name:"corporate_id"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.effective_date,"dd/MM/yyyy")},orderable:!0,name:"effective_date"},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.employee_no_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.employee_no+"</span>",s+="yes"==a.employee_no_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center",orderable:!1},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.service_year_no_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.service_year_no+"</span>",s+="yes"==a.service_year_no_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center",orderable:!1},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.fifth_year_atrendance_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.fifth_year_atrendance+"</span>",s+="yes"==a.fifth_year_atrendance_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center",orderable:!1},{render:function(n,t,a,r){let s='<span class="badge badge-primary">';switch(a.max_gratuity_anual_rule){case"greaterthanequal":s+='<i class="fas fa-greater-than-equal"></i>&nbsp;';break;case"greater":s+='<i class="fas fa-greater-than"></i>&nbsp;';break;case"less":case"equal":s+='<i class="fas fa-less-than"></i>&nbsp;';break;case"lessthanequal":s+='<i class="fas fa-less-than-equal"></i>&nbsp;'}return s+=a.max_gratuity_anual+"</span>",s+="yes"==a.max_gratuity_anual_applicable?'&nbsp; <i class="fas fa-check-circle text-success"></i>':'&nbsp; <i class="fas fa-times-circle text-danger"></i>',s},className:"text-center",orderable:!1},{render:function(n,t,a,r){return"yes"==a.income_tax_applicable?"Applicable":"Not Applicable"},orderable:!0,name:"income_tax_applicable"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.gratuityRuleForm.patchValue({employee_no:n.employee_no,service_year_no:n.service_year_no,fifth_year_atrendance:n.fifth_year_atrendance,max_gratuity_anual:n.max_gratuity_anual,employee_no_rule:this.rulesMaster.find(t=>t.id===n.employee_no_rule),employee_no_applicable:this.applicableMaster.find(t=>t.id===n.employee_no_applicable),service_year_no_rule:this.rulesMaster.find(t=>t.id===n.service_year_no_rule),service_year_no_applicable:this.applicableMaster.find(t=>t.id===n.service_year_no_applicable),fifth_year_atrendance_rule:this.rulesMaster.find(t=>t.id===n.fifth_year_atrendance_rule),fifth_year_atrendance_applicable:this.applicableMaster.find(t=>t.id===n.fifth_year_atrendance_applicable),max_gratuity_anual_rule:this.rulesMaster.find(t=>t.id===n.max_gratuity_anual_rule),max_gratuity_anual_applicable:this.applicableMaster.find(t=>t.id===n.max_gratuity_anual_applicable),income_tax_applicable:this.applicableMaster.find(t=>t.id===n.income_tax_applicable),effective_date:this.datePipe.transform(n.effective_date,"MM/dd/YYYY")}),this.initialValueBeforeUpdate={gratuity_id:this.editActionId,employee_no_rule:this.gratuityRuleForm.value.employee_no_rule.id,employee_no:this.gratuityRuleForm.value.employee_no.toString().trim(),employee_no_applicable:this.gratuityRuleForm.value.employee_no_applicable.id,service_year_no_rule:this.gratuityRuleForm.value.service_year_no_rule.id,service_year_no:this.gratuityRuleForm.value.service_year_no.toString().trim(),service_year_no_applicable:this.gratuityRuleForm.value.service_year_no_applicable.id,fifth_year_atrendance_rule:this.gratuityRuleForm.value.fifth_year_atrendance_rule.id,fifth_year_atrendance:this.gratuityRuleForm.value.fifth_year_atrendance.toString().trim(),fifth_year_atrendance_applicable:this.gratuityRuleForm.value.fifth_year_atrendance_applicable.id,max_gratuity_anual_rule:this.gratuityRuleForm.value.max_gratuity_anual_rule.id,max_gratuity_anual:this.gratuityRuleForm.value.max_gratuity_anual.toString().trim(),max_gratuity_anual_applicable:this.gratuityRuleForm.value.max_gratuity_anual_applicable.id,income_tax_applicable:this.gratuityRuleForm.value.income_tax_applicable.id,effective_date:this.datePipe.transform(this.gratuityRuleForm.value.effective_date,"Y-MM-dd")},$("html, body").animate({scrollTop:$("#gratuity-submit-section").position().top})}cancelEdit(){this.editActionId="",this.gratuityRuleForm.reset();for(const n in this.gratuityRuleForm.controls)if(Object.prototype.hasOwnProperty.call(this.gratuityRuleForm.controls,n)){const t=this.gratuityRuleForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.gratuityRuleForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createGratuityRule({employee_no_rule:this.gratuityRuleForm.value.employee_no_rule.id,employee_no:this.gratuityRuleForm.value.employee_no,employee_no_applicable:this.gratuityRuleForm.value.employee_no_applicable.id,service_year_no_rule:this.gratuityRuleForm.value.service_year_no_rule.id,service_year_no:this.gratuityRuleForm.value.service_year_no,service_year_no_applicable:this.gratuityRuleForm.value.service_year_no_applicable.id,fifth_year_atrendance_rule:this.gratuityRuleForm.value.fifth_year_atrendance_rule.id,fifth_year_atrendance:this.gratuityRuleForm.value.fifth_year_atrendance,fifth_year_atrendance_applicable:this.gratuityRuleForm.value.fifth_year_atrendance_applicable.id,max_gratuity_anual_rule:this.gratuityRuleForm.value.max_gratuity_anual_rule.id,max_gratuity_anual:this.gratuityRuleForm.value.max_gratuity_anual,max_gratuity_anual_applicable:this.gratuityRuleForm.value.max_gratuity_anual_applicable.id,income_tax_applicable:this.gratuityRuleForm.value.income_tax_applicable.id,effective_date:this.datePipe.transform(this.gratuityRuleForm.value.effective_date,"Y-MM-dd")}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteGratuityRule({gratuity_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.gratuityRuleForm.valid){const t={gratuity_id:this.editActionId,employee_no_rule:this.gratuityRuleForm.value.employee_no_rule.id,employee_no:this.gratuityRuleForm.value.employee_no.toString().trim(),employee_no_applicable:this.gratuityRuleForm.value.employee_no_applicable.id,service_year_no_rule:this.gratuityRuleForm.value.service_year_no_rule.id,service_year_no:this.gratuityRuleForm.value.service_year_no.toString().trim(),service_year_no_applicable:this.gratuityRuleForm.value.service_year_no_applicable.id,fifth_year_atrendance_rule:this.gratuityRuleForm.value.fifth_year_atrendance_rule.id,fifth_year_atrendance:this.gratuityRuleForm.value.fifth_year_atrendance.toString().trim(),fifth_year_atrendance_applicable:this.gratuityRuleForm.value.fifth_year_atrendance_applicable.id,max_gratuity_anual_rule:this.gratuityRuleForm.value.max_gratuity_anual_rule.id,max_gratuity_anual:this.gratuityRuleForm.value.max_gratuity_anual.toString().trim(),max_gratuity_anual_applicable:this.gratuityRuleForm.value.max_gratuity_anual_applicable.id,income_tax_applicable:this.gratuityRuleForm.value.income_tax_applicable.id,effective_date:this.datePipe.transform(this.gratuityRuleForm.value.effective_date,"Y-MM-dd")};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateGratuityRule(t).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.initialValueBeforeUpdate=t,$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}showUpdateHistory(n){this.viewRuleDetails=n,null!=this.viewRuleDetails.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewRuleDetails&&null!=this.viewRuleDetails.history&&Array.isArray(this.viewRuleDetails.history)?this.viewRuleDetails.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-gratuity-rules"]],decls:173,vars:55,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-card"],[1,"mg-b-0"],["id","gratuity-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["formControlName","employee_no_rule",1,"form-control",3,"options","config"],["class","error-element",4,"ngIf"],["formControlName","employee_no","type","number",1,"form-control"],["formControlName","employee_no_applicable",1,"form-control",3,"options","config"],["formControlName","service_year_no_rule",1,"form-control",3,"options","config"],["formControlName","service_year_no","type","number",1,"form-control"],["formControlName","service_year_no_applicable",1,"form-control",3,"options","config"],["formControlName","fifth_year_atrendance_rule",1,"form-control",3,"options","config"],["formControlName","fifth_year_atrendance","type","number",1,"form-control"],["formControlName","fifth_year_atrendance_applicable",1,"form-control",3,"options","config"],["formControlName","max_gratuity_anual_rule",1,"form-control",3,"options","config"],["formControlName","max_gratuity_anual","type","number",1,"form-control"],["formControlName","max_gratuity_anual_applicable",1,"form-control",3,"options","config"],[1,"row","no-gutters","bd-1"],["formControlName","income_tax_applicable",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6"],["formControlName","effective_date","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],[1,"text-center"],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Gratuity Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Gratuity Rule"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create, define Gratuity Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,yl,2,0,"h6",11),e.\u0275\u0275template(20,xl,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," No of Employee\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16),e.\u0275\u0275element(30,"ngx-select-dropdown",18),e.\u0275\u0275template(31,Sl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",16),e.\u0275\u0275element(33,"input",20),e.\u0275\u0275template(34,El,2,0,"p",19),e.\u0275\u0275template(35,Cl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",16),e.\u0275\u0275element(37,"ngx-select-dropdown",21),e.\u0275\u0275template(38,wl,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"div",15)(40,"div",16),e.\u0275\u0275text(41," No of service year\xa0"),e.\u0275\u0275elementStart(42,"span",17),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",16),e.\u0275\u0275element(45,"ngx-select-dropdown",22),e.\u0275\u0275template(46,kl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",16),e.\u0275\u0275element(48,"input",23),e.\u0275\u0275template(49,Il,2,0,"p",19),e.\u0275\u0275template(50,Fl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"div",16),e.\u0275\u0275element(52,"ngx-select-dropdown",24),e.\u0275\u0275template(53,Tl,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",15)(55,"div",16),e.\u0275\u0275text(56," Fifth year attendance\xa0"),e.\u0275\u0275elementStart(57,"span",17),e.\u0275\u0275text(58,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",16),e.\u0275\u0275element(60,"ngx-select-dropdown",25),e.\u0275\u0275template(61,Al,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"div",16),e.\u0275\u0275element(63,"input",26),e.\u0275\u0275template(64,Dl,2,0,"p",19),e.\u0275\u0275template(65,Pl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",16),e.\u0275\u0275element(67,"ngx-select-dropdown",27),e.\u0275\u0275template(68,Rl,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(69,"div",15)(70,"div",16),e.\u0275\u0275text(71," Maximum Gratuity Annual\xa0"),e.\u0275\u0275elementStart(72,"span",17),e.\u0275\u0275text(73,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"div",16),e.\u0275\u0275element(75,"ngx-select-dropdown",28),e.\u0275\u0275template(76,Ml,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"div",16),e.\u0275\u0275element(78,"input",29),e.\u0275\u0275template(79,Ol,2,0,"p",19),e.\u0275\u0275template(80,Nl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"div",16),e.\u0275\u0275element(82,"ngx-select-dropdown",30),e.\u0275\u0275template(83,Ll,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(84,"div",31)(85,"div",16),e.\u0275\u0275text(86," Income Tax\xa0"),e.\u0275\u0275elementStart(87,"span",17),e.\u0275\u0275text(88,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(89,"div",16),e.\u0275\u0275element(90,"ngx-select-dropdown",32),e.\u0275\u0275template(91,Vl,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(92,"div",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(93,"div",31)(94,"div",16),e.\u0275\u0275text(95," Effective from\xa0"),e.\u0275\u0275elementStart(96,"span",17),e.\u0275\u0275text(97,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(98,"div",16),e.\u0275\u0275element(99,"dp-date-picker",34),e.\u0275\u0275template(100,ql,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(101,"div",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"div",31)(103,"div",35),e.\u0275\u0275template(104,$l,3,1,"button",36),e.\u0275\u0275template(105,Bl,6,1,"ng-template",null,37,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(107,"div",38)(108,"div",10)(109,"h6",39),e.\u0275\u0275text(110,"View, manage, update Gratuity rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(111,"div",40)(112,"table",41)(113,"thead")(114,"tr")(115,"th",42),e.\u0275\u0275text(116,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(117,"th",42),e.\u0275\u0275text(118,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(119,"th",42),e.\u0275\u0275text(120,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(121,"th",42),e.\u0275\u0275text(122,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"th",43),e.\u0275\u0275text(124,"Total Employees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"th",43),e.\u0275\u0275text(126,"Total Service Years"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"th",43),e.\u0275\u0275text(128,"5th Yr Attendance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(129,"th",43),e.\u0275\u0275text(130,"Max Gratuity"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(131,"th",42),e.\u0275\u0275text(132,"Income Tax"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(133,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(134,"button",44),e.\u0275\u0275elementStart(135,"div",45)(136,"div",46)(137,"div",47)(138,"div",48)(139,"h6",49),e.\u0275\u0275text(140,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(141,"button",50)(142,"span",51),e.\u0275\u0275text(143,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(144,"div",52)(145,"div",42)(146,"table",53)(147,"thead")(148,"th",42),e.\u0275\u0275text(149,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(150,"th",42),e.\u0275\u0275text(151,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(152,"th",42),e.\u0275\u0275text(153,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(154,"th",42),e.\u0275\u0275text(155,"Govt Doc No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(156,"th",42),e.\u0275\u0275text(157,"Wef"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(158,"th",43),e.\u0275\u0275text(159,"Total Employees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(160,"th",43),e.\u0275\u0275text(161,"Total Service Years"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(162,"th",43),e.\u0275\u0275text(163,"5th Yr Attendance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(164,"th",43),e.\u0275\u0275text(165,"Max Gratuity"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(166,"th",42),e.\u0275\u0275text(167,"Income Tax"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(168,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(169,"div",54)(170,"button",55),e.\u0275\u0275text(171,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(172,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(106);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.gratuityRuleForm),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.rulesMaster)("config",e.\u0275\u0275pureFunction0(45,L)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.employee_no_rule.hasError("required")&&t.gratuityRuleForm.controls.employee_no_rule.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.employee_no.hasError("required")&&t.gratuityRuleForm.controls.employee_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.employee_no.hasError("pattern")&&t.gratuityRuleForm.controls.employee_no.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.applicableMaster)("config",e.\u0275\u0275pureFunction0(46,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.employee_no_applicable.hasError("required")&&t.gratuityRuleForm.controls.employee_no_applicable.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.rulesMaster)("config",e.\u0275\u0275pureFunction0(47,L)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.service_year_no_rule.hasError("required")&&t.gratuityRuleForm.controls.service_year_no_rule.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.service_year_no.hasError("required")&&t.gratuityRuleForm.controls.service_year_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.service_year_no.hasError("pattern")&&t.gratuityRuleForm.controls.service_year_no.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.applicableMaster)("config",e.\u0275\u0275pureFunction0(48,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.service_year_no_applicable.hasError("required")&&t.gratuityRuleForm.controls.service_year_no_applicable.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.rulesMaster)("config",e.\u0275\u0275pureFunction0(49,L)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.fifth_year_atrendance_rule.hasError("required")&&t.gratuityRuleForm.controls.fifth_year_atrendance_rule.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.fifth_year_atrendance.hasError("required")&&t.gratuityRuleForm.controls.fifth_year_atrendance.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.fifth_year_atrendance.hasError("pattern")&&t.gratuityRuleForm.controls.fifth_year_atrendance.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.applicableMaster)("config",e.\u0275\u0275pureFunction0(50,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.fifth_year_atrendance_applicable.hasError("required")&&t.gratuityRuleForm.controls.fifth_year_atrendance_applicable.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.rulesMaster)("config",e.\u0275\u0275pureFunction0(51,L)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.max_gratuity_anual_rule.hasError("required")&&t.gratuityRuleForm.controls.max_gratuity_anual_rule.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.max_gratuity_anual.hasError("required")&&t.gratuityRuleForm.controls.max_gratuity_anual.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.max_gratuity_anual.hasError("pattern")&&t.gratuityRuleForm.controls.max_gratuity_anual.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.applicableMaster)("config",e.\u0275\u0275pureFunction0(52,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.max_gratuity_anual_applicable.hasError("required")&&t.gratuityRuleForm.controls.max_gratuity_anual_applicable.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.applicableMaster)("config",e.\u0275\u0275pureFunction0(53,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.income_tax_applicable.hasError("required")&&t.gratuityRuleForm.controls.income_tax_applicable.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(54,jl)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gratuityRuleForm.controls.effective_date.hasError("required")&&t.gratuityRuleForm.controls.effective_date.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(22),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,w.fY,A.Lr,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function Hl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",27),e.\u0275\u0275text(1,"Add Category"),e.\u0275\u0275elementEnd())}function Yl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",27),e.\u0275\u0275text(1,"Edit Category"),e.\u0275\u0275elementEnd())}function Gl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Jl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function zl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Wl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ql(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Zl(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",32),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Kl(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",33),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add Category"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.categoryForm.valid)}}function Xl(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",34),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",33),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Category"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.categoryForm.valid)}}const es=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let ts=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.dtOptions={},this.genderMaster=d.getGenderMaster(),this.categoryForm=n.group({category_name:[null,i.kI.compose([i.kI.required])],age_lower_limit:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],age_upper_limit:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],gender:[null,i.kI.compose([i.kI.required])]}),this.editActionId=""}ngOnInit(){this.titleService.setTitle("Income Tax Categories - "+d.AppName),this.fetch()}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchITaxCategories().subscribe(a=>{"success"==a.status?t({recordsTotal:a.categories.length,recordsFiltered:a.categories.length,data:a.categories}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center"},{render:function(n,t,a,r){return a.category_name}},{render:function(n,t,a,r){return a.age_lower_limit?a.age_lower_limit:"N/A"}},{render:function(n,t,a,r){return a.age_upper_limit?a.age_upper_limit:"N/A"}},{render:function(n,t,a,r){return d.getGenderMaster().find(c=>c.value===a.gender)?.description??"N/A"}}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!1,searching:!1,paging:!1,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.categoryForm.patchValue({category_name:n.category_name,age_lower_limit:n.age_lower_limit,age_upper_limit:n.age_upper_limit,gender:this.genderMaster.find(t=>t.value===n.gender)}),$("html, body").animate({scrollTop:$("#category-submit-section").position().top})}cancelEdit(){this.editActionId="",this.categoryForm.reset();for(const n in this.categoryForm.controls)if(Object.prototype.hasOwnProperty.call(this.categoryForm.controls,n)){const t=this.categoryForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.categoryForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createITaxCategory({category_name:this.categoryForm.value.category_name,age_lower_limit:this.categoryForm.value.age_lower_limit,age_upper_limit:this.categoryForm.value.age_upper_limit,gender:this.categoryForm.value.gender.value}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteITaxCategory({tax_category_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){this.categoryForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateITaxCategory({tax_category_id:this.editActionId,category_name:this.categoryForm.value.category_name,age_lower_limit:this.categoryForm.value.age_lower_limit,age_upper_limit:this.categoryForm.value.age_upper_limit,gender:this.categoryForm.value.gender.value}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-itax-categories"]],decls:86,vars:15,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","icon","ion-card"],[1,"mg-b-0"],["id","category-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-7"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-5","col-sm-4"],[1,"text-danger"],[1,"col-7","col-sm-8"],["type","text","formControlName","category_name","placeholder","Enter Category Name",1,"form-control"],["class","error-element",4,"ngIf"],["type","text","formControlName","age_lower_limit","placeholder","Enter Age Lower Limit",1,"form-control"],["type","text","formControlName","age_upper_limit","placeholder","Enter Age Upper Limit",1,"form-control"],["formControlName","gender",1,"form-control",3,"options","config"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label","mb-3"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-25p","text-center"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Income Tax Categories"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Income Tax Categories"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Define Category"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,Hl,2,0,"h6",11),e.\u0275\u0275template(20,Yl,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Category Name\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275element(30,"input",19),e.\u0275\u0275template(31,Gl,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",15)(33,"div",16),e.\u0275\u0275text(34," Age Lower Limit\xa0"),e.\u0275\u0275elementStart(35,"span",17),e.\u0275\u0275text(36,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",18),e.\u0275\u0275element(38,"input",21),e.\u0275\u0275template(39,Jl,2,0,"p",20),e.\u0275\u0275template(40,zl,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"div",15)(42,"div",16),e.\u0275\u0275text(43," Age Upper Limit\xa0"),e.\u0275\u0275elementStart(44,"span",17),e.\u0275\u0275text(45,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",18),e.\u0275\u0275element(47,"input",22),e.\u0275\u0275template(48,Wl,2,0,"p",20),e.\u0275\u0275template(49,Ql,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",15)(51,"div",16),e.\u0275\u0275text(52," Gender\xa0"),e.\u0275\u0275elementStart(53,"span",17),e.\u0275\u0275text(54,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",18),e.\u0275\u0275element(56,"ngx-select-dropdown",23),e.\u0275\u0275template(57,Zl,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"div",15),e.\u0275\u0275element(59,"div",16),e.\u0275\u0275elementStart(60,"div",18),e.\u0275\u0275template(61,Kl,3,1,"button",24),e.\u0275\u0275template(62,Xl,6,1,"ng-template",null,25,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(64,"div",26)(65,"div",10)(66,"h6",27),e.\u0275\u0275text(67,"Category List"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"div",28)(69,"table",29)(70,"thead")(71,"tr")(72,"th",30),e.\u0275\u0275text(73,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"th",31),e.\u0275\u0275text(75,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"th",30),e.\u0275\u0275text(77,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"th",30),e.\u0275\u0275text(79,"Age From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"th",30),e.\u0275\u0275text(81,"Age to"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"th",30),e.\u0275\u0275text(83,"Gender"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(84,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(85,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(63);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.categoryForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.categoryForm.controls.category_name.hasError("required")&&t.categoryForm.controls.category_name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.categoryForm.controls.age_lower_limit.hasError("required")&&t.categoryForm.controls.age_lower_limit.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.categoryForm.controls.age_lower_limit.hasError("pattern")&&t.categoryForm.controls.age_lower_limit.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.categoryForm.controls.age_upper_limit.hasError("required")&&t.categoryForm.controls.age_upper_limit.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.categoryForm.controls.age_upper_limit.hasError("pattern")&&t.categoryForm.controls.age_upper_limit.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.genderMaster)("config",e.\u0275\u0275pureFunction0(14,es)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.categoryForm.controls.gender.hasError("required")&&t.categoryForm.controls.gender.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function ns(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",54),e.\u0275\u0275text(1," Define Income Tax Templates "),e.\u0275\u0275elementStart(2,"a",55),e.\u0275\u0275text(3,"Add Category"),e.\u0275\u0275elementEnd()())}function as(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",54),e.\u0275\u0275text(1,"Update Income Tax Template "),e.\u0275\u0275elementStart(2,"a",55),e.\u0275\u0275text(3,"Add Category"),e.\u0275\u0275elementEnd()())}function rs(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function os(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function is(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ls(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"Insert a valid year"),e.\u0275\u0275elementEnd())}function ss(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ds(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",56),e.\u0275\u0275text(1,"Insert a valid year"),e.\u0275\u0275elementEnd())}function ms(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",68),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.removeTaxSlab(a))}),e.\u0275\u0275text(1,"Remove Slab"),e.\u0275\u0275elementEnd()}}function cs(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",69),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(a.addTaxSlab())}),e.\u0275\u0275text(1,"Add Slab"),e.\u0275\u0275elementEnd()}}function ps(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div")(1,"div",57)(2,"div",58)(3,"div",59),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",15)(6,"div",16),e.\u0275\u0275text(7," From\xa0"),e.\u0275\u0275elementStart(8,"span",17),e.\u0275\u0275text(9,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"div",16),e.\u0275\u0275element(11,"input",60),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",20),e.\u0275\u0275text(13," To\xa0"),e.\u0275\u0275elementStart(14,"span",17),e.\u0275\u0275text(15,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(16,"div",16),e.\u0275\u0275element(17,"input",61),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",15)(19,"div",16),e.\u0275\u0275text(20," Tax rate\xa0"),e.\u0275\u0275elementStart(21,"span",17),e.\u0275\u0275text(22,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(23,"div",16),e.\u0275\u0275element(24,"input",62),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",20),e.\u0275\u0275text(26," Additional Charges\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16),e.\u0275\u0275element(30,"input",63),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",15)(32,"div",16),e.\u0275\u0275text(33," Additional Cess\xa0"),e.\u0275\u0275elementStart(34,"span",17),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",16),e.\u0275\u0275element(37,"input",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",65),e.\u0275\u0275template(39,ms,2,0,"button",66),e.\u0275\u0275template(40,cs,2,0,"button",67),e.\u0275\u0275elementEnd()()()()),2&o){const n=l.index,t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",n),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Income Slab ",n+1," "),e.\u0275\u0275advance(35),e.\u0275\u0275property("ngIf",t.getTaxSlabControls().length>1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getTaxSlabControls().length-1==n)}}function us(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",70),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.iTaxSlabForm.valid)}}function _s(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",71),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",70),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE SLAB"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.iTaxSlabForm.valid)}}function hs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(n.category_name)}}function fs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit,t=l.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.income_slab_from),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.income_slab_to),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.tax_rate),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.additional_charge),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.additional_cess)}}function gs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",48)(1,"div",72)(2,"table",73)(3,"tbody")(4,"tr")(5,"th",40),e.\u0275\u0275text(6,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"tr")(10,"th",40),e.\u0275\u0275text(11,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,hs,2,1,"td",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"tr")(14,"th",40),e.\u0275\u0275text(15,"Financial Year From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"tr")(19,"th",40),e.\u0275\u0275text(20,"Financial Year To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(23,"div",74)(24,"table",73)(25,"thead")(26,"tr")(27,"th",75)(28,"h6",76),e.\u0275\u0275text(29,"Income Slabs"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"tr")(31,"th",77),e.\u0275\u0275text(32,"Sl"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th",77),e.\u0275\u0275text(34,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th",77),e.\u0275\u0275text(36,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th",77),e.\u0275\u0275text(38,"Tax Rate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",77),e.\u0275\u0275text(40,"Additional Charges"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th",77),e.\u0275\u0275text(42,"Additional Cess"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(43,"tbody"),e.\u0275\u0275template(44,fs,13,6,"tr",25),e.\u0275\u0275elementEnd()()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(n.viewItTaxTemplate.template_name),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",n.viewItTaxTemplate.categorydata),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.viewItTaxTemplate.financial_year_from),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.viewItTaxTemplate.financial_year_to),e.\u0275\u0275advance(22),e.\u0275\u0275property("ngForOf",n.viewItTaxTemplate.income_tax_slab)}}function bs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;let t;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(null!==(t=n.category_name)&&void 0!==t?t:"N/A")}}function vs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()),2&o){const n=l.$implicit,t=l.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t+1),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.income_slab_from),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.income_slab_to),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.tax_rate),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.additional_charge),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.additional_cess)}}function ys(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",48)(1,"div",72)(2,"table",73)(3,"tbody")(4,"tr")(5,"th",40),e.\u0275\u0275text(6,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"tr")(10,"th",40),e.\u0275\u0275text(11,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,bs,2,1,"td",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"tr")(14,"th",40),e.\u0275\u0275text(15,"Financial Year From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td"),e.\u0275\u0275text(17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"tr")(19,"th",40),e.\u0275\u0275text(20,"Financial Year To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(23,"div",74)(24,"table",73)(25,"thead")(26,"tr")(27,"th",75)(28,"h6",76),e.\u0275\u0275text(29,"Income Slabs"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(30,"tr")(31,"th",77),e.\u0275\u0275text(32,"Sl"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th",77),e.\u0275\u0275text(34,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th",77),e.\u0275\u0275text(36,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th",77),e.\u0275\u0275text(38,"Tax Rate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",77),e.\u0275\u0275text(40,"Additional Charges"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th",77),e.\u0275\u0275text(42,"Additional Cess"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(43,"tbody"),e.\u0275\u0275template(44,vs,13,6,"tr",25),e.\u0275\u0275elementEnd()()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(n.viewItTaxTemplateHistory.template_name),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",n.viewItTaxTemplateHistory.categorydata),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.viewItTaxTemplateHistory.financial_year_from),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(n.viewItTaxTemplateHistory.financial_year_to),e.\u0275\u0275advance(22),e.\u0275\u0275property("ngForOf",n.viewItTaxTemplateHistory.income_tax_slab)}}const xs=function(){return{search:!0,placeholder:"Choose One",height:"200px"}};let Ss=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewItTaxTemplate=null,this.initialValueBeforeUpdate=null,this.viewItTaxTemplateHistory=null,this.iTaxCategoryForm=n.group({category_name:[null,i.kI.compose([i.kI.required])]}),this.iTaxSlabForm=n.group({template_name:[null,i.kI.compose([i.kI.required])],category:[null,i.kI.compose([i.kI.required])],financial_year_from:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.minLength(4),i.kI.maxLength(4)])],financial_year_to:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.minLength(4),i.kI.maxLength(4)])],income_tax_slab:this.formBuilder.array([this.initIncomeTaxSlabs()])}),this.editActionId="",this.categoryMaster=[]}ngOnInit(){this.titleService.setTitle("Income Tax Slab - "+d.AppName),this.fetch(),this.fetchCategories(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){return'<button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="View Details" id="viewHistoryDetailsButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-eye"></i></div>\n                    </button>'},className:"text-center"},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.template_name}},{render:function(n,t,a,r){return a.category_name??"N/A"}},{render:function(n,t,a,r){return a.financial_year_from}},{render:function(n,t,a,r){return a.financial_year_to}}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#viewHistoryDetailsButton-"+a,function(){r.viewHistoryDetails(t)}),n},searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}initIncomeTaxSlabs(n=null,t=null,a=null,r=null,s=null){return this.formBuilder.group({income_slab_from:[n,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.min(1)])],income_slab_to:[t,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.min(1)])],tax_rate:[a,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.min(1)])],additional_charge:[r,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.min(1)])],additional_cess:[s,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.min(1)])]})}getTaxSlabControls(){return this.iTaxSlabForm.get("income_tax_slab").controls}removeTaxSlab(n){this.iTaxSlabForm.get("income_tax_slab").removeAt(n)}addTaxSlab(n=null,t=null,a=null,r=null,s=null){this.iTaxSlabForm.get("income_tax_slab").push(this.initIncomeTaxSlabs(n,t,a,r,s))}fetchCategories(){this.spinner.show(),this.adminService.fetchITaxCategories().subscribe(n=>{if("success"==n.status){this.categoryMaster=[];for(const t in n.categories)if(Object.prototype.hasOwnProperty.call(n.categories,t)){const a=n.categories[t];this.categoryMaster.push({id:a._id,description:a.category_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchITaxTemplates({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n),pagination:!0}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.incometax.totalDocs,recordsFiltered:r.incometax.totalDocs,data:r.incometax.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-info btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="View Details" id="viewButton-'+r.row+'">\n                      <div style="width:25px; height:25px;"><i class="fa fa-eye"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-primary btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                      <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mg-5" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                      <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.template_name},orderable:!0,name:"template_name"},{render:function(n,t,a,r){if(a.categorydata.length>0){let s="";return a.categorydata.forEach(m=>{s+=m.category_name+"<br>"}),s}return"N/A"},orderable:!1},{render:function(n,t,a,r){return a.financial_year_from},orderable:!0,name:"financial_year_from"},{render:function(n,t,a,r){return a.financial_year_to},orderable:!0,name:"financial_year_to"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#viewButton-"+a,function(){r.view(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.iTaxSlabForm.patchValue({template_name:n.template_name,category:this.categoryMaster.find(a=>a.id===n.category),financial_year_from:n.financial_year_from,financial_year_to:n.financial_year_to}),this.iTaxSlabForm.get("income_tax_slab").clear(),n.income_tax_slab.forEach(a=>{this.addTaxSlab(a.income_slab_from,a.income_slab_to,a.tax_rate,a.additional_charge,a.additional_cess)}),this.initialValueBeforeUpdate={taxslab_id:this.editActionId,template_name:this.iTaxSlabForm.value.template_name.toString().trim(),category:this.iTaxSlabForm.value.category.id,category_name:this.iTaxSlabForm.value.category.description,financial_year_from:this.iTaxSlabForm.value.financial_year_from.toString().trim(),financial_year_to:this.iTaxSlabForm.value.financial_year_to.toString().trim(),income_tax_slab:JSON.stringify(this.iTaxSlabForm.value.income_tax_slab)},$("html, body").animate({scrollTop:$("#itaxslab-submit-section").position().top})}cancelEdit(){this.editActionId="",this.iTaxSlabForm.reset();for(const t in this.iTaxSlabForm.controls)if(Object.prototype.hasOwnProperty.call(this.iTaxSlabForm.controls,t)){const a=this.iTaxSlabForm.controls[t];a.markAsUntouched(),a.markAsPristine()}this.iTaxSlabForm.get("income_tax_slab").clear(),this.addTaxSlab(),$("html, body").animate({scrollTop:$("#itaxslab-submit-section").position().top})}create(n){var t=this;return(0,g.Z)(function*(){if(t.iTaxSlabForm.valid){if(n.target.classList.add("btn-loading"),!(yield t.validate_itax_data()))return void n.target.classList.remove("btn-loading");t.adminService.createITaxTemplate({template_name:t.iTaxSlabForm.value.template_name,category:t.iTaxSlabForm.value.category.id,financial_year_from:t.iTaxSlabForm.value.financial_year_from,financial_year_to:t.iTaxSlabForm.value.financial_year_to,income_tax_slab:JSON.stringify(t.iTaxSlabForm.value.income_tax_slab)}).subscribe(r=>{"success"==r.status?(t.toastr.success(r.message),t.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(s){},!1)):t.toastr.error("val_err"==r.status?d.showValidationMessage(r.val_msg):r.message),n.target.classList.remove("btn-loading")},r=>{n.target.classList.remove("btn-loading"),t.toastr.error("Internal server error occured. Please try again later.")})}})()}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteITaxTemplate({taxslab_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){var t=this;return(0,g.Z)(function*(){if(t.iTaxSlabForm.valid){if(n.target.classList.add("btn-loading"),!(yield t.validate_itax_data()))return void n.target.classList.remove("btn-loading");const r={taxslab_id:t.editActionId,template_name:t.iTaxSlabForm.value.template_name.toString().trim(),category:t.iTaxSlabForm.value.category.id,category_name:t.iTaxSlabForm.value.category.description,financial_year_from:t.iTaxSlabForm.value.financial_year_from.toString().trim(),financial_year_to:t.iTaxSlabForm.value.financial_year_to.toString().trim(),income_tax_slab:JSON.stringify(t.iTaxSlabForm.value.income_tax_slab)};if(JSON.stringify(r)===JSON.stringify(t.initialValueBeforeUpdate))return n.target.classList.remove("btn-loading"),void t.toastr.warning("No change detected to update");t.adminService.updateITaxTemplate(r).subscribe(s=>{"success"==s.status?(t.toastr.success(s.message),t.initialValueBeforeUpdate=r,$("#my-datatable").dataTable().api().ajax.reload(function(m){},!1)):t.toastr.error("val_err"==s.status?d.showValidationMessage(s.val_msg):s.message),n.target.classList.remove("btn-loading")},s=>{n.target.classList.remove("btn-loading"),t.toastr.error("Internal server error occured. Please try again later.")})}})()}view(n){$("#viewmmodalbutton").click(),this.viewItTaxTemplate=n}viewHistoryDetails(n){$("#viewhistorymodalbutton").click(),this.viewItTaxTemplateHistory=n}validate_itax_data(){const n=this;return new Promise(function(t,a){if(parseInt(n.iTaxSlabForm.value.financial_year_to)<parseInt(n.iTaxSlabForm.value.financial_year_from))return n.toastr.error("The ending financial year should be greater than the starting year"),void t(!1);for(const r in n.iTaxSlabForm.value.income_tax_slab)if(Object.prototype.hasOwnProperty.call(n.iTaxSlabForm.value.income_tax_slab,r)){const s=n.iTaxSlabForm.value.income_tax_slab[r];if(s.income_slab_to<=s.income_slab_from)return n.toastr.error("For Income Tax Slab "+(parseInt(r)+1)+": The amount range entered is not acceptable"),void t(!1);if(parseInt(r)>0&&s.income_slab_from<=n.iTaxSlabForm.value.income_tax_slab[parseInt(r)-1]?.income_slab_to)return n.toastr.error("For Income Tax Slab "+(parseInt(r)+1)+": The amount range starting should be greater than the previous one"),void t(!1)}n.adminService.validateITaxTemplateFinancialYear({tax_slab_id:n.editActionId?n.editActionId:null,fromdate:n.iTaxSlabForm.value.financial_year_from,todate:n.iTaxSlabForm.value.financial_year_to}).subscribe(r=>"success"==r.status?void t(!0):"val_err"==r.status?(n.toastr.error(d.showValidationMessage(r.val_msg)),void t(!1)):(n.toastr.error(r.message),void t(!1)),r=>{n.toastr.error("Internal server error occured. Please try again later."),t(!1)})})}showUpdateHistory(n){this.viewItTaxTemplate=n,null!=this.viewItTaxTemplate.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewItTaxTemplate&&null!=this.viewItTaxTemplate.history&&Array.isArray(this.viewItTaxTemplate.history)?this.viewItTaxTemplate.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-itax-slabs"]],decls:148,vars:22,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-card"],[1,"mg-b-0"],["id","itaxslab-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","template_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","category",1,"form-control",3,"options","config"],["type","number","formControlName","financial_year_from",1,"form-control"],["type","number","formControlName","financial_year_to",1,"form-control"],["formArrayName","income_tax_slab"],[4,"ngFor","ngForOf"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],["id","reseller-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","viewmmodalbutton","data-toggle","modal","data-target","#viewmodal",3,"hidden"],["id","viewmodal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],["class","modal-body pd-20",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],[1,"modal-body","pd-20"],[1,"table-responsive"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[2,"width","100%"],["id","viewhistorymodalbutton","data-toggle","modal","data-target","#viewhistorymodal",3,"hidden"],["id","viewhistorymodal","data-keyboard","false",1,"modal","fade","effect-slide-in-right"],[1,"br-section-label","mb-3"],["routerLink","/admin/govt-rules/itax-categories",1,"btn","btn-info","float-right","btn-xs"],[1,"error-element"],[3,"formGroupName"],[1,"row","no-gutters",2,"border-right","1px solid #ced4da"],[1,"col-12","col-sm-12"],["formControlName","income_slab_from","type","number",1,"form-control"],["formControlName","income_slab_to","type","number",1,"form-control"],["formControlName","tax_rate","type","number",1,"form-control"],["formControlName","additional_charge","type","number",1,"form-control"],["formControlName","additional_cess","type","number",1,"form-control"],[1,"col-6","col-sm-6"],["type","button","class","btn-danger btn mr-1",3,"click",4,"ngIf"],["type","button","class","btn-info btn",3,"click",4,"ngIf"],["type","button",1,"btn-danger","btn","mr-1",3,"click"],["type","button",1,"btn-info","btn",3,"click"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],[1,"bd","bd-gray-300","rounded","table-responsive"],[1,"table","table-striped","mg-b-0"],[1,"bd","bd-gray-300","rounded","table-responsive","mg-t-10"],["colspan","6",1,"bg-info","text-center"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold","text-white"],[1,"tx-uppercase","tx-bold"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Income Tax Slab"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Income Tax Slab"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Define income tax slab"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,ns,4,0,"h6",11),e.\u0275\u0275template(20,as,4,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(22,"br"),e.\u0275\u0275elementStart(23,"div",13)(24,"form",14)(25,"div",15)(26,"div",16),e.\u0275\u0275text(27," Template Name\xa0"),e.\u0275\u0275elementStart(28,"span",17),e.\u0275\u0275text(29,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",16),e.\u0275\u0275element(31,"input",18),e.\u0275\u0275template(32,rs,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",20),e.\u0275\u0275text(34," Category\xa0"),e.\u0275\u0275elementStart(35,"span",17),e.\u0275\u0275text(36,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",16),e.\u0275\u0275element(38,"ngx-select-dropdown",21),e.\u0275\u0275template(39,os,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",15)(41,"div",16),e.\u0275\u0275text(42," Financial Year From\xa0"),e.\u0275\u0275elementStart(43,"span",17),e.\u0275\u0275text(44,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",16),e.\u0275\u0275element(46,"input",22),e.\u0275\u0275template(47,is,2,0,"p",19),e.\u0275\u0275template(48,ls,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",20),e.\u0275\u0275text(50," Financial Year To\xa0"),e.\u0275\u0275elementStart(51,"span",17),e.\u0275\u0275text(52,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",16),e.\u0275\u0275element(54,"input",23),e.\u0275\u0275template(55,ss,2,0,"p",19),e.\u0275\u0275template(56,ds,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",24),e.\u0275\u0275template(58,ps,41,4,"div",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"div",26)(60,"div",27),e.\u0275\u0275template(61,us,3,1,"button",28),e.\u0275\u0275template(62,_s,6,1,"ng-template",null,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(64,"div",30)(65,"div",10)(66,"h6",31),e.\u0275\u0275text(67,"Income tax template list"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"div",32)(69,"table",33)(70,"thead")(71,"tr")(72,"th",34),e.\u0275\u0275text(73,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"th",34),e.\u0275\u0275text(75,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"th",34),e.\u0275\u0275text(77,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"th",34),e.\u0275\u0275text(79,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"th",34),e.\u0275\u0275text(81,"FY From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"th",34),e.\u0275\u0275text(83,"FY To"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(84,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(85,"button",35),e.\u0275\u0275elementStart(86,"div",36)(87,"div",37)(88,"div",38)(89,"div",39)(90,"h6",40),e.\u0275\u0275text(91,"View Template Details"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"button",41)(93,"span",42),e.\u0275\u0275text(94,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(95,gs,45,5,"div",43),e.\u0275\u0275elementStart(96,"div",44)(97,"button",45),e.\u0275\u0275text(98,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(99,"button",46),e.\u0275\u0275elementStart(100,"div",47)(101,"div",37)(102,"div",38)(103,"div",39)(104,"h6",40),e.\u0275\u0275text(105,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"button",41)(107,"span",42),e.\u0275\u0275text(108,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(109,"div",48)(110,"div",49)(111,"table",50)(112,"thead")(113,"th",34),e.\u0275\u0275text(114,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(115,"th",34),e.\u0275\u0275text(116,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(117,"th",34),e.\u0275\u0275text(118,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(119,"th",34),e.\u0275\u0275text(120,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(121,"th",34),e.\u0275\u0275text(122,"Template Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"th",34),e.\u0275\u0275text(124,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"th",34),e.\u0275\u0275text(126,"FY From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"th",34),e.\u0275\u0275text(128,"FY To"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(129,"tbody",51),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(130,"div",44)(131,"button",45),e.\u0275\u0275text(132,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(133,"button",52),e.\u0275\u0275elementStart(134,"div",53)(135,"div",37)(136,"div",38)(137,"div",39)(138,"h6",40),e.\u0275\u0275text(139,"Previous Version of the Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(140,"button",41)(141,"span",42),e.\u0275\u0275text(142,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(143,ys,45,5,"div",43),e.\u0275\u0275elementStart(144,"div",44)(145,"button",45),e.\u0275\u0275text(146,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(147,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(63);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",t.iTaxSlabForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.iTaxSlabForm.controls.template_name.hasError("required")&&t.iTaxSlabForm.controls.template_name.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.categoryMaster)("config",e.\u0275\u0275pureFunction0(21,xs)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.iTaxSlabForm.controls.category.hasError("required")&&t.iTaxSlabForm.controls.category.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.iTaxSlabForm.controls.financial_year_from.hasError("required")&&t.iTaxSlabForm.controls.financial_year_from.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(t.iTaxSlabForm.controls.financial_year_from.hasError("pattern")||t.iTaxSlabForm.controls.financial_year_from.hasError("minlength")||t.iTaxSlabForm.controls.financial_year_from.hasError("maxlength"))&&t.iTaxSlabForm.controls.financial_year_from.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.iTaxSlabForm.controls.financial_year_to.hasError("required")&&t.iTaxSlabForm.controls.financial_year_to.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",(t.iTaxSlabForm.controls.financial_year_to.hasError("pattern")||t.iTaxSlabForm.controls.financial_year_to.hasError("minlength")||t.iTaxSlabForm.controls.financial_year_to.hasError("maxlength"))&&t.iTaxSlabForm.controls.financial_year_to.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.getTaxSlabControls()),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(16),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",null!=t.viewItTaxTemplate),e.\u0275\u0275advance(4),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory),e.\u0275\u0275advance(22),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",null!=t.viewItTaxTemplateHistory)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,y,x]}),o})();function Es(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n," ")}}function Cs(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.creditBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function ws(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("data",n.creditBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function ks(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275template(1,ws,1,3,"canvas",39),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.isCreditBarChartLoading)}}function Is(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n," ")}}function Fs(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.salesBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Ts(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275element(1,"canvas",57),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("data",n.salesBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function As(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n," ")}}function Ds(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.plansBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Ps(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275element(1,"canvas",57),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("data",n.plansBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Rs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n," ")}}function Ms(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.acquisitionBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Os(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275element(1,"canvas",57),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("data",n.acquisitionBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Ns(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",58)(1,"div",59)(2,"figure",60),e.\u0275\u0275element(3,"img",61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",62)(5,"h3"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p")(9,"span",63),e.\u0275\u0275text(10,"ID: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,2,null==n?null:n.reseller_name)," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==n?null:n.corporate_id)}}function Ls(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",58)(1,"div",59)(2,"figure",60),e.\u0275\u0275element(3,"img",61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",62)(5,"h3"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p")(9,"span",63),e.\u0275\u0275text(10,"ID: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd()()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(7,2,null==n?null:n.establishment_name)," "),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==n?null:n.corporate_id)}}function Vs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n," ")}}function qs(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.promoBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function $s(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275element(1,"canvas",57),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("data",n.promoBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Bs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"option",56),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&o){const n=l.$implicit;e.\u0275\u0275property("value",n),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n," ")}}function js(o,l){if(1&o&&e.\u0275\u0275element(0,"canvas",57),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("data",n.ctcBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}function Us(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",38),e.\u0275\u0275element(1,"canvas",57),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("data",n.ctcBarChartData)("options",n.barChartOptions)("type",n.barChartType)}}const Hs=function(){return[]},X=function(){return{filter:"active"}},V=function(){return{filter:"inactive"}};let Ys=(()=>{class o{constructor(n,t,a,r,s){this.adminService=n,this.titleService=t,this.toastr=a,this.spinner=r,this.activatedRoute=s,this.financialYearOptions=[],this.currentYearDateRange=(new Date).getFullYear(),this.isCreditBarChartLoading=!1,this.isSalesBarChartLoading=!1,this.isPlansBarChartLoading=!1,this.isAcquisitionBarChartLoading=!1,this.isPromoBarChartLoading=!1,this.isCtcBarChartLoading=!1,this.graphFilterForm=new i.cw({creditDateRange:new i.NI(this.currentYearDateRange),salesDateRange:new i.NI(this.currentYearDateRange),plansDateRange:new i.NI(this.currentYearDateRange),acquisitionDateRange:new i.NI(this.currentYearDateRange),promoDateRange:new i.NI(this.currentYearDateRange),ctcDateRange:new i.NI(this.currentYearDateRange)}),this.pieChartType="doughnut",this.barChartType="bar",this.pieChartOptions={aspectRatio:2,plugins:{legend:{display:!1},subtitle:{display:!0}}},this.barChartOptions={maintainAspectRatio:!1,plugins:{legend:{display:!1}}},this.pieChartData={labels:["A","B","C","D"],datasets:[{data:[35,20,10,35],label:"used",backgroundColor:["rgba(255,255,255,1)","rgba(0,83,146,1)","rgba(0,194,236,1)","rgba(56,183,179,1)"],borderWidth:.1,borderColor:"blue"}]},this.creditBarChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{data:[],label:"Credit Consumption",backgroundColor:"rgba(22,163,183)",order:1,maxBarThickness:40,minBarLength:1}]},this.salesBarChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{data:[],label:"Sales",backgroundColor:"rgba(22,163,183)",order:1,maxBarThickness:40,minBarLength:1}]},this.plansBarChartData={labels:[],datasets:[{data:[],label:"Purchased Plan",backgroundColor:"rgba(22,163,183)",order:1,maxBarThickness:40,minBarLength:1}]},this.acquisitionBarChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{data:[],label:"Monthly Acquisition",backgroundColor:"rgba(22,163,183)",order:1,maxBarThickness:40,minBarLength:1}]},this.promoBarChartData={labels:[],datasets:[{data:[],label:"Actual Processed Amount ",backgroundColor:"rgba(22,163,183)",order:1,maxBarThickness:40,minBarLength:1}]},this.ctcBarChartData={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{data:[],label:"Actual Processed Amount ",backgroundColor:"rgba(22,163,183)",order:1,maxBarThickness:40,minBarLength:1}]},this.TopTenReseller=[],this.TopTenCorpIds=[],this.filter=this.activatedRoute.snapshot.queryParams.filter,this.fetchTotalData(),this.fetchCreditConsumptionData(),this.fetchSalesData(),this.fetchPurchasedPlanData(),this.fetchMonthlyAcquisitionData(),this.fetchTopTenUsers(),this.fetchPromoRedemptionData(),this.fetchCTCData()}ngOnInit(){var n=this;return(0,g.Z)(function*(){n.titleService.setTitle("Home - "+d.AppName),n.financialYearOptions=[(new Date).getFullYear()-2,(new Date).getFullYear()-1,(new Date).getFullYear()]})()}fetchTotalData(){var n=this;return(0,g.Z)(function*(){try{let t=yield n.adminService.getDashboardTotalData({}).toPromise();if("success"!==t.status)throw t;n.dashboardTotalData=t.data}catch(t){n.isPlansBarChartLoading=!1,"val_err"==t.status?n.toastr.error(d.showValidationMessage(t.val_msg)):(n.toastr.error(d.showServerErrorMessage(t)),n.toastr.error(t.message))}})()}fetchCreditConsumptionData(){var n=this;return(0,g.Z)(function*(){try{n.isCreditBarChartLoading=!0;let t=n.getDateFilterForPayload("creditDateRange")??null;if(!t)return;n.creditBarChartData.datasets[0].data=[],t.filter_type="cradit_consumed",t.date_filter=JSON.stringify({from:t?.startDate,to:t?.endDate});let a=yield n.adminService.getDashboardGraphData(t).toPromise();if("success"!==a.status)throw a;let r={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0};a?.data?.map(s=>{r[s.wage_month]=s.balance}),n.creditBarChartData.datasets[0].data=Object.values(r),n.isCreditBarChartLoading=!1}catch(t){n.isCreditBarChartLoading=!1,n.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message?t.message:d.showServerErrorMessage(t))}})()}fetchSalesData(){var n=this;return(0,g.Z)(function*(){try{n.isSalesBarChartLoading=!0;let t=n.getDateFilterForPayload("salesDateRange")??null;if(!t)return;n.salesBarChartData.datasets[0].data=[],t.filter_type="cradit_sales",t.date_filter=JSON.stringify({from:t?.startDate,to:t?.endDate});let a=yield n.adminService.getDashboardGraphData(t).toPromise();if("success"!==a.status)throw a;let r={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0};a?.data?.map(s=>{r[s.wage_month]=s.balance}),n.salesBarChartData.datasets[0].data=Object.values(r),n.isSalesBarChartLoading=!1}catch(t){n.isSalesBarChartLoading=!1,n.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message?t.message:d.showServerErrorMessage(t))}})()}fetchMonthlyAcquisitionData(){var n=this;return(0,g.Z)(function*(){try{n.isAcquisitionBarChartLoading=!0;let t=n.getDateFilterForPayload("acquisitionDateRange")??null;if(!t)return;n.acquisitionBarChartData.datasets[0].data=[],t.filter_type="monthly_acquisition",t.date_filter=JSON.stringify({from:t?.startDate,to:t?.endDate});let a=yield n.adminService.getDashboardGraphData(t).toPromise();if("success"!==a.status)throw a;a?.data?.map(r=>{n.acquisitionBarChartData.datasets[0].data.push(r.total_company)}),n.isAcquisitionBarChartLoading=!1}catch(t){n.isAcquisitionBarChartLoading=!1,n.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message?t.message:d.showServerErrorMessage(t))}})()}fetchPurchasedPlanData(){var n=this;return(0,g.Z)(function*(){try{if(n.isPlansBarChartLoading=!0,!n.getDateFilterForPayload("plansDateRange"))return;n.plansBarChartData.datasets[0].data=[];let t=yield n.adminService.getDashboardPlansData(n.getDateFilterForPayload("plansDateRange")).toPromise();if("success"!==t.status)throw t;n.plansBarChartData.labels=[],t?.data?.map(a=>{n.plansBarChartData?.labels?.push(a.plan_name),n.plansBarChartData?.datasets[0]?.data?.push(a.count)}),n.isPlansBarChartLoading=!1}catch(t){n.isPlansBarChartLoading=!1,"val_err"==t.status?n.toastr.error(d.showValidationMessage(t.val_msg)):(n.toastr.error(d.showServerErrorMessage(t)),n.toastr.error(t.message))}})()}fetchPromoRedemptionData(){var n=this;return(0,g.Z)(function*(){try{if(n.isPromoBarChartLoading=!0,!n.getDateFilterForPayload("promoDateRange"))return;n.promoBarChartData.datasets[0].data=[];let t=yield n.adminService.getDashboardPromoData(n.getDateFilterForPayload("promoDateRange")).toPromise();if("success"!==t.status)throw t;n.promoBarChartData.labels=[],t?.data?.map(a=>{n.promoBarChartData?.labels?.push(a.coupon_code),n.promoBarChartData?.datasets[0]?.data?.push(a.count)}),n.isPromoBarChartLoading=!1}catch(t){n.isPromoBarChartLoading=!1,"val_err"==t.status?n.toastr.error(d.showValidationMessage(t.val_msg)):(n.toastr.error(d.showServerErrorMessage(t)),n.toastr.error(t.message))}})()}fetchCTCData(){var n=this;return(0,g.Z)(function*(){try{if(n.isCtcBarChartLoading=!0,!n.getDateFilterForPayload("ctcDateRange"))return;n.ctcBarChartData.datasets[0].data=[];let t=yield n.adminService.getDashboardCTCData(n.getDateFilterForPayload("ctcDateRange")).toPromise();if("success"!==t.status)throw t;let a={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0};t?.data?.total_ctc?.map(r=>{a[r._id]=r.total_gross_salary}),n.ctcBarChartData.datasets[0].data=Object.values(a),n.isCtcBarChartLoading=!1}catch(t){n.isCtcBarChartLoading=!1,"val_err"==t.status?n.toastr.error(d.showValidationMessage(t.val_msg)):(n.toastr.error(d.showServerErrorMessage(t)),n.toastr.error(t.message))}})()}fetchTopTenUsers(){var n=this;return(0,g.Z)(function*(){try{n.isCtcBarChartLoading=!0;let t=yield n.adminService.getDashboardTopCreditUsers({}).toPromise();if("success"!==t.status)throw t;n.TopTenReseller=t?.data?.top_reseller||[],n.TopTenCorpIds=t?.data?.top_corp||[]}catch(t){n.isCtcBarChartLoading=!1,"val_err"==t.status?n.toastr.error(d.showValidationMessage(t.val_msg)):(n.toastr.error(d.showServerErrorMessage(t)),n.toastr.error(t.message))}})()}getDateFilterForPayload(n,t){let a=t??this.graphFilterForm.get(n)?.value;return a?{startDate:new Date(+a,0,1),endDate:new Date(+a,11,31)}:null}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(h.gz))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-home"]],decls:171,vars:56,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],[1,"breadcrumb-item",3,"routerLink"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-speedometer"],[1,"mg-b-0"],[1,"br-pagebody","pd-x-20","pd-sm-x-30",3,"formGroup"],[1,"dashMdl","mb20"],[1,"row","row-sm"],[1,"col-md-9"],[1,"shadow-base","bg-white","radius3","h-100"],[1,"row","no-gutters"],[1,"col-md-4","border-right","border-bottom"],[1,"d-flex","align-items-center","commonbox"],["routerLink","/admin/user-management",1,"roundIcon",3,"queryParams"],["src","assets/img/users.svg","alt",""],["routerLink","/admin/user-management",1,"commonbox-text",3,"queryParams"],["src","assets/img/suspended_users.svg","alt",""],[1,"col-md-4","border-bottom"],["src","assets/img/deactivated.svg","alt",""],[1,"col-md-4","border-right"],[1,"roundIcon"],[1,"commonbox-text"],["src","assets/img/balance_wallet.svg","alt",""],[1,"col-md-4"],["src","assets/img/credit_balance.svg","alt",""],[1,"col-md-3"],[1,"px-3","pt-2","text-dark",2,"font-weight","600"],[1,"text-center","picarticon","mb-3"],["baseChart","",1,"chart",3,"data","options","type"],[1,"row"],[1,"col-6"],[1,"bottom-graph","shadow-base","bg-white","radius3","mb20","p20"],[1,"blackHead","position-relative","d-flex","align-items-center","justify-content-between"],["formControlName","creditDateRange",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"text-center"],["baseChart","","class","chart","height","300",3,"data","options","type",4,"ngIf"],["class","text-center",4,"ngIf"],["formControlName","salesDateRange",3,"change"],["baseChart","","height","300","class","chart",3,"data","options","type",4,"ngIf"],["formControlName","plansDateRange",3,"change"],["formControlName","acquisitionDateRange",3,"change"],[1,"col-md-6"],[1,"btmBox","bg-white","radius3","shadow-base","mb20","p20"],[1,"blackHead","d-flex","justify-content-between"],["routerLink","/admin/master/reseller"],[1,"scroll-wrap"],[1,"scroll-list"],[1,"row","m-0"],["class","col-6 m-0 p-0",4,"ngFor","ngForOf"],["routerLink","/admin/user-management"],["formControlName","promoDateRange",3,"change"],["formControlName","ctcDateRange",3,"change"],[3,"value"],["baseChart","","height","300",1,"chart",3,"data","options","type"],[1,"col-6","m-0","p-0"],[1,"d-flex","btmBox-list","align-items-center"],[1,"round-img"],["src","https://www.w3schools.com/howto/img_avatar.png","alt",""],[1,"btm-mdl"],[1,"m-0"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Home"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Overall Statistics "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"figure",16),e.\u0275\u0275element(24,"img",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",18)(26,"h3"),e.\u0275\u0275text(27,"Active Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"span"),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"number"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(31,"div",14)(32,"div",15)(33,"figure",16),e.\u0275\u0275element(34,"img",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",18)(36,"h3"),e.\u0275\u0275text(37,"Suspended Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"span"),e.\u0275\u0275text(39),e.\u0275\u0275pipe(40,"number"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(41,"div",20)(42,"div",15)(43,"figure",16),e.\u0275\u0275element(44,"img",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",18)(46,"h3"),e.\u0275\u0275text(47,"Deactivated Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"span"),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"number"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(51,"div",22)(52,"div",15)(53,"figure",23),e.\u0275\u0275element(54,"img",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",24)(56,"h3"),e.\u0275\u0275text(57,"Active Employees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"span"),e.\u0275\u0275text(59),e.\u0275\u0275pipe(60,"number"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(61,"div",22)(62,"div",15)(63,"figure",23),e.\u0275\u0275element(64,"img",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"div",24)(66,"h3"),e.\u0275\u0275text(67,"No of Corporate ID with low balance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"span"),e.\u0275\u0275text(69),e.\u0275\u0275pipe(70,"number"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(71,"div",26)(72,"div",15)(73,"figure",23),e.\u0275\u0275element(74,"img",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"div",24)(76,"h3"),e.\u0275\u0275text(77,"Unutilized Credit Balance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"span"),e.\u0275\u0275text(79),e.\u0275\u0275pipe(80,"number"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(81,"div",28)(82,"div",12)(83,"div",29),e.\u0275\u0275text(84,"Storage"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(85,"div",30),e.\u0275\u0275element(86,"canvas",31),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(87,"div",32)(88,"div",33)(89,"div",34)(90,"div",35)(91,"span"),e.\u0275\u0275text(92,"Credit Consumption"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(93,"select",36),e.\u0275\u0275listener("change",function(){return t.fetchCreditConsumptionData()}),e.\u0275\u0275template(94,Es,2,2,"option",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(95,"div",38),e.\u0275\u0275template(96,Cs,1,3,"canvas",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(97,ks,2,1,"div",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(98,"div",33)(99,"div",34)(100,"div",35)(101,"span"),e.\u0275\u0275text(102,"Sales"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(103,"select",41),e.\u0275\u0275listener("change",function(){return t.fetchSalesData()}),e.\u0275\u0275template(104,Is,2,2,"option",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(105,"div",38),e.\u0275\u0275template(106,Fs,1,3,"canvas",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(107,Ts,2,3,"div",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(108,"div",33)(109,"div",34)(110,"div",35)(111,"span"),e.\u0275\u0275text(112,"Purchased Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(113,"select",43),e.\u0275\u0275listener("change",function(){return t.fetchPurchasedPlanData()}),e.\u0275\u0275template(114,As,2,2,"option",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(115,"div",38),e.\u0275\u0275template(116,Ds,1,3,"canvas",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(117,Ps,2,3,"div",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(118,"div",33)(119,"div",34)(120,"div",35)(121,"span"),e.\u0275\u0275text(122,"Monthly Acquisition Graph"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"select",44),e.\u0275\u0275listener("change",function(){return t.fetchMonthlyAcquisitionData()}),e.\u0275\u0275template(124,Rs,2,2,"option",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"div",38),e.\u0275\u0275template(126,Ms,1,3,"canvas",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(127,Os,2,3,"div",40),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(128,"div",32)(129,"div",45)(130,"div",46)(131,"div",47),e.\u0275\u0275text(132," Top 10 Reseller "),e.\u0275\u0275elementStart(133,"a",48),e.\u0275\u0275text(134,"View All"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(135,"div",49)(136,"div",50)(137,"div",51),e.\u0275\u0275template(138,Ns,12,4,"div",52),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(139,"div",45)(140,"div",46)(141,"div",47),e.\u0275\u0275text(142," Top 10 Corporate ID "),e.\u0275\u0275elementStart(143,"a",53),e.\u0275\u0275text(144,"View All"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(145,"div",49)(146,"div",50)(147,"div",51),e.\u0275\u0275template(148,Ls,12,4,"div",52),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(149,"div",32)(150,"div",33)(151,"div",34)(152,"div",35)(153,"span"),e.\u0275\u0275text(154,"Promo redemption"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"select",54),e.\u0275\u0275listener("change",function(){return t.fetchPromoRedemptionData()}),e.\u0275\u0275template(156,Vs,2,2,"option",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(157,"div",38),e.\u0275\u0275template(158,qs,1,3,"canvas",39),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(159,$s,2,3,"div",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(160,"div",33)(161,"div",34)(162,"div",35)(163,"span"),e.\u0275\u0275text(164,"Month wise CTC processed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(165,"select",55),e.\u0275\u0275listener("change",function(){return t.fetchCTCData()}),e.\u0275\u0275template(166,Bs,2,2,"option",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(167,"div",38),e.\u0275\u0275template(168,js,1,3,"canvas",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(169,Us,2,3,"div",40),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(170,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(49,Hs)),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",t.graphFilterForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction0(50,X)),e.\u0275\u0275advance(2),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction0(51,X)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(30,37,(null==t.dashboardTotalData?null:t.dashboardTotalData.active_company)||0)),e.\u0275\u0275advance(4),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction0(52,V)),e.\u0275\u0275advance(2),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction0(53,V)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(40,39,(null==t.dashboardTotalData?null:t.dashboardTotalData.suspended_company)||0)),e.\u0275\u0275advance(4),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction0(54,V)),e.\u0275\u0275advance(2),e.\u0275\u0275property("queryParams",e.\u0275\u0275pureFunction0(55,V)),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,41,(null==t.dashboardTotalData?null:t.dashboardTotalData.deactived_company)||0)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(60,43,(null==t.dashboardTotalData?null:t.dashboardTotalData.active_employee)||0)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(70,45,(null==t.dashboardTotalData?null:t.dashboardTotalData.low_balance_company)||0)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(80,47,(null==t.dashboardTotalData?null:t.dashboardTotalData.company_un_utilised)||0)),e.\u0275\u0275advance(7),e.\u0275\u0275property("data",t.pieChartData)("options",t.pieChartOptions)("type",t.pieChartType),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.financialYearOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isCreditBarChartLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isCreditBarChartLoading),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.financialYearOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isSalesBarChartLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isSalesBarChartLoading),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.financialYearOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isPlansBarChartLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isPlansBarChartLoading),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.financialYearOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isAcquisitionBarChartLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isAcquisitionBarChartLoading),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngForOf",t.TopTenReseller),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",t.TopTenCorpIds),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.financialYearOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isPromoBarChartLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isPromoBarChartLoading),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngForOf",t.financialYearOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!t.isCtcBarChartLoading),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.isCtcBarChartLoading))},dependencies:[p.sg,p.O5,h.rH,h.yS,i.YN,i.Kr,i.EJ,i.JJ,i.JL,i.sg,i.u,z.jh,y,x,p.JJ,p.rS],styles:[".mb20[_ngcontent-%COMP%]{margin-bottom:20px}.mt20[_ngcontent-%COMP%]{margin-top:20px}.p20[_ngcontent-%COMP%]{padding:20px}.radius3[_ngcontent-%COMP%]{border-radius:3px;overflow:hidden}.dashTop[_ngcontent-%COMP%]{padding:20px 0}.commonbox[_ngcontent-%COMP%]{padding:12px 20px;min-height:105px;background-color:#fff}.action-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;padding:1rem}.commonbox[_ngcontent-%COMP%]{display:flex;align-items:center;background:#fff;padding:1rem;border-radius:8px;box-shadow:0 0 4px #0000001a}.commonbox[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{margin:0 12px 0 0}.commonbox-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .commonbox-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0;display:block}.commonbox-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .ksTxt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#868ba1;font-weight:400;font-size:13px;line-height:normal;margin-bottom:5px;font-family:var(--font-work)}.commonbox-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .ksTxt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#1d232a;font-weight:500;font-size:24px;line-height:normal;font-family:var(--font-roboto)}.roundIcon[_ngcontent-%COMP%]{width:37px;height:37px;border-radius:100%;overflow:hidden;background-color:#ededf2;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;margin:0 20px 0 0;transition:all .3s ease-in-out}.roundIcon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:all .3s ease-in-out}.commonbox-text.blacktxt[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#000;font-size:8px;font-weight:400;font-family:var(--font-roboto)}.commonbox-text.blacktxt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;line-height:normal;color:#000;font-weight:500}.blue-head[_ngcontent-%COMP%]{background-color:#b2dfe5;color:#07515a;font-size:12px;line-height:normal;font-weight:500;font-family:var(--font-roboto);text-align:center;padding:8px 10px}.blackHead[_ngcontent-%COMP%]{color:#1d232a;font-size:15px;line-height:normal;font-weight:500;margin-bottom:20px;font-family:var(--font-roboto)}.actionNeeded[_ngcontent-%COMP%], .salaryRange[_ngcontent-%COMP%]{min-height:240px}.EmployeesDash[_ngcontent-%COMP%], .kycSts[_ngcontent-%COMP%]{min-height:378px}.ksTxt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:15px;line-height:normal;color:#000;font-weight:500}.commonbox[_ngcontent-%COMP%]:hover   .roundIcon[_ngcontent-%COMP%], .ksBox[_ngcontent-%COMP%]:hover   .roundIcon[_ngcontent-%COMP%]{background-color:#17a3b4}.commonbox[_ngcontent-%COMP%]:hover   .roundIcon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .ksBox[_ngcontent-%COMP%]:hover   .roundIcon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:brightness(0) invert(1)}.ksBox[_ngcontent-%COMP%]{height:100%;padding:12px 10px;border:1px solid #EDEDF2;border-radius:3px}.ksBox[_ngcontent-%COMP%]   .roundIcon[_ngcontent-%COMP%]{margin-right:10px}.gap20[_ngcontent-%COMP%]{grid-row-gap:20px}.ksrow[_ngcontent-%COMP%]{margin-left:-7px!important;margin-right:-7px!important;grid-row-gap:12px}.ksrow[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-left:7px!important;padding-right:7px!important}.fnl-select[_ngcontent-%COMP%]{background-color:#17a3b4;border:none;outline:none;font-weight:500;color:#fff;font-size:16px;padding:0 10px 0 20px;margin-left:10px}.fnl-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-size:14px}.fnl-head[_ngcontent-%COMP%]{background-color:#17a3b4;color:#fff;font-size:12px;font-weight:400;font-family:var(--font-roboto);padding:10px 20px}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;font-weight:600;white-space:nowrap;padding:14px 10px;height:42px;vertical-align:middle}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 10px;font-weight:600;color:#000;box-shadow:0 2px 3px #d5d5d5;font-size:13px;line-height:normal;font-family:var(--font-roboto)}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]:nth-child(1){border-right:3px solid #ccc;padding-right:0}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]:nth-child(2){padding-left:0}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;display:block;white-space:nowrap;margin-bottom:5px}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;line-height:normal;min-height:98px;vertical-align:middle}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{flex:1;border-collapse:separate;border-spacing:0 4px;margin-top:-4px;padding:0 5px 5px}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{background:#edf2f2}.finacial-tbl[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(even){background-color:#e3ebeb}.btmBox[_ngcontent-%COMP%]   .blackHead[_ngcontent-%COMP%]{padding:15px 20px;margin-bottom:0}.btmBox[_ngcontent-%COMP%]   .blackHead[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#868ba1;font-size:11px;font-family:var(--font-roboto)}.btmBox[_ngcontent-%COMP%]   .blackHead[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#17a3b4}.gray-part[_ngcontent-%COMP%]{background-color:#f4f4f8;padding:12px 20px;color:#868ba1;font-size:13px;line-height:normal;font-weight:400;font-family:var(--font-roboto)}.btmBox-list[_ngcontent-%COMP%]{padding:14px 20px;border-bottom:1px solid #f4f4f8}.btmBox[_ngcontent-%COMP%]{background-color:#fff}.round-img[_ngcontent-%COMP%]{width:32px;height:32px;flex-shrink:0;margin-bottom:0;margin-right:15px;border-radius:100%;overflow:hidden}.round-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.btm-mdl[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1d232a;font-size:14px;font-weight:500;line-height:normal;margin-bottom:5px}.btm-price[_ngcontent-%COMP%]{color:#1d232a;font-size:14px;font-weight:500;font-family:var(--font-roboto);line-height:normal;margin-bottom:5px}.btm-mdl[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;line-height:normal;color:#343434;margin-bottom:0}.btm-mdl[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#868ba1;margin-right:10px}.scroll-wrap[_ngcontent-%COMP%]{overflow-y:auto}.scroll-list[_ngcontent-%COMP%]{height:260px}.blackHead[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:1px solid #DCDCDC;font-size:13px;font-weight:400;border-radius:3px;outline:none!important;line-height:normal;padding:9px 24px 9px 12px;color:#868ba1;font-family:var(--font-roboto);-webkit-appearance:none}.scroll-wrap[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.scroll-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.scroll-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#17A3B4}.scroll-wrap[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#17A3B4}.progress[_ngcontent-%COMP%]{height:12px}.progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{font-size:10px;background-color:#17a3b4}.slide-btn[_ngcontent-%COMP%]{background-color:#cdd9d9;display:flex;align-items:center;border-radius:20px;height:-moz-fit-content;height:fit-content}.slide-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{all:unset;padding:10px 14px;border-radius:20px;cursor:pointer;color:#000;font-size:12px}.active[_ngcontent-%COMP%]{background-color:#07515a!important;color:#fff!important}.widget-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;grid-template-rows:auto;gap:20px}.d-widget-7[_ngcontent-%COMP%], .d-widget-8[_ngcontent-%COMP%], .d-widget-9[_ngcontent-%COMP%]{grid-column:1 / 3}"]}),o})();function Gs(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",28),e.\u0275\u0275text(1,"Create"),e.\u0275\u0275elementEnd())}function Js(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",28),e.\u0275\u0275text(1,"Update"),e.\u0275\u0275elementEnd())}function zs(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",29),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ws(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.branchForm.valid)}}function Qs(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.branchForm.valid)}}let Zs=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.dtOptions={},this.branchForm=n.group({branch_name:[null,i.kI.compose([i.kI.required])]}),this.branches=[],this.editActionId=""}ngOnInit(){this.titleService.setTitle("Branch - "+d.AppName),this.fetch()}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchBranches({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.branches.totalDocs,recordsFiltered:r.branches.totalDocs,data:r.branches.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.branch_name},orderable:!0,name:"branch_name"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.branchForm.setValue({branch_name:n.branch_name}),$("html, body").animate({scrollTop:$("#branch-submit-section").position().top})}cancelEdit(){this.editActionId="",this.branchForm.reset()}create(n){this.branchForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createBranch({branch_name:this.branchForm.value.branch_name,status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.branchForm.reset(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteBranch({branch_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){this.branchForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateBranch({branch_name:this.branchForm.value.branch_name,branch_id:this.editActionId,status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}changeStatus(n){this.adminService.updateBranch({branch_name:n.branch_name,branch_id:n._id,status:"active"==n.status?"inactive":"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-branch"]],decls:52,vars:7,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","branch-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-7"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-5","col-sm-4"],[1,"col-7","col-sm-8"],["type","text","formControlName","branch_name","placeholder","Enter Branch Name",1,"form-control"],["class","error-element",4,"ngIf"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-section-label","mb-3","mt-5"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-15p","text-center"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Master"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Branch"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Branch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create Branch"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,Gs,2,0,"h6",11),e.\u0275\u0275template(20,Js,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Branch: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,zs,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",15),e.\u0275\u0275element(31,"div",16),e.\u0275\u0275elementStart(32,"div",17),e.\u0275\u0275template(33,Ws,3,1,"button",20),e.\u0275\u0275template(34,Qs,6,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(36,"h6",22),e.\u0275\u0275text(37,"View, manage branches"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",23)(39,"table",24)(40,"thead")(41,"tr")(42,"th",25),e.\u0275\u0275text(43,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th",26),e.\u0275\u0275text(45,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"th",27),e.\u0275\u0275text(47,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"th",25),e.\u0275\u0275text(49,"Branch Name"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(50,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(51,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(35);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.branchForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.branchForm.controls.branch_name.hasError("required")&&t.branchForm.controls.branch_name.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(6),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.O5,h.yS,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();var ee=k(6170);let Ks=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["credit-invoice-view"]],inputs:{templateData:"templateData"},decls:235,vars:7,consts:[[1,"text-center"],["id","t.32eb4d2db1863fe7058a03a57423037203aa5274"],["id","t.0"],["colspan","3","rowspan","1"],["colspan","2","rowspan","1"],["colspan","3","rowspan","1",3,"innerHTML"],["colspan","8","rowspan","1"],["colspan","1","rowspan","1"],["colspan","4","rowspan","1"],["colspan","4","rowspan","1",3,"innerHTML"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div")(1,"h5",0),e.\u0275\u0275text(2,"Tax Invoice"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"a",1)(4,"a",2),e.\u0275\u0275elementStart(5,"table")(6,"tr")(7,"td",3)(8,"p"),e.\u0275\u0275element(9,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"td",3)(11,"p")(12,"span"),e.\u0275\u0275text(13,"Invoice No. "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"td",4)(15,"p")(16,"span"),e.\u0275\u0275text(17,"Dated"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(18,"tr"),e.\u0275\u0275element(19,"td",5),e.\u0275\u0275elementStart(20,"td",3)(21,"p")(22,"span"),e.\u0275\u0275text(23,"N/A "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"td",4)(25,"p")(26,"span"),e.\u0275\u0275text(27,"DD/MM/YYYY"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(28,"tr")(29,"td",6)(30,"p")(31,"span"),e.\u0275\u0275text(32,"Buyer (Bill to)"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(33,"tr")(34,"td",6)(35,"p")(36,"span"),e.\u0275\u0275text(37,"GSTIN/UIN:N/A"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(38,"tr")(39,"td",6)(40,"p")(41,"span"),e.\u0275\u0275text(42,"PAN/IT No: N/A"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(43,"tr")(44,"td",6)(45,"p")(46,"span"),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(48,"tr")(49,"td",6)(50,"p")(51,"span"),e.\u0275\u0275text(52,"Place of Supply : N/A"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(53,"tr")(54,"td",7)(55,"p")(56,"span"),e.\u0275\u0275text(57,"Description "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(58,"td",3)(59,"p")(60,"span"),e.\u0275\u0275text(61,"HSN/SAC "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(62,"td",3)(63,"p")(64,"span"),e.\u0275\u0275text(65,"GST "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(66,"td",7)(67,"p")(68,"span"),e.\u0275\u0275text(69,"Amount"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(70,"tr")(71,"td",7)(72,"p")(73,"span"),e.\u0275\u0275text(74,"Payment for Credit Token "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(75,"td",3)(76,"p"),e.\u0275\u0275text(77),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(78,"td",3)(79,"p")(80,"span"),e.\u0275\u0275text(81,"0% "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(82,"td",7)(83,"p")(84,"span"),e.\u0275\u0275text(85,"0.00"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(86,"tr")(87,"td",7)(88,"p")(89,"span"),e.\u0275\u0275text(90,"IGST @0% "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(91,"td",3)(92,"p"),e.\u0275\u0275element(93,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(94,"td",3)(95,"p"),e.\u0275\u0275element(96,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(97,"td",7)(98,"p")(99,"span"),e.\u0275\u0275text(100,"0.00"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(101,"tr")(102,"td",7)(103,"p")(104,"span"),e.\u0275\u0275text(105,"CGST @0% "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(106,"td",3)(107,"p"),e.\u0275\u0275element(108,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(109,"td",3)(110,"p"),e.\u0275\u0275element(111,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(112,"td",7)(113,"p")(114,"span"),e.\u0275\u0275text(115,"0.00"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(116,"tr")(117,"td",7)(118,"p")(119,"span"),e.\u0275\u0275text(120,"SGST @0% "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(121,"td",3)(122,"p"),e.\u0275\u0275element(123,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(124,"td",3)(125,"p"),e.\u0275\u0275element(126,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(127,"td",7)(128,"p")(129,"span"),e.\u0275\u0275text(130,"0.00"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(131,"tr")(132,"td",7)(133,"p")(134,"span"),e.\u0275\u0275text(135,"Round Off "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(136,"td",3)(137,"p"),e.\u0275\u0275element(138,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(139,"td",3)(140,"p"),e.\u0275\u0275element(141,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(142,"td",7)(143,"p")(144,"span"),e.\u0275\u0275text(145,"0.00"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(146,"tr")(147,"td",7)(148,"p")(149,"span"),e.\u0275\u0275text(150,"Total "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(151,"td",3)(152,"p"),e.\u0275\u0275element(153,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(154,"td",3)(155,"p"),e.\u0275\u0275element(156,"span"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(157,"td",7)(158,"p")(159,"span"),e.\u0275\u0275text(160,"0.00"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(161,"tr")(162,"td",8)(163,"p")(164,"span"),e.\u0275\u0275text(165,"Amount Chargeable (in words) "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(166,"td",8)(167,"p")(168,"span"),e.\u0275\u0275text(169,"Zero "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(170,"tr")(171,"td",8)(172,"p")(173,"span"),e.\u0275\u0275text(174,"Tax Amount (in words) : "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(175,"td",8)(176,"p")(177,"span"),e.\u0275\u0275text(178,"Zero "),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(179,"tr")(180,"td",8)(181,"p")(182,"span"),e.\u0275\u0275text(183,"Remarks: "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(184,"td",8)(185,"p")(186,"span"),e.\u0275\u0275text(187,"Company's Bank Details"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(188,"tr")(189,"td",8)(190,"p")(191,"span"),e.\u0275\u0275text(192,"BILL NO : N/A"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(193,"td",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(194,"tr")(195,"td",6)(196,"p")(197,"span"),e.\u0275\u0275text(198,"Buyer's VAT TIN : N/A"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(199,"tr")(200,"td",6)(201,"p")(202,"span"),e.\u0275\u0275text(203,"Company's PAN : N/A"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(204,"tr")(205,"td",6)(206,"p")(207,"span"),e.\u0275\u0275text(208,"Declaration:"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(209,"tr")(210,"td",6),e.\u0275\u0275text(211),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(212,"tr")(213,"td",4)(214,"p")(215,"span"),e.\u0275\u0275text(216,"Customer's Seal and Signature "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(217,"td",3)(218,"p")(219,"span"),e.\u0275\u0275text(220,"Prepared by "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(221,"td",4)(222,"p")(223,"span"),e.\u0275\u0275text(224,"Prepared by "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(225,"td",7)(226,"p")(227,"span"),e.\u0275\u0275text(228,"Authorised Signatory"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(229,"p"),e.\u0275\u0275element(230,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(231,"p"),e.\u0275\u0275element(232,"span"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(233,"p"),e.\u0275\u0275text(234),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(19),e.\u0275\u0275property("innerHTML",null==t.templateData?null:t.templateData.com_address,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(28),e.\u0275\u0275textInterpolate2("State Name : ",null==t.templateData?null:t.templateData.com_state_name,", Code : ",null==t.templateData?null:t.templateData.com_state_code,""),e.\u0275\u0275advance(30),e.\u0275\u0275textInterpolate(null==t.templateData?null:t.templateData.hsn_sac),e.\u0275\u0275advance(116),e.\u0275\u0275property("innerHTML",null==t.templateData?null:t.templateData.com_bank_details,e.\u0275\u0275sanitizeHtml),e.\u0275\u0275advance(18),e.\u0275\u0275textInterpolate1(" ",null==t.templateData?null:t.templateData.declaration," "),e.\u0275\u0275advance(23),e.\u0275\u0275textInterpolate1(" ",null==t.templateData?null:t.templateData.footer_text," "))},styles:["table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black}"]}),o})();function Xs(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"a",53),e.\u0275\u0275text(1,"View Current Logo"),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate2("href","",n.Global.BACKEND_URL,"/",null==n.currentInvoice?null:n.currentInvoice.credit_inv_logo,"",e.\u0275\u0275sanitizeUrl)}}let ed=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.adminService=r,this.spinner=s,this.Global=d,this.Editor=ee,this.currentInvoice=null,this.templateData=null,this.creditInvoiceForm=n.group({credit_inv_logo:[null,i.kI.compose([])],credit_inv_logo_source:[null,i.kI.compose([])],com_address:[null,i.kI.compose([i.kI.required])],com_state_name:[null,i.kI.compose([i.kI.required])],com_state_code:[null,i.kI.compose([i.kI.required])],invoice_prefix:[null,i.kI.compose([i.kI.required])],mode_of_pay:[null,i.kI.compose([i.kI.required])],terms_of_delivery:[null,i.kI.compose([i.kI.required])],entity_name:[null,i.kI.compose([i.kI.required])],entity_description:[null,i.kI.compose([i.kI.required])],hsn_sac:[null,i.kI.compose([i.kI.required])],com_pan:[null,i.kI.compose([i.kI.required])],declaration:[null,i.kI.compose([i.kI.required])],com_bank_details:[null,i.kI.compose([i.kI.required])],footer_text:[null,i.kI.compose([i.kI.required])]})}ngOnInit(){this.titleService.setTitle("Credit Invoice Template - "+d.AppName),this.fetchTemplate()}cancelEntry(){d.resetForm(this.creditInvoiceForm),this.fetchTemplate()}submitTemplate(n){this.creditInvoiceForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.submitCreditInvoiceTemplate({credit_inv_logo:this.creditInvoiceForm.value.credit_inv_logo?this.creditInvoiceForm.value.credit_inv_logo_source:"",com_address:this.creditInvoiceForm.value.com_address??"",com_state_name:this.creditInvoiceForm.value.com_state_name??"",com_state_code:this.creditInvoiceForm.value.com_state_code??"",invoice_prefix:this.creditInvoiceForm.value.invoice_prefix??"",mode_of_pay:this.creditInvoiceForm.value.mode_of_pay??"",terms_of_delivery:this.creditInvoiceForm.value.terms_of_delivery??"",entity_name:this.creditInvoiceForm.value.entity_name??"",entity_description:this.creditInvoiceForm.value.entity_description??"",hsn_sac:this.creditInvoiceForm.value.hsn_sac??"",com_pan:this.creditInvoiceForm.value.com_pan??"",declaration:this.creditInvoiceForm.value.declaration??"",com_bank_details:this.creditInvoiceForm.value.com_bank_details??"",footer_text:this.creditInvoiceForm.value.footer_text??"",template_name:"TEMPLATE ONE",status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEntry()):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}fetchTemplate(){this.spinner.show(),this.adminService.fetchCreditInvoiceTemplate({}).subscribe(n=>{"success"==n.status?(this.currentInvoice=n?.template_list??null,this.creditInvoiceForm.patchValue({com_address:n?.template_list?.com_address??null,com_state_name:n?.template_list?.com_state_name??null,com_state_code:n?.template_list?.com_state_code??null,invoice_prefix:n?.template_list?.invoice_prefix??null,mode_of_pay:n?.template_list?.mode_of_pay??null,terms_of_delivery:n?.template_list?.terms_of_delivery??null,entity_name:n?.template_list?.entity_name??null,entity_description:n?.template_list?.entity_description??null,hsn_sac:n?.template_list?.hsn_sac??null,com_pan:n?.template_list?.com_pan??null,declaration:n?.template_list?.declaration??null,com_bank_details:n?.template_list?.com_bank_details??null,footer_text:n?.template_list?.footer_text??null}),this.templateData=this.creditInvoiceForm.value):this.toastr.error(n.message),this.spinner.hide()},n=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later.")})}onImageChanged(n){n.target.files.length>0&&this.creditInvoiceForm.patchValue({credit_inv_logo_source:n.target.files[0]})}viewCurrTemplate(n){try{$("#viewTemplateModalButton").click()}catch(t){this.toastr.error(t?.message??t??"Something went wrong!")}}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-credit-invoice"]],decls:78,vars:8,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","creditinvoice-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"d-flex","align-items-center","justify-content-between"],[1,"br-section-label"],[1,"btn","btn-info",3,"disabled","click"],[1,"mt-3",3,"formGroup"],[1,"bg-gray-100","bd","pd-y-20","pd-x-20"],[1,"row"],[1,"col-sm-4","col-12","form-group","upload-image-sec"],[1,"upload-text"],["class","btn btn-danger float-right btn-sm mb-1","target","_blank",3,"href",4,"ngIf"],["type","file","formControlName","credit_inv_logo",1,"form-control",3,"change"],[1,"form-row","row","flex-wrap","align-items-center"],[1,"col-sm-4","col-12","form-group"],["formControlName","com_address","data-placeholder","Address",3,"editor"],["type","text","formControlName","com_state_code","placeholder","State Code",1,"form-control","mg-t-10","mg-md-t-0","mb-2"],["type","text","formControlName","com_state_name","placeholder","State Name",1,"form-control","mg-t-10","mg-md-t-0"],["type","text","formControlName","invoice_prefix","placeholder","Invoice Prefix",1,"form-control","mg-t-10","mg-md-t-0","mb-2"],[1,"form-control","mg-t-10","mg-md-t-0",2,"visibility","hidden"],["type","text","formControlName","mode_of_pay","placeholder","Mode of terms",1,"form-control","mg-t-10","mg-md-t-0"],["type","text","formControlName","terms_of_delivery","placeholder","Terms of delivery",1,"form-control","mg-t-10","mg-md-t-0"],["type","text","formControlName","entity_name","placeholder","Entity Name",1,"form-control","mg-t-10","mg-md-t-0"],[1,"col-sm-6","col-12","form-group"],["formControlName","entity_description","placeholder","Entity Description",1,"form-control","mg-t-10","mg-md-t-0"],["type","text","formControlName","hsn_sac","placeholder","HSN/SAC",1,"form-control","mg-t-10","mg-md-t-0"],["type","text","formControlName","com_pan","placeholder","Company Pan No",1,"form-control","mt-2","mg-t-10","mg-md-t-0"],["formControlName","declaration","placeholder","Declaration",1,"form-control","mg-t-10","mg-md-t-0"],["formControlName","com_bank_details","data-placeholder","Company Bank Details",3,"editor"],[1,"col-sm-12","col-12","form-group"],["type","text","formControlName","footer_text","placeholder","This is a computer generated invoice",1,"form-control","mg-t-10","mg-md-t-0"],[1,"col-12"],[1,"mt-0"],[1,"col-sm-12","col-12","text-center"],[1,"submit-block","tx-spacing-2","btn","btn-info",3,"disabled","click"],["id","viewTemplateModalButton","data-toggle","modal","data-target","#changeStatusModal",3,"hidden"],["id","changeStatusModal","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-lg"],[1,"modal-content","bd-0","tx-14"],[1,"modal-header","pd-y-20","pd-x-25"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-25"],[3,"templateData"],["target","_blank",1,"btn","btn-danger","float-right","btn-sm","mb-1",3,"href"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Master"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Credit Invoice"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Credit Invoice"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Design invoice format"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"div",11)(20,"h6",12),e.\u0275\u0275text(21,"Credit Invoice Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",13),e.\u0275\u0275listener("click",function(r){return t.viewCurrTemplate(r)}),e.\u0275\u0275elementStart(23,"span"),e.\u0275\u0275text(24,"View Invoice Template"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(25,"form",14)(26,"div",15)(27,"div",16)(28,"div",17)(29,"h3",18),e.\u0275\u0275text(30," Upload Logo "),e.\u0275\u0275template(31,Xs,2,2,"a",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"input",20),e.\u0275\u0275listener("change",function(r){return t.onImageChanged(r)}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(33,"div",21)(34,"div",22),e.\u0275\u0275element(35,"ckeditor",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",22),e.\u0275\u0275element(37,"input",24)(38,"input",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",22),e.\u0275\u0275element(40,"input",26)(41,"span",27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",22),e.\u0275\u0275element(43,"input",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"div",22),e.\u0275\u0275element(45,"input",29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",22),e.\u0275\u0275element(47,"input",30),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"div",31),e.\u0275\u0275element(49,"textarea",32),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"div",31),e.\u0275\u0275element(51,"input",33)(52,"input",34),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"div",31),e.\u0275\u0275element(54,"textarea",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"div",31),e.\u0275\u0275element(56,"ckeditor",36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"div",37),e.\u0275\u0275element(58,"input",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"div",39),e.\u0275\u0275element(60,"hr",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"div",41)(62,"button",42),e.\u0275\u0275listener("click",function(r){return t.submitTemplate(r)}),e.\u0275\u0275elementStart(63,"span"),e.\u0275\u0275text(64,"Submit"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275element(65,"admin-app-dashboard-footer")(66,"button",43),e.\u0275\u0275elementStart(67,"div",44)(68,"div",45)(69,"div",46)(70,"div",47),e.\u0275\u0275element(71,"h6",48),e.\u0275\u0275elementStart(72,"button",49)(73,"span",50),e.\u0275\u0275text(74,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(75,"form")(76,"div",51),e.\u0275\u0275element(77,"credit-invoice-view",52),e.\u0275\u0275elementEnd()()()()()()),2&n&&(e.\u0275\u0275advance(22),e.\u0275\u0275property("disabled",!t.templateData),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",t.creditInvoiceForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",null==t.currentInvoice?null:t.currentInvoice.credit_inv_logo),e.\u0275\u0275advance(4),e.\u0275\u0275property("editor",t.Editor),e.\u0275\u0275advance(21),e.\u0275\u0275property("editor",t.Editor),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",!t.creditInvoiceForm.valid),e.\u0275\u0275advance(4),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(11),e.\u0275\u0275property("templateData",t.templateData))},dependencies:[p.O5,h.yS,j.u,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,i.F,y,x,Ks]}),o})();function td(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",28),e.\u0275\u0275text(1,"Create"),e.\u0275\u0275elementEnd())}function nd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",28),e.\u0275\u0275text(1,"Update"),e.\u0275\u0275elementEnd())}function ad(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",29),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function rd(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.departmentForm.valid)}}function od(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.departmentForm.valid)}}let id=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.dtOptions={},this.departmentForm=n.group({department_name:[null,i.kI.compose([i.kI.required])]}),this.departments=[],this.editActionId=""}ngOnInit(){this.titleService.setTitle("Department - "+d.AppName),this.fetch()}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchDepartments({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.departments.totalDocs,recordsFiltered:r.departments.totalDocs,data:r.departments.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.department_name},orderable:!0,name:"department_name"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.departmentForm.setValue({department_name:n.department_name}),$("html, body").animate({scrollTop:$("#department-submit-section").position().top})}cancelEdit(){this.editActionId="",this.departmentForm.reset()}create(n){this.departmentForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createDepartment({department_name:this.departmentForm.value.department_name,status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.departmentForm.reset(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteDepartment({department_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){this.departmentForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateDepartment({department_name:this.departmentForm.value.department_name,department_id:this.editActionId,status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}changeStatus(n){this.adminService.updateDepartment({department_name:n.department_name,department_id:n._id,status:"active"==n.status?"inactive":"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-department"]],decls:52,vars:7,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","department-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-7"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-5","col-sm-4"],[1,"col-7","col-sm-8"],["type","text","formControlName","department_name","placeholder","Enter Department Name",1,"form-control"],["class","error-element",4,"ngIf"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-section-label","mb-3","mt-5"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-15p","text-center"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Master"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Department"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Department"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create Department"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,td,2,0,"h6",11),e.\u0275\u0275template(20,nd,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Department: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,ad,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",15),e.\u0275\u0275element(31,"div",16),e.\u0275\u0275elementStart(32,"div",17),e.\u0275\u0275template(33,rd,3,1,"button",20),e.\u0275\u0275template(34,od,6,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(36,"h6",22),e.\u0275\u0275text(37,"View, manage Departments"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",23)(39,"table",24)(40,"thead")(41,"tr")(42,"th",25),e.\u0275\u0275text(43,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th",26),e.\u0275\u0275text(45,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"th",27),e.\u0275\u0275text(47,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"th",25),e.\u0275\u0275text(49,"Department Name"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(50,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(51,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(35);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.departmentForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.departmentForm.controls.department_name.hasError("required")&&t.departmentForm.controls.department_name.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(6),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.O5,h.yS,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function ld(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",28),e.\u0275\u0275text(1,"Create"),e.\u0275\u0275elementEnd())}function sd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",28),e.\u0275\u0275text(1,"Update"),e.\u0275\u0275elementEnd())}function dd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",29),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function md(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.designationForm.valid)}}function cd(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.designationForm.valid)}}let pd=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.dtOptions={},this.designationForm=n.group({designation_name:[null,i.kI.compose([i.kI.required])]}),this.designations=[],this.editActionId=""}ngOnInit(){this.titleService.setTitle("Designation - "+d.AppName),this.fetch()}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchDesignations({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{"success"==r.status?t({recordsTotal:r.designations.totalDocs,recordsFiltered:r.designations.totalDocs,data:r.designations.docs}):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.designation_name},orderable:!0,name:"designation_name"}],rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeStatus(t)}),n},drawCallback:function(n){d.loadCustomScripts("customJsScript")},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.designationForm.setValue({designation_name:n.designation_name}),$("html, body").animate({scrollTop:$("#designation-submit-section").position().top})}cancelEdit(){this.editActionId="",this.designationForm.reset()}create(n){this.designationForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createDesignation({designation_name:this.designationForm.value.designation_name,status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.designationForm.reset(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteDesignation({designation_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){this.designationForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateDesignation({designation_name:this.designationForm.value.designation_name,designation_id:this.editActionId,status:"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}changeStatus(n){this.adminService.updateDesignation({designation_name:n.designation_name,designation_id:n._id,status:"active"==n.status?"inactive":"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-designation"]],decls:52,vars:7,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","designation-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-7"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-5","col-sm-4"],[1,"col-7","col-sm-8"],["type","text","formControlName","designation_name","placeholder","Enter Designation Name",1,"form-control"],["class","error-element",4,"ngIf"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-section-label","mb-3","mt-5"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-15p","text-center"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Master"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Designation"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Designation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create Designation"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,ld,2,0,"h6",11),e.\u0275\u0275template(20,sd,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Designation: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,dd,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",15),e.\u0275\u0275element(31,"div",16),e.\u0275\u0275elementStart(32,"div",17),e.\u0275\u0275template(33,md,3,1,"button",20),e.\u0275\u0275template(34,cd,6,1,"ng-template",null,21,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(36,"h6",22),e.\u0275\u0275text(37,"View, manage designations"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",23)(39,"table",24)(40,"thead")(41,"tr")(42,"th",25),e.\u0275\u0275text(43,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"th",26),e.\u0275\u0275text(45,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"th",27),e.\u0275\u0275text(47,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"th",25),e.\u0275\u0275text(49,"Designation Name"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(50,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(51,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(35);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.designationForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.designationForm.controls.designation_name.hasError("required")&&t.designationForm.controls.designation_name.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(6),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.O5,h.yS,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function ud(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",48),e.\u0275\u0275text(1,"Create Reseller"),e.\u0275\u0275elementEnd())}function _d(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",48),e.\u0275\u0275text(1,"Edit Reseller"),e.\u0275\u0275elementEnd())}function hd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function fd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function gd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function bd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function vd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function yd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function xd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Sd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ed(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Cd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function wd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function kd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field should contain only numeric value"),e.\u0275\u0275elementEnd())}function Id(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Fd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Td(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This Pancard Number format is invalid"),e.\u0275\u0275elementEnd())}function Ad(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Dd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",49),e.\u0275\u0275text(1,"This GSTIN Number format is invalid"),e.\u0275\u0275elementEnd())}function Pd(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",50),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add Reseller"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.resellerForm.valid)}}function Rd(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",51),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",50),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Reseller"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.resellerForm.valid)}}const Md=function(){return{search:!0,placeholder:"Select Sub-Seller"}},Od=function(){return{search:!0,placeholder:"Select Branch"}},Nd=function(){return{search:!0,placeholder:"Select State",height:"200px"}},Ld=function(){return{search:!0,placeholder:"Select City",height:"200px"}},Vd=function(){return{search:!0,placeholder:"Select One"}};let qd=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.dtOptions={},this.resellerForm=n.group({reseller_name:[null,i.kI.compose([i.kI.required])],reseller_of:[null],branch_id:[null,i.kI.compose([i.kI.required])],address:[null,i.kI.compose([i.kI.required])],state:[null,i.kI.compose([i.kI.required])],city:[null,i.kI.compose([i.kI.required])],bank_details:[null,i.kI.compose([])],bank_name:[null,i.kI.compose([])],bank_beneficiary:[null,i.kI.compose([])],bank_ifsc:[null,i.kI.compose([])],bank_acc_no:[null,i.kI.compose([i.kI.pattern("^[0-9]*$")])],bank_acc_type:[null,i.kI.compose([])],pan_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$")])],gst_no:[null,i.kI.compose([i.kI.required])]}),this.editActionId="",this.branchMaster=[],this.subSellerMaster=[],this.stateMaster=[],this.cityMaster=[],this.bankAccountTypeMaster=[{value:"Current account",description:"Current account"},{value:"Savings account",description:"Savings account"},{value:"Salary account",description:"Salary account"},{value:"Fixed deposit account",description:"Fixed deposit account"},{value:"Recurring deposit account",description:"Recurring deposit account"},{value:"NRI accounts",description:"NRI accounts"}]}ngOnInit(){this.titleService.setTitle("Reseller - "+d.AppName),this.fetch(),this.fetchStateMaster()}fetchStateMaster(){this.adminService.fetchStateCityMaster().subscribe(n=>{if("success"==n.status){let t=n.state_list[0].states;this.stateMaster=[];for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const r=t[a];this.stateMaster.push({id:r.id,description:r.name,cities:r.cities})}}else this.toastr.error(n.message)},n=>{this.toastr.error("Internal server error occured. Please try again later.")})}stateChanged(n){let t=this.resellerForm.value.state;if(this.cityMaster=[],0==Object.keys(t).length)return;let a=t.cities;for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)){const s=a[r];this.cityMaster.push({id:s.id,description:s.name})}}fetch(){this.dtOptions={ajax:(n,t)=>{const a=Math.floor((n.start+n.length)/n.length);this.adminService.fetchRellers({pageno:a??1,perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(r=>{if("success"==r.status){this.branchMaster=[];for(const s in r.masters.branch)if(Object.prototype.hasOwnProperty.call(r.masters.branch,s)){const m=r.masters.branch[s];this.branchMaster.push({id:m._id,description:m.branch_name})}this.subSellerMaster=[];for(const s in r.masters.reseller_of)if(Object.prototype.hasOwnProperty.call(r.masters.reseller_of,s)){const m=r.masters.reseller_of[s];this.subSellerMaster.push({id:m._id,description:m.reseller_name})}t({recordsTotal:r.resellers.totalDocs,recordsFiltered:r.resellers.totalDocs,data:r.resellers.docs})}else this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.reseller_name},orderable:!0,name:"reseller_name"},{render:function(n,t,a,r){return a.corporate_id},orderable:!0,name:"corporate_id"},{render:function(n,t,a,r){if(a.branches.length>0){let s="";return a.branches.forEach(m=>{s+=m.branch_name+"<br>"}),s}return"N/A"},orderable:!1},{render:function(n,t,a,r){if(a.reseller.length>0){let s="";return a.reseller.forEach(m=>{s+=m.reseller_name+"<br>"}),s}return"N/A"},orderable:!1},{render:function(n,t,a,r){return a.address},orderable:!0,name:"address"},{render:function(n,t,a,r){return a.state},orderable:!0,name:"state"},{render:function(n,t,a,r){return a.city},orderable:!0,name:"city"},{render:function(n,t,a,r){return a.pan_no},className:"text-uppercase",orderable:!0,name:"pan_no"},{render:function(n,t,a,r){return a.gst_no},className:"text-uppercase",orderable:!0,name:"gst_no"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.spinner.show(),this.adminService.getResellerDetails({reseller_id:n._id}).subscribe(t=>{if("success"==t.status){let a=null;"NULL"!=t.reseller.reseller_of&&(a=this.subSellerMaster.find(c=>c.id===t.reseller.reseller_of));let r=this.branchMaster.find(c=>c.id===t.reseller.branch_id),s=this.stateMaster.find(c=>c.description===t.reseller.state),m=null;if(s){let c=s.cities;for(const u in c)if(Object.prototype.hasOwnProperty.call(c,u)){const f=c[u];this.cityMaster.push({id:f.id,description:f.name})}m=this.cityMaster.find(u=>u.description===t.reseller.city)}else s=null;"active"==t.reseller.status?$(".reseller-status-name").addClass("on"):$(".reseller-status-name").removeClass("on"),this.editActionId=t.reseller._id,this.resellerForm.setValue({reseller_name:t.reseller.reseller_name,reseller_of:a,branch_id:r,address:t.reseller.address,state:s,city:m,bank_details:t.reseller.bank_details,bank_name:t.reseller.bank_name,bank_beneficiary:t.reseller.bank_beneficiary,bank_ifsc:t.reseller.bank_ifsc,bank_acc_no:t.reseller.bank_acc_no,bank_acc_type:this.bankAccountTypeMaster.find(c=>c.value==t.reseller.bank_acc_type)??null,pan_no:t.reseller.pan_no,gst_no:t.reseller.gst_no}),$("html, body").animate({scrollTop:$("#reseller-submit-section").position().top})}else this.toastr.error(t.message);this.spinner.hide()},t=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}cancelEdit(){this.editActionId="",this.resellerForm.reset();for(const n in this.resellerForm.controls)if(Object.prototype.hasOwnProperty.call(this.resellerForm.controls,n)){const t=this.resellerForm.controls[n];t.markAsUntouched(),t.markAsPristine()}$(".reseller-status-name").addClass("on")}create(n){if(this.resellerForm.valid){n.target.classList.add("btn-loading");let t=1==$(".reseller-status-name").hasClass("on")?"active":"inactive";this.adminService.createReseller({reseller_name:this.resellerForm.value.reseller_name,reseller_of:this.resellerForm.value.reseller_of.id,branch_id:this.resellerForm.value.branch_id.id,address:this.resellerForm.value.address,state:this.resellerForm.value.state.description,city:this.resellerForm.value.city.description,bank_details:this.resellerForm.value.bank_details,bank_name:this.resellerForm.value.bank_name,bank_beneficiary:this.resellerForm.value.bank_beneficiary,bank_ifsc:this.resellerForm.value.bank_ifsc,bank_acc_no:this.resellerForm.value.bank_acc_no,bank_acc_type:this.resellerForm.value.bank_acc_type?.value??null,pan_no:this.resellerForm.value.pan_no,gst_no:this.resellerForm.value.gst_no,status:t}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.resellerForm.reset(),$(".reseller-status-name").addClass("on"),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteReseller({reseller_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.resellerForm.valid){n.target.classList.add("btn-loading");let t=1==$(".reseller-status-name").hasClass("on")?"active":"inactive";this.adminService.updateReseller({reseller_id:this.editActionId,reseller_name:this.resellerForm.value.reseller_name,reseller_of:this.resellerForm.value.reseller_of.id,branch_id:this.resellerForm.value.branch_id.id,address:this.resellerForm.value.address,state:this.resellerForm.value.state.description,city:this.resellerForm.value.city.description,bank_details:this.resellerForm.value.bank_details,bank_name:this.resellerForm.value.bank_name,bank_beneficiary:this.resellerForm.value.bank_beneficiary,bank_ifsc:this.resellerForm.value.bank_ifsc,bank_acc_no:this.resellerForm.value.bank_acc_no,bank_acc_type:this.resellerForm.value.bank_acc_type?.value??null,pan_no:this.resellerForm.value.pan_no,gst_no:this.resellerForm.value.gst_no,status:t}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-reseller"]],decls:175,vars:38,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","reseller-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],[1,"col-9","col-sm-9"],["formControlName","reseller_name","type","text",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","reseller_of",1,"form-control",3,"options","config"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","branch_id",1,"form-control",3,"options","config"],[1,"col-12","col-sm-12","label-div"],["formControlName","address",1,"form-control"],["formControlName","state",1,"form-control",3,"options","config","change"],["formControlName","city",1,"form-control",3,"options","config"],[1,"col-6","col-sm-6","sameasfirst","label-div"],["formControlName","bank_details",1,"form-control"],["formControlName","bank_name","type","text",1,"form-control"],["formControlName","bank_beneficiary",1,"form-control"],["formControlName","bank_ifsc","type","text",1,"form-control"],["formControlName","bank_acc_no",1,"form-control"],["formControlName","bank_acc_type",1,"form-control",3,"options","config"],["formControlName","pan_no","type","text",1,"form-control"],["formControlName","gst_no","type","text",1,"form-control"],[1,"reseller-status-name","br-toggle","br-toggle-rounded","br-toggle-primary","on"],[1,"br-toggle-switch"],[1,"row","no-gutters","bd-1"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-25p"],[1,"wd-25p","text-center"],[1,"wd-15p"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Master"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Reseller"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create Reseller"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,ud,2,0,"h6",11),e.\u0275\u0275template(20,_d,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Reseller Name\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",18),e.\u0275\u0275element(30,"input",19),e.\u0275\u0275template(31,hd,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"div",15)(33,"div",16),e.\u0275\u0275text(34," SubSeller of "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"div",16),e.\u0275\u0275element(36,"ngx-select-dropdown",21),e.\u0275\u0275template(37,fd,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(38,"div",22),e.\u0275\u0275text(39," Mapped to Branch\xa0"),e.\u0275\u0275elementStart(40,"span",17),e.\u0275\u0275text(41,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",16),e.\u0275\u0275element(43,"ngx-select-dropdown",23),e.\u0275\u0275template(44,gd,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",15)(46,"div",24),e.\u0275\u0275text(47," Address "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(48,"div",15)(49,"div",16),e.\u0275\u0275text(50," Address\xa0"),e.\u0275\u0275elementStart(51,"span",17),e.\u0275\u0275text(52,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",16),e.\u0275\u0275element(54,"textarea",25),e.\u0275\u0275template(55,bd,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"div",22),e.\u0275\u0275text(57," State\xa0"),e.\u0275\u0275elementStart(58,"span",17),e.\u0275\u0275text(59,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"div",16)(61,"ngx-select-dropdown",26),e.\u0275\u0275listener("change",function(r){return t.stateChanged(r)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(62,vd,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"div",15)(64,"div",16),e.\u0275\u0275text(65," City\xa0"),e.\u0275\u0275elementStart(66,"span",17),e.\u0275\u0275text(67,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"div",16),e.\u0275\u0275element(69,"ngx-select-dropdown",27),e.\u0275\u0275template(70,yd,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(71,"div",28),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"div",15)(73,"div",24),e.\u0275\u0275text(74," Bank Information "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(75,"div",15)(76,"div",16),e.\u0275\u0275text(77," Bank Name\xa0 "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"div",16),e.\u0275\u0275element(79,"textarea",29),e.\u0275\u0275template(80,xd,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"div",22),e.\u0275\u0275text(82," Branch Name "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"div",16),e.\u0275\u0275element(84,"input",30),e.\u0275\u0275template(85,Sd,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(86,"div",15)(87,"div",16),e.\u0275\u0275text(88," Beneficiary "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(89,"div",16),e.\u0275\u0275element(90,"textarea",31),e.\u0275\u0275template(91,Ed,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"div",22),e.\u0275\u0275text(93," IFSC "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"div",16),e.\u0275\u0275element(95,"input",32),e.\u0275\u0275template(96,Cd,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(97,"div",15)(98,"div",16),e.\u0275\u0275text(99," Account No "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"div",16),e.\u0275\u0275element(101,"textarea",33),e.\u0275\u0275template(102,wd,2,0,"p",20),e.\u0275\u0275template(103,kd,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"div",22),e.\u0275\u0275text(105," Account Type "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"div",16),e.\u0275\u0275element(107,"ngx-select-dropdown",34),e.\u0275\u0275template(108,Id,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(109,"div",15)(110,"div",24),e.\u0275\u0275text(111," Company Information "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(112,"div",15)(113,"div",16),e.\u0275\u0275text(114," PAN No\xa0"),e.\u0275\u0275elementStart(115,"span",17),e.\u0275\u0275text(116,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(117,"div",16),e.\u0275\u0275element(118,"input",35),e.\u0275\u0275template(119,Fd,2,0,"p",20),e.\u0275\u0275template(120,Td,2,0,"p",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(121,"div",22),e.\u0275\u0275text(122," GST No\xa0"),e.\u0275\u0275elementStart(123,"span",17),e.\u0275\u0275text(124,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"div",16),e.\u0275\u0275element(126,"input",36),e.\u0275\u0275template(127,Ad,2,0,"p",20),e.\u0275\u0275template(128,Dd,2,0,"p",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(129,"div",15)(130,"div",24),e.\u0275\u0275text(131," Status "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(132,"div",15)(133,"div",16),e.\u0275\u0275text(134," Reseller Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(135,"div",18)(136,"div",37),e.\u0275\u0275element(137,"div",38),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(138,"div",39)(139,"div",24),e.\u0275\u0275template(140,Pd,3,1,"button",40),e.\u0275\u0275template(141,Rd,6,1,"ng-template",null,41,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(143,"div",9)(144,"div",10)(145,"h6",42),e.\u0275\u0275text(146,"View, manage resellers"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(147,"div",43)(148,"table",44)(149,"thead")(150,"tr")(151,"th",45),e.\u0275\u0275text(152,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(153,"th",46),e.\u0275\u0275text(154,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"th",47),e.\u0275\u0275text(156,"Reseller Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(157,"th",47),e.\u0275\u0275text(158,"Added By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"th",45),e.\u0275\u0275text(160,"Branch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(161,"th",45),e.\u0275\u0275text(162,"Sub Seller to"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(163,"th",45),e.\u0275\u0275text(164,"Address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(165,"th",45),e.\u0275\u0275text(166,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(167,"th",45),e.\u0275\u0275text(168,"City"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(169,"th",45),e.\u0275\u0275text(170,"PAN No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(171,"th",45),e.\u0275\u0275text(172,"GST No"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(173,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(174,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(142);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.resellerForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.resellerForm.controls.reseller_name.hasError("required")&&t.resellerForm.controls.reseller_name.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("options",t.subSellerMaster)("config",e.\u0275\u0275pureFunction0(33,Md)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.reseller_of.hasError("required")&&t.resellerForm.controls.reseller_of.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.branchMaster)("config",e.\u0275\u0275pureFunction0(34,Od)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.branch_id.hasError("required")&&t.resellerForm.controls.branch_id.dirty),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.resellerForm.controls.address.hasError("required")&&t.resellerForm.controls.address.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.stateMaster)("config",e.\u0275\u0275pureFunction0(35,Nd)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.state.hasError("required")&&t.resellerForm.controls.state.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.cityMaster)("config",e.\u0275\u0275pureFunction0(36,Ld)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.city.hasError("required")&&t.resellerForm.controls.city.dirty),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_details.hasError("required")&&t.resellerForm.controls.bank_details.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_name.hasError("required")&&t.resellerForm.controls.bank_name.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_beneficiary.hasError("required")&&t.resellerForm.controls.bank_beneficiary.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_ifsc.hasError("required")&&t.resellerForm.controls.bank_ifsc.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_acc_no.hasError("required")&&t.resellerForm.controls.bank_acc_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_acc_no.hasError("pattern")&&t.resellerForm.controls.bank_acc_no.dirty),e.\u0275\u0275advance(4),e.\u0275\u0275property("options",t.bankAccountTypeMaster)("config",e.\u0275\u0275pureFunction0(37,Vd)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.bank_acc_type.hasError("required")&&t.resellerForm.controls.bank_acc_type.dirty),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",t.resellerForm.controls.pan_no.hasError("required")&&t.resellerForm.controls.pan_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.pan_no.hasError("pattern")&&t.resellerForm.controls.pan_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.resellerForm.controls.gst_no.hasError("required")&&t.resellerForm.controls.gst_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.resellerForm.controls.gst_no.hasError("pattern")&&t.resellerForm.controls.gst_no.dirty),e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function $d(o,l){if(1&o&&e.\u0275\u0275element(0,"img",54),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate2("src","",n.BACKEND_URL,"/",n.userDetails.profile_pic,"",e.\u0275\u0275sanitizeUrl)}}function Bd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function jd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ud(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Hd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Yd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field should contain only numeric value"),e.\u0275\u0275elementEnd())}function Gd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be 10 Digits"),e.\u0275\u0275elementEnd())}function Jd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be 10 Digits"),e.\u0275\u0275elementEnd())}function zd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Wd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Qd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}let Zd=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.authService=t,this.adminService=a,this.toastr=r,this.titleService=s,this.spinner=m,this.basicDetailsForm=n.group({first_name:[null,i.kI.compose([i.kI.required])],last_name:[null,i.kI.compose([i.kI.required])],phone_no:[null,i.kI.compose([i.kI.required,i.kI.minLength(10),i.kI.maxLength(10),i.kI.pattern("^[0-9]*$")])],email_id:[{value:null,disabled:!0}]}),this.passwordUpdateForm=n.group({old_password:[null,i.kI.compose([i.kI.required])],password:[null,i.kI.compose([i.kI.required])],password_confirmation:[null,i.kI.compose([i.kI.required])]}),this.profilePicUploadForm=n.group({image:[null,i.kI.compose([i.kI.required])],imageSource:[null,i.kI.compose([i.kI.required])]}),this.BACKEND_URL=d.BACKEND_URL,this.userDetails={profile_pic:"",first_name:"",last_name:"",email_id:""}}ngOnInit(){this.titleService.setTitle("Profile - "+d.AppName),this.getAccountDetails()}getAccountDetails(){this.spinner.show(),this.authService.getAdminAccountDetails().subscribe(n=>{"success"==n.status&&(this.userDetails=n.user_data,this.basicDetailsForm.setValue({first_name:this.userDetails.first_name,last_name:this.userDetails.last_name,phone_no:this.userDetails.phone_no,email_id:this.userDetails.email_id})),this.spinner.hide()},n=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later.")})}updateBaicDetails(n){this.basicDetailsForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateAccountData({first_name:this.basicDetailsForm.value.first_name,last_name:this.basicDetailsForm.value.last_name,phone_no:this.basicDetailsForm.value.phone_no,profile_pic:""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.getAccountDetails()):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}updateAccountPassword(n){if(this.passwordUpdateForm.valid){if(this.passwordUpdateForm.value.password!=this.passwordUpdateForm.value.password_confirmation)return void this.toastr.error("The password confirmation didn't matched");n.target.classList.add("btn-loading"),this.adminService.updateAccountPassword({old_password:this.passwordUpdateForm.value.old_password,password:this.passwordUpdateForm.value.password}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.passwordUpdateForm.reset()):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}updateAccountPic(n){this.profilePicUploadForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateAccountData({first_name:this.userDetails.first_name,last_name:this.userDetails.last_name,phone_no:this.userDetails.phone_no,profile_pic:this.profilePicUploadForm.value.imageSource}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.profilePicUploadForm.reset(),this.getAccountDetails(),$("#profPicModal").find('[data-dismiss="modal"]').click()):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}onPofPicChanged(n){n.target.files.length>0&&this.profilePicUploadForm.patchValue({imageSource:n.target.files[0]})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(W.e),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-profile"]],decls:124,vars:20,consts:[[1,"br-mainpanel","br-profile-page"],[1,"card","shadow-base","bd-0","rounded-0","widget-4"],[1,"card-header","ht-75"],[1,"hidden-xs-down"],[1,"tx-24","hidden-xs-down"],["data-toggle","modal","data-target","#profPicModal",1,"mg-r-10",2,"cursor","pointer"],[1,"icon","ion-ios-camera-outline"],[1,"card-body"],[1,"card-profile-img"],["alt","",3,"src",4,"ngIf"],[1,"tx-normal","tx-roboto","tx-white","text-capitalize"],[1,"mg-b-25"],[1,"ht-70","bg-gray-100","pd-x-20","d-flex","align-items-center","justify-content-center","shadow-base"],["role","tablist",1,"nav","nav-outline","active-info","align-items-center","flex-row"],[1,"nav-item"],["data-toggle","tab","href","#basicdetails","role","tab",1,"nav-link","active"],["data-toggle","tab","href","#changepassword","role","tab",1,"nav-link"],[1,"tab-content","br-profile-body"],["id","basicdetails",1,"tab-pane","fade","active","show"],[1,"br-pagebody","m-0","p-0"],[1,"br-section-wrapper"],[1,"form-layout","form-layout-2"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-md-6"],[1,"form-group"],[1,"form-control-label"],[1,"tx-danger"],["type","text","formControlName","first_name","placeholder","Enter First Name",1,"form-control"],["class","error-element",4,"ngIf"],["type","text","formControlName","last_name","placeholder","Enter Last Name",1,"form-control"],["type","text","formControlName","email_id","placeholder","Enter Email Address",1,"form-control"],["type","text","formControlName","phone_no","placeholder","Enter Phone Number",1,"form-control"],[1,"form-layout-footer","bd","pd-20","bd-t-0"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["id","changepassword",1,"tab-pane","fade"],[1,"col-md-4"],["type","password","formControlName","old_password","placeholder","Enter your current password",1,"form-control"],["type","password","formControlName","password","placeholder","Enter new password",1,"form-control"],["type","password","formControlName","password_confirmation","placeholder","Renter new passowrd",1,"form-control"],["id","profPicModal","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-sm"],[1,"modal-content","bd-0","tx-14"],[1,"modal-header","pd-y-20","pd-x-25"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-25"],[1,"row"],[1,"col-lg"],["type","file","accept","image/*","formControlName","image",1,"form-control",3,"change"],[1,"modal-footer"],["type","button ",1,"btn","btn-primary","tx-11","tx-uppercase","pd-y-12","pd-x-25","tx-mont","tx-medium",3,"disabled","click"],["type","button ","data-dismiss","modal ",1,"btn","btn-secondary","tx-11","tx-uppercase","pd-y-12","pd-x-25","tx-mont","tx-medium"],["alt","",3,"src"],[1,"error-element"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"div",2),e.\u0275\u0275element(4,"div",3),e.\u0275\u0275elementStart(5,"div",4)(6,"a",5),e.\u0275\u0275element(7,"i",6),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",7)(9,"div",8),e.\u0275\u0275template(10,$d,1,2,"img",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"h4",10),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",11),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",12)(16,"ul",13)(17,"li",14)(18,"a",15),e.\u0275\u0275text(19,"Update Details"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"li",14)(21,"a",16),e.\u0275\u0275text(22,"Change Password"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(23,"div",17)(24,"div",18)(25,"div",19)(26,"div",20)(27,"div",21)(28,"form",22)(29,"div",23)(30,"div",24)(31,"div",25)(32,"label",26),e.\u0275\u0275text(33,"First name: "),e.\u0275\u0275elementStart(34,"span",27),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(36,"input",28),e.\u0275\u0275template(37,Bd,2,0,"p",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",24)(39,"div",25)(40,"label",26),e.\u0275\u0275text(41,"Last name: "),e.\u0275\u0275elementStart(42,"span",27),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(44,"input",30),e.\u0275\u0275template(45,jd,2,0,"p",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",24)(47,"div",25)(48,"label",26),e.\u0275\u0275text(49,"Email ID: "),e.\u0275\u0275elementStart(50,"span",27),e.\u0275\u0275text(51,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(52,"input",31),e.\u0275\u0275template(53,Ud,2,0,"p",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",24)(55,"div",25)(56,"label",26),e.\u0275\u0275text(57,"Phone Number: "),e.\u0275\u0275elementStart(58,"span",27),e.\u0275\u0275text(59,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(60,"input",32),e.\u0275\u0275template(61,Hd,2,0,"p",29),e.\u0275\u0275template(62,Yd,2,0,"p",29),e.\u0275\u0275template(63,Gd,2,0,"p",29),e.\u0275\u0275template(64,Jd,2,0,"p",29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(65,"div",33)(66,"button",34),e.\u0275\u0275listener("click",function(r){return t.updateBaicDetails(r)}),e.\u0275\u0275elementStart(67,"span"),e.\u0275\u0275text(68,"Update Profile"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275elementStart(69,"div",35)(70,"div",19)(71,"div",20)(72,"div",21)(73,"form",22)(74,"div",23)(75,"div",36)(76,"div",25)(77,"label",26),e.\u0275\u0275text(78,"Old Password: "),e.\u0275\u0275elementStart(79,"span",27),e.\u0275\u0275text(80,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(81,"input",37),e.\u0275\u0275template(82,zd,2,0,"p",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"div",36)(84,"div",25)(85,"label",26),e.\u0275\u0275text(86,"New Password: "),e.\u0275\u0275elementStart(87,"span",27),e.\u0275\u0275text(88,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(89,"input",38),e.\u0275\u0275template(90,Wd,2,0,"p",29),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(91,"div",36)(92,"div",25)(93,"label",26),e.\u0275\u0275text(94,"Password Confirmation: "),e.\u0275\u0275elementStart(95,"span",27),e.\u0275\u0275text(96,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(97,"input",39),e.\u0275\u0275template(98,Qd,2,0,"p",29),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(99,"div",33)(100,"button",34),e.\u0275\u0275listener("click",function(r){return t.updateAccountPassword(r)}),e.\u0275\u0275elementStart(101,"span"),e.\u0275\u0275text(102,"Update Password"),e.\u0275\u0275elementEnd()()()()()()()()(),e.\u0275\u0275elementStart(103,"div",40)(104,"div",41)(105,"div",42)(106,"div",43)(107,"h6",44),e.\u0275\u0275text(108,"Upload Profile Picture"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(109,"button",45)(110,"span",46),e.\u0275\u0275text(111,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(112,"form",22)(113,"div",47)(114,"div",48)(115,"div",49)(116,"input",50),e.\u0275\u0275listener("change",function(r){return t.onPofPicChanged(r)}),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(117,"div",51)(118,"button",52),e.\u0275\u0275listener("click",function(r){return t.updateAccountPic(r)}),e.\u0275\u0275elementStart(119,"span"),e.\u0275\u0275text(120,"Update"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(121,"button",53),e.\u0275\u0275text(122,"Close"),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275element(123,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.userDetails.profile_pic),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate2("",t.userDetails.first_name," ",t.userDetails.last_name,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.userDetails.email_id),e.\u0275\u0275advance(14),e.\u0275\u0275property("formGroup",t.basicDetailsForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.first_name.hasError("required")&&t.basicDetailsForm.controls.first_name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.last_name.hasError("required")&&t.basicDetailsForm.controls.last_name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.email_id.hasError("required")&&t.basicDetailsForm.controls.email_id.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.phone_no.hasError("required")&&t.basicDetailsForm.controls.phone_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.phone_no.hasError("pattern")&&t.basicDetailsForm.controls.phone_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.phone_no.hasError("minlength")&&t.basicDetailsForm.controls.phone_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.basicDetailsForm.controls.phone_no.hasError("maxlength")&&t.basicDetailsForm.controls.phone_no.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.basicDetailsForm.valid),e.\u0275\u0275advance(7),e.\u0275\u0275property("formGroup",t.passwordUpdateForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.passwordUpdateForm.controls.old_password.hasError("required")&&t.passwordUpdateForm.controls.old_password.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.passwordUpdateForm.controls.password.hasError("required")&&t.passwordUpdateForm.controls.password.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.passwordUpdateForm.controls.password_confirmation.hasError("required")&&t.passwordUpdateForm.controls.password_confirmation.dirty),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.passwordUpdateForm.valid),e.\u0275\u0275advance(12),e.\u0275\u0275property("formGroup",t.profilePicUploadForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("disabled",!t.profilePicUploadForm.valid))},dependencies:[p.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".img-upload-btn[_ngcontent-%COMP%]{position:absolute;background:white;padding:4px 8px;border-radius:100%;border:1px solid #2e415b;color:#2e415b;right:0;bottom:0}.card-profile-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:2px solid white;height:100px;background-color:#faebd7}"]}),o})();function Kd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",32),e.\u0275\u0275text(1,"Create Promotion Code"),e.\u0275\u0275elementEnd())}function Xd(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",32),e.\u0275\u0275text(1,"Edit Promotion Code"),e.\u0275\u0275elementEnd())}function em(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function tm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function nm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function am(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function rm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function om(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function im(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",55),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function lm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",56),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Save"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.promotionForm.valid)}}function sm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",57),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",56),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.promotionForm.valid)}}function dm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",58),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.allRowsCheckboxChecked(a))}),e.\u0275\u0275elementEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("value",n.rowCheckedAll)}}function mm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td")(2,"label",59)(3,"input",60),e.\u0275\u0275listener("click",function(a){const s=e.\u0275\u0275restoreView(n).$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.rowCheckBoxChecked(a,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td"),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext();let r,s,m,c;e.\u0275\u0275advance(2),e.\u0275\u0275property("for","checkrow-"+(t+1)),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","checkrow-",t+1,""),e.\u0275\u0275attribute("checked",1==(null==n?null:n.checked)?"checked":null)("data-checkbox-id",null==n?null:n._id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",a.Global.getTableSerialNumber(t,a.paginationOptions.limit,a.paginationOptions.page)," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!=n&&n.date?e.\u0275\u0275pipeBind2(7,10,null==n?null:n.date,"dd/MM/YYYY"):"N/A"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null!==(r=null==n?null:n.credit_qty)&&void 0!==r?r:"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(s=null==n?null:n.free_credit)&&void 0!==s?s:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(m=null==n?null:n.credit_amount)&&void 0!==m?m:"-"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(c=null==n?null:n.razorpay_order_id)&&void 0!==c?c:"-")}}function cm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",61),e.\u0275\u0275text(2,"No records found"),e.\u0275\u0275elementEnd()())}function pm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",62),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.exportPromotion())}),e.\u0275\u0275text(1,"Export"),e.\u0275\u0275elementEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.anyRowsChecked())}}const um=function(){return{placeholder:"Choose One",height:"200px"}},_m=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}};let hm=(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.toastr=a,this.adminService=r,this.datePipe=s,this.spinner=m,this.dtOptions={},this.couponRedeemed=[],this.g_coupon_code="",this.checkedRowIds=[],this.uncheckedRowIds=[],this.rowCheckedAll=!1,this.Global=d,this.paginationOptions=d.resetPaginationOption(),this.promotionForm=n.group({coupon_code:[null,i.kI.compose([i.kI.required])],coupon_type:[null,i.kI.compose([i.kI.required])],coupon_amount:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],coupon_expire:[null,i.kI.compose([i.kI.required])],multiuse:[null],min_purchase:[null]}),this.couponTypeMaster=[{value:"fixed",description:"Flat / Fixed"},{value:"percentage",description:"Percentage"}],this.editActionId="",this.promotionForm.get("coupon_type")?.valueChanges.subscribe(c=>{"fixed"==c?.value?($(".minpurchase-field").show(500),this.promotionForm.controls.min_purchase.setValidators([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])):($(".minpurchase-field").hide(500),this.promotionForm.controls.min_purchase.clearValidators()),this.promotionForm.controls.min_purchase.updateValueAndValidity()})}ngOnInit(){this.titleService.setTitle("Promotion Management - "+d.AppName),this.fetch()}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchPromotionCoupons({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.coupons.totalDocs,recordsFiltered:a.coupons.totalDocs,data:a.coupons.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return"<b>"+a.coupon_code+"</b>"},orderable:!0,name:"coupon_code"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.coupon_type+"</span>"},orderable:!0,name:"coupon_type"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.min_purchase+"</span>"},orderable:!0,name:"min_purchase"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+(a?.free_extra?a?.free_extra:"N/A")+"</span>"},orderable:!0,name:"free_extra"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+a.status+"</span>"},orderable:!0,name:"status"},{render:function(n,t,a,r){return'<span class="text-capitalize">'+(a?.redemption_count??"N/A")+"</span>"},orderable:!0,name:"redemption_count"},{render:function(n,t,a,r){return a.coupon_amount},orderable:!0,name:"coupon_amount"},{render:function(n,t,a,r){return a.free_credit?a.free_credit:"N/A"},orderable:!0,name:"free_credit"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.coupon_expire,"dd/MM/yyyy")},orderable:!0,name:"coupon_expire"},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>\n                    <button class="btn btn-dark btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Users Redeemed" id="redeemedButton">\n                        <div style="width:25px; height:25px;"><i class="fa fa-users"></i></div>\n                    </button>'},className:"text-center",orderable:!1}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("#editButton",n).bind("click",()=>{r.getEdit(t)}),$("#deleteButton",n).bind("click",()=>{r.deleteItem(t)}),$("#redeemedButton",n).bind("click",()=>{r.fetchCouponReedemed(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!1,scrollX:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.cancelEdit(),this.editActionId=n._id,this.promotionForm.patchValue({coupon_code:n.coupon_code,coupon_type:this.couponTypeMaster.find(t=>t.value==n.coupon_type),coupon_amount:n.coupon_amount,coupon_expire:this.datePipe.transform(n.coupon_expire,"MM/dd/YYYY"),min_purchase:n.min_purchase}),"yes"==n.multiuse&&$("#multiuse-toggle").addClass("on"),d.scrollToQuery("#promotion-submit-section")}cancelEdit(){this.editActionId="",d.resetForm(this.promotionForm),$("#multiuse-toggle").removeClass("on")}create(n){this.promotionForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createPromotionCoupon({coupon_code:this.promotionForm.value.coupon_code,coupon_type:this.promotionForm.value.coupon_type.value,coupon_amount:this.promotionForm.value.coupon_amount,coupon_expire:this.datePipe.transform(this.promotionForm.value.coupon_expire,"Y-MM-dd"),multiuse:1==$("#multiuse-toggle").hasClass("on")?"yes":"no",min_purchase:this.promotionForm.value.min_purchase??""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deletePromotionCoupon({coupon_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){this.promotionForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updatePromotionCoupon({coupon_code:this.promotionForm.value.coupon_code,coupon_type:this.promotionForm.value.coupon_type.value,coupon_amount:this.promotionForm.value.coupon_amount,coupon_expire:this.datePipe.transform(this.promotionForm.value.coupon_expire,"Y-MM-dd"),multiuse:1==$("#multiuse-toggle").hasClass("on")?"yes":"no",min_purchase:this.promotionForm.value.min_purchase??"",coupon_id:this.editActionId}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}changeStatus(n){this.spinner.show(),this.adminService.updatePromotionCouponStatus({coupon_id:n._id,status:"active"==n.status?"inactive":"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message),this.spinner.hide()},t=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later.")})}fetchCouponReedemed(n){this.g_coupon_code=n.coupon_code,this.rowCheckedAll=!1,this.uncheckedRowIds=[],this.checkedRowIds=[],this.fetchAllCoupons()}fetchAllCoupons(n=null){this.spinner.show(),this.adminService.fetchPromotionCouponReedeemed({coupon_code:this.g_coupon_code,unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[],pageno:n??1}).subscribe(t=>{"success"==t.status?(this.couponRedeemed=t?.purchase_history?.docs??[],this.couponRedeemed.forEach((a,r)=>{a.checked=this.isRowChecked(a._id)}),this.paginationOptions={hasNextPage:t.purchase_history.hasNextPage,hasPrevPage:t.purchase_history.hasPrevPage,limit:t.purchase_history.limit,nextPage:t.purchase_history.nextPage,page:t.purchase_history.page,pagingCounter:t.purchase_history.pagingCounter,prevPage:t.purchase_history.prevPage,totalDocs:t.purchase_history.totalDocs,totalPages:t.purchase_history.totalPages},null==n&&$("#redeemedListModalButton")?.click()):(this.toastr.error(t.message),this.couponRedeemed=[]),this.spinner.hide()},t=>{this.couponRedeemed=[],this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later.")})}exportPromotion(){this.spinner.show(),this.adminService.downloadFile("coupon-details","coupon-details",{coupon_code:this.g_coupon_code,generate:"excel",unchecked_row_ids:this.checkedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.uncheckedRowIds}),this.spinner.hide()}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.includes(a)||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&(this.uncheckedRowIds.includes(a)||this.uncheckedRowIds.push(a))))}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),this.fetchAllCoupons(1)}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(p.uU),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-promotion-management"]],decls:144,vars:26,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-flag"],[1,"mg-b-0"],["id","promotion-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["formControlName","coupon_code","type","text","oninput","this.value = this.value.toUpperCase()",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["formControlName","coupon_type",1,"form-control",3,"options","config"],["formControlName","coupon_amount","type","number",1,"form-control"],["formControlName","coupon_expire","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],["id","multiuse-toggle",1,"br-toggle","br-toggle-rounded","br-toggle-primary"],[1,"br-toggle-switch"],[1,"minpurchase-field",2,"display","none"],["formControlName","min_purchase","type","number",1,"form-control"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"br-section-label","mb-3"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],["id","redeemedListModalButton","data-toggle","modal","data-target","#redeemedListModal",3,"hidden"],["id","redeemedListModal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","bd","mb-0"],[1,"bg-info","text-white"],["for","select-all",1,"d-flex","align-items-center","mb-0"],["class","mb-0 mr-1","id","select-all","type","checkbox",3,"value","change",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"rows","paginationOptions","onPageClicked"],[1,"modal-footer"],["type","button","class","btn btn-info",3,"disabled","click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["id","select-all","type","checkbox",1,"mb-0","mr-1",3,"value","change"],[1,"d-flex","align-items-center",3,"for"],["type","checkbox",1,"mr-2",3,"id","click"],["colspan","100%",1,"text-center"],["type","button",1,"btn","btn-info",3,"disabled","click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Promotion Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Promotion Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Create/Manage Promotion"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,Kd,2,0,"h6",10),e.\u0275\u0275template(18,Xd,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," Promo code (Alpha-numeric)\xa0"),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",15),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275template(29,em,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",19),e.\u0275\u0275text(31," Type\xa0"),e.\u0275\u0275elementStart(32,"span",16),e.\u0275\u0275text(33,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(34,"div",15),e.\u0275\u0275element(35,"ngx-select-dropdown",20),e.\u0275\u0275template(36,tm,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",14)(38,"div",15),e.\u0275\u0275text(39),e.\u0275\u0275elementStart(40,"span",16),e.\u0275\u0275text(41,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(42,"div",15),e.\u0275\u0275element(43,"input",21),e.\u0275\u0275template(44,nm,2,0,"p",18),e.\u0275\u0275template(45,am,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div",19),e.\u0275\u0275text(47," Expiration\xa0"),e.\u0275\u0275elementStart(48,"span",16),e.\u0275\u0275text(49,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"div",15),e.\u0275\u0275element(51,"dp-date-picker",22),e.\u0275\u0275template(52,rm,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",14)(54,"div",15),e.\u0275\u0275text(55," Multi use "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"div",15)(57,"div",23),e.\u0275\u0275element(58,"div",24),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",19)(60,"div",25),e.\u0275\u0275text(61," Minimun Purchase\xa0"),e.\u0275\u0275elementStart(62,"span",16),e.\u0275\u0275text(63,"*"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(64,"div",15)(65,"div",25),e.\u0275\u0275element(66,"input",26),e.\u0275\u0275template(67,om,2,0,"p",18),e.\u0275\u0275template(68,im,2,0,"p",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(69,"div",27)(70,"div",28),e.\u0275\u0275template(71,lm,3,1,"button",29),e.\u0275\u0275template(72,sm,6,1,"ng-template",null,30,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(74,"div",31)(75,"div",9)(76,"h6",32),e.\u0275\u0275text(77,"Promo code list"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"div",33)(79,"table",34)(80,"thead")(81,"tr")(82,"th"),e.\u0275\u0275text(83,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"th"),e.\u0275\u0275text(85,"Promo Code"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"th"),e.\u0275\u0275text(87,"Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th"),e.\u0275\u0275text(89,"Min Purchase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th"),e.\u0275\u0275text(91,"Free Extra"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th"),e.\u0275\u0275text(93,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th"),e.\u0275\u0275text(95,"Redemption count"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th"),e.\u0275\u0275text(97,"Purchased Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"th"),e.\u0275\u0275text(99,"Free Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th"),e.\u0275\u0275text(101,"Expiry Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"th"),e.\u0275\u0275text(103,"Activate / Deactivate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"th"),e.\u0275\u0275text(105,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(106,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(107,"button",35),e.\u0275\u0275elementStart(108,"div",36)(109,"div",37)(110,"div",38)(111,"div",39)(112,"h6",40),e.\u0275\u0275text(113,"View Redeemed History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(114,"button",41)(115,"span",42),e.\u0275\u0275text(116,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(117,"div",43)(118,"div",44)(119,"table",45)(120,"thead",46)(121,"th")(122,"label",47),e.\u0275\u0275template(123,dm,1,1,"input",48),e.\u0275\u0275text(124," SL No. "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"th"),e.\u0275\u0275text(126,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"th"),e.\u0275\u0275text(128,"Credit Purchased"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(129,"th"),e.\u0275\u0275text(130,"Free Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(131,"th"),e.\u0275\u0275text(132,"Purchase Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(133,"th"),e.\u0275\u0275text(134,"Order Id"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(135,"tbody"),e.\u0275\u0275template(136,mm,16,13,"tr",49),e.\u0275\u0275template(137,cm,3,0,"tr",50),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(138,"app-custom-pagination",51),e.\u0275\u0275listener("onPageClicked",function(r){return t.fetchAllCoupons(r)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(139,"div",52),e.\u0275\u0275template(140,pm,2,1,"button",53),e.\u0275\u0275elementStart(141,"button",54),e.\u0275\u0275text(142,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(143,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(73);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.promotionForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.promotionForm.controls.coupon_code.hasError("required")&&t.promotionForm.controls.coupon_code.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.couponTypeMaster)("config",e.\u0275\u0275pureFunction0(24,um)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.promotionForm.controls.coupon_type.hasError("required")&&t.promotionForm.controls.coupon_type.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" Extra Coupon ","percentage"==(null==t.promotionForm.value.coupon_type?null:t.promotionForm.value.coupon_type.value)?"Percentage (%)":"","\xa0"),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.promotionForm.controls.coupon_amount.hasError("required")&&t.promotionForm.controls.coupon_amount.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.promotionForm.controls.coupon_amount.hasError("pattern")&&t.promotionForm.controls.coupon_amount.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(25,_m)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.promotionForm.controls.coupon_expire.hasError("required")&&t.promotionForm.controls.coupon_expire.dirty),e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",t.promotionForm.controls.min_purchase.hasError("required")&&t.promotionForm.controls.min_purchase.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.promotionForm.controls.min_purchase.hasError("pattern")&&t.promotionForm.controls.min_purchase.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(28),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngIf",t.couponRedeemed.length>0),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngForOf",t.couponRedeemed),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0==t.couponRedeemed.length),e.\u0275\u0275advance(1),e.\u0275\u0275property("rows",t.couponRedeemed)("paginationOptions",t.paginationOptions),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.couponRedeemed.length>0)}},dependencies:[p.sg,p.O5,h.yS,w.fY,A.Lr,H.W,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,y,x,p.uU]}),o})();function fm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",36),e.\u0275\u0275text(1,"Add Role"),e.\u0275\u0275elementEnd())}function gm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",36),e.\u0275\u0275text(1,"Edit Role"),e.\u0275\u0275elementEnd())}function bm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",37),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function vm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",37),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ym(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"label",41)(1,"input",42),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.moduleCheckboxChanged(a))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(2,"span",43),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.$implicit,t=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("name","modules[",t.module_id_name,"]"),e.\u0275\u0275propertyInterpolate("value",n),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n)}}function xm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",23)(1,"label",24),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"label",38)(4,"input",39),e.\u0275\u0275listener("change",function(a){const s=e.\u0275\u0275restoreView(n).$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.moduleCheckboxChanged(a,"selectmodule",s.module_id_name))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"All"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,ym,4,3,"label",40),e.\u0275\u0275elementEnd()}if(2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",n.module_name," "),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("id","module-",n.module_id_name,"-select"),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",n.access)}}function Sm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",44),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Add Role"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.roleForm.valid)}}function Em(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",45),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Cancel Editing"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",44),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Update Role"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.roleForm.valid)}}let Cm=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.adminService=a,this.toastr=r,this.spinner=s,this.dtOptions={},this.roleForm=n.group({role_name:[null,i.kI.compose([i.kI.required])],role_activity:[null,i.kI.compose([i.kI.required])]}),this.permissions=[],this.editActionId=""}ngOnInit(){this.titleService.setTitle("Roles - "+d.AppName),this.fetchPermissions(),this.fetch()}fetchPermissions(){this.spinner.show(),this.adminService.fetchPermissions({}).subscribe(n=>{"success"==n.status?this.permissions=n.module_list:this.toastr.error(n.message),this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchRoles({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.role_list.totalDocs,recordsFiltered:a.role_list.totalDocs,data:a.role_list.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return"yes"==a.approve?'<span class="badge badge-success">Approved</span>':'<button class="btn btn-sm btn-primary" id="approveButton">Approve Now</button>'},className:"text-center",orderable:!0,name:"approve"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.role_name},orderable:!0,name:"role_name"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeStatus(t)}),$("#approveButton",n).bind("click",()=>{r.approve(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}changeStatus(n){this.adminService.changeRoleStatus({role_id:n._id,status:"active"==n.status?"inactive":"active"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}approve(n){_().fire({title:"Are you sure want to approve?",text:"You will not be able to reserve this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, approve it!",cancelButtonText:"No, cancel it"}).then(t=>{t.value?this.adminService.approveReseller({approve:"yes",role_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Data not updated :)","error")})}create(n){if(this.roleForm.valid){n.target.classList.add("btn-loading");let t=this.getSelecteModules(),a=this.roleForm.value.role_name.split(" ").join("").toLowerCase(),r=1==$(".role-status-name").hasClass("on")?"active":"inactive";this.adminService.createRole({role_name:this.roleForm.value.role_name,role_activity:this.roleForm.value.role_activity,role_id_name:a,status:r,modules:t,approve:"no"}).subscribe(s=>{"success"==s.status?(this.toastr.success(s.message),this.roleForm.reset(),this.resetSelectedModules(),$("#my-datatable").dataTable().api().ajax.reload(function(m){},!1)):this.toastr.error("val_err"==s.status?d.showValidationMessage(s.val_msg):s.message),n.target.classList.remove("btn-loading")},s=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getEdit(n){this.editActionId=n._id,this.roleForm.setValue({role_name:n.role_name,role_activity:n.role_activity?n.role_activity:""}),this.checkModulesforEdit(n.modules),"active"==n.status?$(".role-status-name").addClass("on"):$(".role-status-name").removeClass("on"),$("html, body").animate({scrollTop:$("#role-submit-section").position().top})}cancelEdit(){this.editActionId="",this.roleForm.reset(),this.resetSelectedModules()}update(n){if(this.roleForm.valid){n.target.classList.add("btn-loading");let t=this.getSelecteModules(),a=1==$(".role-status-name").hasClass("on")?"active":"inactive";this.adminService.updateRole({role_name:this.roleForm.value.role_name,role_activity:this.roleForm.value.role_activity,role_id:this.editActionId,status:a,modules:t,approve:"no"}).subscribe(r=>{"success"==r.status?(this.toastr.success(r.message),$("#my-datatable").dataTable().api().ajax.reload(function(s){},!1)):this.toastr.error("val_err"==r.status?d.showValidationMessage(r.val_msg):r.message),n.target.classList.remove("btn-loading")},r=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getSelecteModules(){const n={};return this.permissions.forEach(t=>{const a=[];$('input[name="modules['+t.module_id_name+']"]:checked').each(function(){a.push($(this).val())}),n[t.module_id_name]=a}),JSON.stringify(n)}resetSelectedModules(){this.permissions.forEach(n=>{$('input[name="modules['+n.module_id_name+']"]:checked').each(function(){$(this).prop("checked",!1)})}),$(".role-status-name").addClass("on"),this.moduleCheckboxChanged()}checkModulesforEdit(n){this.resetSelectedModules();for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const a=n[t];Array.isArray(a)&&a.forEach(r=>{$('input[name="modules['+t+']"][value="'+r+'"]').prop("checked",!0)})}this.moduleCheckboxChanged()}moduleCheckboxChanged(n=null,t=null,a=null){switch(t){case"selectall":this.permissions.forEach(s=>{$('input[name="modules['+s.module_id_name+']"]').each(function(){$(this).prop("checked",n.target.checked)})});break;case"selectmodule":$('input[name="modules['+a+']"]').each(function(){$(this).prop("checked",n.target.checked)})}this.permissions.forEach(s=>{$('input[name="modules['+s.module_id_name+']"]').each(function(){let m=$(this).val();1==$(this).prop("checked")&&["add","edit","delete"].includes(m)&&$('input[name="modules['+s.module_id_name+']"][value="view"]').prop("checked",!0)})});let r=!0;this.permissions.forEach(s=>{let m=!0;$('input[name="modules['+s.module_id_name+']"]').each(function(){0==$(this).prop("checked")&&(r=!1,m=!1)}),$("#module-"+s.module_id_name+"-select").prop("checked",m)}),$("#module-all-select").prop("checked",r)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-roles"]],decls:85,vars:9,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-people"],[1,"mg-b-0"],["id","role-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-7"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"col-9","col-sm-9"],["type","text","formControlName","role_name","placeholder","Enter Role Name",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","role_activity","placeholder","Enter Role Activity","rows","4",1,"form-control"],[1,"role-status-name","br-toggle","br-toggle-rounded","br-toggle-primary","on"],[1,"br-toggle-switch"],[1,"d-flex"],[1,"ckbox","wd-30p","d-flex"],[1,"ckbox","wd-20p","d-flex"],["type","checkbox","id","module-all-select",3,"change"],["class","d-flex",4,"ngFor","ngForOf"],["type","submit","class","btn btn-info",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-15p","text-center"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[1,"error-element"],[1,"ckbox","wd-10p","d-flex"],["type","checkbox",3,"id","change"],["class","ckbox wd-15p d-flex",4,"ngFor","ngForOf"],[1,"ckbox","wd-15p","d-flex"],["type","checkbox",3,"name","value","change"],[1,"text-capitalize"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Team Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Roles Access"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Roles Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create, assign, edit, view rights"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,fm,2,0,"h6",11),e.\u0275\u0275template(20,gm,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Role Name: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,bm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",15)(31,"div",16),e.\u0275\u0275text(32," Role Activity: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",17),e.\u0275\u0275element(34,"textarea",20),e.\u0275\u0275template(35,vm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",15)(37,"div",16),e.\u0275\u0275text(38," Role Status: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",17)(40,"div",21),e.\u0275\u0275element(41,"div",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(42,"div",15)(43,"div",16),e.\u0275\u0275text(44," Module Access: "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",17)(46,"div",23)(47,"label",24),e.\u0275\u0275text(48," Module "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"label",25)(50,"input",26),e.\u0275\u0275listener("change",function(r){return t.moduleCheckboxChanged(r,"selectall")}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"span"),e.\u0275\u0275text(52,"Select All"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(53,xm,8,3,"div",27),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",15),e.\u0275\u0275element(55,"div",16),e.\u0275\u0275elementStart(56,"div",17),e.\u0275\u0275template(57,Sm,3,1,"button",28),e.\u0275\u0275template(58,Em,6,1,"ng-template",null,29,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(60,"div",6),e.\u0275\u0275element(61,"i",7),e.\u0275\u0275elementStart(62,"div")(63,"h4"),e.\u0275\u0275text(64,"Roles"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(65,"p",8),e.\u0275\u0275text(66,"List of predefined role templates"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(67,"div",30)(68,"div",10)(69,"div",31)(70,"table",32)(71,"thead")(72,"tr")(73,"th",33),e.\u0275\u0275text(74,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(75,"th",34),e.\u0275\u0275text(76,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(77,"th",35),e.\u0275\u0275text(78,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(79,"th",34),e.\u0275\u0275text(80,"Approval"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"th",33),e.\u0275\u0275text(82,"Role Name"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(83,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(84,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(59);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.roleForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.roleForm.controls.role_name.hasError("required")&&t.roleForm.controls.role_name.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.roleForm.controls.role_activity.hasError("required")&&t.roleForm.controls.role_activity.dirty),e.\u0275\u0275advance(18),e.\u0275\u0275property("ngForOf",t.permissions),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(13),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.sg,p.O5,h.yS,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".row-child[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background:transparent;border:0px}"]}),o})();function wm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function km(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Im(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Fm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Tm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Am(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Dm(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",13)(1,"div",20)(2,"div",21)(3,"label",16),e.\u0275\u0275text(4,"User ID: "),e.\u0275\u0275elementStart(5,"span",17),e.\u0275\u0275text(6,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(7,"input",74),e.\u0275\u0275template(8,Fm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",20)(10,"div",21)(11,"label",16),e.\u0275\u0275text(12,"Password: "),e.\u0275\u0275elementStart(13,"span",17),e.\u0275\u0275text(14,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(15,"input",75),e.\u0275\u0275template(16,Tm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(17,"div",20)(18,"div",21)(19,"label",16),e.\u0275\u0275text(20,"Password Confirmation: "),e.\u0275\u0275elementStart(21,"span",17),e.\u0275\u0275text(22,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(23,"input",76),e.\u0275\u0275template(24,Am,2,0,"p",19),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",n.subAdminForm.controls.userid.hasError("required")&&n.subAdminForm.controls.userid.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",n.subAdminForm.controls.password.hasError("required")&&n.subAdminForm.controls.password.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",n.subAdminForm.controls.password_confirmation.hasError("required")&&n.subAdminForm.controls.password_confirmation.dirty)}}function Pm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Rm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Mm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Om(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Nm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Lm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",73),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Vm(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",77)(1,"label",78),e.\u0275\u0275element(2,"input",79),e.\u0275\u0275elementStart(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd()()()),2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("value",n.id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(n.description)}}function qm(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",80)(1,"button",81),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEntry())}),e.\u0275\u0275text(2,"Cancel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"button",82),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"Create"),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.subAdminForm.valid)}}function $m(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",80)(1,"button",83),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEntry())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",82),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Update"),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!n.subAdminForm.valid)}}const Bm=function(){return{search:!0,placeholder:"Select Designation"}},jm=function(){return{search:!0,placeholder:"Select Department"}},Um=function(){return{search:!0,placeholder:"Select Branch"}},Hm=function(){return{search:!0,placeholder:"Select HOD"}},Ym=function(){return{search:!0,placeholder:"Designation"}},Gm=function(){return{search:!0,placeholder:"Department"}};let Jm=(()=>{class o{constructor(n,t,a,r,s){this.formBuilder=n,this.titleService=t,this.adminService=a,this.toastr=r,this.spinner=s,this.dtOptions={},this.designationMaster=[],this.departmentMaster=[],this.branchMaster=[],this.roleMaster=[],this.hodMaster=[],this.editActionId="",this.subAdminForm=n.group({first_name:[null,i.kI.compose([i.kI.required])],last_name:[null,i.kI.compose([i.kI.required])],email_id:[null,i.kI.compose([i.kI.required,i.kI.email])],userid:[null,i.kI.compose([i.kI.required])],password:[null,i.kI.compose([i.kI.required])],password_confirmation:[null,i.kI.compose([i.kI.required])],phone_no:[null,i.kI.compose([i.kI.required,i.kI.minLength(10),i.kI.maxLength(10)])],is_hod:[null,i.kI.compose([i.kI.required])],hod_id:[null,i.kI.compose([i.kI.required])],designation_id:[null,i.kI.compose([i.kI.required])],branch_id:[null,i.kI.compose([i.kI.required])],department_id:[null,i.kI.compose([i.kI.required])]}),this.changePasswordForm=n.group({user_id:[null,i.kI.compose([i.kI.required])],password:[null,i.kI.compose([i.kI.required])],password_confirmation:[null,i.kI.compose([i.kI.required])]}),this.filterForm=n.group({first_name:[null],last_name:[null],email_id:[null],phone_no:[null],designation:[null],department:[null],designation_id:[null],department_id:[null]}),this.fetchMasters(),this.fetch()}ngOnInit(){this.titleService.setTitle("Sub Admin - "+d.AppName)}fetchMasters(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{if("success"==n.status){this.roleMaster=[];for(const t in n.masters.roles)if(Object.prototype.hasOwnProperty.call(n.masters.roles,t)){const a=n.masters.roles[t];this.roleMaster.push({id:a._id,description:a.role_name})}this.designationMaster=[];for(const t in n.masters.designation)if(Object.prototype.hasOwnProperty.call(n.masters.designation,t)){const a=n.masters.designation[t];this.designationMaster.push({id:a._id,description:a.designation_name})}this.departmentMaster=[];for(const t in n.masters.department)if(Object.prototype.hasOwnProperty.call(n.masters.department,t)){const a=n.masters.department[t];this.departmentMaster.push({id:a._id,description:a.department_name})}this.branchMaster=[];for(const t in n.masters.branch)if(Object.prototype.hasOwnProperty.call(n.masters.branch,t)){const a=n.masters.branch[t];this.branchMaster.push({id:a._id,description:a.branch_name})}this.hodMaster=[];for(const t in n.masters.hod)if(Object.prototype.hasOwnProperty.call(n.masters.hod,t)){const a=n.masters.hod[t];this.hodMaster.push({id:a._id,description:a.first_name+" "+a.last_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}create(n){if(this.subAdminForm.valid){let t=this.getSelectedRoles();if(t.length<0)return void this.toastr.error("Please assign atleast one Role to continue");if(this.subAdminForm.value.password!=this.subAdminForm.value.password_confirmation)return void this.toastr.error("Password confirmation doesnot matched");n.target.classList.add("btn-loading"),this.adminService.createSubAdmin({first_name:this.subAdminForm.value.first_name,last_name:this.subAdminForm.value.last_name,email_id:this.subAdminForm.value.email_id,userid:this.subAdminForm.value.userid,password:this.subAdminForm.value.password,phone_no:this.subAdminForm.value.phone_no,is_hod:this.subAdminForm.value.is_hod,hod_id:this.subAdminForm.value.hod_id.id,designation_id:this.subAdminForm.value.designation_id.id,branch_id:this.subAdminForm.value.branch_id.id,department_id:this.subAdminForm.value.department_id.id,"roles[]":JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(_().fire({title:"Account Created Successfully",html:'<h4 class="text-uppercase">Login Credentials</h4>            <p class="m-1">Email: <b>'+this.subAdminForm.value.email_id+"</b></p>            <p>Password: <b>"+this.subAdminForm.value.password+"</b></p>",icon:"success",confirmButtonText:"OKAY"}),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1),this.cancelEntry()):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}fetch(){this.dtOptions={ajax:(n,t)=>{""!=n.search.value&&this.resetDataTableFilter(),this.adminService.fetchSubAdmins({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,first_name:this.filterForm.value.first_name,last_name:this.filterForm.value.last_name,email_id:this.filterForm.value.email_id,phone_no:this.filterForm.value.phone_no,designation_id:this.filterForm.value.designation_id,department_id:this.filterForm.value.department_id,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.subadmin.totalDocs,recordsFiltered:a.subadmin.totalDocs,data:a.subadmin.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return a.userid?a.userid:"-"},orderable:!0,name:"userid"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-dark btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Change Password" id="changePassword-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-lock"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.first_name},orderable:!0,name:"first_name"},{render:function(n,t,a,r){return a.last_name},orderable:!0,name:"last_name"},{render:function(n,t,a,r){return a.email_id},orderable:!0,name:"email_id"},{render:function(n,t,a,r){return a.phone_no},orderable:!0,name:"phone_no"},{render:function(n,t,a,r){if(a.designations.length>0){let s="";return a.designations.forEach(m=>{s+=m.designation_name+"<br>"}),s}return"N/A"},orderable:!1},{render:function(n,t,a,r){if(a.departments.length>0){let s="";return a.departments.forEach(m=>{s+=m.department_name+"<br>"}),s}return"N/A"},orderable:!1},{render:function(n,t,a,r){if(a.hod.length>0){let s="";return a.hod.forEach(m=>{s+=m.first_name+" "+m.last_name+"<br>"}),s}return"N/A"},orderable:!1},{render:function(n,t,a,r){if(a.branches.length>0){let s="";return a.branches.forEach(m=>{s+=m.branch_name+"<br>"}),s}return"N/A"},orderable:!1}],rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#changePassword-"+a,function(){r.getChangePassword(t)}),n},drawCallback:function(n){d.loadCustomScripts("customJsScript")},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getSelectedRoles(){const n=[];return $('input[name="roles[]"]:checked').each(function(){n.push($(this).val())}),n}checkRolesforEdit(n){this.resetSelectedRoles();for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&$('input[name="roles[]"][value="'+n[t]+'"]').prop("checked",!0)}resetSelectedRoles(){$('input[name="roles[]"]:checked').each(function(){$(this).prop("checked",!1)})}cancelEntry(){this.editActionId="",this.subAdminForm.reset();for(const n in this.subAdminForm.controls)if(Object.prototype.hasOwnProperty.call(this.subAdminForm.controls,n)){const t=this.subAdminForm.controls[n];t.markAsUntouched(),t.markAsPristine()}this.resetSelectedRoles()}filterDataTable(){null!=this.filterForm.value.designation&&(this.filterForm.value.designation_id=this.filterForm.value.designation.id),null!=this.filterForm.value.department&&(this.filterForm.value.department_id=this.filterForm.value.department.id),$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}resetDataTableFilter(){this.filterForm.reset()}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteSubAdmin({user_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}getEdit(n){this.editActionId=n._id;let t=this.branchMaster.find(m=>m.id===n.branch_id),a=this.departmentMaster.find(m=>m.id===n.department_id),r=this.designationMaster.find(m=>m.id===n.designation_id),s=this.hodMaster.find(m=>m.id===n.hod_id);this.checkRolesforEdit(n.roles),this.subAdminForm.patchValue({first_name:n.first_name,last_name:n.last_name,email_id:n.email_id,userid:"none",password:"none",password_confirmation:"none",phone_no:n.phone_no,is_hod:n.is_hod,hod_id:s??null,designation_id:r,branch_id:t,department_id:a}),$("html, body").animate({scrollTop:$("#subadmin-submit-section").position().top})}update(n){if(this.subAdminForm.valid){let t=this.getSelectedRoles();if(t.length<0)return void this.toastr.error("Please assign atleast one Role to continue");n.target.classList.add("btn-loading"),this.adminService.updateSubAdmin({user_id:this.editActionId,first_name:this.subAdminForm.value.first_name,last_name:this.subAdminForm.value.last_name,email_id:this.subAdminForm.value.email_id,phone_no:this.subAdminForm.value.phone_no,is_hod:this.subAdminForm.value.is_hod,hod_id:this.subAdminForm.value.hod_id.id,designation_id:this.subAdminForm.value.designation_id.id,branch_id:this.subAdminForm.value.branch_id.id,department_id:this.subAdminForm.value.department_id.id,"roles[]":JSON.stringify(t)}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getChangePassword(n){this.changePasswordForm.setValue({user_id:n._id,password:null,password_confirmation:null}),$("#changePasswordModalButton").click()}updatePassword(n){if(this.changePasswordForm.valid){if(this.changePasswordForm.value.password!=this.changePasswordForm.value.password_confirmation)return void this.toastr.error("Password confirmation doesnot matched");n.target.classList.add("btn-loading"),this.adminService.updateSubAdminPassword({user_id:this.changePasswordForm.value.user_id,password:this.changePasswordForm.value.password}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.changePasswordForm.reset(),$("#changePasswordModal").find('[data-dismiss="modal"]').click()):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(E.t2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-subadmins"]],decls:186,vars:39,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-personadd"],[1,"mg-b-0"],["id","subadmin-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],[1,"form-layout","form-layout-2"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-md-4"],[1,"form-group"],[1,"form-control-label"],[1,"tx-danger"],["type","text","formControlName","first_name","placeholder","Enter First Name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-md-4","mg-t--1","mg-md-t-0"],[1,"form-group","mg-md-l--1"],["type","text","formControlName","last_name","placeholder","Enter Last Name",1,"form-control"],["type","email","formControlName","email_id","placeholder","Enter Email Address",1,"form-control"],["class","row no-gutters",4,"ngIf"],[1,"form-group","bd-t-0-force"],["type","number","formControlName","phone_no","placeholder","Enter Phone Number",1,"form-control"],[1,"form-group","mg-md-l--1","bd-t-0-force"],["formControlName","designation_id",1,"form-control",3,"options","config"],["formControlName","department_id",1,"form-control",3,"options","config"],[1,"form-control-label","mg-b-0-force"],["formControlName","branch_id",1,"form-control",3,"options","config"],["formControlName","hod_id",1,"form-control",3,"options","config"],[1,"form-control-label","mg-b-5-force"],[1,"row","row","mt-3"],[1,"col-lg-4"],[1,"rdiobox"],["formControlName","is_hod","type","radio","value","yes"],["formControlName","is_hod","type","radio","value","no"],[1,"col-lg-12"],[1,"col-md-12"],[1,"row"],["class","col-lg-3",4,"ngFor","ngForOf"],["class","form-layout-footer bd pd-20 bd-t-0",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody"],[1,"d-flex","align-items-center","justify-content-center","bg-gray-100","ht-md-80","bd","pd-x-20"],[1,"d-md-flex","pd-y-20","pd-md-y-0","datatable-filter-section"],["type","text","formControlName","first_name","placeholder","First Name",1,"form-control"],["type","text","formControlName","last_name","placeholder","Last Name",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["type","text","formControlName","email_id","placeholder","E-mail",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["type","text","formControlName","phone_no","placeholder","Phone Number",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["formControlName","designation",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0",3,"options","config","multiple"],["formControlName","department",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0",3,"options","config","multiple"],[1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-md-l-10","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2",3,"click"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-25p","text-center"],["id","changePasswordModalButton","data-toggle","modal","data-target","#changePasswordModal",3,"hidden"],["id","changePasswordModal","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-md"],[1,"modal-content","bd-0","tx-14"],[1,"modal-header","pd-y-20","pd-x-25"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-25"],["type","text","placeholder","New Password","formControlName","password",1,"form-control"],[1,"col-lg-12","pt-3"],["type","text","placeholder","Re-enter New Password","formControlName","password_confirmation",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","tx-11","tx-uppercase","pd-y-12","pd-x-25","tx-mont","tx-medium",3,"disabled","click"],[1,"error-element"],["type","text","formControlName","userid","placeholder","Enter User ID",1,"form-control"],["type","password","formControlName","password","placeholder","Enter Password","autocomplete","new-password",1,"form-control"],["type","password","formControlName","password_confirmation","placeholder","Re-enter Password",1,"form-control"],[1,"col-lg-3"],[1,"ckbox","mt-2"],["name","roles[]","type","checkbox",3,"value"],[1,"form-layout-footer","bd","pd-20","bd-t-0"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Team Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Sub Admin"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Sub Admin Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create, edit Sub Admin"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"div",11)(20,"form",12)(21,"div",13)(22,"div",14)(23,"div",15)(24,"label",16),e.\u0275\u0275text(25,"First name: "),e.\u0275\u0275elementStart(26,"span",17),e.\u0275\u0275text(27,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,wm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",20)(31,"div",21)(32,"label",16),e.\u0275\u0275text(33,"Last name: "),e.\u0275\u0275elementStart(34,"span",17),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(36,"input",22),e.\u0275\u0275template(37,km,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",20)(39,"div",21)(40,"label",16),e.\u0275\u0275text(41,"Email address: "),e.\u0275\u0275elementStart(42,"span",17),e.\u0275\u0275text(43,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(44,"input",23),e.\u0275\u0275template(45,Im,2,0,"p",19),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(46,Dm,25,3,"div",24),e.\u0275\u0275elementStart(47,"div",13)(48,"div",14)(49,"div",25)(50,"label",16),e.\u0275\u0275text(51,"Phone Number: "),e.\u0275\u0275elementStart(52,"span",17),e.\u0275\u0275text(53,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(54,"input",26),e.\u0275\u0275template(55,Pm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(56,"div",14)(57,"div",27)(58,"label",16),e.\u0275\u0275text(59,"Designation: "),e.\u0275\u0275elementStart(60,"span",17),e.\u0275\u0275text(61,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(62,"ngx-select-dropdown",28),e.\u0275\u0275template(63,Rm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(64,"div",14)(65,"div",27)(66,"label",16),e.\u0275\u0275text(67,"Department: "),e.\u0275\u0275elementStart(68,"span",17),e.\u0275\u0275text(69,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(70,"ngx-select-dropdown",29),e.\u0275\u0275template(71,Mm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(72,"div",14)(73,"div",25)(74,"label",30),e.\u0275\u0275text(75,"Branch: "),e.\u0275\u0275elementStart(76,"span",17),e.\u0275\u0275text(77,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(78,"ngx-select-dropdown",31),e.\u0275\u0275template(79,Om,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(80,"div",14)(81,"div",25)(82,"label",30),e.\u0275\u0275text(83,"HOD: "),e.\u0275\u0275elementStart(84,"span",17),e.\u0275\u0275text(85,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(86,"ngx-select-dropdown",32),e.\u0275\u0275template(87,Nm,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(88,"div",14)(89,"div",27)(90,"label",33),e.\u0275\u0275text(91,"Is HOD?: "),e.\u0275\u0275elementStart(92,"span",17),e.\u0275\u0275text(93,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(94,"div",34)(95,"div",35)(96,"label",36),e.\u0275\u0275element(97,"input",37),e.\u0275\u0275elementStart(98,"span"),e.\u0275\u0275text(99,"Yes"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(100,"div",35)(101,"label",36),e.\u0275\u0275element(102,"input",38),e.\u0275\u0275elementStart(103,"span"),e.\u0275\u0275text(104,"No"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(105,"div",39),e.\u0275\u0275template(106,Lm,2,0,"p",19),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(107,"div",40)(108,"div",25)(109,"label",16),e.\u0275\u0275text(110,"Assigned Roles: "),e.\u0275\u0275elementStart(111,"span",17),e.\u0275\u0275text(112,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(113,"div",41),e.\u0275\u0275template(114,Vm,5,2,"div",42),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(115,qm,6,1,"div",43),e.\u0275\u0275template(116,$m,7,1,"ng-template",null,44,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(118,"div",6),e.\u0275\u0275element(119,"i",7),e.\u0275\u0275elementStart(120,"div")(121,"h4"),e.\u0275\u0275text(122,"Sub Admin Listing"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"p",8),e.\u0275\u0275text(124,"View, manage Sub Admin"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(125,"div",45)(126,"div",10)(127,"div",46)(128,"form",12)(129,"div",47),e.\u0275\u0275element(130,"input",48)(131,"input",49)(132,"input",50)(133,"input",51)(134,"ngx-select-dropdown",52)(135,"ngx-select-dropdown",53),e.\u0275\u0275elementStart(136,"button",54),e.\u0275\u0275listener("click",function(){return t.filterDataTable()}),e.\u0275\u0275text(137,"Filter By"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(138,"br"),e.\u0275\u0275elementStart(139,"div",55)(140,"table",56)(141,"thead")(142,"tr")(143,"th",57),e.\u0275\u0275text(144,"User ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(145,"th",58),e.\u0275\u0275text(146,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(147,"th",57),e.\u0275\u0275text(148,"First Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(149,"th",57),e.\u0275\u0275text(150,"Last Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(151,"th",57),e.\u0275\u0275text(152,"E-mail"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(153,"th",57),e.\u0275\u0275text(154,"Mobile"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"th",57),e.\u0275\u0275text(156,"Designation"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(157,"th",57),e.\u0275\u0275text(158,"Department"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"th",57),e.\u0275\u0275text(160,"HOD"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(161,"th",57),e.\u0275\u0275text(162,"Branch"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(163,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(164,"button",59),e.\u0275\u0275elementStart(165,"div",60)(166,"div",61)(167,"div",62)(168,"div",63)(169,"h6",64),e.\u0275\u0275text(170,"Update SubAdmin Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(171,"button",65)(172,"span",66),e.\u0275\u0275text(173,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(174,"form",12)(175,"div",67)(176,"div",41)(177,"div",39),e.\u0275\u0275element(178,"input",68),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(179,"div",69),e.\u0275\u0275element(180,"input",70),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(181,"div",71)(182,"button",72),e.\u0275\u0275listener("click",function(r){return t.updatePassword(r)}),e.\u0275\u0275elementStart(183,"span"),e.\u0275\u0275text(184,"Update"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275element(185,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(117);e.\u0275\u0275advance(20),e.\u0275\u0275property("formGroup",t.subAdminForm),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.first_name.hasError("required")&&t.subAdminForm.controls.first_name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.last_name.hasError("required")&&t.subAdminForm.controls.last_name.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.email_id.hasError("required")&&t.subAdminForm.controls.email_id.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""==t.editActionId),e.\u0275\u0275advance(9),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.phone_no.hasError("required")&&t.subAdminForm.controls.phone_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.designationMaster)("config",e.\u0275\u0275pureFunction0(33,Bm)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.designation_id.hasError("required")&&t.subAdminForm.controls.designation_id.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.departmentMaster)("config",e.\u0275\u0275pureFunction0(34,jm)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.department_id.hasError("required")&&t.subAdminForm.controls.department_id.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.branchMaster)("config",e.\u0275\u0275pureFunction0(35,Um)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.branch_id.hasError("required")&&t.subAdminForm.controls.branch_id.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.hodMaster)("config",e.\u0275\u0275pureFunction0(36,Hm)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.hod_id.hasError("required")&&t.subAdminForm.controls.hod_id.dirty),e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",t.subAdminForm.controls.is_hod.hasError("required")&&t.subAdminForm.controls.is_hod.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.roleMaster),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(13),e.\u0275\u0275property("formGroup",t.filterForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.designationMaster)("config",e.\u0275\u0275pureFunction0(37,Ym))("multiple",!1),e.\u0275\u0275advance(1),e.\u0275\u0275property("options",t.departmentMaster)("config",e.\u0275\u0275pureFunction0(38,Gm))("multiple",!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(24),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("formGroup",t.changePasswordForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",!t.changePasswordForm.valid)}},dependencies:[p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i._,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".datatable-filter-section[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-color:#ced4da!important}"]}),o})();function zm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Wm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Qm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Zm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Km(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Xm(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function ec(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function tc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}let nc=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.creditForm=n.group({credit_value:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],credit_amount:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],gst_amount:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],payable_amount:[{value:null,disabled:!0}]}),this.creditForm.get("credit_amount")?.valueChanges.subscribe(u=>{setTimeout(()=>{this.calculatePayableAmount()},500)}),this.creditForm.get("gst_amount")?.valueChanges.subscribe(u=>{setTimeout(()=>{this.calculatePayableAmount()},500)})}ngOnInit(){this.titleService.setTitle("Subscription Credit Management - "+d.AppName),this.fetchValue()}calculatePayableAmount(){let n=0;this.creditForm.value.credit_amount&&(n+=parseFloat(this.creditForm.value.credit_amount)),n&&this.creditForm.value.gst_amount&&(n+=parseFloat(this.creditForm.value.gst_amount)/100*parseFloat(n)),this.creditForm.patchValue({payable_amount:parseFloat(n).toFixed(2)})}fetchValue(){this.spinner.show(),this.adminService.fetchSubscriptionCreditValue().subscribe(n=>{"success"==n.status?this.creditForm.patchValue({credit_value:n?.settings_value?.credit_value??null,credit_amount:n?.settings_value?.credit_amount??null,gst_amount:n?.settings_value?.gst_amount??null}):this.toastr.error(n.message),this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}update(n){this.creditForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.updateSubscriptionCreditValue({credit_value:this.creditForm.value.credit_value,credit_amount:this.creditForm.value.credit_amount,gst_amount:this.creditForm.value.gst_amount}).subscribe(t=>{"success"==t.status?(d.resetForm(this.creditForm),this.fetchValue(),this.toastr.success(t.message)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-subscription-credit"]],decls:61,vars:10,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"mg-b-0"],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","number","formControlName","credit_value",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["type","number","formControlName","credit_amount",1,"form-control"],["type","number","formControlName","gst_amount",1,"form-control"],["type","number","formControlName","payable_amount",1,"form-control"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["type","submit",1,"btn","btn-info",3,"disabled","click"],[1,"error-element"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Subscription Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Credit Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Credit Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Define price per credit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"h6",11),e.\u0275\u0275text(20,"Update Credit Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",12)(22,"form",13)(23,"div",14)(24,"div",15),e.\u0275\u0275text(25," Number of Credits\xa0"),e.\u0275\u0275elementStart(26,"span",16),e.\u0275\u0275text(27,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",15),e.\u0275\u0275element(29,"input",17),e.\u0275\u0275template(30,zm,2,0,"p",18),e.\u0275\u0275template(31,Wm,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",19),e.\u0275\u0275text(33," Credit Amount\xa0"),e.\u0275\u0275elementStart(34,"span",16),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",15),e.\u0275\u0275element(37,"input",20),e.\u0275\u0275template(38,Qm,2,0,"p",18),e.\u0275\u0275template(39,Zm,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",14)(41,"div",15),e.\u0275\u0275text(42," GST Percentage\xa0"),e.\u0275\u0275elementStart(43,"span",16),e.\u0275\u0275text(44,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",15),e.\u0275\u0275element(46,"input",21),e.\u0275\u0275template(47,Km,2,0,"p",18),e.\u0275\u0275template(48,Xm,2,0,"p",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",19),e.\u0275\u0275text(50," Payable Amount "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"div",15),e.\u0275\u0275element(52,"input",22),e.\u0275\u0275template(53,ec,2,0,"p",18),e.\u0275\u0275template(54,tc,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(55,"div",23)(56,"div",24)(57,"button",25),e.\u0275\u0275listener("click",function(r){return t.update(r)}),e.\u0275\u0275elementStart(58,"span"),e.\u0275\u0275text(59,"SAVE"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275element(60,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(22),e.\u0275\u0275property("formGroup",t.creditForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.creditForm.controls.credit_value.hasError("required")&&t.creditForm.controls.credit_value.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.creditForm.controls.credit_value.hasError("pattern")&&t.creditForm.controls.monthly_rental_date.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.creditForm.controls.credit_amount.hasError("required")&&t.creditForm.controls.credit_amount.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.creditForm.controls.credit_amount.hasError("pattern")&&t.creditForm.controls.monthly_rental_date.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.creditForm.controls.gst_amount.hasError("required")&&t.creditForm.controls.gst_amount.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.creditForm.controls.gst_amount.hasError("pattern")&&t.creditForm.controls.monthly_rental_date.dirty),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",t.creditForm.controls.payable_amount.hasError("required")&&t.creditForm.controls.payable_amount.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.creditForm.controls.payable_amount.hasError("pattern")&&t.creditForm.controls.monthly_rental_date.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!t.creditForm.valid))},dependencies:[p.O5,h.yS,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function ac(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",64),e.\u0275\u0275text(1,"Create Plan"),e.\u0275\u0275elementEnd())}function rc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",64),e.\u0275\u0275text(1,"Update Plan"),e.\u0275\u0275elementEnd())}function oc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function ic(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function lc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function sc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function dc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function mc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function cc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function pc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function uc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function _c(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function hc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function fc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function gc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function bc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function vc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function yc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function xc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Sc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ec(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Cc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function wc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function kc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ic(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"The value should be numeric"),e.\u0275\u0275elementEnd())}function Fc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Tc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",65),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ac(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",66),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",!n.subscriptionPlanForm.valid)}}function Dc(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",67),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",66),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE PLAN"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",!n.subscriptionPlanForm.valid)}}const Pc=function(){return{search:!0,placeholder:"Choose One"}},Rc=function(){return{disableKeypress:!0,format:"MM/DD/YYYY"}},Mc=function(){return{search:!0,placeholder:"Package"}},Oc=function(){return{value:"active",description:"Active"}},Nc=function(){return{value:"inactive",description:"Inactive"}},Lc=function(o,l){return[o,l]},Vc=function(){return{search:!1,placeholder:"Status"}};let qc=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.initialValueBeforeUpdate=null,this.viewPlanDetails=null,this.subscriptionPlanForm=n.group({plan_name:[null,i.kI.compose([i.kI.required])],monthly_rental_date:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],free_emp_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],additional_emp_cost:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],free_staff_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],additional_staff_cost:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],free_sallary_temp_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],additional_sallary_temp_cost:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],free_sallary_head_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],additional_sallary_head_cost:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")])],trigger_suspend_no:[0,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.min(0)])],max_suspend_period:[0,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])],package_id:[null,[i.kI.required]],valid_from:[null,[i.kI.required]]}),this.filterForm=n.group({plan_name:[null],package:[null],package_id:[null],free_emp_no:[null],free_staff_no:[null],free_sallary_temp_no:[null],free_sallary_head_no:[null],status_selected:[null],status:[null]}),this.editActionId="",this.packageMaster=[]}ngOnInit(){this.titleService.setTitle("Subscription Plan Management - "+d.AppName),this.fetch(),this.fetchMaster(),this.dtOptionsHistory={ajax:(n,t)=>{var a=this.getUpdateHistory();t({recordsTotal:a.length,recordsFiltered:a.length,data:a.reverse()})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)}},{render:function(n,t,a,r){var s=a.created_at?a.created_at:a.updated_at;return new p.uU("en-US").transform(s,"dd/MM/yyyy hh:mm a")}},{render:function(n,t,a,r){return a.user_name??"N/A"}},{render:function(n,t,a,r){return a.plan_name}},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.valid_from,"dd/MM/yyyy")}},{render:function(n,t,a,r){return a.monthly_rental_date},className:"text-center"},{render:function(n,t,a,r){return a.free_emp_no},className:"text-center"},{render:function(n,t,a,r){return a.additional_emp_cost},className:"text-center"},{render:function(n,t,a,r){return a.free_staff_no},className:"text-center"},{render:function(n,t,a,r){return a.additional_staff_cost},className:"text-center"},{render:function(n,t,a,r){return a.free_sallary_temp_no},className:"text-center"},{render:function(n,t,a,r){return a.additional_sallary_temp_cost},className:"text-center"},{render:function(n,t,a,r){return a.free_sallary_head_no},className:"text-center"},{render:function(n,t,a,r){return a.additional_sallary_head_cost},className:"text-center"},{render:function(n,t,a,r){return a.trigger_suspend_no},className:"text-center"},{render:function(n,t,a,r){return a.max_suspend_period},className:"text-center"},{render:function(n,t,a,r){return a.package_data?.package_name?a.package_data.package_name:"N/A"}}],searching:!0,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}filterDataTable(){null!=this.filterForm.value.package&&(this.filterForm.value.package_id=this.filterForm.value.package.id),null!=this.filterForm.value.status_selected&&(this.filterForm.value.status=this.filterForm.value.status_selected.value),$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}resetDataTableFilter(){this.filterForm.reset()}fetchMaster(){this.spinner.show(),this.adminService.fetchPackagePlanMaster()?.subscribe(n=>{if("success"==n.status){this.packageMaster=[];for(const t in n.masters.packages)if(Object.prototype.hasOwnProperty.call(n.masters.packages,t)){const a=n.masters.packages[t];this.packageMaster.push({id:a._id,description:a.package_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){this.dtOptions={ajax:(n,t)=>{""!=n.search.value&&this.resetDataTableFilter(),this.adminService.fetchSubscriptionPlans({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,plan_name:this.filterForm.value.plan_name,package_id:this.filterForm.value.package_id,free_emp_no:this.filterForm.value.free_emp_no,free_staff_no:this.filterForm.value.free_staff_no,free_sallary_temp_no:this.filterForm.value.free_sallary_temp_no,free_sallary_head_no:this.filterForm.value.free_sallary_head_no,status:this.filterForm.value.status,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)})?.subscribe(a=>{"success"==a.status?t({recordsTotal:a.plans.totalDocs,recordsFiltered:a.plans.totalDocs,data:a.plans.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="changeStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",name:"status",orderable:!0},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n                    <button class="btn btn-info btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Update History" id="historyButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-history"></i></div>\n                    </button>\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.plan_name},orderable:!0,name:"plan_name"},{render:function(n,t,a,r){return new p.uU("en-US").transform(a.valid_from,"dd/MM/yyyy")},orderable:!0,name:"valid_from"},{render:function(n,t,a,r){return a.monthly_rental_date},className:"text-center",orderable:!0,name:"monthly_rental_date"},{render:function(n,t,a,r){return a.free_emp_no},className:"text-center",orderable:!0,name:"free_emp_no"},{render:function(n,t,a,r){return a.additional_emp_cost},className:"text-center",orderable:!0,name:"additional_emp_cost"},{render:function(n,t,a,r){return a.free_staff_no},className:"text-center",orderable:!0,name:"free_staff_no"},{render:function(n,t,a,r){return a.additional_staff_cost},className:"text-center",orderable:!0,name:"additional_staff_cost"},{render:function(n,t,a,r){return a.free_sallary_temp_no},className:"text-center",orderable:!0,name:"free_sallary_temp_no"},{render:function(n,t,a,r){return a.additional_sallary_temp_cost},className:"text-center",orderable:!0,name:"additional_sallary_temp_cost"},{render:function(n,t,a,r){return a.free_sallary_head_no},className:"text-center",orderable:!0,name:"free_sallary_head_no"},{render:function(n,t,a,r){return a.additional_sallary_head_cost},className:"text-center",orderable:!0,name:"additional_sallary_head_cost"},{render:function(n,t,a,r){return a.trigger_suspend_no},className:"text-center",orderable:!0,name:"trigger_suspend_no"},{render:function(n,t,a,r){return a.max_suspend_period},className:"text-center",orderable:!0,name:"max_suspend_period"},{render:function(n,t,a,r){if(a.package.length>0){let s="";return a.package.forEach(m=>{s+=m.package_name+"<br>"}),s}return"N/A"},orderable:!1}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#changeStatusButton",n).bind("click",()=>{r.changeStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.editActionId=n._id,this.subscriptionPlanForm.patchValue({plan_name:n.plan_name,monthly_rental_date:n.monthly_rental_date,free_emp_no:n.free_emp_no,additional_emp_cost:n.additional_emp_cost,free_staff_no:n.free_staff_no,additional_staff_cost:n.additional_staff_cost,free_sallary_temp_no:n.free_sallary_temp_no,additional_sallary_temp_cost:n.additional_sallary_temp_cost,free_sallary_head_no:n.free_sallary_head_no,additional_sallary_head_cost:n.additional_sallary_head_cost,trigger_suspend_no:n.trigger_suspend_no,max_suspend_period:n.max_suspend_period,package_id:this.packageMaster.find(t=>t.id===n.package[0]?._id),valid_from:this.datePipe.transform(n.valid_from,"MM/dd/YYYY")}),this.initialValueBeforeUpdate={plan_id:this.editActionId,plan_name:this.subscriptionPlanForm.value.plan_name.toString().trim(),monthly_rental_date:this.subscriptionPlanForm.value.monthly_rental_date.toString().trim(),free_emp_no:this.subscriptionPlanForm.value.free_emp_no.toString().trim(),additional_emp_cost:this.subscriptionPlanForm.value.additional_emp_cost.toString().trim(),free_staff_no:this.subscriptionPlanForm.value.free_staff_no.toString().trim(),additional_staff_cost:this.subscriptionPlanForm.value.additional_staff_cost.toString().trim(),free_sallary_temp_no:this.subscriptionPlanForm.value.free_sallary_temp_no.toString().trim(),additional_sallary_temp_cost:this.subscriptionPlanForm.value.additional_sallary_temp_cost.toString().trim(),free_sallary_head_no:this.subscriptionPlanForm.value.free_sallary_head_no.toString().trim(),additional_sallary_head_cost:this.subscriptionPlanForm.value.additional_sallary_head_cost.toString().trim(),trigger_suspend_no:this.subscriptionPlanForm.value.trigger_suspend_no.toString().trim(),max_suspend_period:this.subscriptionPlanForm.value.max_suspend_period.toString().trim(),package_id:this.subscriptionPlanForm.value.package_id?.id?.toString().trim()??"",package_name:this.subscriptionPlanForm.value.package_id?.description?.toString().trim()??"",valid_from:this.datePipe.transform(this.subscriptionPlanForm.value.valid_from,"Y-MM-dd")},$("html, body").animate({scrollTop:$("#bonus-submit-section").position().top})}cancelEdit(){this.editActionId="",this.subscriptionPlanForm.reset();for(const n in this.subscriptionPlanForm.controls)if(Object.prototype.hasOwnProperty.call(this.subscriptionPlanForm.controls,n)){const t=this.subscriptionPlanForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.subscriptionPlanForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createSubscriptionPlan({plan_name:this.subscriptionPlanForm.value.plan_name,monthly_rental_date:this.subscriptionPlanForm.value.monthly_rental_date,free_emp_no:this.subscriptionPlanForm.value.free_emp_no,additional_emp_cost:this.subscriptionPlanForm.value.additional_emp_cost,free_staff_no:this.subscriptionPlanForm.value.free_staff_no,additional_staff_cost:this.subscriptionPlanForm.value.additional_staff_cost,free_sallary_temp_no:this.subscriptionPlanForm.value.free_sallary_temp_no,additional_sallary_temp_cost:this.subscriptionPlanForm.value.additional_sallary_temp_cost,free_sallary_head_no:this.subscriptionPlanForm.value.free_sallary_head_no,additional_sallary_head_cost:this.subscriptionPlanForm.value.additional_sallary_head_cost,trigger_suspend_no:this.subscriptionPlanForm.value.trigger_suspend_no,max_suspend_period:this.subscriptionPlanForm.value.max_suspend_period,package_id:this.subscriptionPlanForm.value.package_id.id,package_name:this.subscriptionPlanForm.value.package_id.description,valid_from:this.datePipe.transform(this.subscriptionPlanForm.value.valid_from,"Y-MM-dd")})?.subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteSubscriptionPlan({plan_id:n._id})?.subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.subscriptionPlanForm.valid){const t={plan_id:this.editActionId,plan_name:this.subscriptionPlanForm.value.plan_name.toString().trim(),monthly_rental_date:this.subscriptionPlanForm.value.monthly_rental_date.toString().trim(),free_emp_no:this.subscriptionPlanForm.value.free_emp_no.toString().trim(),additional_emp_cost:this.subscriptionPlanForm.value.additional_emp_cost.toString().trim(),free_staff_no:this.subscriptionPlanForm.value.free_staff_no.toString().trim(),additional_staff_cost:this.subscriptionPlanForm.value.additional_staff_cost.toString().trim(),free_sallary_temp_no:this.subscriptionPlanForm.value.free_sallary_temp_no.toString().trim(),additional_sallary_temp_cost:this.subscriptionPlanForm.value.additional_sallary_temp_cost.toString().trim(),free_sallary_head_no:this.subscriptionPlanForm.value.free_sallary_head_no.toString().trim(),additional_sallary_head_cost:this.subscriptionPlanForm.value.additional_sallary_head_cost.toString().trim(),trigger_suspend_no:this.subscriptionPlanForm.value.trigger_suspend_no.toString().trim(),max_suspend_period:this.subscriptionPlanForm.value.max_suspend_period.toString().trim(),package_id:this.subscriptionPlanForm.value.package_id.id.toString().trim(),package_name:this.subscriptionPlanForm.value.package_id.description.toString().trim(),valid_from:this.datePipe.transform(this.subscriptionPlanForm.value.valid_from,"Y-MM-dd")};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateSubscriptionPlan(t)?.subscribe(a=>{"success"==a.status?(this.initialValueBeforeUpdate=t,this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}changeStatus(n){this.adminService.changeSubscriptionPlanStatus({plan_id:n._id,status:"active"==n.status?"inactive":"active"})?.subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}showUpdateHistory(n){this.viewPlanDetails=n,null!=this.viewPlanDetails.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPlanDetails&&null!=this.viewPlanDetails.history&&Array.isArray(this.viewPlanDetails.history)?this.viewPlanDetails.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-subscription-plans"]],decls:252,vars:52,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"mg-b-0"],["id","bonus-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],[1,"text-danger"],["type","text","formControlName","plan_name",1,"form-control"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3","sameasfirst"],["type","number","formControlName","monthly_rental_date",1,"form-control"],["type","number","formControlName","free_emp_no",1,"form-control"],["type","number","formControlName","additional_emp_cost",1,"form-control"],["type","number","formControlName","free_staff_no",1,"form-control"],["type","number","formControlName","additional_staff_cost",1,"form-control"],["type","number","formControlName","free_sallary_temp_no",1,"form-control"],["type","number","formControlName","additional_sallary_temp_cost",1,"form-control"],["type","number","formControlName","free_sallary_head_no",1,"form-control"],["type","number","formControlName","additional_sallary_head_cost",1,"form-control"],["type","number","min","0","formControlName","trigger_suspend_no",1,"form-control"],["type","number","formControlName","max_suspend_period",1,"form-control"],["formControlName","package_id",1,"form-control",3,"options","config"],["formControlName","valid_from","theme","dp-material","attachTo",".mat-input-wrapper",3,"config"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"disabled","click",4,"ngIf","ngIfElse"],["editButtonSection",""],["id","reseller-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"d-flex","align-items-center","justify-content-center","bg-gray-100","ht-md-80","bd","pd-x-20"],[1,"d-md-flex","pd-y-20","pd-md-y-0","datatable-filter-section"],["type","text","formControlName","plan_name","placeholder","Plan Name",1,"form-control"],["formControlName","package",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0",3,"options","config","multiple"],["type","number","formControlName","free_emp_no","placeholder","Free Employee",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["type","number","formControlName","free_staff_no","placeholder","Free Staff",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["type","number","formControlName","free_sallary_temp_no","placeholder","Free Salary Template",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["type","number","formControlName","free_sallary_head_no","placeholder","Free Salary Heads",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0"],["formControlName","status_selected",1,"form-control","mg-md-l-10","mg-t-10","mg-md-t-0",3,"options","config","multiple"],[1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-md-l-10","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2",3,"click"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"disabled","click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Subscription Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Plan Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Plan Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Create/Manage product plan"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10),e.\u0275\u0275template(19,ac,2,0,"h6",11),e.\u0275\u0275template(20,rc,2,0,"ng-template",null,12,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16),e.\u0275\u0275text(26," Plan Name\xa0"),e.\u0275\u0275elementStart(27,"span",17),e.\u0275\u0275text(28,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(29,"div",16),e.\u0275\u0275element(30,"input",18),e.\u0275\u0275template(31,oc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",20),e.\u0275\u0275text(33," Monthly Rental (Credits)\xa0"),e.\u0275\u0275elementStart(34,"span",17),e.\u0275\u0275text(35,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",16),e.\u0275\u0275element(37,"input",21),e.\u0275\u0275template(38,ic,2,0,"p",19),e.\u0275\u0275template(39,lc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"div",15)(41,"div",16),e.\u0275\u0275text(42," No. Of Free Employee Included\xa0"),e.\u0275\u0275elementStart(43,"span",17),e.\u0275\u0275text(44,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(45,"div",16),e.\u0275\u0275element(46,"input",22),e.\u0275\u0275template(47,sc,2,0,"p",19),e.\u0275\u0275template(48,dc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(49,"div",20),e.\u0275\u0275text(50," Cost Of additional Employee\xa0"),e.\u0275\u0275elementStart(51,"span",17),e.\u0275\u0275text(52,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",16),e.\u0275\u0275element(54,"input",23),e.\u0275\u0275template(55,mc,2,0,"p",19),e.\u0275\u0275template(56,cc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"div",15)(58,"div",16),e.\u0275\u0275text(59," No. Of Free Staff Included\xa0"),e.\u0275\u0275elementStart(60,"span",17),e.\u0275\u0275text(61,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(62,"div",16),e.\u0275\u0275element(63,"input",24),e.\u0275\u0275template(64,pc,2,0,"p",19),e.\u0275\u0275template(65,uc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div",20),e.\u0275\u0275text(67," Cost Of additional Staff\xa0"),e.\u0275\u0275elementStart(68,"span",17),e.\u0275\u0275text(69,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(70,"div",16),e.\u0275\u0275element(71,"input",25),e.\u0275\u0275template(72,_c,2,0,"p",19),e.\u0275\u0275template(73,hc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(74,"div",15)(75,"div",16),e.\u0275\u0275text(76," No. Of Free Salary Template\xa0"),e.\u0275\u0275elementStart(77,"span",17),e.\u0275\u0275text(78,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(79,"div",16),e.\u0275\u0275element(80,"input",26),e.\u0275\u0275template(81,fc,2,0,"p",19),e.\u0275\u0275template(82,gc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"div",20),e.\u0275\u0275text(84," Cost Of additional Salary Template\xa0"),e.\u0275\u0275elementStart(85,"span",17),e.\u0275\u0275text(86,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(87,"div",16),e.\u0275\u0275element(88,"input",27),e.\u0275\u0275template(89,bc,2,0,"p",19),e.\u0275\u0275template(90,vc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(91,"div",15)(92,"div",16),e.\u0275\u0275text(93," No. Of Free Salary Heads\xa0"),e.\u0275\u0275elementStart(94,"span",17),e.\u0275\u0275text(95,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(96,"div",16),e.\u0275\u0275element(97,"input",28),e.\u0275\u0275template(98,yc,2,0,"p",19),e.\u0275\u0275template(99,xc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"div",20),e.\u0275\u0275text(101," Cost Of additional Salary Heads\xa0"),e.\u0275\u0275elementStart(102,"span",17),e.\u0275\u0275text(103,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(104,"div",16),e.\u0275\u0275element(105,"input",29),e.\u0275\u0275template(106,Sc,2,0,"p",19),e.\u0275\u0275template(107,Ec,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(108,"div",15)(109,"div",16),e.\u0275\u0275text(110," Trigger To Suspend Input\xa0"),e.\u0275\u0275elementStart(111,"span",17),e.\u0275\u0275text(112,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(113,"div",16),e.\u0275\u0275element(114,"input",30),e.\u0275\u0275template(115,Cc,2,0,"p",19),e.\u0275\u0275template(116,wc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(117,"div",20),e.\u0275\u0275text(118," Maximum Suspend Period Before Account De-Activate (In Days)\xa0"),e.\u0275\u0275elementStart(119,"span",17),e.\u0275\u0275text(120,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(121,"div",16),e.\u0275\u0275element(122,"input",31),e.\u0275\u0275template(123,kc,2,0,"p",19),e.\u0275\u0275template(124,Ic,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(125,"div",15)(126,"div",16),e.\u0275\u0275text(127," Select Client Packages\xa0"),e.\u0275\u0275elementStart(128,"span",17),e.\u0275\u0275text(129,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(130,"div",16),e.\u0275\u0275element(131,"ngx-select-dropdown",32),e.\u0275\u0275template(132,Fc,2,0,"p",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(133,"div",20),e.\u0275\u0275text(134," Valid From\xa0"),e.\u0275\u0275elementStart(135,"span",17),e.\u0275\u0275text(136,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(137,"div",16),e.\u0275\u0275element(138,"dp-date-picker",33),e.\u0275\u0275template(139,Tc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(140,"div",34)(141,"div",35),e.\u0275\u0275template(142,Ac,3,1,"button",36),e.\u0275\u0275template(143,Dc,6,1,"ng-template",null,37,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(145,"div",38)(146,"div",10)(147,"div",39)(148,"form",14)(149,"div",40),e.\u0275\u0275element(150,"input",41)(151,"ngx-select-dropdown",42)(152,"input",43)(153,"input",44)(154,"input",45)(155,"input",46)(156,"ngx-select-dropdown",47),e.\u0275\u0275elementStart(157,"button",48),e.\u0275\u0275listener("click",function(){return t.filterDataTable()}),e.\u0275\u0275text(158,"Filter By"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(159,"br"),e.\u0275\u0275elementStart(160,"div",49)(161,"table",50)(162,"thead")(163,"tr")(164,"th",51),e.\u0275\u0275text(165,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(166,"th",51),e.\u0275\u0275text(167,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(168,"th",51),e.\u0275\u0275text(169,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(170,"th",51),e.\u0275\u0275text(171,"Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(172,"th",51),e.\u0275\u0275text(173,"Valid From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(174,"th",51),e.\u0275\u0275text(175,"Mth Rental"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(176,"th",51),e.\u0275\u0275text(177,"Free Emp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(178,"th",51),e.\u0275\u0275text(179,"Cost/Addl Emp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(180,"th",51),e.\u0275\u0275text(181,"Free Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(182,"th",51),e.\u0275\u0275text(183,"Cost/Addl Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(184,"th",51),e.\u0275\u0275text(185,"Free Sal Temp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(186,"th",51),e.\u0275\u0275text(187,"Cost/addl Temp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(188,"th",51),e.\u0275\u0275text(189,"Free Sal Heads"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(190,"th",51),e.\u0275\u0275text(191,"Cost/Addl Heads"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(192,"th",51),e.\u0275\u0275text(193,"Suspend @"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(194,"th",51),e.\u0275\u0275text(195,"Max Dorment"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(196,"th",51),e.\u0275\u0275text(197,"Package"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(198,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(199,"button",52),e.\u0275\u0275elementStart(200,"div",53)(201,"div",54)(202,"div",55)(203,"div",56)(204,"h6",57),e.\u0275\u0275text(205,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(206,"button",58)(207,"span",59),e.\u0275\u0275text(208,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(209,"div",60)(210,"div",51)(211,"table",61)(212,"thead")(213,"th",51),e.\u0275\u0275text(214,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(215,"th",51),e.\u0275\u0275text(216,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(217,"th",51),e.\u0275\u0275text(218,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(219,"th",51),e.\u0275\u0275text(220,"Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(221,"th",51),e.\u0275\u0275text(222,"Valid From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(223,"th",51),e.\u0275\u0275text(224,"Mth Rental"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(225,"th",51),e.\u0275\u0275text(226,"Free Emp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(227,"th",51),e.\u0275\u0275text(228,"Cost/Addl Emp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(229,"th",51),e.\u0275\u0275text(230,"Free Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(231,"th",51),e.\u0275\u0275text(232,"Cost/Addl Staff"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(233,"th",51),e.\u0275\u0275text(234,"Free Sal Temp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(235,"th",51),e.\u0275\u0275text(236,"Cost/addl Temp"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(237,"th",51),e.\u0275\u0275text(238,"Free Sal Heads"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(239,"th",51),e.\u0275\u0275text(240,"Cost/Addl Heads"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(241,"th",51),e.\u0275\u0275text(242,"Suspend @"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(243,"th",51),e.\u0275\u0275text(244,"Max Dorment"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(245,"th",51),e.\u0275\u0275text(246,"Package"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(247,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(248,"div",62)(249,"button",63),e.\u0275\u0275text(250,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(251,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21),r=e.\u0275\u0275reference(144);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.subscriptionPlanForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.plan_name.hasError("required")&&t.subscriptionPlanForm.controls.plan_name.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.monthly_rental_date.hasError("required")&&t.subscriptionPlanForm.controls.monthly_rental_date.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.monthly_rental_date.hasError("pattern")&&t.subscriptionPlanForm.controls.monthly_rental_date.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_emp_no.hasError("required")&&t.subscriptionPlanForm.controls.free_emp_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_emp_no.hasError("pattern")&&t.subscriptionPlanForm.controls.free_emp_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_emp_cost.hasError("required")&&t.subscriptionPlanForm.controls.additional_emp_cost.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_emp_cost.hasError("pattern")&&t.subscriptionPlanForm.controls.additional_emp_cost.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_staff_no.hasError("required")&&t.subscriptionPlanForm.controls.free_staff_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_staff_no.hasError("pattern")&&t.subscriptionPlanForm.controls.free_staff_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_staff_cost.hasError("required")&&t.subscriptionPlanForm.controls.additional_staff_cost.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_staff_cost.hasError("pattern")&&t.subscriptionPlanForm.controls.additional_staff_cost.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_sallary_temp_no.hasError("required")&&t.subscriptionPlanForm.controls.free_sallary_temp_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_sallary_temp_no.hasError("pattern")&&t.subscriptionPlanForm.controls.free_sallary_temp_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_sallary_temp_cost.hasError("required")&&t.subscriptionPlanForm.controls.additional_sallary_temp_cost.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_sallary_temp_cost.hasError("pattern")&&t.subscriptionPlanForm.controls.additional_sallary_temp_cost.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_sallary_head_no.hasError("required")&&t.subscriptionPlanForm.controls.free_sallary_head_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.free_sallary_head_no.hasError("pattern")&&t.subscriptionPlanForm.controls.free_sallary_head_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_sallary_head_cost.hasError("required")&&t.subscriptionPlanForm.controls.additional_sallary_head_cost.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.additional_sallary_head_cost.hasError("pattern")&&t.subscriptionPlanForm.controls.additional_sallary_head_cost.dirty),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.trigger_suspend_no.hasError("required")&&t.subscriptionPlanForm.controls.trigger_suspend_no.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.trigger_suspend_no.hasError("pattern")&&t.subscriptionPlanForm.controls.trigger_suspend_no.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.max_suspend_period.hasError("required")&&t.subscriptionPlanForm.controls.max_suspend_period.dirty),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.max_suspend_period.hasError("pattern")&&t.subscriptionPlanForm.controls.max_suspend_period.dirty),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.packageMaster)("config",e.\u0275\u0275pureFunction0(43,Pc)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.package_id.hasError("required")&&t.subscriptionPlanForm.controls.package_id.dirty),e.\u0275\u0275advance(6),e.\u0275\u0275property("config",e.\u0275\u0275pureFunction0(44,Rc)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.subscriptionPlanForm.controls.valid_from.hasError("required")&&t.subscriptionPlanForm.controls.valid_from.dirty),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",t.filterForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("options",t.packageMaster)("config",e.\u0275\u0275pureFunction0(45,Mc))("multiple",!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("options",e.\u0275\u0275pureFunction2(48,Lc,e.\u0275\u0275pureFunction0(46,Oc),e.\u0275\u0275pureFunction0(47,Nc)))("config",e.\u0275\u0275pureFunction0(51,Vc))("multiple",!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(38),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,w.fY,A.Lr,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.qQ,i.sg,i.u,y,x]}),o})();const te=function(){return{search:!1,placeholder:"Choose One"}},q=function(){return{search:!0,placeholder:"Choose One"}},$c=function(){return{search:!0,placeholder:"Select Reseller"}};let Bc=(()=>{class o{constructor(n,t,a,r,s,m,c,u){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.activatedRoute=u,this.Global=d,this.dtOptions={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.resellerMaster=[],this.planListing=[],this.companyPlan=new i.cw({plan_id:new i.NI("",i.kI.required),company_id:new i.NI("",i.kI.required)}),this.editActionId="",this.packageMaster=[],this.planMaster=[],this.statusMaster=[{id:"active",description:"Active"},{id:"inactive",description:"De-active"}],this.sortingMaster=[{id:"asc",description:"Ascending"},{id:"desc",description:"Descending"}],this.holdTypeMaster=[{value:"hold",description:"Hold"},{value:"release",description:"Release"}],this.filter=this.activatedRoute.snapshot.queryParams.filter,this.subscriptionUserSearchForm=n.group({corporate_id:[null],establishment_name:[null],email_id:[null],phone_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.minLength(10),i.kI.maxLength(11)])],package_id:[null],plan_id:[null],status:[null],orderby:[null]}),this.filter&&this.subscriptionUserSearchForm.get("status")?.setValue(this.statusMaster?.find(f=>f.id==this.filter)??null),this.subscriptionCompanyForm=n.group({corporate_id:[null,i.kI.compose([i.kI.required])],establishment_name:[null,i.kI.compose([i.kI.required])],userid:[null,i.kI.compose([i.kI.required])],email_id:[null,i.kI.compose([i.kI.required,i.kI.email])],phone_no:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.minLength(10),i.kI.maxLength(11)])],plan_id:[null,i.kI.compose([i.kI.required])],reseller_id:[null,i.kI.compose([])],password:[null,i.kI.compose([i.kI.required,i.kI.minLength(6)])]}),this.customerCreditForm=n.group({type:[null,i.kI.compose([i.kI.required])],amount:[null,i.kI.compose([i.kI.required])],company_id:[null,i.kI.compose([i.kI.required])],credit_bal:[null,i.kI.compose([])]}),this.customerHoldCreditForm=n.group({type:[null,i.kI.compose([i.kI.required])],amount:[null,i.kI.compose([i.kI.required])],company_id:[null,i.kI.compose([i.kI.required])],hold_bal:[null,i.kI.compose([])]})}ngOnInit(){this.titleService.setTitle("Subscription User Management - "+d.AppName),this.fetch(),this.fetchMaster(),this.fetchreSeller();const n=this;$(document).on("click","button.action-btn",function(){if($(this).hasClass("awardcredit")){let t=$(this).attr("action-data");n.initCreditStatusUpdate(t,"credit")}else if($(this).hasClass("deductcredit")){let t=$(this).attr("action-data");n.initCreditStatusUpdate(t,"deduct")}else if($(this).hasClass("suspenduser")){let t=$(this).attr("action-data");n.initUserSuspension(t)}else if($(this).hasClass("deactiveuser")){let t=$(this).attr("action-data");n.initCompanyStatus(t)}else if($(this).hasClass("holdcredit")){let t=$(this).attr("action-data");n.initUserHoldCredit(t)}else if($(this).hasClass("changePlan")){let t=JSON.parse($(this).attr("action-data"));n.initUserChangePlan(t)}})}ngOnDestroy(){$(document).off("click","button.action-btn")}fetchMaster(){this.spinner.show(),this.adminService.fetchPackagePlanMaster().subscribe(n=>{if("success"==n.status){this.packageMaster=[];for(const t in n.masters.packages)if(Object.prototype.hasOwnProperty.call(n.masters.packages,t)){const a=n.masters.packages[t];this.packageMaster.push({id:a._id,description:a.package_name})}this.planMaster=[],n.masters.plans&&n.masters.plans.forEach(t=>{this.planMaster.push({id:t._id,description:t.plan_name})})}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetchreSeller(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{if("success"==n.status){n.masters.reseller&&Array.isArray(n.masters.reseller)&&(this.resellerMaster=[],n.masters.reseller?.forEach(t=>{this.resellerMaster.push({id:t._id,description:t.reseller_name})}));for(const t in n.masters.plans)if(Object.prototype.hasOwnProperty.call(n.masters.plans,t)){const a=n.masters.plans[t];this.planMaster.push({id:a._id,description:a.plan_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){const n=this;this.dtOptions={ajax:(t,a)=>{const r=Math.floor((t.start+t.length)/t.length);this.adminService.fetchSubscriptionUsers({pageno:r,perpage:t.length,searchkey:t.search.value,corporate_id:this.subscriptionUserSearchForm.value.corporate_id,establishment_name:this.subscriptionUserSearchForm.value.establishment_name,email_id:this.subscriptionUserSearchForm.value.email_id,phone_no:this?.subscriptionUserSearchForm?.value?.phone_no?.toString()??"",package_id:null!=this.subscriptionUserSearchForm.value.package_id?this.subscriptionUserSearchForm.value.package_id.id:"",plan_id:null!=this.subscriptionUserSearchForm.value.plan_id?this.subscriptionUserSearchForm.value.plan_id.id:"",status:null!=this.subscriptionUserSearchForm.value.status?this.subscriptionUserSearchForm.value.status.id:"",orderby:null!=this.subscriptionUserSearchForm.value.orderby?this.subscriptionUserSearchForm.value.orderby.id:"",sortbyfield:d.getTableSortingOptions("sortbyfield",t),ascdesc:d.getTableSortingOptions("ascdesc",t)}).subscribe(s=>{"success"==s.status?(s.company.docs.forEach(c=>{c.checked=this.isRowChecked(c._id)}),a({recordsTotal:s.company.totalDocs,recordsFiltered:s.company.totalDocs,data:s.company.docs})):this.toastr.error(s.message)},s=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(t,a,r,s){return'<input type="checkbox" '+(1==r.checked?"checked":"")+' id="checkrow-'+s.row+'" data-checkbox-id="'+r._id+'">'},orderable:!1},{render:function(t,a,r,s){return s.settings._iDisplayStart+(s.row+1)},orderable:!1},{render:function(t,a,r,s){let m="",c="";return m+='<button action-data="'+r?._id+'" class="awardcredit dropdown-item action-btn"  type="button">Award Credit</button>',m+='<button action-data="'+r?._id+'" class="deductcredit dropdown-item action-btn"  type="button">Deduct Credit</button>',m+='<button action-data="'+r?._id+' \n              " class="suspenduser dropdown-item action-btn"  type="button">'+("active"==r?.suspension?"Suspend User":"User Suspended")+"</button>",m+='<button action-data="'+r?._id+'" class="deactiveuser dropdown-item action-btn"  type="button">'+("active"==r?.status?"Deactivate User":"Activate User")+"</button>",m+='<button action-data="'+r?._id+'" class="holdcredit dropdown-item action-btn"  type="button">Hold Credit</button>',m+='<button action-data="'+r?._id+'" class="resetpwd dropdown-item action-btn"  type="button">Reset Password</button>',m+='<button action-data=\'{"plan_id":"'+r?.plan_id+'","company_id":"'+r?._id+'"}\' class="changePlan dropdown-item action-btn"  type="button">Change Plan</button>',c+='<a class="dropdown">\n                            <button class="btn btn-info btn-icon btn-drp dropdown-toggle mt-0" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                                Action\n                            </button>\n                            <div class="dropdown-menu" aria-labelledby="dropdownMenu2">\n                                '+m+"\n                            </div>\n                        </a>",c},className:"text-center",orderable:!1},{render:function(t,a,r,s){return'<span class="text-capitalize">'+(r?.status??"N/A")+"</span>"},orderable:!0,name:"status"},{render:function(t,a,r,s){return r?.corporate_id??"N/A"},orderable:!0,name:"corporate_id"},{render:function(t,a,r,s){return r?.establishment_name??"N/A"},orderable:!0,name:"establishment_name"},{render:function(t,a,r,s){return'<span class="text-capitalize">'+(r?.plan?.plan_name??"N/A")+"</span>"},orderable:!0,name:"plan"},{render:function(t,a,r,s){return r?.credit_stat??"N/A"},orderable:!0,name:"credit_stat"}],rowCallback:(t,a,r)=>($("table").on("click","#checkrow-"+r,function(){n.rowCheckBoxChecked(event,a)}),t),pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!1,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!1,scrollX:!0,language:{searchPlaceholder:"Search...",search:""}}}searchSubmit(n){$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}addCompany(){$(".company-desc").show()}cancelCompanyEntry(){$(".company-desc").hide()}createCompany(n){this.subscriptionCompanyForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createSubscriptionUser({corporate_id:this.subscriptionCompanyForm.value.corporate_id,establishment_name:this.subscriptionCompanyForm.value.establishment_name,userid:this.subscriptionCompanyForm.value.userid,email_id:this.subscriptionCompanyForm.value.email_id,phone_no:this.subscriptionCompanyForm.value.phone_no,plan_id:this.subscriptionCompanyForm.value.plan_id.id,password:this.subscriptionCompanyForm.value.password,reseller_id:this.subscriptionCompanyForm.value.reseller_id?.id}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.subscriptionCompanyForm.reset(),this.cancelCompanyEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),$("#my-datatable").dataTable().api().ajax.reload(function(t){},!1)}fetchCompanyUserDetails(n){return new Promise((t,a)=>{this.spinner.show(),this.adminService.fetchCompanyUserDetails({company_id:n}).subscribe(r=>{this.spinner.hide(),"success"==r.status?t(r.company):(this.toastr.error(r.message),t(!1))},r=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),t(!1)})})}initCreditStatusUpdate(n,t){var a=this;return(0,g.Z)(function*(){let r=yield a.fetchCompanyUserDetails(n);r&&(d.resetForm(a.customerCreditForm),a.customerCreditForm.patchValue({type:t,company_id:n,credit_bal:r.credit_stat??0}),$("#creditUpdateModalButton")?.click())})()}initUserSuspension(n){var t=this;return(0,g.Z)(function*(){let a=yield t.fetchCompanyUserDetails(n);if(a){let r="active",s="Are you sure, you want to activate "+a.establishment_name+"?";"active"==a.suspension&&(r="input_suspended",s="Are you sure, you want to suspend "+a.establishment_name+"?"),_().fire({title:"Please Confirm",text:s,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed",cancelButtonText:"Cancel"}).then(m=>{m.value&&(t.spinner.show(),t.adminService.updateCompanySuspensionStatus({company_id:a._id,update_type:r}).subscribe(c=>{"success"==c.status?(t.toastr.success(c.message),$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):t.toastr.error(c.message),t.spinner.hide()},c=>{t.toastr.error(d.showServerErrorMessage(c)),t.spinner.hide()}))})}})()}initCompanyStatus(n){var t=this;return(0,g.Z)(function*(){let a=yield t.fetchCompanyUserDetails(n);if(a){let r="active",s="Are you sure, you want to activate "+a.establishment_name+"?";"active"==a.status&&(r="deactivated",s="Are you sure, you want to deactivate "+a.establishment_name+"?"),_().fire({title:"Please Confirm",text:s,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed",cancelButtonText:"Cancel"}).then(m=>{m.value&&(t.spinner.show(),t.adminService.updateCompanyStatus({company_id:a._id,update_type:r}).subscribe(c=>{"success"==c.status?(t.toastr.success(c.message),$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):t.toastr.error(c.message),t.spinner.hide()},c=>{t.toastr.error(d.showServerErrorMessage(c)),t.spinner.hide()}))})}})()}updateCompanyCredit(n){if(this.customerCreditForm.valid){switch(this.customerCreditForm.value.type){case"deduct":if(this.customerCreditForm.value.amount>this.customerCreditForm.value.credit_bal)return void this.toastr.error("Insuffiecient wallet balance in company wallet");break;case"credit":break;default:return void this.toastr.error("Invalid operation request received")}n.target.classList.add("btn-loading"),this.adminService.updateCompanyUserCredit({company_id:this.customerCreditForm.value.company_id,update_amount:this.customerCreditForm.value.amount,update_type:this.customerCreditForm.value.type}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),$("#creditUpdateModal").find('[data-dismiss="modal"]').click(),this.toastr.success(t.message)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),this.spinner.hide(),n.target.classList.remove("btn-loading")},t=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),n.target.classList.remove("btn-loading")})}}initUserHoldCredit(n){var t=this;return(0,g.Z)(function*(){let a=yield t.fetchCompanyUserDetails(n);a&&(d.resetForm(t.customerHoldCreditForm),t.customerHoldCreditForm.patchValue({company_id:n,hold_bal:a.hold_credit??0}),$("#creditHoldUpdateModalButton")?.click())})()}fetchPlans(){var n=this;return(0,g.Z)(function*(){try{let t=yield n.adminService.fetchSubscriptionPlans({pageno:1}).toPromise();if("success"!==t.status)throw t;return t?.plans?.docs}catch(t){throw t}})()}updateCompanyHoldCredit(n){if(this.customerHoldCreditForm.valid){switch(this.customerHoldCreditForm.value.type?.value){case"release":if(this.customerHoldCreditForm.value.amount>this.customerHoldCreditForm.value.hold_bal)return void this.toastr.error("Insuffiecient hold credit balance in company wallet");break;case"hold":break;default:return void this.toastr.error("Invalid operation request received")}n.target.classList.add("btn-loading"),this.adminService.updateCompanyUserHoldCredit({company_id:this.customerHoldCreditForm.value.company_id,update_amount:this.customerHoldCreditForm.value.amount,update_type:this.customerHoldCreditForm.value.type?.value??""}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),$("#creditHoldUpdateModal").find('[data-dismiss="modal"]').click(),this.toastr.success(t.message)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),this.spinner.hide(),n.target.classList.remove("btn-loading")},t=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),n.target.classList.remove("btn-loading")})}}initUserChangePlan(n){var t=this;return(0,g.Z)(function*(){try{yield t.fetchMaster(),$("#companyPlanUpdateModalButton")?.click(),t.planMaster.length&&t.companyPlan.patchValue({plan_id:t.planMaster.find(a=>a.id==n.plan_id),company_id:n.company_id})}catch(a){t.toastr.error(a)}})()}changeCompanyPlan(n,t){var a=this;return(0,g.Z)(function*(){try{if(a.companyPlan.invalid)return;let r=yield a.adminService.changeCompanyPlan({plan_id:a.companyPlan.value.plan_id.id,company_id:a.companyPlan.value.company_id}).toPromise();if("success"!==r.status)throw r;t.click(),$("#my-datatable").dataTable().api().ajax.reload(function(s){},!1)}catch(r){a.toastr.error(r)}})()}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}exportCompanies(){var n=this;return(0,g.Z)(function*(){try{if(!n.anyRowsChecked)return;const t={pageno:1,row_checked_all:n.rowCheckedAll,checked_row_ids:JSON.stringify(n.checkedRowIds),unchecked_row_ids:JSON.stringify(n.uncheckedRowIds),generate:"excel"};yield n.adminService.downloadFile("get_company_list","companies-list",t)}catch(t){n.toastr.error(t.message??t)}})()}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU),e.\u0275\u0275directiveInject(h.gz))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["admin-app-subscription-users"]],decls:238,vars:41,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"card",2,"border","0px"],[3,"formGroup"],[1,"card-block","pd-0"],[1,"row","row-sm","mg-t-20"],[1,"col-md-6","col-lg-3"],[1,"form-group","mg-b-0"],[1,"d-block"],["type","text","formControlName","establishment_name",1,"form-control"],[1,"col-md-6","col-lg-3","mg-t-10","mg-lg-t-0"],["formControlName","status",1,"form-control",3,"options","config"],["type","email","formControlName","email_id",1,"form-control","tx-14"],["formControlName","plan_id",1,"form-control",3,"options","config"],[1,"col-md-6","col-lg-3","mg-t-10","mg-md-t-0"],["type","number","formControlName","phone_no",1,"form-control","tx-14"],["type","text","formControlName","corporate_id",1,"form-control","tx-14"],[1,"btn","btn-info","tx-11","tx-spacing-1","tx-uppercase","tx-semibold","tx-mont","pd-y-12","pd-x-30","mg-t-30",3,"click"],[1,"br-section-label","d-flex","justify-content-between"],[1,"btn","btn-info","pull-right","add-company","mr-3",3,"disabled","click"],[1,"btn","btn-info","pull-right","add-company",3,"click"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],["type","checkbox",3,"value","change"],[1,""],[1,"company-desc","animate__animated","animate__slideInRight"],[1,"pd-20","pd-xs-40",2,"width","100%"],[1,"tx-gray-800","tx-uppercase","tx-bold"],[1,"btn","btn-info","pull-right","close-earnings",2,"float","right","clear","both",3,"click"],[1,"fa","fa-times"],[1,"tx-gray-600","mg-b-30"],[1,"form-group"],[1,"text-danger"],["formControlName","reseller_id",1,"form-control",3,"options","config"],["type","text","formControlName","corporate_id",1,"form-control"],["type","text","formControlName","userid",1,"form-control"],["type","text","formControlName","email_id",1,"form-control"],["type","text","formControlName","phone_no",1,"form-control",3,"autocomplete"],["type","password","formControlName","password",1,"form-control"],[1,"btn","btn-info","btn-block","pd-y-10","mg-b-30",3,"disabled","click"],["id","creditUpdateModalButton","data-toggle","modal","data-target","#creditUpdateModal",3,"hidden"],["id","creditUpdateModal","tabindex","-1",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered","modal-md"],[1,"modal-content","bd-0","tx-14"],[1,"modal-header","pd-y-20","pd-x-25"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],[1,"text-capitalize"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-25"],[1,"row"],[1,"col-lg-12"],[1,"text-danger","mb-0"],[1,"col-lg-12","mt-4"],["type","number","placeholder","Enter Value","formControlName","amount",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-primary","tx-11","tx-uppercase","pd-y-12","pd-x-25","tx-mont","tx-medium",3,"disabled","click"],["id","creditHoldUpdateModalButton","data-toggle","modal","data-target","#creditHoldUpdateModal",3,"hidden"],["id","creditHoldUpdateModal","tabindex","-1",1,"modal","fade"],["formControlName","type",1,"form-control","px-0","py-2",3,"options","config"],["type","number","type","amount","placeholder","Enter Value","formControlName","amount",1,"form-control"],["id","companyPlanUpdateModalButton","data-toggle","modal","data-target","#planUpdateModal",3,"hidden"],["id","planUpdateModal","tabindex","-1",1,"modal","fade"],["data_modal_dismiss",""],["formControlName","plan_id",1,"form-control","h-100",3,"options","config"]],template:function(n,t){if(1&n){const a=e.\u0275\u0275getCurrentView();e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"User Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"User Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"div",7)(14,"div",8)(15,"h6",9),e.\u0275\u0275text(16,"Search User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",10)(18,"form",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"label",16),e.\u0275\u0275text(24,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"input",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",18)(27,"div",15)(28,"label"),e.\u0275\u0275text(29,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"ngx-select-dropdown",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",18)(32,"div",15)(33,"label"),e.\u0275\u0275text(34,"Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(35,"input",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(36,"div",18)(37,"div",15)(38,"label"),e.\u0275\u0275text(39,"Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"ngx-select-dropdown",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"div",13)(42,"div",22)(43,"div",15)(44,"label",16),e.\u0275\u0275text(45,"Mobile"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"div"),e.\u0275\u0275element(47,"input",23),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(48,"div",18)(49,"div",15)(50,"label"),e.\u0275\u0275text(51,"Sort"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(52,"ngx-select-dropdown",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(53,"div",18)(54,"div",15)(55,"label"),e.\u0275\u0275text(56,"Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(57,"input",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(58,"button",25),e.\u0275\u0275listener("click",function(s){return t.searchSubmit(s)}),e.\u0275\u0275elementStart(59,"span"),e.\u0275\u0275text(60,"Search"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(61,"div",7)(62,"div",8)(63,"h6",26)(64,"div"),e.\u0275\u0275text(65,"User List"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"div")(67,"button",27),e.\u0275\u0275listener("click",function(){return t.exportCompanies()}),e.\u0275\u0275text(68,"Download Master"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(69,"button",28),e.\u0275\u0275listener("click",function(){return t.addCompany()}),e.\u0275\u0275text(70,"Add Company"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(71,"div",29)(72,"table",30)(73,"thead")(74,"tr")(75,"th")(76,"input",31),e.\u0275\u0275listener("change",function(s){return t.allRowsCheckboxChecked(s)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(77,"th",32),e.\u0275\u0275text(78,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(79,"th",32),e.\u0275\u0275text(80,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(81,"th",32),e.\u0275\u0275text(82,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(83,"th",32),e.\u0275\u0275text(84,"Corp Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(85,"th",32),e.\u0275\u0275text(86,"Establishment Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(87,"th",32),e.\u0275\u0275text(88,"Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(89,"th",32),e.\u0275\u0275text(90,"Credit Bal"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(91,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(92,"div",33)(93,"div",34)(94,"h6",35),e.\u0275\u0275text(95,"Add Company "),e.\u0275\u0275elementStart(96,"button",36),e.\u0275\u0275listener("click",function(){return t.cancelCompanyEntry()}),e.\u0275\u0275element(97,"i",37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(98,"p",38),e.\u0275\u0275text(99,"Add details below"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"form",11)(101,"div",39)(102,"label"),e.\u0275\u0275text(103," Establishment Name "),e.\u0275\u0275elementStart(104,"span",40),e.\u0275\u0275text(105,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(106,"input",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(107,"div",39)(108,"label"),e.\u0275\u0275text(109," Reseller "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(110,"ngx-select-dropdown",41),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(111,"div",39)(112,"label"),e.\u0275\u0275text(113," Corporate ID "),e.\u0275\u0275elementStart(114,"span",40),e.\u0275\u0275text(115,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(116,"input",42),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(117,"div",39)(118,"label"),e.\u0275\u0275text(119," Master User Name (User ID) "),e.\u0275\u0275elementStart(120,"span",40),e.\u0275\u0275text(121,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(122,"input",43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"div",39)(124,"label"),e.\u0275\u0275text(125," Email Id "),e.\u0275\u0275elementStart(126,"span",40),e.\u0275\u0275text(127,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(128,"input",44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(129,"div",39)(130,"label"),e.\u0275\u0275text(131," Phone Number "),e.\u0275\u0275elementStart(132,"span",40),e.\u0275\u0275text(133,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(134,"input",45),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(135,"div",39)(136,"label"),e.\u0275\u0275text(137," Password "),e.\u0275\u0275elementStart(138,"span",40),e.\u0275\u0275text(139,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(140,"input",46),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(141,"div",39)(142,"label"),e.\u0275\u0275text(143,"Plan "),e.\u0275\u0275elementStart(144,"span",40),e.\u0275\u0275text(145,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(146,"ngx-select-dropdown",21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(147,"button",47),e.\u0275\u0275listener("click",function(s){return t.createCompany(s)}),e.\u0275\u0275elementStart(148,"span"),e.\u0275\u0275text(149,"Save"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(150,"button",48),e.\u0275\u0275elementStart(151,"div",49)(152,"div",50)(153,"div",51)(154,"div",52)(155,"h6",53),e.\u0275\u0275text(156," Update Company Balance "),e.\u0275\u0275elementStart(157,"small",54),e.\u0275\u0275text(158),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(159,"button",55)(160,"span",56),e.\u0275\u0275text(161,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(162,"form",11)(163,"div",57)(164,"div",58)(165,"div",59)(166,"label",60),e.\u0275\u0275text(167,"Current Balance "),e.\u0275\u0275elementStart(168,"b"),e.\u0275\u0275text(169),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(170,"div",61)(171,"label",54),e.\u0275\u0275text(172),e.\u0275\u0275elementStart(173,"span",40),e.\u0275\u0275text(174,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(175,"input",62),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(176,"div",63)(177,"button",64),e.\u0275\u0275listener("click",function(s){return t.updateCompanyCredit(s)}),e.\u0275\u0275elementStart(178,"span"),e.\u0275\u0275text(179,"Update"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275element(180,"button",65),e.\u0275\u0275elementStart(181,"div",66)(182,"div",50)(183,"div",51)(184,"div",52)(185,"h6",53),e.\u0275\u0275text(186," Update Company Hold Credit "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(187,"button",55)(188,"span",56),e.\u0275\u0275text(189,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(190,"form",11)(191,"div",57)(192,"div",58)(193,"div",59)(194,"label",60),e.\u0275\u0275text(195,"Current Hold Credit "),e.\u0275\u0275elementStart(196,"b"),e.\u0275\u0275text(197),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(198,"div",61)(199,"label",54),e.\u0275\u0275text(200,"Type "),e.\u0275\u0275elementStart(201,"span",40),e.\u0275\u0275text(202,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(203,"ngx-select-dropdown",67),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(204,"div",61)(205,"label",54),e.\u0275\u0275text(206,"Amount "),e.\u0275\u0275elementStart(207,"span",40),e.\u0275\u0275text(208,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(209,"input",68),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(210,"div",63)(211,"button",64),e.\u0275\u0275listener("click",function(s){return t.updateCompanyHoldCredit(s)}),e.\u0275\u0275elementStart(212,"span"),e.\u0275\u0275text(213,"Update"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275element(214,"button",69),e.\u0275\u0275elementStart(215,"div",70)(216,"div",50)(217,"div",51)(218,"div",52)(219,"h6",53),e.\u0275\u0275text(220," Change Company Plan "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(221,"button",55,71)(223,"span",56),e.\u0275\u0275text(224,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(225,"form",11)(226,"div",57)(227,"div",39)(228,"label"),e.\u0275\u0275text(229,"Select Plan "),e.\u0275\u0275elementStart(230,"span",40),e.\u0275\u0275text(231,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(232,"ngx-select-dropdown",72),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(233,"div",63)(234,"button",64),e.\u0275\u0275listener("click",function(s){e.\u0275\u0275restoreView(a);const m=e.\u0275\u0275reference(222);return e.\u0275\u0275resetView(t.changeCompanyPlan(s,m))}),e.\u0275\u0275elementStart(235,"span"),e.\u0275\u0275text(236,"Update"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275element(237,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()}if(2&n){let a,r;e.\u0275\u0275advance(18),e.\u0275\u0275property("formGroup",t.subscriptionUserSearchForm),e.\u0275\u0275advance(12),e.\u0275\u0275property("options",t.statusMaster)("config",e.\u0275\u0275pureFunction0(34,te)),e.\u0275\u0275advance(10),e.\u0275\u0275property("options",t.planMaster)("config",e.\u0275\u0275pureFunction0(35,q)),e.\u0275\u0275advance(12),e.\u0275\u0275property("options",t.sortingMaster)("config",e.\u0275\u0275pureFunction0(36,te)),e.\u0275\u0275advance(15),e.\u0275\u0275property("disabled",!t.anyRowsChecked()),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.rowCheckedAll),e.\u0275\u0275advance(24),e.\u0275\u0275property("formGroup",t.subscriptionCompanyForm),e.\u0275\u0275advance(10),e.\u0275\u0275property("options",t.resellerMaster)("config",e.\u0275\u0275pureFunction0(37,$c)),e.\u0275\u0275advance(24),e.\u0275\u0275property("autocomplete",""),e.\u0275\u0275advance(12),e.\u0275\u0275property("options",t.planMaster)("config",e.\u0275\u0275pureFunction0(38,q)),e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!t.subscriptionCompanyForm.valid),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(8),e.\u0275\u0275textInterpolate(t.customerCreditForm.value.type),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.customerCreditForm),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1("\xa0",t.Global.viewRupeeFormat(null!==(a=t.customerCreditForm.value.credit_bal)&&void 0!==a?a:0),""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",t.customerCreditForm.value.type," Balance "),e.\u0275\u0275advance(5),e.\u0275\u0275property("disabled",!t.customerCreditForm.valid),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("formGroup",t.customerHoldCreditForm),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate1("\xa0",t.Global.viewRupeeFormat(null!==(r=t.customerHoldCreditForm.value.hold_bal)&&void 0!==r?r:0),""),e.\u0275\u0275advance(6),e.\u0275\u0275property("options",t.holdTypeMaster)("config",e.\u0275\u0275pureFunction0(39,q)),e.\u0275\u0275advance(8),e.\u0275\u0275property("disabled",!t.customerHoldCreditForm.valid),e.\u0275\u0275advance(3),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(11),e.\u0275\u0275property("formGroup",t.companyPlan),e.\u0275\u0275advance(7),e.\u0275\u0275property("options",t.planMaster)("config",e.\u0275\u0275pureFunction0(40,q)),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",!t.companyPlan.valid)}},dependencies:[h.yS,w.fY,C.G,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".card-block[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border-color:#ced4da!important}.company-desc[_ngcontent-%COMP%]{width:450px;height:100%;position:fixed;overflow-y:auto;overflow-x:hidden;top:0;right:0;display:none;background:#fff;box-shadow:-5px 0 10px #a3a3a34d;-webkit-box-shadow:-5px 0px 10px rgba(163,163,163,.3);-moz-box-shadow:-5px 0px 10px rgba(163,163,163,.3);-o-box-shadow:-5px 0px 10px rgba(163,163,163,.3);z-index:9999!important}.company-desc[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .company-desc[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   span.select2[_ngcontent-%COMP%], .company-desc[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%!important}"]}),o})();var B=k(1264);function jc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",35),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Uc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",36),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Hc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",36),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Yc(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",37),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.createPage(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Submit ",n.editActionId,"")}}function Gc(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",38),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelPageUpdation())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",39),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updatePage(a))}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Update Page"),e.\u0275\u0275elementEnd()()()}}function Jc(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275element(4,"img",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td")(11,"div",41)(12,"i",42),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.setPageFormValue(r))}),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("#"+(t+1)),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",a.Global.BACKEND_URL+"/"+(null==n?null:n.page_img),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,4,null==n?null:n.page_title)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.page_slug)}}function zc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",43),e.\u0275\u0275text(2," No records found "),e.\u0275\u0275elementEnd()())}let Wc=(()=>{class o{constructor(n,t){this.landingPageService=n,this.toastr=t,this.Global=d,this.pagesList=[],this.editActionId=null,this.pageForm=new i.cw({page_title:new i.NI("",i.kI.required),page_slug:new i.NI(""),page_content:new i.NI(""),page_img:new i.NI(""),img_path:new i.NI("")})}ngOnInit(){this.fetchPages()}onFileChanged(n,t,a){n.target.files.length>0&&t.patchValue({[a]:n.target.files[0]})}createPage(n){var t=this;return(0,g.Z)(function*(){try{if(t.pageForm.invalid)return t.pageForm.markAllAsTouched();let a=t.pageForm.value;a.page_img=a.img_path,delete a.img_path,n.target.classList.add("btn-loading");let r=yield t.landingPageService.createPage(a).toPromise();if(r){if("success"==r.status)return t.toastr.success(r.message),t.pageForm.reset(),n.target.classList.remove("btn-loading"),t.fetchPages();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}updatePage(n){var t=this;return(0,g.Z)(function*(){try{if(t.pageForm.invalid)return t.pageForm.markAllAsTouched();let a=t.pageForm.value;a.page_id=t.editActionId,a.page_img=a.img_path,delete a.img_path,delete a.page_slug,n.target.classList.add("btn-loading");let r=yield t.landingPageService.updatePage(a).toPromise();if(r){if("success"==r.status)return t.toastr.success(r.message),t.cancelPageUpdation(),n.target.classList.remove("btn-loading"),t.fetchPages();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}generatePageSlug(){var n=this;return(0,g.Z)(function*(){try{if(n.pageForm.invalid)return n.pageForm.get("page_slug")?.setValue(null),n.pageForm.markAllAsTouched;let t=n.pageForm.get("page_title")?.value?.split(" ").join("_").toLowerCase(),a=yield n.landingPageService.generatePageSlug({page_slug:t}).toPromise();if(a){if("success"==a.status)return n.pageForm.get("page_slug")?.setValue(a.page_slug);if("val_err"==a.status)return n.toastr.error(d.showValidationMessage(a.val_msg));throw a.message}}catch(t){return n.toastr.error(t?.message||t)}})()}fetchPages(){var n=this;return(0,g.Z)(function*(){try{let t=yield n.landingPageService.fetchLandingPages(null).toPromise();if(t){if("success"==t.status)return n.pagesList=t.docs;if("val_err"==t.status)return n.toastr.error(d.showValidationMessage(t.val_msg));throw t.message}}catch(t){return n.toastr.error(t?.message||t)}})()}updatePageStatus(n,t){var a=this;return(0,g.Z)(function*(){try{t="active"==t?"inActive":"active";let r=yield a.landingPageService.updatePage({...n,page_id:n._id,status:t}).toPromise();if(r){if("success"==r.status)return a.toastr.success("Page Status Updated Sucessfully"),a.fetchPages();if("val_err"==r.status)return a.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(r){return a.toastr.error(r?.message||r)}})()}setPageFormValue(n){this.cancelPageUpdation(),this.pageForm.patchValue({page_title:n.page_title,page_slug:n.page_slug,page_content:n.page_content}),this.editActionId=n._id,window.scroll({top:0})}cancelPageUpdation(){this.pageForm.reset(),this.editActionId=null}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(B.I),e.\u0275\u0275directiveInject(b._W))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-L-page-config"]],decls:74,vars:8,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","letterwriting-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"d-flex"],[1,"col-6","p-0"],[1,"row","no-gutters"],[1,"col-6","col-sm-6"],["class","text-danger",4,"ngIf"],["formControlName","page_title","type","text",1,"form-control",3,"change"],["class","error-element",4,"ngIf"],[1,"col-3","col-sm-3"],[1,"col-9","col-sm-9"],["readonly","","formControlName","page_slug","type","text",1,"form-control",2,"background-color","transparent"],["formControlName","page_img","type","file","accept","image/*",1,"form-control",3,"change"],["formControlName","page_content","rows","3","cols","100%",1,"form-control"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12"],["class","btn btn-info",3,"click",4,"ngIf"],[4,"ngIf"],[1,"br-section-wrapper","mt-5"],[1,"br-section-label","mb-1","mt-1"],[1,"table-wrapper"],[1,"table","display","responsive","nowrap"],[4,"ngFor","ngForOf"],[1,"text-danger"],[1,"error-element"],[1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["type","submit",1,"btn","btn-info",3,"click"],[1,"img-thumbnail",2,"max-width","75px",3,"src"],[2,"width","25px","height","25px"],[1,"fa","fa-pen","pen-icon",3,"click"],["colspan","100%",1,"text-center",2,"background-color","#f7f7f7"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Landing-Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Pages"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Landing Page Config"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Add Pages Title & Descriptions"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"h6",11),e.\u0275\u0275text(20,"Add Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",12)(22,"form",13)(23,"div",14)(24,"div",15)(25,"div",16)(26,"div",17),e.\u0275\u0275text(27," Page Title\xa0 "),e.\u0275\u0275template(28,jc,2,0,"span",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"div",17)(30,"input",19),e.\u0275\u0275listener("change",function(){return t.editActionId?null:t.generatePageSlug()}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(31,Uc,2,0,"p",20),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(32,"div",15)(33,"div",16)(34,"div",21),e.\u0275\u0275text(35,"Page Slug"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",22),e.\u0275\u0275element(37,"input",23),e.\u0275\u0275template(38,Hc,2,0,"p",20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(39,"div",16)(40,"div",21),e.\u0275\u0275text(41,"Page Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"div",22)(43,"input",24),e.\u0275\u0275listener("change",function(r){return t.onFileChanged(r,t.pageForm,"img_path")}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(44,"div",16)(45,"div",21),e.\u0275\u0275text(46,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",22),e.\u0275\u0275element(48,"textarea",25),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(49,"div",26)(50,"div",27),e.\u0275\u0275template(51,Yc,3,1,"button",28),e.\u0275\u0275template(52,Gc,7,0,"div",29),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(53,"div",30)(54,"h6",31),e.\u0275\u0275text(55,"Pages"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"div",32)(57,"table",33)(58,"thead")(59,"tr")(60,"th"),e.\u0275\u0275text(61,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th"),e.\u0275\u0275text(63,"Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th"),e.\u0275\u0275text(65,"Title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"th"),e.\u0275\u0275text(67,"Slug"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"th"),e.\u0275\u0275text(69,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(70,"tbody"),e.\u0275\u0275template(71,Jc,13,6,"tr",34),e.\u0275\u0275template(72,zc,3,0,"tr",29),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(73,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(22),e.\u0275\u0275property("formGroup",t.pageForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.pageForm,"page_title","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.pageForm.controls.page_title.hasError("required")&&t.pageForm.controls.page_title.touched),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.pageForm.controls.page_title.hasError("required")&&(t.pageForm.controls.page_title.dirty||t.pageForm.controls.page_title.touched)),e.\u0275\u0275advance(13),e.\u0275\u0275property("ngIf",!t.editActionId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editActionId),e.\u0275\u0275advance(19),e.\u0275\u0275property("ngForOf",t.pagesList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.pagesList.length))},dependencies:[p.sg,p.O5,h.yS,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x,p.rS],styles:[".pen-icon[_ngcontent-%COMP%]{color:#000;border:1px solid #000;padding:6px;border-radius:6px;cursor:pointer}"]}),o})();function Qc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Zc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",34),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function Kc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",33),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function Xc(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",34),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function ep(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.createPost(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Submit ",n.editActionId,"")}}function tp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",36),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelPostUpdation())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",37),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updatePost(a))}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Update Post"),e.\u0275\u0275elementEnd()()()}}function np(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275element(4,"img",38),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275pipe(7,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td")(11,"div",39),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updatePostStatus(r,null==r?null:r.status))}),e.\u0275\u0275element(12,"div",40),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"td",41)(14,"div",42)(15,"i",43),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.setPostFormValue(r))}),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=l.$implicit,t=l.index,a=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("#"+(t+1)),e.\u0275\u0275advance(2),e.\u0275\u0275property("src",a.Global.BACKEND_URL+"/"+(null==n?null:n.post_img),e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(7,6,null==n?null:n.title)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.category),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("on","active"===(null==n?null:n.status))}}function ap(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",44),e.\u0275\u0275text(2,"No records found"),e.\u0275\u0275elementEnd()())}const rp=function(){return["Brands","Features","Testimonial","FAQ"]},op=function(){return{search:!0,placeholder:"Select One",displayKey:"label",height:"250px"}};let ip=(()=>{class o{constructor(n,t){this.landingPageService=n,this.toastr=t,this.Editor=ee,this.Global=d,this.postsList=[],this.editActionId=null,this.postForm=new i.cw({title:new i.NI("",i.kI.required),category:new i.NI("",i.kI.required),content:new i.NI(null),post_img:new i.NI(""),img_path:new i.NI("")})}ngOnInit(){this.fetchPosts()}onFileChanged(n,t,a){n.target.files.length>0&&t.patchValue({[a]:n.target.files[0]})}createPost(n){var t=this;return(0,g.Z)(function*(){try{if(t.postForm.invalid)return t.postForm.markAllAsTouched();let a=t.postForm.value;a.post_img=a.img_path,delete a.img_path,n.target.classList.add("btn-loading");let r=yield t.landingPageService.createPost(a).toPromise();if(r){if("success"==r.status)return t.toastr.success(r.message),t.postForm.reset(),n.target.classList.remove("btn-loading"),t.fetchPosts();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}updatePost(n){var t=this;return(0,g.Z)(function*(){try{if(t.postForm.invalid)return t.postForm.markAllAsTouched();let a=t.postForm.value;a.post_id=t.editActionId,a.post_img=a.img_path,delete a.img_path,n.target.classList.add("btn-loading");let r=yield t.landingPageService.updatePost(a).toPromise();if(r){if("success"==r.status)return t.toastr.success(r.message),t.cancelPostUpdation(),n.target.classList.remove("btn-loading"),t.fetchPosts();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}fetchPosts(){var n=this;return(0,g.Z)(function*(){try{let t=yield n.landingPageService.fetchPagePosts(null).toPromise();if(t){if("success"==t.status)return n.postsList=t.docs;if("val_err"==t.status)return n.toastr.error(d.showValidationMessage(t.val_msg));throw t.message}}catch(t){return n.toastr.error(t?.message||t)}})()}updatePostStatus(n,t){var a=this;return(0,g.Z)(function*(){try{t="active"==t?"inActive":"active";let r=yield a.landingPageService.updatePost({...n,post_id:n._id,status:t}).toPromise();if(r){if("success"==r.status)return a.toastr.success("Post status updated successfully!"),a.fetchPosts();if("val_err"==r.status)return a.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(r){return a.toastr.error(r?.message||r)}})()}setPostFormValue(n){this.cancelPostUpdation(),this.postForm.patchValue({title:n.title,category:n.category,content:n?.content??null}),this.editActionId=n._id,window.scroll({top:0})}cancelPostUpdation(){this.postForm.reset(),this.editActionId=null}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(B.I),e.\u0275\u0275directiveInject(b._W))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-L-posts"]],decls:74,vars:14,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","letterwriting-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["class","text-danger",4,"ngIf"],[1,"col-9","col-sm-9"],["formControlName","title","type","text",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","category",1,"form-control","p-1",3,"options","config"],["formControlName","post_img","type","file","accept","image/*",1,"form-control",3,"change"],[1,"col-9","col-sm-9","p-0"],["formControlName","content",3,"editor"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12"],["class","btn btn-info",3,"click",4,"ngIf"],[4,"ngIf"],[1,"br-section-wrapper","mt-5"],[1,"br-section-label","mb-1","mt-1"],[1,"table-wrapper"],[1,"table","display","responsive","nowrap"],[4,"ngFor","ngForOf"],[1,"text-danger"],[1,"error-element"],[1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["type","submit",1,"btn","btn-info",3,"click"],[1,"img-thumbnail",2,"max-width","75px",3,"src"],["id","policy-last-day-of-month",1,"br-toggle","br-toggle-rounded","br-toggle-primary",3,"click"],[1,"br-toggle-switch"],[1,"text-center"],[2,"width","25px","height","25px"],[1,"fa","fa-pen","pen-icon",3,"click"],["colspan","100%",1,"text-center",2,"background-color","#f7f7f7"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Landing-Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Posts"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Posts"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Add Posts And Content For Pages"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"h6",11),e.\u0275\u0275text(20,"Add Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",12)(22,"form",13)(23,"div",14)(24,"div",15),e.\u0275\u0275text(25," Title\xa0 "),e.\u0275\u0275template(26,Qc,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,Zc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",14)(31,"div",15),e.\u0275\u0275text(32," Category\xa0 "),e.\u0275\u0275template(33,Kc,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"div",17),e.\u0275\u0275element(35,"ngx-select-dropdown",20),e.\u0275\u0275template(36,Xc,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(37,"div",14)(38,"div",15),e.\u0275\u0275text(39,"Post Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",17)(41,"input",21),e.\u0275\u0275listener("change",function(r){return t.onFileChanged(r,t.postForm,"img_path")}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(42,"div",14)(43,"div",15),e.\u0275\u0275text(44,"Post Content"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"div",22),e.\u0275\u0275element(46,"ckeditor",23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(47,"div",24)(48,"div",25),e.\u0275\u0275template(49,ep,3,1,"button",26),e.\u0275\u0275template(50,tp,7,0,"div",27),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(51,"div",28)(52,"h6",29),e.\u0275\u0275text(53,"Posts"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"div",30)(55,"table",31)(56,"thead")(57,"tr")(58,"th"),e.\u0275\u0275text(59,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"th"),e.\u0275\u0275text(61,"Image"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th"),e.\u0275\u0275text(63,"Title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th"),e.\u0275\u0275text(65,"Category"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"th"),e.\u0275\u0275text(67,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"th"),e.\u0275\u0275text(69,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(70,"tbody"),e.\u0275\u0275template(71,np,16,8,"tr",32),e.\u0275\u0275template(72,ap,3,0,"tr",27),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(73,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(22),e.\u0275\u0275property("formGroup",t.postForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.postForm,"title","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.postForm.controls.title.hasError("required")&&t.postForm.controls.title.touched),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.postForm,"category","required")),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",e.\u0275\u0275pureFunction0(12,rp))("config",e.\u0275\u0275pureFunction0(13,op)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.postForm.controls.category.hasError("required")&&t.postForm.controls.category.touched),e.\u0275\u0275advance(10),e.\u0275\u0275property("editor",t.Editor),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.editActionId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editActionId),e.\u0275\u0275advance(21),e.\u0275\u0275property("ngForOf",t.postsList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.postsList.length))},dependencies:[p.sg,p.O5,h.yS,w.fY,j.u,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x,p.rS],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:200px}.pen-icon[_ngcontent-%COMP%]{color:#000;border:1px solid #000;padding:6px;border-radius:6px;cursor:pointer}"]}),o})();function lp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"span",25),e.\u0275\u0275text(1,"*"),e.\u0275\u0275elementEnd())}function sp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",26),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function dp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",14)(1,"div",15),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",17)(4,"input",27),e.\u0275\u0275listener("change",function(a){const s=e.\u0275\u0275restoreView(n).$implicit,m=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(m.setSocialLink(a,s))}),e.\u0275\u0275elementEnd()()()}if(2&o){const n=l.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==n?null:n.title," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("value",null==n?null:n.link)}}let mp=(()=>{class o{constructor(n,t){this.landingPageService=n,this.toastr=t,this.isUpdateDisable=!0,this.Global=d,this.socialLinks=[{title:"Facebook",item_slug:"facebook",link:null},{title:"LinkedIn",item_slug:"linkedin",link:null},{title:"YouTube",item_slug:"youtube",link:null},{title:"Instagram",item_slug:"instagram",link:null},{title:"Twitter",item_slug:"twitter",link:null}],this.settingFrom=new i.cw({title:new i.NI("",i.kI.required),description:new i.NI(""),social_links:new i.NI([])})}ngOnInit(){this.settingFrom.valueChanges.subscribe(n=>{this.isUpdateDisable=!1}),this.fetchPages()}setSocialLink(n,t){this.socialLinks=this.socialLinks.map(a=>a.item_slug===t.item_slug?{...a,link:n.target.value}:a)}fetchPages(){var n=this;return(0,g.Z)(function*(){try{let t=yield n.landingPageService.getSettings(null).toPromise();if(t){if("success"!=t.status){if("val_err"==t.status)return n.toastr.error(d.showValidationMessage(t.val_msg));throw t.message}n.settingsDoc=t?.docs[0],n.settingFrom?.patchValue({title:n.settingsDoc?.title,description:n.settingsDoc?.description}),n.socialLinks.map(a=>{a.link=n.settingsDoc?.social_links?.find(r=>r?.slug_name===a?.item_slug)?.link})}}catch(t){return n.toastr.error(t?.message||t)}})()}updateSettings(n){var t=this;return(0,g.Z)(function*(){try{if(t.settingFrom.invalid)return t.settingFrom.markAllAsTouched();let a=t.settingFrom.value;a.social_links=[]=JSON.stringify(t.socialLinks.map(s=>({slug_name:s?.item_slug,link:s?.link}))),t.settingsDoc&&(a.setting_id=t.settingsDoc?._id),n.target.classList.add("btn-loading");let r=yield t.landingPageService.updateSettings(a).toPromise();if(r){if("success"==r.status)return t.toastr.success("Settings updated successfully!"),t.isUpdateDisable=!0,n.target.classList.remove("btn-loading"),t.fetchPages();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(B.I),e.\u0275\u0275directiveInject(b._W))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-L-settings"]],decls:44,vars:5,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","letterwriting-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-3","col-sm-3"],["class","text-danger",4,"ngIf"],[1,"col-9","col-sm-9"],["formControlName","title","type","text",1,"form-control"],["class","error-element",4,"ngIf"],["formControlName","description","rows","3","cols","100%",1,"form-control"],[1,"br-section-label","mt-3"],["class","row no-gutters",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12"],["type","submit",1,"btn","btn-info",3,"disabled","click"],[1,"text-danger"],[1,"error-element"],["type","text",1,"form-control",3,"value","change"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Landing-Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Posts"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Posts"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Add Posts And Content For Pages"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"h6",11),e.\u0275\u0275text(20,"Add Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",12)(22,"form",13)(23,"div",14)(24,"div",15),e.\u0275\u0275text(25," Title\xa0 "),e.\u0275\u0275template(26,lp,2,0,"span",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",17),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,sp,2,0,"p",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",14)(31,"div",15),e.\u0275\u0275text(32," Description "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",17),e.\u0275\u0275element(34,"textarea",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",21),e.\u0275\u0275text(36," Social Links "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(37,dp,5,2,"div",22),e.\u0275\u0275elementStart(38,"div",14)(39,"div",23)(40,"button",24),e.\u0275\u0275listener("click",function(r){return t.updateSettings(r)}),e.\u0275\u0275elementStart(41,"span"),e.\u0275\u0275text(42,"Update"),e.\u0275\u0275elementEnd()()()()()()()(),e.\u0275\u0275element(43,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(22),e.\u0275\u0275property("formGroup",t.settingFrom),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.Global.isValidationAvailable(t.settingFrom,"title","required")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.settingFrom.controls.title.hasError("required")&&t.settingFrom.controls.title.touched),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngForOf",t.socialLinks),e.\u0275\u0275advance(3),e.\u0275\u0275property("disabled",t.isUpdateDisable))},dependencies:[p.sg,p.O5,h.yS,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #dee2e6;border-top:none}.section-box[_ngcontent-%COMP%]{padding:4px;border:1px solid #dee2e6}.section-box[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding:8px}"]}),o})();function cp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",35),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function pp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",35),e.\u0275\u0275text(1," This field is required "),e.\u0275\u0275elementEnd())}function up(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275elementContainerStart(1,37),e.\u0275\u0275element(2,"input",38),e.\u0275\u0275elementStart(3,"span",39),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).index,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.removeFeature(r))}),e.\u0275\u0275text(4,"\xd7"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()}if(2&o){const n=l.index;e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroupName",n)}}function _p(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",40),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.createPlan(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1("Submit ",n.editActionId,"")}}function hp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"button",41),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelPlanUpdation())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",42),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.updatePlan(a))}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275text(6,"Update Plan"),e.\u0275\u0275elementEnd()()()}}function fp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td"),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td")(11,"div",43),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.updatePlanStatus(r,null==r?null:r.status))}),e.\u0275\u0275element(12,"div",44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"td")(14,"div",45)(15,"i",46),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.setPlanFormValue(r))}),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=l.$implicit,t=l.index;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate("#"+(t+1)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,6,null==n?null:n.title)),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.amount),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.duration),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("on","active"===(null==n?null:n.status))}}function gp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"tr")(1,"td",47),e.\u0275\u0275text(2," No records found "),e.\u0275\u0275elementEnd()())}const bp=function(){return{search:!0,placeholder:"Duration"}};let vp=(()=>{class o{constructor(n,t){this.landingPageService=n,this.toastr=t,this.Global=d,this.membershipPlansList=[],this.editActionId=null,this.membershipForm=new i.cw({title:new i.NI("",i.kI.required),amount:new i.NI("",i.kI.required),features:new i.Oe([]),duration:new i.NI(""),discount:new i.NI("")}),this.tenureMaster=[{value:"Annualy",description:"Annually"},{value:"Quaterly",description:"Quaterly"},{value:"Monthly",description:"Monthly"}]}get features(){return this.membershipForm.get("features")}newFeature(){return new i.cw({feature:new i.NI("",i.kI.required)})}addFeature(){this.features.push(this.newFeature())}removeFeature(n){this.features.removeAt(n)}ngOnInit(){this.fetchPlan()}createPlan(n){var t=this;return(0,g.Z)(function*(){try{if(t.membershipForm.invalid)return t.membershipForm.markAllAsTouched();n.target.classList.add("btn-loading");let a=t.membershipForm.value;a.features=JSON.stringify(a.features.map(s=>s.feature)),a.duration=a.duration.value??null;let r=yield t.landingPageService.createMembershipPlan(a).toPromise();if(r){if("success"==r.status)return t.toastr.success(r.message),t.features.clear(),t.membershipForm.reset(),n.target.classList.remove("btn-loading"),t.fetchPlan();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}updatePlan(n){var t=this;return(0,g.Z)(function*(){try{if(t.membershipForm.invalid)return t.membershipForm.markAllAsTouched();let a=t.membershipForm.value;a.plan_id=t.editActionId,a.features=JSON.stringify(a.features.map(s=>s.feature)),a.duration=a.duration.value??null,n.target.classList.add("btn-loading");let r=yield t.landingPageService.updateMembershipPlan(a).toPromise();if(r){if("success"==r.status)return t.toastr.success(r.message),t.cancelPlanUpdation(),n.target.classList.remove("btn-loading"),t.fetchPlan();if("val_err"==r.status)return n.target.classList.remove("btn-loading"),t.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(a){n.target.classList.remove("btn-loading"),t.toastr.error(a?.message||a)}})()}fetchPlan(){var n=this;return(0,g.Z)(function*(){try{let t=yield n.landingPageService.getMembershipPlans(null).toPromise();if(t){if("success"==t.status)return n.membershipPlansList=t.docs;if("val_err"==t.status)return n.toastr.error(d.showValidationMessage(t.val_msg));throw t.message}}catch(t){return n.toastr.error(t?.message||t)}})()}updatePlanStatus(n,t){var a=this;return(0,g.Z)(function*(){try{t="active"==t?"inActive":"active";let r=yield a.landingPageService.updateMembershipPlan({...n,plan_id:n._id,status:t}).toPromise();if(r){if("success"==r.status)return a.toastr.success("Plan Status Updated Sucessfully"),a.features.clear(),a.fetchPlan();if("val_err"==r.status)return a.toastr.error(d.showValidationMessage(r.val_msg));throw r.message}}catch(r){return a.toastr.error(r?.message||r)}})()}setPlanFormValue(n){this.cancelPlanUpdation(),this.membershipForm.patchValue({title:n.title,amount:n.amount,duration:this.tenureMaster.find(t=>t.value==n.duration)}),n.features.length&&n.features.forEach(t=>{this.features.push(new i.cw({feature:new i.NI(t,i.kI.required)}))}),this.editActionId=n._id,window.scroll({top:0})}cancelPlanUpdation(){this.membershipForm.reset(),this.features.clear(),this.editActionId=null}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(B.I),e.\u0275\u0275directiveInject(b._W))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-L-membership"]],decls:67,vars:12,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"breadcrumb-item","active"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-home"],[1,"mg-b-0"],["id","letterwriting-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,""],[3,"formGroup"],[1,"row"],[1,"col-4","col-sm-4"],["placeholder","Title","formControlName","title","type","text",1,"form-control"],["class","error-element mt-1",4,"ngIf"],["placeholder","Amount","formControlName","amount","type","number",1,"form-control"],["formControlName","duration",1,"form-control","p-1",3,"options","config"],[1,"col-9","mt-3"],[1,"br-section-label"],[1,"col-3","text-right","mt-3"],[1,"text-primary","pointer-cursor",3,"click"],["formArrayName","features"],["class","col-4 col-sm-4 mt-3 pos-relative",4,"ngFor","ngForOf"],[1,"row","no-gutters","bd-1","mt-3"],[1,"col-12","col-sm-12"],["class","btn btn-info",3,"click",4,"ngIf"],[4,"ngIf"],[1,"br-section-wrapper","mt-5"],[1,"br-section-label","mb-1","mt-1"],[1,"table-wrapper"],[1,"table","display","responsive","nowrap"],[4,"ngFor","ngForOf"],[1,"error-element","mt-1"],[1,"col-4","col-sm-4","mt-3","pos-relative"],[3,"formGroupName"],["placeholder","Feature","formControlName","feature","tyep","text",1,"form-control"],["aria-hidden","true",1,"pos-absolute","pointer-cursor",2,"top","0%","right","8%","font-size","28px","font-weight","300",3,"click"],[1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"],["type","submit",1,"btn","btn-info",3,"click"],["id","policy-last-day-of-month",1,"br-toggle","br-toggle-rounded","br-toggle-primary",3,"click"],[1,"br-toggle-switch"],[2,"width","25px","height","25px"],[1,"fa","fa-pen","pen-icon",3,"click"],["colspan","100%",1,"text-center",2,"background-color","#f7f7f7"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Landing-Page"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",5),e.\u0275\u0275text(9,"Membership Plans"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",6),e.\u0275\u0275element(11,"i",7),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"Membership Plans"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",8),e.\u0275\u0275text(16,"Add Membership Plans"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",9)(18,"div",10)(19,"h6",11),e.\u0275\u0275text(20,"Add Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",12)(22,"form",13)(23,"div",14)(24,"div",15),e.\u0275\u0275element(25,"input",16),e.\u0275\u0275template(26,cp,2,0,"p",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"div",15),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275template(29,pp,2,0,"p",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"div",15),e.\u0275\u0275element(31,"ngx-select-dropdown",19),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"div",20)(33,"h5",21),e.\u0275\u0275text(34,"Add Features"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",22)(36,"u",23),e.\u0275\u0275listener("click",function(){return t.addFeature()}),e.\u0275\u0275text(37),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(38,24),e.\u0275\u0275template(39,up,5,1,"div",25),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"div",26)(41,"div",27),e.\u0275\u0275template(42,_p,3,1,"button",28),e.\u0275\u0275template(43,hp,7,0,"div",29),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(44,"div",30)(45,"h6",31),e.\u0275\u0275text(46,"Plans"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(47,"div",32)(48,"table",33)(49,"thead")(50,"tr")(51,"th"),e.\u0275\u0275text(52,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"th"),e.\u0275\u0275text(54,"Title"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"th"),e.\u0275\u0275text(56,"Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"th"),e.\u0275\u0275text(58,"Duration"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"th"),e.\u0275\u0275text(60,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(61,"th"),e.\u0275\u0275text(62,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(63,"tbody"),e.\u0275\u0275template(64,fp,16,8,"tr",34),e.\u0275\u0275template(65,gp,3,0,"tr",29),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(66,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){let a;e.\u0275\u0275advance(22),e.\u0275\u0275property("formGroup",t.membershipForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.membershipForm.controls.title.hasError("required")&&t.membershipForm.controls.title.touched),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.membershipForm.controls.amount.hasError("required")&&t.membershipForm.controls.amount.touched),e.\u0275\u0275advance(2),e.\u0275\u0275property("options",t.tenureMaster)("config",e.\u0275\u0275pureFunction0(11,bp)),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" +Add ",null!=(a=t.membershipForm.get("features"))&&a.value.length?"More":"Feature",""),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",t.features.controls),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!t.editActionId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.editActionId),e.\u0275\u0275advance(21),e.\u0275\u0275property("ngForOf",t.membershipPlansList),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!t.membershipPlansList.length)}},dependencies:[p.sg,p.O5,h.yS,w.fY,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,y,x,p.rS]}),o})();function yp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",49),e.\u0275\u0275text(1,"Define Attendance Rule"),e.\u0275\u0275elementEnd())}function xp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",49),e.\u0275\u0275text(1,"Update Attendance Rule"),e.\u0275\u0275elementEnd())}function Sp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ep(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Cp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function wp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function kp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ip(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"Enter a valid email address."),e.\u0275\u0275elementEnd())}function Fp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Tp(o,l){1&o&&(e.\u0275\u0275elementStart(0,"p",50),e.\u0275\u0275text(1,"This field is required"),e.\u0275\u0275elementEnd())}function Ap(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",51),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.create(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"SAVE"),e.\u0275\u0275elementEnd()()}}function Dp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",52),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.cancelEdit())}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"CANCEL"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(3,"button",51),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.update(a))}),e.\u0275\u0275elementStart(4,"span"),e.\u0275\u0275text(5,"UPDATE RULE"),e.\u0275\u0275elementEnd()()}}let Pp=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.dtOptions={},this.dtOptionsHistory={},this.viewPolicyDetail=null,this.initialValueBeforeUpdate=null,this.editActionId="",this.smtpForm=n.group({smtp_name:[null,i.kI.compose([i.kI.required])],host_address:[null,i.kI.compose([i.kI.required])],username:[null,i.kI.compose([i.kI.required])],from_email_address:[null,i.kI.compose([i.kI.required,i.kI.email])],password:[null,i.kI.compose([i.kI.required])],smtp_method:[null,i.kI.compose([i.kI.required])],port:[null,i.kI.compose([i.kI.required,i.kI.pattern("^[0-9]*$")])]})}ngOnInit(){this.titleService.setTitle("Attendance Policy Rule - "+d.AppName),this.fetch()}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchSmtp({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length,searchkey:n.search.value,sortbyfield:d.getTableSortingOptions("sortbyfield",n),ascdesc:d.getTableSortingOptions("ascdesc",n)}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.smtp_list.totalDocs,recordsFiltered:a.smtp_list.totalDocs,data:a.smtp_list.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return'<div class="br-toggle br-toggle-rounded br-toggle-primary '+("active"==a.status?"on":"off")+'" id="publishStatusButton">                      <div class="br-toggle-switch"></div>                    </div>'},className:"text-center",orderable:!0,name:"status"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>\n\n                    <button class="btn btn-danger btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Delete" id="deleteButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-trash"></i></div>\n                    </button>'},className:"text-center",orderable:!1},{render:function(n,t,a,r){return a.smtp_name?a.smtp_name:"N/A"},orderable:!1,name:"smtp_name"},{render:function(n,t,a,r){return a.host_address?a.host_address:"N/A"},orderable:!1,name:"host_address"},{render:function(n,t,a,r){return a.username?a.username:"N/A"},orderable:!1,name:"username"},{render:function(n,t,a,r){return a.from_email_address?a.from_email_address:"N/A"},orderable:!1,name:"from_email_address"},{render:function(n,t,a,r){return a.password?a.password:"N/A"},orderable:!1,name:"password"},{render:function(n,t,a,r){return a.method?a.method:"N/A"},orderable:!1,name:"method"},{render:function(n,t,a,r){return a.port?a.port:"N/A"},orderable:!1,name:"port"}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),$("table").on("click","#deleteButton-"+a,function(){r.deleteItem(t)}),$("table").on("click","#historyButton-"+a,function(){r.showUpdateHistory(t)}),$("#publishStatusButton",n).bind("click",()=>{r.changeStatus(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,language:{searchPlaceholder:"Search...",search:""}}}changeStatus(n){this.adminService.updatesmtpStatus({smtp_id:n._id,status:"inactive"==n.status?"active":"inactive"}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error(t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}getEdit(n){this.editActionId=n._id,this.smtpForm.patchValue({smtp_name:n.smtp_name,host_address:n.host_address,username:n.username,from_email_address:n.from_email_address,password:n.password,smtp_method:n.method,port:n.port}),"yes"==n.last_day_of_month?$("#policy-last-day-of-month").addClass("on"):$("#policy-last-day-of-month").removeClass("on"),"yes"==n.full_month_days?$("#policy-full-month-days").addClass("on"):$("#policy-full-month-days").removeClass("on"),$("html, body").animate({scrollTop:$("#policy-submit-section").position().top})}cancelEdit(){this.editActionId="",this.smtpForm.reset();for(const n in this.smtpForm.controls)if(Object.prototype.hasOwnProperty.call(this.smtpForm.controls,n)){const t=this.smtpForm.controls[n];t.markAsUntouched(),t.markAsPristine()}}create(n){this.smtpForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.smtpForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createSmtp({smtp_name:this.smtpForm.value.smtp_name??"",host_address:this.smtpForm.value.host_address??"",username:this.smtpForm.value.username??"",from_email_address:this.smtpForm.value.from_email_address??"",password:this.smtpForm.value.password??"",method:this.smtpForm.value.smtp_method??"",port:this.smtpForm.value.port??""}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.cancelEdit(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}deleteItem(n){_().fire({title:"Are you sure want to remove?",text:"You will not be able to recover this data!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then(t=>{t.value?this.adminService.deleteSmtp({smtp_id:n._id}).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")}):t.dismiss===_().DismissReason.cancel&&_().fire("Cancelled","Your data is safe :)","error")})}update(n){if(this.smtpForm.markAllAsTouched(),setTimeout(function(){let t=document.querySelectorAll("p.error-element");t.length>0&&t[0].scrollIntoView({behavior:"smooth",block:"center"})},100),this.smtpForm.valid){const t={smtp_id:this.editActionId,smtp_name:this.smtpForm.value.smtp_name??"",host_address:this.smtpForm.value.host_address??"",username:this.smtpForm.value.username??"",from_email_address:this.smtpForm.value.from_email_address??"",password:this.smtpForm.value.password??"",method:this.smtpForm.value.smtp_method??"",port:this.smtpForm.value.port??""};if(JSON.stringify(t)===JSON.stringify(this.initialValueBeforeUpdate))return void this.toastr.warning("No change detected to update");n.target.classList.add("btn-loading"),this.adminService.updateSmtp(t).subscribe(a=>{"success"==a.status?(this.toastr.success(a.message),this.initialValueBeforeUpdate=t,$("#my-datatable").dataTable().api().ajax.reload(function(r){},!1)):this.toastr.error("val_err"==a.status?d.showValidationMessage(a.val_msg):a.message),n.target.classList.remove("btn-loading")},a=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")})}}getSelectedRegisterTypes(){const n=[];return $('input[name="register_type[]"]:checked').each(function(){n.push($(this).val())}),n}checkRegisterTypesforEdit(n){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&$('input[name="register_type[]"][value="'+n[t]+'"]').prop("checked",!0)}showUpdateHistory(n){this.viewPolicyDetail=n,null!=this.viewPolicyDetail.history?($("#history-datatable").dataTable().api().ajax.reload(),$("#historymmodalbutton").click()):this.toastr.warning("No update history found to show")}getUpdateHistory(){return null!=this.viewPolicyDetail&&null!=this.viewPolicyDetail.history&&Array.isArray(this.viewPolicyDetail.history)?this.viewPolicyDetail.history:[]}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-smtp"]],decls:168,vars:16,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","icon","ion-ios-email"],[1,"mg-b-0"],["id","policy-submit-section",1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-6"],[3,"formGroup"],[1,"row","no-gutters"],[1,"col-6","col-sm-6"],[1,"text-danger"],["type","text","formControlName","smtp_name",1,"form-control"],["class","error-element",4,"ngIf"],["type","text","formControlName","host_address",1,"form-control"],["type","text","formControlName","username",1,"form-control"],["type","text","formControlName","password",1,"form-control"],["type","text","formControlName","from_email_address",1,"form-control"],["formControlName","smtp_method",1,"form-control"],["value",""],["value","SSL"],["value","TLS"],["type","text","formControlName","port",1,"form-control"],[1,"row","no-gutters","bd-1"],[1,"col-12","col-sm-12",2,"border-right","1px solid #ced4da"],["class","btn btn-info","type","submit",3,"click",4,"ngIf","ngIfElse"],["editButtonSection",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-label"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["datatable","","id","history-datatable",1,"table","display","responsive","nowrap","wd-100p","table-responsive",3,"dtOptions"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"br-section-label","mb-3"],[1,"error-element"],["type","submit",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger","mg-r-5",3,"click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"SMTP"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"SMTP"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Manage SMTP"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9),e.\u0275\u0275template(17,yp,2,0,"h6",10),e.\u0275\u0275template(18,xp,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(20,"div",12)(21,"form",13)(22,"div",14)(23,"div",15),e.\u0275\u0275text(24," SMTP Name\xa0"),e.\u0275\u0275elementStart(25,"span",16),e.\u0275\u0275text(26,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(27,"div",15),e.\u0275\u0275element(28,"input",17),e.\u0275\u0275template(29,Sp,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"div",14)(31,"div",15),e.\u0275\u0275text(32," Host Address\xa0"),e.\u0275\u0275elementStart(33,"span",16),e.\u0275\u0275text(34,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(35,"div",15),e.\u0275\u0275element(36,"input",19),e.\u0275\u0275template(37,Ep,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(38,"div",14)(39,"div",15),e.\u0275\u0275text(40," Username\xa0"),e.\u0275\u0275elementStart(41,"span",16),e.\u0275\u0275text(42,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(43,"div",15),e.\u0275\u0275element(44,"input",20),e.\u0275\u0275template(45,Cp,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(46,"div",14)(47,"div",15),e.\u0275\u0275text(48," Password\xa0"),e.\u0275\u0275elementStart(49,"span",16),e.\u0275\u0275text(50,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(51,"div",15),e.\u0275\u0275element(52,"input",21),e.\u0275\u0275template(53,wp,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",14)(55,"div",15),e.\u0275\u0275text(56," Form Email\xa0"),e.\u0275\u0275elementStart(57,"span",16),e.\u0275\u0275text(58,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"div",15),e.\u0275\u0275element(60,"input",22),e.\u0275\u0275template(61,kp,2,0,"p",18),e.\u0275\u0275template(62,Ip,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(63,"div",14)(64,"div",15),e.\u0275\u0275text(65," Method\xa0"),e.\u0275\u0275elementStart(66,"span",16),e.\u0275\u0275text(67,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(68,"div",15)(69,"select",23)(70,"option",24),e.\u0275\u0275text(71,"Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"option",25),e.\u0275\u0275text(73,"SSL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"option",26),e.\u0275\u0275text(75,"TLS"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(76,Fp,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(77,"div",14)(78,"div",15),e.\u0275\u0275text(79," Port\xa0"),e.\u0275\u0275elementStart(80,"span",16),e.\u0275\u0275text(81,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(82,"div",15),e.\u0275\u0275element(83,"input",27),e.\u0275\u0275template(84,Tp,2,0,"p",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(85,"div",28)(86,"div",29),e.\u0275\u0275template(87,Ap,3,0,"button",30),e.\u0275\u0275template(88,Dp,6,0,"ng-template",null,31,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()()()()(),e.\u0275\u0275elementStart(90,"div",32)(91,"div",9)(92,"h6",33),e.\u0275\u0275text(93,"SMTP"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"div",34)(95,"table",35)(96,"thead")(97,"tr")(98,"th",36),e.\u0275\u0275text(99,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th",36),e.\u0275\u0275text(101,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(102,"th",36),e.\u0275\u0275text(103,"Action"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(104,"th",36),e.\u0275\u0275text(105,"Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(106,"th",36),e.\u0275\u0275text(107,"Host"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(108,"th",36),e.\u0275\u0275text(109,"Username"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(110,"th",36),e.\u0275\u0275text(111,"Form Email"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(112,"th",36),e.\u0275\u0275text(113,"Password"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(114,"th",36),e.\u0275\u0275text(115,"Method"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(116,"th",36),e.\u0275\u0275text(117,"Port"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(118,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(119,"button",37),e.\u0275\u0275elementStart(120,"div",38)(121,"div",39)(122,"div",40)(123,"div",41)(124,"h6",42),e.\u0275\u0275text(125,"View Edit History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(126,"button",43)(127,"span",44),e.\u0275\u0275text(128,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(129,"div",45)(130,"div",36)(131,"table",46)(132,"thead")(133,"th",36),e.\u0275\u0275text(134,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(135,"th",36),e.\u0275\u0275text(136,"Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(137,"th",36),e.\u0275\u0275text(138,"Updated By"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(139,"th",36),e.\u0275\u0275text(140,"Template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(141,"th",36),e.\u0275\u0275text(142,"Cut off date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(143,"th",36),e.\u0275\u0275text(144,"No of Late"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(145,"th",36),e.\u0275\u0275text(146,"Absent"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(147,"th",36),e.\u0275\u0275text(148,"Grace Period"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(149,"th",36),e.\u0275\u0275text(150,"Register Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(151,"th",36),e.\u0275\u0275text(152,"Full day@"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(153,"th",36),e.\u0275\u0275text(154,"Half day@"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(155,"th",36),e.\u0275\u0275text(156,"Open Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(157,"th",36),e.\u0275\u0275text(158,"Close Time"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(159,"th",36),e.\u0275\u0275text(160,"Comp Off"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(161,"th",36),e.\u0275\u0275text(162,"Sandwich Leave"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(163,"tbody"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(164,"div",47)(165,"button",48),e.\u0275\u0275text(166,"Close"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275element(167,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(19),r=e.\u0275\u0275reference(89);e.\u0275\u0275advance(17),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",t.smtpForm),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.smtpForm.controls.smtp_name.hasError("required")&&(t.smtpForm.controls.smtp_name.dirty||t.smtpForm.controls.smtp_name.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.smtpForm.controls.host_address.hasError("required")&&(t.smtpForm.controls.host_address.dirty||t.smtpForm.controls.host_address.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.smtpForm.controls.username.hasError("required")&&(t.smtpForm.controls.username.dirty||t.smtpForm.controls.username.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.smtpForm.controls.password.hasError("required")&&(t.smtpForm.controls.password.dirty||t.smtpForm.controls.password.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.smtpForm.controls.from_email_address.hasError("required")&&(t.smtpForm.controls.from_email_address.dirty||t.smtpForm.controls.from_email_address.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.smtpForm.controls.from_email_address.hasError("email")&&(t.smtpForm.controls.username.dirty||t.smtpForm.controls.username.touched)),e.\u0275\u0275advance(14),e.\u0275\u0275property("ngIf",t.smtpForm.controls.smtp_method.hasError("required")&&(t.smtpForm.controls.smtp_method.dirty||t.smtpForm.controls.smtp_method.touched)),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.smtpForm.controls.port.hasError("required")&&(t.smtpForm.controls.port.dirty||t.smtpForm.controls.port.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",r),e.\u0275\u0275advance(8),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(24),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("dtOptions",t.dtOptionsHistory)}},dependencies:[p.O5,h.yS,C.G,i._Y,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.JL,i.sg,i.u,y,x],encapsulation:2}),o})();const Rp=function(){return{search:!0,placeholder:"Select Reseller"}};let Mp=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.Global=d,this.dtOptions={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.branchMaster=[],this.resellerMaster=[],this.reseller_ids=[],this.subscriptionUserSearchForm=n.group({corporate_id:[null],wage_from_date:[null],reseller_id:[null],wage_to_date:[null],orderby:[null]}),this.editActionId="",this.packageMaster=[],this.planMaster=[],this.statusMaster=[{id:"active",description:"Active"},{id:"inactive",description:"De-active"}],this.sortingMaster=[{id:"asc",description:"Ascending"},{id:"desc",description:"Descending"}],this.holdTypeMaster=[{value:"hold",description:"Hold"},{value:"release",description:"Release"}]}ngOnInit(){this.titleService.setTitle("Subscription User Management - "+d.AppName),this.fetch(),this.fetchMaster();const n=this;$(document).on("click","button.action-btn",function(){if($(this).hasClass("awardcredit")){let t=$(this).attr("action-data");n.initCreditStatusUpdate(t,"credit")}else if($(this).hasClass("deductcredit")){let t=$(this).attr("action-data");n.initCreditStatusUpdate(t,"deduct")}else if($(this).hasClass("suspenduser")){let t=$(this).attr("action-data");n.initUserSuspension(t)}else if($(this).hasClass("holdcredit")){let t=$(this).attr("action-data");n.initUserHoldCredit(t)}})}ngOnDestroy(){$(document).off("click","button.action-btn")}fetchMaster(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{if("success"==n.status){n.masters.reseller&&Array.isArray(n.masters.reseller)&&(this.resellerMaster=[],n.masters.reseller?.forEach(t=>{this.resellerMaster.push({id:t._id,description:t.reseller_name})})),this.planMaster=[];for(const t in n.masters.plans)if(Object.prototype.hasOwnProperty.call(n.masters.plans,t)){const a=n.masters.plans[t];this.planMaster.push({id:a._id,description:a.plan_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){const n=this;this.dtOptions={ajax:(t,a)=>{this.adminService.fetchInvoiceLists({pageno:Math.floor((t.start+t.length)/t.length),perpage:t.length,wage_from_date:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_to_date:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[]}).subscribe(r=>{"success"==r.status?(r.payment_history.docs.forEach(m=>{m.checked=this.isRowChecked(m._id)}),a({recordsTotal:r.payment_history.totalDocs,recordsFiltered:r.payment_history.totalDocs,data:r.payment_history.docs})):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(t,a,r,s){return'<input type="checkbox" '+(1==r.checked?"checked":"")+' id="checkrow-'+s.row+'" data-checkbox-id="'+r._id+'">'},orderable:!1},{render:function(t,a,r,s){return s.settings._iDisplayStart+(s.row+1)},orderable:!1},{render:function(t,a,r,s){return new p.uU("en-US").transform(r?.created_at,"dd/MM/yyyy")},orderable:!1},{render:function(t,a,r,s){return r.inv_id??"N/A"},orderable:!0,name:"inv_id"},{render:function(t,a,r,s){return r.razorpay_payment_id},orderable:!0,name:"razorpay_payment_id"},{render:function(t,a,r,s){return"Razorpay"},orderable:!1,name:"getway"},{render:function(t,a,r,s){return r?.razorpay_order_id},orderable:!1,name:"razorpay_order_id"},{render:function(t,a,r,s){return r?.credit_qty},orderable:!0,name:"credit_qty"},{render:function(t,a,r,s){return r?.credit_amount},orderable:!0,name:"credit_amount"},{render:function(t,a,r,s){return'<span class="text-capitalize">'+(r?.method??"N/A")+"</span>"},orderable:!0,name:"method"},{render:function(t,a,r,s){return'<span class="text-capitalize">'+(r?.status??"N/A")+"</span>"},orderable:!0,name:"status"},{render:function(t,a,r,s){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" id="downloadButton-'+s.row+'" data-placement="top" title="Download" >\n            <div style="width:25px; height:25px;"><i class="fa fa-download"></i></div>\n        </button>'},className:"text-center",orderable:!1}],rowCallback:(t,a,r)=>($("table").on("click","#checkrow-"+r,function(){n.rowCheckBoxChecked(event,a)}),$("table").on("click","#downloadButton-"+r,function(){n.exportsingleData(a?._id)}),t),pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!1,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,scrollX:!0,responsive:!1,language:{searchPlaceholder:"Search...",search:""}}}searchSubmit(n){$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}addCompany(){$(".company-desc").show()}cancelCompanyEntry(){$(".company-desc").hide()}createCompany(n){this.subscriptionCompanyForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createSubscriptionUser({corporate_id:this.subscriptionCompanyForm.value.corporate_id,establishment_name:this.subscriptionCompanyForm.value.establishment_name,userid:this.subscriptionCompanyForm.value.userid,email_id:this.subscriptionCompanyForm.value.email_id,phone_no:this.subscriptionCompanyForm.value.phone_no,plan_id:this.subscriptionCompanyForm.value.plan_id.id,password:this.subscriptionCompanyForm.value.password}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.subscriptionCompanyForm.reset(),this.cancelCompanyEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),$("#my-datatable").dataTable().api().ajax.reload(function(t){},!1)}fetchCompanyUserDetails(n){return new Promise((t,a)=>{this.spinner.show(),this.adminService.fetchCompanyUserDetails({company_id:n}).subscribe(r=>{this.spinner.hide(),"success"==r.status?t(r.company):(this.toastr.error(r.message),t(!1))},r=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),t(!1)})})}initCreditStatusUpdate(n,t){var a=this;return(0,g.Z)(function*(){let r=yield a.fetchCompanyUserDetails(n);r&&(d.resetForm(a.customerCreditForm),a.customerCreditForm.patchValue({type:t,company_id:n,credit_bal:r.credit_stat??0}),$("#creditUpdateModalButton")?.click())})()}initUserSuspension(n){var t=this;return(0,g.Z)(function*(){let a=yield t.fetchCompanyUserDetails(n);if(a){let r="active",s="Are you sure, you want to activate "+a.establishment_name+"?";"active"==a.suspension&&(r="suspended",s="Are you sure, you want to suspend "+a.establishment_name+"?"),_().fire({title:"Please Confirm",text:s,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed",cancelButtonText:"Cancel"}).then(m=>{m.value&&(t.spinner.show(),t.adminService.updateCompanySuspensionStatus({company_id:a._id,update_type:r}).subscribe(c=>{"success"==c.status?(t.toastr.success(c.message),$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):t.toastr.error(c.message),t.spinner.hide()},c=>{t.toastr.error(d.showServerErrorMessage(c)),t.spinner.hide()}))})}})()}updateCompanyCredit(n){if(this.customerCreditForm.valid){switch(this.customerCreditForm.value.type){case"deduct":if(this.customerCreditForm.value.amount>this.customerCreditForm.value.credit_bal)return void this.toastr.error("Insuffiecient wallet balance in company wallet");break;case"credit":break;default:return void this.toastr.error("Invalid operation request received")}n.target.classList.add("btn-loading"),this.adminService.updateCompanyUserCredit({company_id:this.customerCreditForm.value.company_id,update_amount:this.customerCreditForm.value.amount,update_type:this.customerCreditForm.value.type}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),$("#creditUpdateModal").find('[data-dismiss="modal"]').click(),this.toastr.success(t.message)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),this.spinner.hide(),n.target.classList.remove("btn-loading")},t=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),n.target.classList.remove("btn-loading")})}}initUserHoldCredit(n){var t=this;return(0,g.Z)(function*(){let a=yield t.fetchCompanyUserDetails(n);a&&(d.resetForm(t.customerHoldCreditForm),t.customerHoldCreditForm.patchValue({company_id:n,hold_bal:a.hold_credit??0}),$("#creditHoldUpdateModalButton")?.click())})()}updateCompanyHoldCredit(n){if(this.customerHoldCreditForm.valid){switch(this.customerHoldCreditForm.value.type?.value){case"release":if(this.customerHoldCreditForm.value.amount>this.customerHoldCreditForm.value.hold_bal)return void this.toastr.error("Insuffiecient hold credit balance in company wallet");break;case"hold":break;default:return void this.toastr.error("Invalid operation request received")}n.target.classList.add("btn-loading"),this.adminService.updateCompanyUserHoldCredit({company_id:this.customerHoldCreditForm.value.company_id,update_amount:this.customerHoldCreditForm.value.amount,update_type:this.customerHoldCreditForm.value.type?.value??""}).subscribe(t=>{"success"==t.status?($("#my-datatable").dataTable().api().ajax.reload(function(a){},!1),$("#creditHoldUpdateModal").find('[data-dismiss="modal"]').click(),this.toastr.success(t.message)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),this.spinner.hide(),n.target.classList.remove("btn-loading")},t=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),n.target.classList.remove("btn-loading")})}}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}exportsingleData(n){this.adminService.downloadFile("get-payment-history","payment-history",{wage_from_date:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_to_date:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[n],generate:"excel",pageno:1})}exportData(){let n={wage_from_date:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_to_date:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:this.uncheckedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.checkedRowIds,generate:"excel",pageno:1};this.adminService.downloadFile("get-payment-history","payment-history",n)}setReseller(){let n=[];this.subscriptionUserSearchForm.value.reseller_id&&(this.subscriptionUserSearchForm.value.reseller_id.forEach(t=>{n.push(t?.id)}),this.reseller_ids=n)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-invoice"]],decls:84,vars:8,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"mg-b-0"],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"card",2,"border","0px"],[3,"formGroup"],[1,"card-block","pd-0"],[1,"row","row-sm","mg-t-20"],[1,"col-md-6","col-lg-3"],[1,"form-group","mg-b-0"],[1,"d-block"],["type","date","formControlName","wage_from_date",1,"form-control"],["type","date","formControlName","wage_to_date",1,"form-control"],["formControlName","reseller_id",1,"form-control","p-1",2,"height","43px !important",3,"options","multiple","config","change"],[1,"col-md-6","col-lg-3","mg-t-10","mg-lg-t-0"],["type","text","formControlName","corporate_id",1,"form-control","tx-14"],[1,"btn","btn-info","tx-11","tx-spacing-1","tx-uppercase","tx-semibold","tx-mont","pd-y-12","pd-x-30","mg-t-30",3,"click"],[1,"br-section-label"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right",3,"disabled","click"],[1,"mr-1","fa","fa-file",2,"font-size","12px"],[1,"table-wrapper","mt-1"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["type","checkbox",3,"value","change"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Payment History"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Payment History"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Track Gateway/Payment"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(15,"div",8)(16,"div",9)(17,"h6",10),e.\u0275\u0275text(18,"Search User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",11)(20,"form",12)(21,"div",13)(22,"div",14)(23,"div",15)(24,"div",16)(25,"label",17),e.\u0275\u0275text(26,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"div",15)(29,"div",16)(30,"label",17),e.\u0275\u0275text(31,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(32,"input",19),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"div",15)(34,"div",16)(35,"label",17),e.\u0275\u0275text(36,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"ngx-select-dropdown",20),e.\u0275\u0275listener("change",function(){return t.setReseller()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(38,"div",21)(39,"div",16)(40,"label"),e.\u0275\u0275text(41,"Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(42,"input",22),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(43,"button",23),e.\u0275\u0275listener("click",function(r){return t.searchSubmit(r)}),e.\u0275\u0275elementStart(44,"span"),e.\u0275\u0275text(45,"Search"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(46,"div",8)(47,"div",9)(48,"h6",24),e.\u0275\u0275text(49,"Invoice List "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"button",25),e.\u0275\u0275listener("click",function(){return t.exportData()}),e.\u0275\u0275elementStart(51,"span"),e.\u0275\u0275element(52,"i",26),e.\u0275\u0275text(53,"Export"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(54,"div",27)(55,"table",28)(56,"thead")(57,"tr")(58,"th",29)(59,"input",30),e.\u0275\u0275listener("change",function(r){return t.allRowsCheckboxChecked(r)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(60,"th",29),e.\u0275\u0275text(61,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th",29),e.\u0275\u0275text(63,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th",29),e.\u0275\u0275text(65,"Invoice No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"th",29),e.\u0275\u0275text(67,"Transaction No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"th",29),e.\u0275\u0275text(69,"Gateway"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(70,"th",29),e.\u0275\u0275text(71,"Gateway ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"th",29),e.\u0275\u0275text(73,"Inv Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"th",29),e.\u0275\u0275text(75,"Payment Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"th",29),e.\u0275\u0275text(77,"Mode"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"th",29),e.\u0275\u0275text(79,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"th",29),e.\u0275\u0275text(81,"Recipt"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(82,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(83,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(20),e.\u0275\u0275property("formGroup",t.subscriptionUserSearchForm),e.\u0275\u0275advance(17),e.\u0275\u0275property("options",t.resellerMaster)("multiple",!0)("config",e.\u0275\u0275pureFunction0(7,Rp)),e.\u0275\u0275advance(13),e.\u0275\u0275property("disabled",!t.anyRowsChecked()),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.rowCheckedAll))},dependencies:[h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function Op(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td",18)(2,"label",21)(3,"input",22),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.rowCheckBoxChecked(a,r))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(4,"td",18),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",18),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",18),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",18),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",18),e.\u0275\u0275text(14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"td",18),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",18),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"td",18),e.\u0275\u0275text(21),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td",18),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"td",18),e.\u0275\u0275text(25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"td",18),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"td",18),e.\u0275\u0275text(29),e.\u0275\u0275pipe(30,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"td",18),e.\u0275\u0275text(32),e.\u0275\u0275pipe(33,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(34,"td",18),e.\u0275\u0275text(35),e.\u0275\u0275pipe(36,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"td",18),e.\u0275\u0275text(38),e.\u0275\u0275pipe(39,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(40,"td",18),e.\u0275\u0275text(41),e.\u0275\u0275pipe(42,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"td",18),e.\u0275\u0275text(44),e.\u0275\u0275pipe(45,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(46,"td",18),e.\u0275\u0275text(47),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"td",18),e.\u0275\u0275text(49),e.\u0275\u0275pipe(50,"titlecase"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(51,"td",18),e.\u0275\u0275elementStart(52,"td",18)(53,"button",23),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.exportSingleData(r))}),e.\u0275\u0275elementStart(54,"span"),e.\u0275\u0275element(55,"i",24),e.\u0275\u0275text(56,"PDF"),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=l.$implicit,t=e.\u0275\u0275nextContext().$implicit;let a,r,s,m,c,u,f,F;e.\u0275\u0275advance(2),e.\u0275\u0275property("for","checkrow-"+(null==n?null:n.sl_no)),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","checkrow-",null==n?null:n.sl_no,""),e.\u0275\u0275attribute("checked",1==(null==n?null:n.checked)?"checked":null)("data-checkbox-id",null==t?null:t._id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==n?null:n.sl_no,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(8,23,null==n?null:n.created_at,"dd/MM/YYYY")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.inv_id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(a=null==n?null:n.razorpay_order_id)&&void 0!==a?a:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(r=null==n?null:n.razorpay_payment_id)&&void 0!==r?r:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(s=null==n?null:n.credit_qty)&&void 0!==s?s:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(m=e.\u0275\u0275pipeBind2(19,26,null==n?null:n.credit_amount,"1.2-2"))&&void 0!==m?m:"N/A"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.sac_no),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(c=null==n||null==n.payment_details?null:n.payment_details.description)&&void 0!==c?c:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.coupon_code),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==n?null:n.free_credit),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(u=e.\u0275\u0275pipeBind2(30,29,null==n?null:n.gst_amount,"1.2-2"))&&void 0!==u?u:"N/A"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(33,32,null==n?null:n.tds,"1.2-2")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(36,35,null==n?null:n.igst,"1.2-2")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(39,38,null==n?null:n.cgst,"1.2-2")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(42,41,null==n?null:n.sgst,"1.2-2")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null!==(f=e.\u0275\u0275pipeBind2(45,44,null==n?null:n.gst_amount,"1.2-2"))&&void 0!==f?f:"N/A"),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate((null!==(F=null==n?null:n.gst_amount)&&void 0!==F?F:0)+(null==n?null:n.credit_amount)),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(50,47,null==n?null:n.gateway))}}function Np(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Op,57,49,"tr",20),e.\u0275\u0275elementContainerEnd()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",n.credit_purchases)}}function Lp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"table",17)(1,"thead")(2,"tr")(3,"th",18)(4,"input",19),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.allRowsCheckboxChecked(a))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"th",18),e.\u0275\u0275text(6,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"th",18),e.\u0275\u0275text(8,"Inv Dt"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"th",18),e.\u0275\u0275text(10,"Inv No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"th",18),e.\u0275\u0275text(12,"Order Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",18),e.\u0275\u0275text(14,"Transaction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",18),e.\u0275\u0275text(16,"Credit Purchesed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",18),e.\u0275\u0275text(18,"Rate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",18),e.\u0275\u0275text(20,"SAC No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"th",18),e.\u0275\u0275text(22,"Description"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"th",18),e.\u0275\u0275text(24,"Promo Code"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"th",18),e.\u0275\u0275text(26,"Free Credits"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"th",18),e.\u0275\u0275text(28,"Taxable Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",18),e.\u0275\u0275text(30,"TDS"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"th",18),e.\u0275\u0275text(32,"IGST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th",18),e.\u0275\u0275text(34,"CGST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th",18),e.\u0275\u0275text(36,"SGST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"th",18),e.\u0275\u0275text(38,"Total GST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",18),e.\u0275\u0275text(40,"Invoive Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th",18),e.\u0275\u0275text(42,"Gateway"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"th",18),e.\u0275\u0275text(44,"Amoumt Remitted"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(45,"th",18),e.\u0275\u0275text(46,"Download Invoice"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(47,"tbody"),e.\u0275\u0275template(48,Np,2,1,"ng-container",20),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("dtOptions",n.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",n.rowCheckedAll),e.\u0275\u0275advance(44),e.\u0275\u0275property("ngForOf",n.rows)}}function Vp(o,l){if(1&o&&e.\u0275\u0275element(0,"iframe",27),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",null==n.ledgerDetails?null:n.ledgerDetails.file_path,e.\u0275\u0275sanitizeResourceUrl)}}function qp(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"div",18)(1,"table",25)(2,"tr")(3,"td"),e.\u0275\u0275template(4,Vp,1,1,"iframe",26),e.\u0275\u0275elementEnd()()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",""!=(null==n.ledgerDetails?null:n.ledgerDetails.file_path))}}let $p=(()=>{class o{constructor(n,t,a,r,s,m,c,u){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.sanitizer=u,this.Global=d,this.dtOptions={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.filterOptions={},this.resetFilter=new e.EventEmitter,this.rows=[],this.showContent=!1,this.ledgerDetails={}}ngOnInit(){this.dtOptions={processing:!0,ordering:!1,paging:!1,order:[],searching:!1,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,scrollX:!0,responsive:!1,language:{searchPlaceholder:"Search...",search:""}}}ngOnChanges(){this.fetch()}fetch(){let n={pageno:1,wage_date_from:this.filterOptions.wage_from_date??null,wage_date_to:this.filterOptions.wage_to_date??null,corporate_id:this.filterOptions.corporate_id??null,reseller_id:this.filterOptions?.reseller_id?this.filterOptions?.reseller_id:[],unchecked_row_ids:this.filterOptions?.unchecked_row_ids,row_checked_all:this.filterOptions?.row_checked_all?.toString(),checked_row_ids:this.filterOptions?.checked_row_ids};this.adminService.ledgerDetail(n).subscribe(t=>{if("success"==t.status){var a=[];if(a=t.company){let r=1;a.forEach(s=>{s.credit_purchases.forEach(m=>{m.checked=this.isRowChecked(s._id),m.sl_no=r,r++})})}else a=[];this.showContent=!0,$("#my-datatable").dataTable().api().clear(),this.rows=a,$("#my-datatable").dataTable().api().draw()}else this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message)},t=>{this.toastr.error("Internal server error occured. Please try again later.")})}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),this.fetch()}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}exportData(n=""){var t=this;return(0,g.Z)(function*(){let a={pageno:1,wage_date_from:t.filterOptions.wage_from_date??null,wage_date_to:t.filterOptions.wage_to_date??null,corporate_id:t.filterOptions.corporate_id??null,reseller_id:t.filterOptions?.reseller_id?t.filterOptions?.reseller_id:[],unchecked_row_ids:t.uncheckedRowIds,row_checked_all:t.rowCheckedAll.toString(),checked_row_ids:t.checkedRowIds,generate:n};yield t.adminService.downloadFile("get-company-ledgers-details-list","Company-leadgers-details-list",a)})()}exportSingleData(n=""){this.ledgerDetails=n,this.ledgerDetails.file_path=this.sanitizer.bypassSecurityTrustResourceUrl(d.BACKEND_URL+this.ledgerDetails?.file_path),$("#historymmodalbutton").click()}cancellData(){this.resetFilter.emit(!0)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU),e.\u0275\u0275directiveInject(v.H7))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-ledger-detail"]],inputs:{filterOptions:"filterOptions"},outputs:{resetFilter:"resetFilter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:27,vars:5,consts:[["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right","margin-bottom","8px",3,"disabled","click"],[1,"mr-1","fa","fa-file",2,"font-size","12px"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right","margin-bottom","8px",3,"click"],[1,"table-wrapper","mt-1",2,"margin-top","5px"],["class","table display responsive nowrap wd-100p","datatable","","id","my-datatable",3,"dtOptions",4,"ngIf"],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],["class","",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["type","checkbox",3,"value","change"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center",3,"for"],["type","checkbox",1,"mr-2",3,"id","click"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right",3,"click"],[1,"mr-1","fa","fa-file-pdf-o",2,"font-size","12px"],[1,"table","display","responsive","nowrap","wd-100p","employee-table"],["frameBorder","0","style","height: 800px;width:100%;border:none;",3,"src",4,"ngIf"],["frameBorder","0",2,"height","800px","width","100%","border","none",3,"src"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275listener("click",function(){return t.exportData("excel")}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275element(2,"i",1),e.\u0275\u0275text(3,"Export"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"button",0),e.\u0275\u0275listener("click",function(){return t.exportData("pdf")}),e.\u0275\u0275elementStart(5,"span"),e.\u0275\u0275element(6,"i",1),e.\u0275\u0275text(7,"PDF"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"button",2),e.\u0275\u0275listener("click",function(){return t.cancellData()}),e.\u0275\u0275elementStart(9,"span"),e.\u0275\u0275text(10,"Cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"div",3),e.\u0275\u0275template(12,Lp,49,3,"table",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"button",5),e.\u0275\u0275elementStart(14,"div",6)(15,"div",7)(16,"div",8)(17,"div",9),e.\u0275\u0275element(18,"h6",10),e.\u0275\u0275elementStart(19,"button",11)(20,"span",12),e.\u0275\u0275text(21,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(22,"div",13),e.\u0275\u0275template(23,qp,5,1,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",15)(25,"button",16),e.\u0275\u0275text(26,"Close"),e.\u0275\u0275elementEnd()()()()()),2&n&&(e.\u0275\u0275property("disabled",!t.anyRowsChecked()),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!t.anyRowsChecked()),e.\u0275\u0275advance(8),e.\u0275\u0275property("ngIf",t.showContent),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",t.ledgerDetails))},dependencies:[p.sg,p.O5,C.G,p.JJ,p.rS,p.uU]}),o})();const Bp=function(){return{search:!0,placeholder:"Select Reseller"}};function jp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",9)(1,"div",10)(2,"h6",13),e.\u0275\u0275text(3,"Search User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",14)(5,"form",15)(6,"div",16)(7,"div",17)(8,"div",18)(9,"div",19)(10,"label",20),e.\u0275\u0275text(11,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",18)(14,"div",19)(15,"label",20),e.\u0275\u0275text(16,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",22),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",18)(19,"div",19)(20,"label",20),e.\u0275\u0275text(21,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"ngx-select-dropdown",23),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setReseller())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(23,"div",24)(24,"div",19)(25,"label"),e.\u0275\u0275text(26,"Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",25),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"button",26),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.searchSubmit(a))}),e.\u0275\u0275elementStart(29,"span"),e.\u0275\u0275text(30,"Search"),e.\u0275\u0275elementEnd()()()()()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",n.subscriptionUserSearchForm),e.\u0275\u0275advance(17),e.\u0275\u0275property("options",n.resellerMaster)("multiple",!0)("config",e.\u0275\u0275pureFunction0(4,Bp))}}function Up(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.exportData())}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275element(3,"i",28),e.\u0275\u0275text(4,"Bulk Action"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",29)(6,"table",30)(7,"thead")(8,"tr")(9,"th",31)(10,"input",32),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.allRowsCheckboxChecked(a))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(11,"th",31),e.\u0275\u0275text(12,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"th",31),e.\u0275\u0275text(14,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",31),e.\u0275\u0275text(16,"Sub-Seller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",31),e.\u0275\u0275text(18,"Branch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"th",31),e.\u0275\u0275text(20,"Corp Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"th",31),e.\u0275\u0275text(22,"Establishment Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"th",31),e.\u0275\u0275text(24,"Qty"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"th",31),e.\u0275\u0275text(26,"Taxable Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"th",31),e.\u0275\u0275text(28,"Total GST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"th",31),e.\u0275\u0275text(30,"TDS"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"th",31),e.\u0275\u0275text(32,"Inv Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"th",31),e.\u0275\u0275text(34,"Gateway"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"th",31),e.\u0275\u0275text(36,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(37,"tbody"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!n.anyRowsChecked()),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",n.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",n.rowCheckedAll)}}function Hp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"app-ledger-detail",33),e.\u0275\u0275listener("resetFilter",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.resetFilter())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("filterOptions",n.filterOptions)}}let Yp=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.Global=d,this.dtOptions={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.branchMaster=[],this.resellerMaster=[],this.reseller_ids=[],this.filterOptions={},this.bulkAction=!1,this.subscriptionUserSearchForm=n.group({corporate_id:[null],wage_from_date:[null],reseller_id:[null],wage_to_date:[null],orderby:[null]}),this.editActionId="",this.packageMaster=[],this.planMaster=[],this.statusMaster=[{id:"active",description:"Active"},{id:"inactive",description:"De-active"}],this.sortingMaster=[{id:"asc",description:"Ascending"},{id:"desc",description:"Descending"}],this.holdTypeMaster=[{value:"hold",description:"Hold"},{value:"release",description:"Release"}]}ngOnInit(){this.titleService.setTitle("Subscription User Management - "+d.AppName);var n=new Date,t=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0);this.subscriptionUserSearchForm.patchValue({wage_from_date:this.formatDate(t),wage_to_date:this.formatDate(a)}),this.fetch(),this.fetchMaster();const r=this;$(document).on("click","button.action-btn",function(){if($(this).hasClass("awardcredit")){let s=$(this).attr("action-data");r.initCreditStatusUpdate(s,"credit")}else if($(this).hasClass("deductcredit")){let s=$(this).attr("action-data");r.initCreditStatusUpdate(s,"deduct")}else if($(this).hasClass("suspenduser")){let s=$(this).attr("action-data");r.initUserSuspension(s)}else $(this).hasClass("holdcredit")&&$(this).attr("action-data")})}ngOnDestroy(){$(document).off("click","button.action-btn")}fetchMaster(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{if("success"==n.status){n.masters.reseller&&Array.isArray(n.masters.reseller)&&(this.resellerMaster=[],n.masters.reseller?.forEach(t=>{this.resellerMaster.push({id:t._id,description:t.reseller_name})})),this.planMaster=[];for(const t in n.masters.plans)if(Object.prototype.hasOwnProperty.call(n.masters.plans,t)){const a=n.masters.plans[t];this.planMaster.push({id:a._id,description:a.plan_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}fetch(){const n=this;this.dtOptions={ajax:(t,a)=>{this.adminService.fetchLedgerLists({pageno:Math.floor((t.start+t.length)/t.length),perpage:t.length,wage_date_from:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_date_to:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[]}).subscribe(r=>{"success"==r.status?(r.company.docs.forEach(m=>{m.checked=this.isRowChecked(m._id)}),a({recordsTotal:r.company.totalDocs,recordsFiltered:r.company.totalDocs,data:r.company.docs})):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(t,a,r,s){return r?.qty>0?'<input type="checkbox" '+(1==r.checked?"checked":"")+' id="checkrow-'+s.row+'" data-checkbox-id="'+r._id+'">':""},orderable:!1},{render:function(t,a,r,s){return s.settings._iDisplayStart+(s.row+1)},orderable:!1},{render:function(t,a,r,s){return r?.resellers?.reseller_name??"N/A"},orderable:!1,name:"resellers"},{render:function(t,a,r,s){return r?.sub_seller?.reseller_name??"N/A"},orderable:!1,name:"sub_seller"},{render:function(t,a,r,s){return r?.company_details?.company_branch.length>0?r?.company_details?.company_branch[0]?.branch_name:"N/A"},orderable:!1,name:"company_branch"},{render:function(t,a,r,s){return r?.corporate_id??"N/A"},orderable:!1,name:"corporate_id"},{render:function(t,a,r,s){return r?.establishment_name??"N/A"},orderable:!1,name:"establishment_name"},{render:function(t,a,r,s){return r?.qty??"N/A"},orderable:!1,name:"qty"},{render:function(t,a,r,s){return r?.taxable_value??"N/A"},orderable:!1,name:"taxable_value"},{render:function(t,a,r,s){return r?.gst_amount??"N/A"},orderable:!1,name:"gst_amount"},{render:function(t,a,r,s){return r?.tds??"N/A"},orderable:!1,name:"tds"},{render:function(t,a,r,s){return r.invoice_value??"N/A"},orderable:!0,name:"invoice_value"},{render:function(t,a,r,s){return'<span class="text-capitalize">'+r?.gateway+"</span>"},orderable:!1,name:"getway"},{render:function(t,a,r,s){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" id="downloadButton-'+s.row+'" data-placement="top" title="Download" >\n            <div style="width:25px; height:25px;"><i class="fa fa-eye"></i></div>\n        </button>'},className:"text-center",orderable:!1}],rowCallback:(t,a,r)=>($("table").on("click","#checkrow-"+r,function(){n.rowCheckBoxChecked(event,a)}),$("table").on("click","#downloadButton-"+r,function(){n.viewData(a?._id)}),t),pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!1,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,scrollX:!0,responsive:!1,language:{searchPlaceholder:"Search...",search:""}}}searchSubmit(n){$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}addCompany(){$(".company-desc").show()}cancelCompanyEntry(){$(".company-desc").hide()}resetFilter(){this.bulkAction=!1,this.checkedRowIds=[],this.rowCheckedAll=!1,this.uncheckedRowIds=[]}createCompany(n){this.subscriptionCompanyForm.valid&&(n.target.classList.add("btn-loading"),this.adminService.createSubscriptionUser({corporate_id:this.subscriptionCompanyForm.value.corporate_id,establishment_name:this.subscriptionCompanyForm.value.establishment_name,userid:this.subscriptionCompanyForm.value.userid,email_id:this.subscriptionCompanyForm.value.email_id,phone_no:this.subscriptionCompanyForm.value.phone_no,plan_id:this.subscriptionCompanyForm.value.plan_id.id,password:this.subscriptionCompanyForm.value.password}).subscribe(t=>{"success"==t.status?(this.toastr.success(t.message),this.subscriptionCompanyForm.reset(),this.cancelCompanyEntry(),$("#my-datatable").dataTable().api().ajax.reload(function(a){},!1)):this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message),n.target.classList.remove("btn-loading")},t=>{n.target.classList.remove("btn-loading"),this.toastr.error("Internal server error occured. Please try again later.")}))}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),$("#my-datatable").dataTable().api().ajax.reload(function(t){},!1)}fetchCompanyUserDetails(n){return new Promise((t,a)=>{this.spinner.show(),this.adminService.fetchCompanyUserDetails({company_id:n}).subscribe(r=>{this.spinner.hide(),"success"==r.status?t(r.company):(this.toastr.error(r.message),t(!1))},r=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),t(!1)})})}initCreditStatusUpdate(n,t){var a=this;return(0,g.Z)(function*(){let r=yield a.fetchCompanyUserDetails(n);r&&(d.resetForm(a.customerCreditForm),a.customerCreditForm.patchValue({type:t,company_id:n,credit_bal:r.credit_stat??0}),$("#creditUpdateModalButton")?.click())})()}initUserSuspension(n){var t=this;return(0,g.Z)(function*(){let a=yield t.fetchCompanyUserDetails(n);if(a){let r="active",s="Are you sure, you want to activate "+a.establishment_name+"?";"active"==a.suspension&&(r="suspended",s="Are you sure, you want to suspend "+a.establishment_name+"?"),_().fire({title:"Please Confirm",text:s,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, Proceed",cancelButtonText:"Cancel"}).then(m=>{m.value&&(t.spinner.show(),t.adminService.updateCompanySuspensionStatus({company_id:a._id,update_type:r}).subscribe(c=>{"success"==c.status?(t.toastr.success(c.message),$("#my-datatable").dataTable().api().ajax.reload(function(u){},!1)):t.toastr.error(c.message),t.spinner.hide()},c=>{t.toastr.error(d.showServerErrorMessage(c)),t.spinner.hide()}))})}})()}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}viewData(n){this.bulkAction=!0,this.filterOptions={wage_from_date:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_to_date:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:null,unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[n],generate:"",pageno:1}}exportData(){this.bulkAction=!0;let n=new Date,t=n.getFullYear(),a=n.getMonth(),r=new Date(t,a,1),s=new Date(t,a+1,0);this.filterOptions={wage_from_date:this.subscriptionUserSearchForm.value.wage_from_date??r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),wage_to_date:this.subscriptionUserSearchForm.value.wage_to_date??s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:this.uncheckedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.checkedRowIds,generate:"",pageno:1}}setReseller(){let n=[];this.subscriptionUserSearchForm.value.reseller_id&&(this.subscriptionUserSearchForm.value.reseller_id.forEach(t=>{n.push(t?.id)}),this.reseller_ids=n)}formatDate(n){const t=new Date(n);let a=""+(t.getMonth()+1),r=""+t.getDate();const s=t.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[s,a,r].join("-")}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-company-ledger"]],decls:23,vars:3,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"mg-b-0"],["class","br-pagebody pd-x-20 pd-sm-x-30",4,"ngIf"],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label"],[4,"ngIf"],[1,"br-section-label","mb-3"],[1,"card",2,"border","0px"],[3,"formGroup"],[1,"card-block","pd-0"],[1,"row","row-sm","mg-t-20"],[1,"col-md-6","col-lg-3"],[1,"form-group","mg-b-0"],[1,"d-block"],["type","date","formControlName","wage_from_date",1,"form-control"],["type","date","formControlName","wage_to_date",1,"form-control"],["formControlName","reseller_id",1,"form-control",3,"options","multiple","config","change"],[1,"col-md-6","col-lg-3","mg-t-10","mg-lg-t-0"],["type","text","formControlName","corporate_id",1,"form-control","tx-14"],[1,"btn","btn-info","tx-11","tx-spacing-1","tx-uppercase","tx-semibold","tx-mont","pd-y-12","pd-x-30","mg-t-30",3,"click"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right",3,"disabled","click"],[1,"mr-1","fa","fa-file",2,"font-size","12px"],[1,"table-wrapper","mt-1"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["type","checkbox",3,"value","change"],[3,"filterOptions","resetFilter"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Client Ledeger"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Client Ledeger Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Client transaction ledger"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,jp,31,5,"div",8),e.\u0275\u0275elementStart(16,"div",9)(17,"div",10)(18,"h6",11),e.\u0275\u0275text(19,"Client Ledger List "),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,Up,38,3,"ng-container",12),e.\u0275\u0275template(21,Hp,2,1,"ng-container",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(22,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",!t.bulkAction),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",!t.bulkAction),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.bulkAction))},dependencies:[p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x,$p]}),o})();var ne=k(5439);function Gp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr")(1,"td",35)(2,"label",38)(3,"input",39),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext().$implicit,s=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(s.rowCheckBoxChecked(a,r))}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(4,"td",35),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",35),e.\u0275\u0275text(7),e.\u0275\u0275pipe(8,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td",35),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td",35),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"td",35),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"td",35),e.\u0275\u0275text(17),e.\u0275\u0275pipe(18,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"td",35),e.\u0275\u0275text(20),e.\u0275\u0275pipe(21,"number"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"td",35)(23,"button",40),e.\u0275\u0275listener("click",function(){const r=e.\u0275\u0275restoreView(n).$implicit,s=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(s.viewData(r))}),e.\u0275\u0275elementStart(24,"div",41),e.\u0275\u0275element(25,"i",42),e.\u0275\u0275elementEnd()()()()}if(2&o){const n=l.$implicit,t=e.\u0275\u0275nextContext().$implicit;let a,r,s,m;e.\u0275\u0275advance(2),e.\u0275\u0275property("for","checkrow-"+(null==n?null:n.sl_no)),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate1("id","checkrow-",null==n?null:n.sl_no,""),e.\u0275\u0275attribute("checked",1==(null==n?null:n.checked)?"checked":null)("data-checkbox-id",null==t?null:t._id),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",null==n?null:n.sl_no,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(8,11,null==n?null:n.created_at,"dd/MM/YYYY")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null==n?null:n.particular),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(a=null==n?null:n.inv_id)&&void 0!==a?a:"N/A"),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(r=e.\u0275\u0275pipeBind2(15,14,null==n?null:n.credited_amnt,"1.2-2"))&&void 0!==r?r:""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null!==(s=e.\u0275\u0275pipeBind2(18,17,null==n?null:n.deduct_amnt,"1.2-2"))&&void 0!==s?s:""),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(null!==(m=e.\u0275\u0275pipeBind2(21,20,null==n?null:n.credit_balance,"1.2-2"))&&void 0!==m?m:"")}}function Jp(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Gp,26,23,"tr",37),e.\u0275\u0275elementContainerEnd()),2&o){const n=l.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",null==n?null:n.company_credit_history_logs)}}function zp(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th",35)(5,"input",36),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.allRowsCheckboxChecked(a))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"th",35),e.\u0275\u0275text(7,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"th",35),e.\u0275\u0275text(9,"Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"th",35),e.\u0275\u0275text(11,"Particulars"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"th",35),e.\u0275\u0275elementStart(13,"th",35),e.\u0275\u0275text(14,"Addition"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"th",35),e.\u0275\u0275text(16,"Deduction"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"th",35),e.\u0275\u0275text(18,"Balance"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"th",28),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(20,"tbody"),e.\u0275\u0275template(21,Jp,2,1,"ng-container",37),e.\u0275\u0275elementEnd()()()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("dtOptions",n.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",n.rowCheckedAll),e.\u0275\u0275attribute("checked",1==n.rowCheckedAll?"checked":null),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",n.rows)}}function Wp(o,l){if(1&o&&e.\u0275\u0275element(0,"iframe",44),2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",null==n.creditDetails?null:n.creditDetails.file_path,e.\u0275\u0275sanitizeResourceUrl)}}function Qp(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,Wp,1,1,"iframe",43),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",""!=(null==n.creditDetails?null:n.creditDetails.file_path))}}function Zp(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"tr"),e.\u0275\u0275element(2,"td")(3,"td"),e.\u0275\u0275elementStart(4,"td"),e.\u0275\u0275text(5,"Credits"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"tr")(7,"td"),e.\u0275\u0275text(8,"Plan Rental"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"td"),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"tr")(14,"td"),e.\u0275\u0275text(15,"Package"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"td")(17,"td"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(18,"tr")(19,"td"),e.\u0275\u0275text(20,"Free Employees"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"td"),e.\u0275\u0275text(22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"td"),e.\u0275\u0275text(24,"---"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(25,"tr")(26,"td"),e.\u0275\u0275text(27,"Free Sub Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"td"),e.\u0275\u0275text(29),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td"),e.\u0275\u0275text(31,"---"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(32,"tr")(33,"td"),e.\u0275\u0275text(34,"Additional Employess"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"td"),e.\u0275\u0275text(36),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(37,"td"),e.\u0275\u0275text(38),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(39,"tr")(40,"td"),e.\u0275\u0275text(41,"Additional Sub-Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(42,"td"),e.\u0275\u0275text(43),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(44,"td"),e.\u0275\u0275text(45),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext();let t,a,r;e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(null==n.creditDetails?null:n.creditDetails.plan),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(t=null==n.creditDetails?null:n.creditDetails.credit_balance)&&void 0!==t?t:0),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(null==n.creditDetails?null:n.creditDetails.total_free_employee),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==n.creditDetails?null:n.creditDetails.total_free_staff),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(null==n.creditDetails?null:n.creditDetails.total_additional_employee),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(a=null==n.creditDetails?null:n.creditDetails.total_employee_cost)&&void 0!==a?a:0),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(null==n.creditDetails?null:n.creditDetails.total_additional_staff),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null!==(r=null==n.creditDetails?null:n.creditDetails.total_staff_cost)&&void 0!==r?r:0)}}let Kp=(()=>{class o{constructor(n,t,a,r,s,m,c,u){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.sanitizer=u,this.Global=d,this.dtOptions={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.filterOptions={},this.resetFilter=new e.EventEmitter,this.rows=[],this.showContent=!1,this.creditDetails={},this.subscriptionUserSearchForm=n.group({wage_to_date:[null],wage_from_date:[null]})}ngOnInit(){this.dtOptions={processing:!0,ordering:!1,paging:!1,order:[],searching:!1,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,scrollX:!0,responsive:!1,language:{searchPlaceholder:"Search...",search:""}}}ngOnChanges(){this.subscriptionUserSearchForm.patchValue({wage_from_date:this.filterOptions?.wage_from_date,wage_to_date:this.filterOptions?.wage_to_date}),this.fetch()}fetch(){let n=new Date,t=n.getFullYear(),a=n.getMonth();this.showContent=!1;let r={pageno:1,wage_month_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getMonth()+1:a,wage_year_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getFullYear():t,wage_month_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getMonth()+1:a,wage_year_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getFullYear():t,corporate_id:this.filterOptions?.corporate_id??null,reseller_id:this.filterOptions?.reseller_id?this.filterOptions?.reseller_id:[],unchecked_row_ids:this.filterOptions?.unchecked_row_ids,row_checked_all:this.filterOptions?.row_checked_all,checked_row_ids:this.filterOptions?.checked_row_ids};this.adminService.fetchCreditUsageView(r).subscribe(s=>{if("success"==s.status){var m=[];let c=1;(m=s.company)?m.forEach(u=>{u?.company_credit_history_logs.forEach(f=>{let T,re,oe,F=f.type;"consumed"==F&&(F="Consumed"),"credit_coupon"==F&&(F="Promo"),"credit"==F&&(F="Purchase"),f.particular=F,("credit"==f.type||"credit_coupon"==f.type)&&(T=f?.details?.inv_id),"consumed"==f?.type&&(T=d.monthMaster.find(Su=>Su.index==f?.details?.wage_month)?.sf+"-"+f?.details?.wage_year),f.inv_id=T,("credit"==f.type||"credit_coupon"==f?.type)&&(re=f?.details?.credit_amount),f.credited_amnt=re??"","consumed"==f?.type&&(oe=f?.balance),f.deduct_amnt=oe??"",f.sl_no=c,f.checked=this.isRowChecked(u._id),c++})}):m=[],$("#my-datatable").dataTable().api().clear(),this.rows=m,$("#my-datatable").dataTable().api().draw(),this.showContent=!0}else this.toastr.error("val_err"==s.status?d.showValidationMessage(s.val_msg):s.message)},s=>{this.toastr.error("Internal server error occured. Please try again later.")})}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),this.fetch()}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}exportData(){let n=new Date,t=n.getFullYear(),a=n.getMonth(),r={pageno:1,wage_month_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getMonth()+1:a,wage_year_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getFullYear():t,wage_month_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getMonth()+1:a,wage_year_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getFullYear():t,corporate_id:this.filterOptions?.corporate_id??null,reseller_id:this.filterOptions?.reseller_id?this.filterOptions?.reseller_id:[],unchecked_row_ids:this.uncheckedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.checkedRowIds,generate:"excel"};this.adminService.downloadFile("get-company-credit-usage-details-list","Company-credit-usage-details-list",r)}viewData(n={}){this.creditDetails={total_free_employee:n?.details?.total_free_employee??"",total_additional_employee:n?.details?.total_additional_employee??"",total_free_staff:n?.details?.total_free_staff??"",total_additional_staff:n?.details?.total_additional_staff??"",plan:n?.details?.plan?.plan_name??"",type:n?.type,file_path:n?.details?.file_path?this.sanitizer.bypassSecurityTrustResourceUrl(d.BACKEND_URL+n?.details?.file_path):"",total_employee_cost:n?.details?.total_employee_cost,total_staff_cost:n?.details?.total_staff_cost,credit_balance:n?.details?.credit_balance},$("#historymmodalbutton").click()}cancellData(){this.resetFilter.emit(!0)}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU),e.\u0275\u0275directiveInject(v.H7))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-credit-usage-detail"]],inputs:{filterOptions:"filterOptions"},outputs:{resetFilter:"resetFilter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:51,vars:6,consts:[[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"card",2,"border","0px"],[3,"formGroup"],[1,"card-block","pd-0"],[1,"row","row-sm","mg-t-20"],[1,"col-md-6","col-lg-3"],[1,"form-group","mg-b-0"],[1,"d-block"],["type","month","formControlName","wage_from_date",1,"form-control"],["type","month","formControlName","wage_to_date",1,"form-control"],[1,"btn","btn-info","tx-11","tx-spacing-1","tx-uppercase","tx-semibold","tx-mont","pd-y-12","pd-x-30","mg-t-30",3,"click"],[1,"br-section-label"],[2,"float","right"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"margin-bottom","5px",3,"disabled","click"],[1,"mr-1","fa","fa-file",2,"font-size","12px"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"margin-bottom","5px",3,"click"],["class","table-wrapper mt-1",4,"ngIf"],["id","historymmodalbutton","data-toggle","modal","data-target","#historymodal",3,"hidden"],["id","historymodal","tabindex","-1",1,"modal","fade","effect-slide-in-right"],["role","document",1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-content","tx-size-sm"],[1,"modal-header","pd-x-20"],[1,"tx-14","mg-b-0","tx-uppercase","tx-inverse","tx-bold"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body","pd-20"],[1,""],[1,"table","display","responsive","nowrap","wd-100p","employee-table"],[4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","text-uppercase","btn-secondary","tx-size-xs"],[1,"table-wrapper","mt-1"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"text-center"],["type","checkbox",3,"value","change"],[4,"ngFor","ngForOf"],[1,"align-items-center",3,"for"],["type","checkbox",1,"mr-2",3,"id","click"],["data-toggle","tooltip","data-placement","top","title","View",1,"btn","btn-primary","btn-icon","mx-1",3,"click"],[2,"width","25px","height","25px"],["aria-hidden","true",1,"fa","fa-eye"],["frameBorder","0","style","height: 800px;width:100%;border:none;",3,"src",4,"ngIf"],["frameBorder","0",2,"height","800px","width","100%","border","none",3,"src"]],template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"h6",2),e.\u0275\u0275text(3,"Search User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",3)(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),e.\u0275\u0275text(11,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",10),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"div",7)(14,"div",8)(15,"label",9),e.\u0275\u0275text(16,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",11),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(18,"button",12),e.\u0275\u0275listener("click",function(){return t.fetch()}),e.\u0275\u0275elementStart(19,"span"),e.\u0275\u0275text(20,"Search"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(21,"div",0)(22,"div",1)(23,"h6",13),e.\u0275\u0275text(24,"Credit Usage "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"div",14)(26,"button",15),e.\u0275\u0275listener("click",function(){return t.exportData()}),e.\u0275\u0275elementStart(27,"span"),e.\u0275\u0275element(28,"i",16),e.\u0275\u0275text(29,"Export"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(30,"button",17),e.\u0275\u0275listener("click",function(){return t.cancellData()}),e.\u0275\u0275elementStart(31,"span"),e.\u0275\u0275text(32,"Cancel"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(33,zp,22,4,"div",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275element(34,"button",19),e.\u0275\u0275elementStart(35,"div",20)(36,"div",21)(37,"div",22)(38,"div",23),e.\u0275\u0275element(39,"h6",24),e.\u0275\u0275elementStart(40,"button",25)(41,"span",26),e.\u0275\u0275text(42,"\xd7"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(43,"div",27)(44,"div",28)(45,"table",29),e.\u0275\u0275template(46,Qp,2,1,"ng-container",30),e.\u0275\u0275template(47,Zp,46,8,"ng-container",30),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(48,"div",31)(49,"button",32),e.\u0275\u0275text(50,"Close"),e.\u0275\u0275elementEnd()()()()()),2&n&&(e.\u0275\u0275advance(5),e.\u0275\u0275property("formGroup",t.subscriptionUserSearchForm),e.\u0275\u0275advance(21),e.\u0275\u0275property("disabled",!t.anyRowsChecked()),e.\u0275\u0275advance(7),e.\u0275\u0275property("ngIf",t.showContent),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",!0),e.\u0275\u0275advance(12),e.\u0275\u0275property("ngIf","credit_coupon"==(null==t.creditDetails?null:t.creditDetails.type)||"credit"==(null==t.creditDetails?null:t.creditDetails.type)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf","consumed"==(null==t.creditDetails?null:t.creditDetails.type)))},dependencies:[p.sg,p.O5,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,p.JJ,p.uU]}),o})();const Xp=function(){return{search:!0,placeholder:"Select Reseller"}};function eu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",10)(2,"div",11)(3,"h6",12),e.\u0275\u0275text(4,"Search User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",13)(6,"form",14)(7,"div",15)(8,"div",16)(9,"div",17)(10,"div",18)(11,"label",19),e.\u0275\u0275text(12,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"input",20),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"div",17)(15,"div",18)(16,"label",19),e.\u0275\u0275text(17,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(18,"input",21),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(19,"div",17)(20,"div",18)(21,"label",19),e.\u0275\u0275text(22,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"ngx-select-dropdown",22),e.\u0275\u0275listener("change",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.setReseller())}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"div",23)(25,"div",18)(26,"label"),e.\u0275\u0275text(27,"Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",24),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(29,"button",25),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.searchSubmit(a))}),e.\u0275\u0275elementStart(30,"span"),e.\u0275\u0275text(31,"Search"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(32,"div",10)(33,"div",11)(34,"h6",26),e.\u0275\u0275text(35,"Credit Usage "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.viewAll())}),e.\u0275\u0275elementStart(37,"span"),e.\u0275\u0275element(38,"i",28),e.\u0275\u0275text(39,"Bulk Action"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(40,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.exportData())}),e.\u0275\u0275elementStart(41,"span"),e.\u0275\u0275element(42,"i",28),e.\u0275\u0275text(43,"Export"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(44,"div",29)(45,"table",30)(46,"thead")(47,"tr")(48,"th",31)(49,"input",32),e.\u0275\u0275listener("change",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.allRowsCheckboxChecked(a))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(50,"th",31),e.\u0275\u0275text(51,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"th",31),e.\u0275\u0275text(53,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"th",31),e.\u0275\u0275text(55,"Sub-Seller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"th",31),e.\u0275\u0275text(57,"Branch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"th",31),e.\u0275\u0275text(59,"Corp Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"th",31),e.\u0275\u0275text(61,"Establishment Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th",31),e.\u0275\u0275text(63,"Address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th",31),e.\u0275\u0275text(65,"Contact Person"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"th",31),e.\u0275\u0275text(67,"Contact No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"th",31),e.\u0275\u0275text(69,"Plan"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(70,"th",31),e.\u0275\u0275text(71,"Free Empl"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"th",31),e.\u0275\u0275text(73,"Active Empl"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"th",31),e.\u0275\u0275text(75,"Difference"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"th",31),e.\u0275\u0275text(77,"Free Sub Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"th",31),e.\u0275\u0275text(79,"Active Sub Admin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"th",31),e.\u0275\u0275text(81,"Difference"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"th",31),e.\u0275\u0275text(83,"Credit O/B"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"th",31),e.\u0275\u0275text(85,"Credit Consumed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"th",31),e.\u0275\u0275text(87,"Hold Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",31),e.\u0275\u0275text(89,"Deducted Credit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",31),e.\u0275\u0275text(91,"Credit Purchesed"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th",31),e.\u0275\u0275text(93,"Available Credit C/B"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th",31),e.\u0275\u0275text(95,"Credit C/B"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th"),e.\u0275\u0275text(97,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(98,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(6),e.\u0275\u0275property("formGroup",n.subscriptionUserSearchForm),e.\u0275\u0275advance(17),e.\u0275\u0275property("options",n.resellerMaster)("multiple",!0)("config",e.\u0275\u0275pureFunction0(8,Xp)),e.\u0275\u0275advance(13),e.\u0275\u0275property("disabled",!n.anyRowsChecked()),e.\u0275\u0275advance(4),e.\u0275\u0275property("disabled",!n.anyRowsChecked()),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",n.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",n.rowCheckedAll)}}function tu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-credit-usage-detail",33),e.\u0275\u0275listener("resetFilter",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(a.resetFilter())}),e.\u0275\u0275elementEnd()}if(2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("filterOptions",n.filterOptions)}}let nu=(()=>{class o{constructor(n,t,a,r,s,m,c){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.Global=d,this.dtOptions={},this.dtOptionsHistory={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.branchMaster=[],this.resellerMaster=[],this.reseller_ids=[],this.filterOptions={},this.bulkAction=!1,this.subscriptionUserSearchForm=n.group({corporate_id:[null],wage_from_date:[null],reseller_id:[null],wage_to_date:[null],orderby:[null]})}ngOnInit(){this.subscriptionUserSearchForm.patchValue({wage_from_date:ne().format("YYYY-MM"),wage_to_date:ne().format("YYYY-MM")}),this.fetchMaster(),this.fetch()}fetch(){const n=this;let t=new Date,a=t.getFullYear(),r=t.getMonth();this.dtOptions={ajax:(s,m)=>{this.adminService.fetchCreditUsage({pageno:Math.floor((s.start+s.length)/s.length),perpage:s.length,wage_month_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getMonth()+1:r,wage_year_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getFullYear():a,wage_month_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getMonth()+1:r,wage_year_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getFullYear():a,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[]}).subscribe(c=>{"success"==c.status?(c.company.docs.forEach(f=>{f.checked=this.isRowChecked(f._id)}),m({recordsTotal:c.company.totalDocs,recordsFiltered:c.company.totalDocs,data:c.company.docs})):this.toastr.error(c.message)},c=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(s,m,c,u){return'<input type="checkbox" '+(1==c.checked?"checked":"")+' id="checkrow-'+u.row+'" data-checkbox-id="'+c._id+'">'},orderable:!1,className:"text-center"},{render:function(s,m,c,u){return u.settings._iDisplayStart+(u.row+1)},orderable:!1,className:"text-center"},{render:function(s,m,c,u){return c?.resellers?.reseller_name??"N/A"},orderable:!1,name:"resellers",className:"text-center"},{render:function(s,m,c,u){return c?.sub_seller?.reseller_name??"N/A"},orderable:!1,name:"sub_seller",className:"text-center"},{render:function(s,m,c,u){return c?.company_details?.company_branch.length>0?c?.company_details?.company_branch[0]?.branch_name:"N/A"},orderable:!1,name:"company_branch",className:"text-center"},{render:function(s,m,c,u){return c?.corporate_id??"N/A"},orderable:!1,name:"corporate_id",className:"text-center"},{render:function(s,m,c,u){return c?.establishment_name??"N/A"},orderable:!1,name:"establishment_name",className:"text-center"},{render:function(s,m,c,u){return(c?.company_details?.reg_office_address?.street_name??"")+" "+(c?.company_details?.reg_office_address?.locality??"")+" "+(c?.company_details?.reg_office_address?.district_name??"N/A")+" "+(c?.company_details?.reg_office_address?.pin_code??"")+" "+(c?.company_details?.reg_office_address?.state??"")??"N/A"},orderable:!1,name:"company_details"},{render:function(s,m,c,u){return c?.company_details?.company_branch.length>0?c?.company_details?.company_branch[0]?.branch_contact_person:"N/A"},orderable:!1,name:"company_branch"},{render:function(s,m,c,u){return c?.company_details?.company_branch.length>0?c?.company_details?.company_branch[0]?.contact_person_number:"N/A"},orderable:!1,name:"company_branch"},{render:function(s,m,c,u){return c?.plan?.plan_name??"N/A"},orderable:!1,name:"plan",className:"text-center"},{render:function(s,m,c,u){return c?.plan?.free_emp_no??"N/A"},orderable:!0,name:"plan",className:"text-center"},{render:function(s,m,c,u){return c?.active_employee},orderable:!1,name:"active_employee",className:"text-center"},{render:function(s,m,c,u){return c?.emp_difference??"N/A"},orderable:!1,name:"emp_difference",className:"text-center"},{render:function(s,m,c,u){return c?.free_sub_admin??"N/A"},orderable:!1,name:"free_sub_admin",className:"text-center"},{render:function(s,m,c,u){return c?.active_sub_admin??"N/A"},orderable:!1,name:"active_sub_admin",className:"text-center"},{render:function(s,m,c,u){return c?.sub_admin_difference??"N/A"},orderable:!1,name:"sub_admin_difference",className:"text-center"},{render:function(s,m,c,u){return c?.credit_o_b??"N/A"},orderable:!1,name:"credit_o_b",className:"text-center"},{render:function(s,m,c,u){return c?.credit_consumed??"N/A"},orderable:!1,name:"credit_consumed",className:"text-center"},{render:function(s,m,c,u){return c?.hold_credit??"N/A"},orderable:!1,name:"hold_credit",className:"text-center"},{render:function(s,m,c,u){return c?.deducted_credit??"N/A"},orderable:!1,name:"deducted_credit",className:"text-center"},{render:function(s,m,c,u){return c?.credit_purchesed??"N/A"},orderable:!1,name:"credit_purchesed",className:"text-center"},{render:function(s,m,c,u){return c?.available_credit_c_b??"N/A"},orderable:!1,name:"available_credit_c_b",className:"text-center"},{render:function(s,m,c,u){return c?.credit_c_b??"N/A"},orderable:!1,name:"credit_c_b",className:"text-center"},{render:function(s,m,c,u){return'<a  href=\'javascript:void(0)\'>\n            <button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" id="downloadButton-'+u.row+'" data-placement="top" title="View" >\n            <div style="width:25px; height:25px;"><i class="fa fa-eye"></i></div>\n            </button></a>'},className:"text-center",orderable:!1}],rowCallback:(s,m,c)=>($("table").on("click","#checkrow-"+c,function(){n.rowCheckBoxChecked(event,m)}),$("table").on("click","#downloadButton-"+c,function(){n.viewData(m?._id)}),s),pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!1,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,scrollX:!0,responsive:!1,language:{searchPlaceholder:"Search...",search:""}}}searchSubmit(n){$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),$("#my-datatable").dataTable().api().ajax.reload(function(t){},!1)}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}fetchCompanyUserDetails(n){return new Promise((t,a)=>{this.spinner.show(),this.adminService.fetchCompanyUserDetails({company_id:n}).subscribe(r=>{this.spinner.hide(),"success"==r.status?t(r.company):(this.toastr.error(r.message),t(!1))},r=>{this.spinner.hide(),this.toastr.error("Internal server error occured. Please try again later."),t(!1)})})}viewData(n){this.bulkAction=!0,this.filterOptions={pageno:1,wage_from_date:this.subscriptionUserSearchForm?.value?.wage_from_date,wage_to_date:this.subscriptionUserSearchForm?.value?.wage_to_date,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[n]}}setReseller(){let n=[];this.subscriptionUserSearchForm.value.reseller_id&&(this.subscriptionUserSearchForm.value.reseller_id.forEach(t=>{n.push(t?.id)}),this.reseller_ids=n)}fetchMaster(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{if("success"==n.status){n.masters.reseller&&Array.isArray(n.masters.reseller)&&(this.resellerMaster=[],n.masters.reseller?.forEach(t=>{this.resellerMaster.push({id:t._id,description:t.reseller_name})})),this.planMaster=[];for(const t in n.masters.plans)if(Object.prototype.hasOwnProperty.call(n.masters.plans,t)){const a=n.masters.plans[t];this.planMaster.push({id:a._id,description:a.plan_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}exportData(){let n=new Date,t=n.getFullYear(),a=n.getMonth();this.spinner.show(),this.adminService.downloadFile("get-company-credit-usage-list","Company-credit-usage-list",{pageno:1,wage_month_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getMonth()+1:a,wage_year_from:this.subscriptionUserSearchForm?.value?.wage_from_date?new Date(this.subscriptionUserSearchForm?.value?.wage_from_date).getFullYear():t,wage_month_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getMonth()+1:a,wage_year_to:this.subscriptionUserSearchForm?.value?.wage_to_date?new Date(this.subscriptionUserSearchForm?.value?.wage_to_date).getFullYear():t,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:this.uncheckedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.checkedRowIds,generate:"excel"}),this.spinner.hide()}viewAll(){this.bulkAction=!0,this.filterOptions={pageno:1,wage_from_date:this.subscriptionUserSearchForm?.value?.wage_from_date,wage_to_date:this.subscriptionUserSearchForm?.value?.wage_to_date,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:this.uncheckedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.checkedRowIds}}resetFilter(){this.checkedRowIds=[],this.uncheckedRowIds=[],this.rowCheckedAll=!1,this.bulkAction=!1}formatDate(n){const t=new Date(n);let a=""+(t.getMonth()+1),r=""+t.getDate();const s=t.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[s,a,r].join("-")}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-credit-usage"]],decls:19,vars:2,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"mg-b-0"],[4,"ngIf","ngIfElse"],["detail_data",""],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"card",2,"border","0px"],[3,"formGroup"],[1,"card-block","pd-0"],[1,"row","row-sm","mg-t-20"],[1,"col-md-6","col-lg-3"],[1,"form-group","mg-b-0"],[1,"d-block"],["type","month","formControlName","wage_from_date",1,"form-control"],["type","month","formControlName","wage_to_date",1,"form-control"],["formControlName","reseller_id",1,"form-control",3,"options","multiple","config","change"],[1,"col-md-6","col-lg-3","mg-t-10","mg-lg-t-0"],["type","text","formControlName","corporate_id",1,"form-control","tx-14"],[1,"btn","btn-info","tx-11","tx-spacing-1","tx-uppercase","tx-semibold","tx-mont","pd-y-12","pd-x-30","mg-t-30",3,"click"],[1,"br-section-label"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right",3,"disabled","click"],[1,"mr-1","fa","fa-file",2,"font-size","12px"],[1,"table-wrapper","mt-1"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["type","checkbox",3,"value","change"],[3,"filterOptions","resetFilter"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Credit Usage"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Credit Usage Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"p",7),e.\u0275\u0275text(14,"Track credit usage"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(15,eu,99,9,"ng-container",8),e.\u0275\u0275template(16,tu,1,1,"ng-template",null,9,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275element(18,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(17);e.\u0275\u0275advance(15),e.\u0275\u0275property("ngIf",!t.bulkAction)("ngIfElse",a)}},dependencies:[p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x,Kp]}),o})();const au=function(){return{search:!0,placeholder:"Select Reseller"}};let ru=(()=>{class o{constructor(n,t,a,r,s,m,c,u){this.formBuilder=n,this.titleService=t,this.toastr=a,this.router=r,this.adminService=s,this.spinner=m,this.datePipe=c,this.decimalPipe=u,this.Global=d,this.dtOptions={},this.dtOptionsHistory={},this.rowCheckedAll=!1,this.checkedRowIds=[],this.uncheckedRowIds=[],this.branchMaster=[],this.resellerMaster=[],this.reseller_ids=[],this.filterOptions={},this.bulkAction=!1,this.subscriptionUserSearchForm=n.group({corporate_id:[null],wage_from_date:[null],reseller_id:[null],wage_to_date:[null],orderby:[null]})}ngOnInit(){var n=new Date,t=new Date(n.getFullYear(),n.getMonth(),1),a=new Date(n.getFullYear(),n.getMonth()+1,0);this.subscriptionUserSearchForm.patchValue({wage_from_date:this.formatDate(t),wage_to_date:this.formatDate(a)}),this.fetchMaster(),this.fetch()}fetch(){const n=this;this.dtOptions={ajax:(t,a)=>{this.adminService.fetchSalesLedgerLists({pageno:Math.floor((t.start+t.length)/t.length),perpage:t.length,wage_date_from:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_date_to:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:[],row_checked_all:"false",checked_row_ids:[]}).subscribe(r=>{"success"==r.status?(r.company.docs.forEach(m=>{m.checked=this.isRowChecked(m._id)}),a({recordsTotal:r.company.totalDocs,recordsFiltered:r.company.totalDocs,data:r.company.docs})):this.toastr.error(r.message)},r=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(t,a,r,s){return'<input type="checkbox" '+(1==r.checked?"checked":"")+' id="checkrow-'+s.row+'" data-checkbox-id="'+r._id+'">'},orderable:!1,className:"text-center"},{render:function(t,a,r,s){return s.settings._iDisplayStart+(s.row+1)},orderable:!1,className:"text-center"},{render:function(t,a,r,s){return r?.resellers?.reseller_name??"N/A"},orderable:!1,name:"resellers",className:"text-center"},{render:function(t,a,r,s){return r?.sub_seller?.reseller_name??"N/A"},orderable:!1,name:"sub_seller",className:"text-center"},{render:function(t,a,r,s){return r?.company_details?.company_branch.length>0?r?.company_details?.company_branch[0]?.branch_name:"N/A"},orderable:!1,name:"company_branch",className:"text-center"},{render:function(t,a,r,s){return r?.corporate_id??"N/A"},orderable:!1,name:"corporate_id",className:"text-center"},{render:function(t,a,r,s){return r?.establishment_name??"N/A"},orderable:!1,name:"establishment_name",className:"text-center"},{render:function(t,a,r,s){return(r?.company_details?.reg_office_address?.street_name??"")+" "+(r?.company_details?.reg_office_address?.locality??"")+" "+(r?.company_details?.reg_office_address?.district_name??"N/A")+" "+(r?.company_details?.reg_office_address?.pin_code??"")+" "+(r?.company_details?.reg_office_address?.state??"")??"N/A"},orderable:!1,name:"company_details"},{render:function(t,a,r,s){return r?.company_details?.company_branch.length>0?r?.company_details?.company_branch[0]?.branch_contact_person:"N/A"},orderable:!1,name:"company_branch"},{render:function(t,a,r,s){return r?.company_details?.company_branch.length>0?r?.company_details?.company_branch[0]?.contact_person_number:"N/A"},orderable:!1,name:"company_branch"},{render:function(t,a,r,s){return r?.email_id??"N/A"},orderable:!1,name:"company_branch"},{render:function(t,a,r,s){return r?.company_details?.reg_office_address?.state??"N/A"},orderable:!1,name:"company_details"},{render:function(t,a,r,s){return r?.company_details?.establishment?.gst_no??"N/A"},orderable:!1,name:"gst_no",className:"text-center"},{render:function(t,a,r,s){return r?.company_details?.establishment?.pan_numberc??"N/A"},orderable:!0,name:"pan_numberc",className:"text-center"},{render:function(t,a,r,s){return r?.qty??"N/A"},orderable:!1,name:"qty",className:"text-center"},{render:function(t,a,r,s){return r?.taxable_value??"N/A"},orderable:!1,name:"taxable_value",className:"text-center"},{render:function(t,a,r,s){return n.decimalPipe.transform(r?.igst,"1.2-2")??"N/A"},orderable:!1,name:"igst",className:"text-center"},{render:function(t,a,r,s){return n.decimalPipe.transform(r?.cgst,"1.2-2")??"N/A"},orderable:!1,name:"cgst",className:"text-center"},{render:function(t,a,r,s){return n.decimalPipe.transform(r?.sgst,"1.2-2")??"N/A"},orderable:!1,name:"sgst",className:"text-center"},{render:function(t,a,r,s){return n.decimalPipe.transform(r?.total_gst,"1.2-2")??"N/A"},orderable:!1,name:"total_gst",className:"text-center"},{render:function(t,a,r,s){return n.decimalPipe.transform(r?.tds,"1.2-2")??"N/A"},orderable:!1,name:"tds",className:"text-center"},{render:function(t,a,r,s){return n.decimalPipe.transform(r?.inv_value,"1.2-2")},orderable:!1,name:"inv_value",className:"text-center"},{render:function(t,a,r,s){return r?.credit_purchases?'<a target="_blank" href=\''+d.BACKEND_URL+"/"+r?.credit_purchases[0]?.file_path+'\'>\n                <button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" id="downloadButton-'+s.row+'" data-placement="top" title="Download" >\n                <div style="width:25px; height:25px;"><i class="fa fa-download"></i></div>\n                </button></a>':'<a  href=\'javascript:void(0)\'>\n                <button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" id="downloadButton-'+s.row+'" data-placement="top" title="Download" >\n                <div style="width:25px; height:25px;"><i class="fa fa-download"></i></div>\n                </button></a>'},className:"text-center",orderable:!1}],rowCallback:(t,a,r)=>($("table").on("click","#checkrow-"+r,function(s){n.rowCheckBoxChecked(s,a)}),$("table").on("click","#downloadButton-"+r,function(s){s.stopPropagation(),s.preventDefault(),n.viewData(a?._id)}),t),pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,order:[],searching:!1,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,scrollX:!0,responsive:!1,language:{searchPlaceholder:"Search...",search:""}}}searchSubmit(n){$("#my-datatable_filter").find('[type="search"]').val(""),$("#my-datatable").DataTable().search("").draw()}resetFilter(){this.bulkAction=!1,this.checkedRowIds=[],this.rowCheckedAll=!1,this.uncheckedRowIds=[]}isRowChecked(n){return this.rowCheckedAll?!(this.uncheckedRowIds.indexOf(n)>=0):this.checkedRowIds.indexOf(n)>=0}rowCheckBoxChecked(n,t){let a=t._id,r=document.querySelectorAll('[data-checkbox-id="'+a+'"]');r.length>0&&(r[0].checked?(this.uncheckedRowIds.splice(this.uncheckedRowIds.indexOf(a),1),this.rowCheckedAll||this.checkedRowIds.push(a)):(this.checkedRowIds.splice(this.checkedRowIds.indexOf(a),1),this.rowCheckedAll&&this.uncheckedRowIds.push(a)))}allRowsCheckboxChecked(n){this.rowCheckedAll?(this.uncheckedRowIds.length=0,this.rowCheckedAll=!1):(this.checkedRowIds.length=0,this.rowCheckedAll=!0),$("#my-datatable").dataTable().api().ajax.reload(function(t){},!1)}anyRowsChecked(){return 1==this.rowCheckedAll||this.checkedRowIds.length>0||this.uncheckedRowIds.length>0}viewData(n){}setReseller(){let n=[];this.subscriptionUserSearchForm.value.reseller_id&&(this.subscriptionUserSearchForm.value.reseller_id.forEach(t=>{n.push(t?.id)}),this.reseller_ids=n)}fetchMaster(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{if("success"==n.status){n.masters.reseller&&Array.isArray(n.masters.reseller)&&(this.resellerMaster=[],n.masters.reseller?.forEach(t=>{this.resellerMaster.push({id:t._id,description:t.reseller_name})})),this.planMaster=[];for(const t in n.masters.plans)if(Object.prototype.hasOwnProperty.call(n.masters.plans,t)){const a=n.masters.plans[t];this.planMaster.push({id:a._id,description:a.plan_name})}}else this.toastr.error(n.message);this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}exportData(n){this.adminService.downloadFile("get-company-sales-ledgers-list","company-sales-leadgers-list",{pageno:1,wage_date_from:this.subscriptionUserSearchForm.value.wage_from_date??null,wage_date_to:this.subscriptionUserSearchForm.value.wage_to_date??null,corporate_id:this.subscriptionUserSearchForm.value.corporate_id??null,reseller_id:this.reseller_ids.length>0?this.reseller_ids:[],unchecked_row_ids:this.uncheckedRowIds,row_checked_all:this.rowCheckedAll.toString(),checked_row_ids:this.checkedRowIds,generate:n})}formatDate(n){const t=new Date(n);let a=""+(t.getMonth()+1),r=""+t.getDate();const s=t.getFullYear();return a.length<2&&(a="0"+a),r.length<2&&(r="0"+r),[s,a,r].join("-")}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(p.uU),e.\u0275\u0275directiveInject(p.JJ))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-sales-ledger"]],decls:104,vars:8,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","ion-ios-list"],[1,"br-pagebody","pd-x-20","pd-sm-x-30"],[1,"br-section-wrapper"],[1,"br-section-label","mb-3"],[1,"card",2,"border","0px"],[3,"formGroup"],[1,"card-block","pd-0"],[1,"row","row-sm","mg-t-20"],[1,"col-md-6","col-lg-3"],[1,"form-group","mg-b-0"],[1,"d-block"],["type","date","formControlName","wage_from_date",1,"form-control"],["type","date","formControlName","wage_to_date",1,"form-control"],["formControlName","reseller_id",1,"form-control",3,"options","multiple","config","change"],[1,"col-md-6","col-lg-3","mg-t-10","mg-lg-t-0"],["type","text","formControlName","corporate_id",1,"form-control","tx-14"],[1,"btn","btn-info","tx-11","tx-spacing-1","tx-uppercase","tx-semibold","tx-mont","pd-y-12","pd-x-30","mg-t-30",3,"click"],[1,"br-section-label"],["type","button",1,"btn","btn-info","tx-11","tx-mont","tx-medium","h-100","flex-1","mr-2",2,"float","right",3,"disabled","click"],[1,"mr-1","fa","fa-file",2,"font-size","12px"],[1,"table-wrapper","mt-1"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,""],["type","checkbox",3,"value","change"]],template:function(n,t){1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Client Ledeger"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275element(9,"i",6),e.\u0275\u0275elementStart(10,"div")(11,"h4"),e.\u0275\u0275text(12,"Sales Ledeger Management"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"div",7)(14,"div",8)(15,"h6",9),e.\u0275\u0275text(16,"Search User"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",10)(18,"form",11)(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"label",16),e.\u0275\u0275text(24,"From"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(25,"input",17),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(26,"div",14)(27,"div",15)(28,"label",16),e.\u0275\u0275text(29,"To"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"input",18),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(31,"div",14)(32,"div",15)(33,"label",16),e.\u0275\u0275text(34,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"ngx-select-dropdown",19),e.\u0275\u0275listener("change",function(){return t.setReseller()}),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(36,"div",20)(37,"div",15)(38,"label"),e.\u0275\u0275text(39,"Corporate ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(40,"input",21),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(41,"button",22),e.\u0275\u0275listener("click",function(r){return t.searchSubmit(r)}),e.\u0275\u0275elementStart(42,"span"),e.\u0275\u0275text(43,"Search"),e.\u0275\u0275elementEnd()()()()()()(),e.\u0275\u0275elementStart(44,"div",7)(45,"div",8)(46,"h6",23),e.\u0275\u0275text(47,"Sales Ledger List "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"button",24),e.\u0275\u0275listener("click",function(){return t.exportData("excel")}),e.\u0275\u0275elementStart(49,"span"),e.\u0275\u0275element(50,"i",25),e.\u0275\u0275text(51,"Export"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(52,"div",26)(53,"table",27)(54,"thead")(55,"tr")(56,"th",28)(57,"input",29),e.\u0275\u0275listener("change",function(r){return t.allRowsCheckboxChecked(r)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(58,"th",28),e.\u0275\u0275text(59,"SL No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"th",28),e.\u0275\u0275text(61,"Reseller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th",28),e.\u0275\u0275text(63,"Sub-Seller"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th",28),e.\u0275\u0275text(65,"Branch"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"th",28),e.\u0275\u0275text(67,"Corp Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"th",28),e.\u0275\u0275text(69,"Establishment Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(70,"th",28),e.\u0275\u0275text(71,"Address"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"th",28),e.\u0275\u0275text(73,"Contact Person"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(74,"th",28),e.\u0275\u0275text(75,"Contact No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(76,"th",28),e.\u0275\u0275text(77,"e-Mail"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"th",28),e.\u0275\u0275text(79,"State"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(80,"th",28),e.\u0275\u0275text(81,"GST No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(82,"th",28),e.\u0275\u0275text(83,"PAN No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(84,"th",28),e.\u0275\u0275text(85,"Qty"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(86,"th",28),e.\u0275\u0275text(87,"Taxable Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(88,"th",28),e.\u0275\u0275text(89,"IGST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(90,"th",28),e.\u0275\u0275text(91,"CGST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(92,"th",28),e.\u0275\u0275text(93,"SGST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(94,"th",28),e.\u0275\u0275text(95,"Total GST"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"th",28),e.\u0275\u0275text(97,"TDS"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(98,"th",28),e.\u0275\u0275text(99,"Inv Value"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(100,"th",28),e.\u0275\u0275text(101,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(102,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(103,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(18),e.\u0275\u0275property("formGroup",t.subscriptionUserSearchForm),e.\u0275\u0275advance(17),e.\u0275\u0275property("options",t.resellerMaster)("multiple",!0)("config",e.\u0275\u0275pureFunction0(7,au)),e.\u0275\u0275advance(13),e.\u0275\u0275property("disabled",!t.anyRowsChecked()),e.\u0275\u0275advance(5),e.\u0275\u0275property("dtOptions",t.dtOptions),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",t.rowCheckedAll))},dependencies:[h.yS,w.fY,C.G,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,y,x]}),o})();function ou(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",20),e.\u0275\u0275text(1,"Add TDS Rule"),e.\u0275\u0275elementEnd())}function iu(o,l){1&o&&(e.\u0275\u0275elementStart(0,"h6",20),e.\u0275\u0275text(1,"Edit TDS Rule"),e.\u0275\u0275elementEnd())}const ae=function(){return{search:!0,placeholder:"Select Head"}};function lu(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275element(1,"ngx-select-dropdown",86),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("options",n.salaryHeads)("config",e.\u0275\u0275pureFunction0(2,ae))}}function su(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"td"),e.\u0275\u0275element(1,"ngx-select-dropdown",87),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275property("options",n.gov_earning_heads)("config",e.\u0275\u0275pureFunction0(2,ae))}}function du(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",88),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(a.addTemplateRows("salary_head_to_earning_head"))}),e.\u0275\u0275elementStart(1,"div",89),e.\u0275\u0275element(2,"i",90),e.\u0275\u0275elementEnd()()}}function mu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",91),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const a=e.\u0275\u0275nextContext().index,r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.removeTemplateRow("salary_head_to_earning_head",a))}),e.\u0275\u0275elementStart(1,"div",89),e.\u0275\u0275element(2,"i",92),e.\u0275\u0275elementEnd()()}}function cu(o,l){if(1&o&&(e.\u0275\u0275elementStart(0,"tr",82),e.\u0275\u0275template(1,lu,2,3,"td",83),e.\u0275\u0275template(2,su,2,3,"td",83),e.\u0275\u0275elementStart(3,"td")(4,"div",22),e.\u0275\u0275template(5,du,3,0,"button",84),e.\u0275\u0275template(6,mu,3,0,"button",85),e.\u0275\u0275elementEnd()()()),2&o){const n=l.index,t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroupName",n),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.salaryHeads.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.gov_earning_heads.length>0),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",t.getTemplateRows("salary_head_to_earning_head").length-1==n),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.getTemplateRows("salary_head_to_earning_head").length>1)}}const pu=function(o){return{"text-center":o}};function uu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",82)(1,"td",94)(2,"label"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(4,"br"),e.\u0275\u0275elementStart(5,"div",95)(6,"input",96),e.\u0275\u0275listener("click",function(a){const s=e.\u0275\u0275restoreView(n).index,m=e.\u0275\u0275nextContext(2).index,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.duductCheckbox(a,m,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"label",97),e.\u0275\u0275text(8,"N/A"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"div",95)(10,"input",98),e.\u0275\u0275listener("click",function(a){const s=e.\u0275\u0275restoreView(n).index,m=e.\u0275\u0275nextContext(2).index,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.duductCheckbox(a,m,s))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"label",97),e.\u0275\u0275text(12,"No Limit"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(13,"td",28),e.\u0275\u0275element(14,"input",99),e.\u0275\u0275elementEnd()()}if(2&o){const n=l.index,t=e.\u0275\u0275nextContext(2).index,a=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroupName",n),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(16,pu,!(null!=a.deductionSubItems(t).controls[n]&&null!=a.deductionSubItems(t).controls[n].value&&a.deductionSubItems(t).controls[n].value.is_parent))),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.label),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate2("id","customSwitch",t,"",n,"_na"),e.\u0275\u0275property("checked","NA"==(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.type))("disabled","no_limit"==(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.type)),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate2("for","customSwitch",t,"",n,"_na"),e.\u0275\u0275advance(3),e.\u0275\u0275propertyInterpolate2("id","customSwitch",t,"",n,"_limit"),e.\u0275\u0275property("disabled","NA"==(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.type))("checked","no_limit"==(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.type)),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate2("for","customSwitch",t,"",n,"_limit"),e.\u0275\u0275advance(3),e.\u0275\u0275property("readOnly",""!=(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.type)&&"limit"!=(null==a.deductionSubItems(t).controls[n]||null==a.deductionSubItems(t).controls[n].value?null:a.deductionSubItems(t).controls[n].value.type))}}function _u(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,uu,15,18,"tr",27),e.\u0275\u0275elementContainerEnd()),2&o){const n=e.\u0275\u0275nextContext().index,t=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t.deductionSubItems(n).controls)}}function hu(o,l){if(1&o&&(e.\u0275\u0275elementContainerStart(0,82)(1,93),e.\u0275\u0275template(2,_u,2,1,"ng-container",80),e.\u0275\u0275elementContainerEnd()()),2&o){const n=l.index,t=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("formGroupName",n),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",t.deductionSubItems(n).controls.length>0)("ngIfElse",t.no_children)}}function fu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"button",100),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.add(a))}),e.\u0275\u0275elementStart(2,"span"),e.\u0275\u0275text(3,"Save"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("disabled",!n.tdsForm.valid)}}function gu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",100),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(r.add(a))}),e.\u0275\u0275elementStart(1,"span"),e.\u0275\u0275text(2,"Update"),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!n.tdsForm.valid)}}function bu(o,l){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"form",21),e.\u0275\u0275element(1,"h6",20),e.\u0275\u0275elementStart(2,"div",22)(3,"table",23)(4,"tbody")(5,"tr")(6,"td",24)(7,"table",25)(8,"thead")(9,"tr")(10,"th"),e.\u0275\u0275text(11,"Salary Heads"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"th"),e.\u0275\u0275text(13,"Income tax Earning Heads"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(14,"tbody"),e.\u0275\u0275elementContainerStart(15,26),e.\u0275\u0275template(16,cu,7,5,"tr",27),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(17,"tr")(18,"td",28)(19,"div",29)(20,"input",30),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.definerebate(a,"define_deductions_rebate"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"label",31),e.\u0275\u0275text(22," Define Deductions/Rebate"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(23,"tr")(24,"td"),e.\u0275\u0275text(25,"Financial Year"),e.\u0275\u0275elementStart(26,"span",32),e.\u0275\u0275text(27,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(28,"td"),e.\u0275\u0275element(29,"input",33),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(30,"td",34)(31,"div",35)(32,"label",36),e.\u0275\u0275element(33,"input",37),e.\u0275\u0275text(34," OLD Regime"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(35,"label",38),e.\u0275\u0275element(36,"input",39),e.\u0275\u0275text(37," NEW Regime"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(38,"tr")(39,"td",40),e.\u0275\u0275text(40,"OLD Regime"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(41,"tr")(42,"td",41),e.\u0275\u0275elementContainerStart(43),e.\u0275\u0275elementStart(44,"tr")(45,"td",28)(46,"div",29)(47,"input",42),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.definerebate(a,"define_standard_deduction"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"label",43),e.\u0275\u0275text(49,"Define Standard Deduction "),e.\u0275\u0275elementStart(50,"span",32),e.\u0275\u0275text(51,"*"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(52,"tr")(53,"td",28),e.\u0275\u0275text(54,"Standard Deduction for the FY "),e.\u0275\u0275elementStart(55,"span",32),e.\u0275\u0275text(56,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(57,"td",28),e.\u0275\u0275element(58,"input",44),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(59,"tr")(60,"td",45)(61,"div",29)(62,"input",46),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.definerebate(a,"define_rebate"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(63,"label",47),e.\u0275\u0275text(64,"Define Rebate ("),e.\u0275\u0275elementStart(65,"span",32),e.\u0275\u0275text(66,"*"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(67,")"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(68,"tr")(69,"td",34),e.\u0275\u0275text(70,"Eligibility for Rebate is taxable Value "),e.\u0275\u0275elementStart(71,"span",32),e.\u0275\u0275text(72,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(73,"td",34)(74,"div",35)(75,"label",36),e.\u0275\u0275element(76,"input",48),e.\u0275\u0275text(77," Higher than "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(78,"label",38),e.\u0275\u0275element(79,"input",49),e.\u0275\u0275text(80," Lower than"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(81,"td",34),e.\u0275\u0275element(82,"input",50),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(83,"tr")(84,"td",28)(85,"div",29),e.\u0275\u0275element(86,"input",51),e.\u0275\u0275elementStart(87,"label",52),e.\u0275\u0275text(88," DefineHRA Deduction limits --- Consider Higher "),e.\u0275\u0275elementStart(89,"span",32),e.\u0275\u0275text(90,"*"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(91,"td",28)(92,"div",35)(93,"label",36),e.\u0275\u0275element(94,"input",53),e.\u0275\u0275text(95," Higher"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(96,"label",38),e.\u0275\u0275element(97,"input",54),e.\u0275\u0275text(98," Lower"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerStart(99,55),e.\u0275\u0275elementStart(100,"tr")(101,"td",56),e.\u0275\u0275text(102,"Actual HRAearned (Metro)"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(103,"td",56),e.\u0275\u0275element(104,"input",57),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(105,"td",56),e.\u0275\u0275text(106,"Of Basic"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(107,"td",56),e.\u0275\u0275text(108," Or Actual declared HRA whichever is "),e.\u0275\u0275elementStart(109,"span",32),e.\u0275\u0275text(110,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(111,"td",56)(112,"div",35)(113,"label",36),e.\u0275\u0275element(114,"input",58),e.\u0275\u0275text(115," Higher"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(116,"label",38),e.\u0275\u0275element(117,"input",59),e.\u0275\u0275text(118," Lower"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(119,60),e.\u0275\u0275elementStart(120,"tr")(121,"td",56),e.\u0275\u0275text(122,"Actual HRA (earned) Non-Metro"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(123,"td",56),e.\u0275\u0275element(124,"input",61),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(125,"td",56),e.\u0275\u0275text(126,"Of Basic"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(127,"td",56),e.\u0275\u0275text(128," Or Actual declared HRA whichever is "),e.\u0275\u0275elementStart(129,"span",32),e.\u0275\u0275text(130,"*"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(131,"td",56)(132,"div",35)(133,"label",36),e.\u0275\u0275element(134,"input",62),e.\u0275\u0275text(135," Higher"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(136,"label",38),e.\u0275\u0275element(137,"input",63),e.\u0275\u0275text(138," Lower"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(139,60),e.\u0275\u0275elementStart(140,"tr")(141,"td",56),e.\u0275\u0275text(142,"Actual rent Declared"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(143,"td",56),e.\u0275\u0275text(144,"Less "),e.\u0275\u0275element(145,"input",64),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(146,"td",65),e.\u0275\u0275text(147,"Of Basic"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementStart(148,"tr")(149,"td",45)(150,"div",29)(151,"input",66),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.definerebate(a,"define_p_tax_chapter_vi_deduction_limits"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(152,"label",67),e.\u0275\u0275text(153," Define P.TAX & Chapter VI Deduction limits"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(154,"tr"),e.\u0275\u0275elementStart(155,"tr")(156,"td",28),e.\u0275\u0275text(157,"Deduction Items"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(158,"td",28),e.\u0275\u0275text(159,"UPPER LIMIT"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerStart(160,68),e.\u0275\u0275template(161,hu,3,3,"ng-container",27),e.\u0275\u0275elementContainerEnd()(),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(162,"tr")(163,"td",69),e.\u0275\u0275text(164,"New Regime"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(165,"tr")(166,"td",70),e.\u0275\u0275elementContainerStart(167),e.\u0275\u0275elementStart(168,"tr")(169,"td",28)(170,"div",29)(171,"input",71),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.definerebate(a,"define_standard_deduction_new_regime"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(172,"label",72),e.\u0275\u0275text(173," Define Standard Deduction"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(174,"tr")(175,"td",28),e.\u0275\u0275text(176,"Standard Deduction for the FY "),e.\u0275\u0275elementStart(177,"span",32),e.\u0275\u0275text(178," * "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(179,"td",28),e.\u0275\u0275element(180,"input",73),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(181,"tr")(182,"td",28)(183,"input",74),e.\u0275\u0275listener("click",function(a){e.\u0275\u0275restoreView(n);const r=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(r.definerebate(a,"define_rebate_new_regime"))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(184," Define Rebate ("),e.\u0275\u0275elementStart(185,"span",32),e.\u0275\u0275text(186,"*"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(187,")"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(188,"tr")(189,"td",28),e.\u0275\u0275text(190,"Eligibility for Rebate is taxable Value ("),e.\u0275\u0275elementStart(191,"span",32),e.\u0275\u0275text(192,"*"),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(193,")"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(194,"td",28)(195,"div",35)(196,"label",75),e.\u0275\u0275element(197,"input",76),e.\u0275\u0275text(198," Higher than "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(199,"label",38),e.\u0275\u0275element(200,"input",77),e.\u0275\u0275text(201," Lower than"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(202,"td"),e.\u0275\u0275element(203,"input",78),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(204,"div",79),e.\u0275\u0275template(205,fu,4,1,"ng-container",80),e.\u0275\u0275template(206,gu,3,1,"ng-template",null,81,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()()}if(2&o){const n=e.\u0275\u0275reference(207),t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.tdsForm),e.\u0275\u0275advance(16),e.\u0275\u0275property("ngForOf",t.getTemplateRows("salary_head_to_earning_head")),e.\u0275\u0275advance(4),e.\u0275\u0275property("checked","yes"==t.tdsForm.value.define_deductions_rebate),e.\u0275\u0275advance(27),e.\u0275\u0275property("checked","yes"==t.tdsForm.value.define_standard_deduction),e.\u0275\u0275advance(15),e.\u0275\u0275property("checked","yes"==t.tdsForm.value.define_rebate),e.\u0275\u0275advance(24),e.\u0275\u0275property("checked",null!=t.tdsForm.value.define_hra_deduction_limits),e.\u0275\u0275advance(65),e.\u0275\u0275property("checked","yes"==t.tdsForm.value.define_p_tax_chapter_vi_deduction_limits),e.\u0275\u0275advance(10),e.\u0275\u0275property("ngForOf",t.deductionRows()),e.\u0275\u0275advance(10),e.\u0275\u0275property("checked","yes"==t.tdsForm.value.define_standard_deduction_new_regime),e.\u0275\u0275advance(12),e.\u0275\u0275property("checked","yes"==t.tdsForm.value.define_rebate_new_regime),e.\u0275\u0275advance(22),e.\u0275\u0275property("ngIf",!t.editActionId)("ngIfElse",n)}}const yu=h.Bz.forChild([{path:"",component:Ys},{path:"profile",component:Zd},{path:"team-management/sub-admin",component:Jm},{path:"team-management/role-access",component:Cm},{path:"user-management",component:Bc},{path:"master/department",component:id},{path:"master/designation",component:pd},{path:"master/branch",component:Zs},{path:"master/reseller",component:qd},{path:"master/credit-invoice",component:ed},{path:"govt-rules/epfo-rules",component:ol},{path:"govt-rules/esic-rules",component:vl},{path:"govt-rules/bonus-rules",component:Ti},{path:"govt-rules/gratuity-rules",component:Ul},{path:"govt-rules/itax-slabs",component:Ss},{path:"govt-rules/itax-categories",component:ts},{path:"govt-rules/tds-rule",component:(()=>{class o{constructor(n,t,a,r,s,m){this.formBuilder=n,this.titleService=t,this.adminService=a,this.toastr=r,this.spinner=s,this.renderer=m,this.dtOptions={},this.salaryHeads=[],this.gov_earning_heads=[],this.permissions=[],this.editActionId="",this.tdsForm=n.group({salary_head_to_earning_head:this.formBuilder.array([this.initTemplateRows()]),define_deductions_rebate:[null,i.kI.compose([])],define_deductions_rebate_financial_year:[null,i.kI.compose([])],define_deductions_rebate_status:["old_regime",i.kI.compose([])],define_standard_deduction:[null,i.kI.compose([])],standard_deduction_amount:[null,i.kI.compose([])],define_rebate:[null,i.kI.compose([])],eligibility_for_rebate_is_taxable_value:[null,i.kI.compose([])],eligibility_for_rebate_is_taxable_amount:[null,i.kI.compose([])],define_hra_deduction_limits:[null,i.kI.compose([])],define_p_tax_chapter_vi_deduction_limits:[],actual_hra_earned_metro:n.group({percentage:[null,i.kI.compose([i.kI.max(100)])],actual_declared_hra_whichever:[null,i.kI.compose([])]}),actual_hra_earned_non_metro:n.group({percentage:[null,i.kI.compose([i.kI.max(100)])],actual_declared_hra_whichever:[null,i.kI.compose([])]}),actual_rent_declared:n.group({percentage:[null,i.kI.compose([i.kI.max(100)])]}),deduction_items:this.formBuilder.array([]),define_standard_deduction_new_regime:[null,i.kI.compose([])],standard_deduction_amount_new_regime:[null,i.kI.compose([])],define_rebate_new_regime:[null,i.kI.compose([])],eligibility_for_rebate_is_taxable_value_new_regime:[null,i.kI.compose([])],eligibility_for_rebate_is_taxable_amount_new_regime:[null,i.kI.compose([])]})}ngOnInit(){this.titleService.setTitle("Roles - "+d.AppName),this.fetch(),this.fetchMaster(),this.fetchsalaryHeads(),this.getTDS()}initTemplateRows(n={}){return this.formBuilder.group({salary_head:[this.salaryHeads.find(t=>t.id==n.salary_head)??"",i.kI.compose([])],tax_earning_head:[this.gov_earning_heads.find(t=>t.id==n.tax_earning_head)??"",i.kI.compose([])]})}getTemplateRows(n){return this.tdsForm.get(n).controls}removeTemplateRow(n,t){this.tdsForm.get(n).removeAt(t)}addTemplateRows(n,t={}){this.tdsForm.get(n).push(this.initTemplateRows(t)),d.loadCustomScripts("customJsScript")}cancelEntry(){d.resetForm(this.tdsForm)}add(n){if(this.tdsForm.markAllAsTouched(),d.scrollToQuery("p.error-element"),this.tdsForm.valid){n.target.classList.add("btn-loading");let t=this.tdsForm.value,a=[];t.deduction_items&&t.deduction_items.forEach(r=>{let m,s=[];r.children&&r.children.forEach((c,u)=>{""==c?.type?null!=c?.amount&&(m="limit"):m=c?.type,u>0&&s.push({head:c?.head,amount:c?.amount??"",type:""!=m?m:"NA"})}),"Professional Tax (PT)"==r.children[0]?.head&&(r.children[0].head="professional_tax"),""==r.children[0]?.type?null!=r.children[0]?.amount&&""!=r.children[0]?.amount&&(m="limit"):m=r.children[0]?.type,a.push({head:r.children[0]?.head,type:""!=m?m:"NA",amount:r.children[0]?.amount??"",sub_heads:s.length>0?s:[]})}),t.salary_head_to_earning_head.forEach(r=>{r.salary_head=r?.salary_head?.id,r.tax_earning_head=r?.tax_earning_head?.id}),t.deduction_items=a,""!=this.editActionId&&(t.template_id=this.editActionId),this.adminService.savetdsTemplate(t).subscribe(r=>{"success"==r.status?(this.tdsForm.reset(),this.tdsForm.controls.salary_head_to_earning_head.clear(),this.editActionId="",this.getTDS(),this.tdsForm.patchValue({define_deductions_rebate_status:"old_regime"}),this.addTemplateRows("salary_head_to_earning_head"),$("#my-datatable").dataTable().api().ajax.reload(function(s){},!1),this.toastr.success(r.message)):this.toastr.error("val_err"==r.status?d.showValidationMessage(r.val_msg):r.message),n.target.classList.remove("btn-loading")},r=>{n.target.classList.remove("btn-loading"),this.toastr.error(d.showServerErrorMessage(r))})}}getTDS(n=[]){this.adminService.getTDSAct({}).subscribe(t=>{if("success"==t.status){let a=[];if(a=t?.data?.tds,n.length>0){let r=n.find(s=>"professional_tax"==s.head);a.unshift({name:"professional_tax",child:[],value:"Professional Tax (PT)",type:r?.type??"",amount:r?.amount??""}),a.forEach((s,m)=>{if(m>0){let c=n.find(f=>f.head==s?.value),u=n.findIndex(f=>f.head==s?.value);c&&(s.type=c?.type??"",s.amount=c?.amount??""),s.child.forEach(f=>{if(-1!=u){let F=n[u]?.sub_heads.find(T=>T.head==f?.value);f.type=F?.type??"",f.amount=F?.amount??""}})}})}this.initChilds(a)}else this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message)},t=>{this.toastr.error(d.showServerErrorMessage(t))})}fetchsalaryHeads(){this.spinner.show(),this.adminService.salarytplHead({}).subscribe(n=>{this.spinner.hide(),"success"==n.status?n.temp_head.forEach(a=>{this.salaryHeads.push({id:a._id,description:a.full_name})}):this.toastr.error("val_err"==n.status?d.showValidationMessage(n.val_msg):n.message)},n=>{this.spinner.hide(),this.toastr.error(d.showServerErrorMessage(n))})}definerebate(n,t){this.tdsForm.patchValue(n.target.checked?{[t]:"yes"}:{[t]:"no"})}duductCheckbox(n,t,a){n.target.checked?this.deductionSubItems(t).at(a)?.patchValue({type:n.target.value}):this.deductionSubItems(t).at(a)?.patchValue({type:""}),this.deductionSubItems(t).at(a)?.patchValue({amount:""})}initChilds(n=[]){this.tdsForm.controls.deduction_items.clear(),n?.forEach((t,a)=>{this.deduction_items().push(this.newDeduction(t)),this.deductionSubItems(a).push(this.newSubItem({key:t?.name,value:t?.value,is_parent:!0,type:t?.type??"",amount:t?.amount??""})),t?.child.length>0&&t?.child.forEach(r=>{this.deductionSubItems(a).push(this.newSubItem(r))})})}deduction_items(){return this.tdsForm.get("deduction_items")}deductionRows(){return this.deduction_items().controls}newDeduction(n){return this.formBuilder.group({label:n?.value,children:this.formBuilder.array([]),type:[n?.type??""]})}deductionSubItems(n){return this.deduction_items().at(n).get("children")}newSubItem(n){return this.formBuilder.group({head:[n?.value??null],label:[n?.value??null],amount:[n?.amount??null],is_parent:[n?.is_parent??!1],type:[n?.type??""]})}fetch(){this.dtOptions={ajax:(n,t)=>{this.adminService.fetchtdsRules({pageno:Math.floor((n.start+n.length)/n.length),perpage:n.length}).subscribe(a=>{"success"==a.status?t({recordsTotal:a.data.totalDocs,recordsFiltered:a.data.totalDocs,data:a.data.docs}):this.toastr.error(a.message)},a=>{this.toastr.error("Internal server error occured. Please try again later.")})},columns:[{render:function(n,t,a,r){return r.settings._iDisplayStart+(r.row+1)},orderable:!1},{render:function(n,t,a,r){return a?.status},className:"text-center",orderable:!1,name:"status"},{render:function(n,t,a,r){return a?.define_deductions_rebate_financial_year},className:"text-center",orderable:!1,name:"define_deductions_rebate_financial_year"},{render:function(n,t,a,r){return'<button class="btn btn-primary btn-icon mx-1" data-toggle="tooltip" data-placement="top" title="Edit" id="editButton-'+r.row+'">\n                        <div style="width:25px; height:25px;"><i class="fa fa-pen"></i></div>\n                    </button>'},className:"text-center",orderable:!1}],drawCallback:function(n){d.loadCustomScripts("customJsScript")},rowCallback:(n,t,a)=>{const r=this;return $("table").on("click","#editButton-"+a,function(){r.getEdit(t)}),n},pagingType:"full_numbers",serverSide:!0,processing:!0,ordering:!0,searching:!0,pageLength:d.DataTableLength,lengthChange:!0,lengthMenu:d.DataTableLengthChangeMenu,responsive:!0,order:[],language:{searchPlaceholder:"Search...",search:""}}}getEdit(n){this.spinner.show(),this.editActionId=n._id,this.adminService.gettdsTemplate({tds_template_id:n._id}).subscribe(t=>{if(this.spinner.hide(),"success"==t.status){let a=t.data;this.tdsForm.patchValue({define_deductions_rebate:a.define_deductions_rebate,define_deductions_rebate_financial_year:a.define_deductions_rebate_financial_year,define_deductions_rebate_status:a.define_deductions_rebate_status,define_standard_deduction:a.old_regime.define_standard_deduction,standard_deduction_amount:a.old_regime.standard_deduction_amount,define_rebate:a.old_regime.define_rebate,define_p_tax_chapter_vi_deduction_limits:a.old_regime.define_p_tax_chapter_vi_deduction_limits,eligibility_for_rebate_is_taxable_value:a.old_regime.eligibility_for_rebate_is_taxable_value,eligibility_for_rebate_is_taxable_amount:a.old_regime.eligibility_for_rebate_is_taxable_amount,define_hra_deduction_limits:a.old_regime.define_hra_deduction_limits,actual_hra_earned_metro:a.old_regime.actual_hra_earned_metro,actual_hra_earned_non_metro:a.old_regime.actual_hra_earned_non_metro,actual_rent_declared:a.old_regime.actual_rent_declared,define_standard_deduction_new_regime:a.new_regime.define_standard_deduction_new_regime,standard_deduction_amount_new_regime:a.new_regime.standard_deduction_amount_new_regime,define_rebate_new_regime:a.new_regime.define_rebate_new_regime,eligibility_for_rebate_is_taxable_value_new_regime:a.new_regime.eligibility_for_rebate_is_taxable_value_new_regime,eligibility_for_rebate_is_taxable_amount_new_regime:a.new_regime.eligibility_for_rebate_is_taxable_amount_new_regime}),this.tdsForm.controls.salary_head_to_earning_head.clear();let r=this.tdsForm.get("salary_head_to_earning_head");a?.salary_head_to_earning_head&&a?.salary_head_to_earning_head.forEach(s=>{r.push(this.initTemplateRows(s))}),this.getTDS(a?.old_regime?.deduction_items),d.scrollToQuery("#role-submit-section")}else this.toastr.error("val_err"==t.status?d.showValidationMessage(t.val_msg):t.message)},t=>{this.spinner.hide(),this.toastr.error(d.showServerErrorMessage(t))})}fetchMaster(){this.spinner.show(),this.adminService.fetchSubAdminPageMasters().subscribe(n=>{"success"==n.status?(this.gov_earning_heads=[],n.masters.tds_earning_temp_head.forEach(a=>{this.gov_earning_heads.push({id:a._id,description:a.full_name})})):this.toastr.error(n.message),this.spinner.hide()},n=>{this.toastr.error("Internal server error occured. Please try again later."),this.spinner.hide()})}}return o.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(i.QS),e.\u0275\u0275directiveInject(v.Dx),e.\u0275\u0275directiveInject(S.l),e.\u0275\u0275directiveInject(b._W),e.\u0275\u0275directiveInject(E.t2),e.\u0275\u0275directiveInject(e.Renderer2))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tds-rules"]],decls:47,vars:4,consts:[[1,"br-mainpanel"],[1,"br-pageheader"],[1,"breadcrumb","pd-0","mg-0","tx-12"],["routerLink","/admin",1,"breadcrumb-item"],[1,"breadcrumb-item"],[1,"br-pagetitle"],[1,"icon","icon","ion-card"],[1,"mg-b-0"],["id","role-submit-section",1,"br-pagebody"],[1,"br-section-wrapper"],["class","br-section-label mb-3",4,"ngIf","ngIfElse"],["editHeader",""],[1,"form-layout","form-layout-7"],[3,"formGroup",4,"ngIf"],[1,"br-pagebody"],[1,"table-wrapper"],["datatable","","id","my-datatable",1,"table","display","responsive","nowrap","wd-100p",3,"dtOptions"],[1,"wd-15p"],[1,"wd-15p","text-center"],[1,"wd-25p","text-center"],[1,"br-section-label","mb-3"],[3,"formGroup"],[1,""],[1,"table","table-bordered","define-lwf-rule-table","nowrap"],["colspan","3",1,"p-0"],[1,"w-100"],["formArrayName","salary_head_to_earning_head"],[3,"formGroupName",4,"ngFor","ngForOf"],["colspan","5"],[1,"custom-control","custom-switch"],["type","checkbox","id","customSwitch25",1,"custom-control-input",3,"checked","click"],["for","customSwitch25",1,"custom-control-label"],[1,"text-danger"],["type","text","placeholder","Financial Year","formControlName","define_deductions_rebate_financial_year",1,"form-control"],["colspan","3"],[1,"form-check"],[1,"form-check-label",2,"width","104px"],["type","radio","formControlName","define_deductions_rebate_status","id","gridRadios1","value","old_regime",1,"form-check-input","radio-inline"],[1,"form-check-label"],["type","radio","formControlName","define_deductions_rebate_status","id","gridRadios2","value","new_regime",1,"form-check-input","radio-inline"],["colspan","5","data-toggle","collapse","href","#old_regime",1,"tds_accordian"],["colspan","5","id","old_regime",1,"panel-collapse"],["type","checkbox","id","customSwitch21",1,"custom-control-input",3,"checked","click"],["for","customSwitch21",1,"custom-control-label"],["type","text","placeholder","Standard Deduction for the FY","formControlName","standard_deduction_amount",1,"form-control"],["colspan","10"],["type","checkbox","id","customSwitch23",1,"custom-control-input",3,"checked","click"],["for","customSwitch23",1,"custom-control-label"],["type","radio","formControlName","eligibility_for_rebate_is_taxable_value","id","gridRadios3","value","higher",1,"form-check-input","radio-inline"],["type","radio","formControlName","eligibility_for_rebate_is_taxable_value","id","gridRadios4","value","lower",1,"form-check-input","radio-inline"],["type","text","placeholder","Taxable Value(*)","formControlName","eligibility_for_rebate_is_taxable_amount",1,"form-control"],["type","checkbox","id","customSwitch24",1,"custom-control-input",3,"checked"],["for","customSwitch24",1,"custom-control-label"],["type","radio","formControlName","define_hra_deduction_limits","id","gridRadios5","value","higher",1,"form-check-input","radio-inline"],["type","radio","formControlName","define_hra_deduction_limits","id","gridRadios6","value","lower",1,"form-check-input","radio-inline"],["formGroupName","actual_hra_earned_metro"],["colspan","2"],["type","text","placeholder","Actual HRAearned (Metro)","formControlName","percentage",1,"form-control"],["type","radio","formControlName","actual_declared_hra_whichever","id","gridRadios55","value","higher",1,"form-check-input","radio-inline"],["type","radio","formControlName","actual_declared_hra_whichever","id","gridRadios66","value","lower",1,"form-check-input","radio-inline"],["formGroupName","actual_hra_earned_non_metro"],["type","text","placeholder","Actual HRA (earned) Non-Metro","formControlName","percentage",1,"form-control"],["type","radio","formControlName","actual_declared_hra_whichever","id","gridRadios7","value","higher",1,"form-check-input","radio-inline"],["type","radio","formControlName","actual_declared_hra_whichever","id","gridRadios8","value","lower",1,"form-check-input","radio-inline"],["type","text","placeholder","Less","formControlName","percentage",1,"form-control"],["colspan","6"],["type","checkbox","id","p_tax_chapter_vi_deduction_limits",1,"custom-control-input",3,"checked","click"],["for","p_tax_chapter_vi_deduction_limits",1,"custom-control-label"],["formArrayName","deduction_items"],["colspan","5","data-toggle","collapse","href","#new_regime",1,"tds_accordian"],["colspan","5","id","new_regime",1,"panel-collapse",2,"width","100%"],["type","checkbox","id","customSwitch26",1,"custom-control-input",3,"checked","click"],["for","customSwitch26",1,"custom-control-label"],["type","text","formControlName","standard_deduction_amount_new_regime","placeholder","Standard Deduction for the FY",1,"form-control"],["type","checkbox",3,"checked","click"],[1,"form-check-label",2,"width","100px"],["type","radio","formControlName","eligibility_for_rebate_is_taxable_value_new_regime","id","gridRadios17","value","higher",1,"form-check-input","radio-inline"],["type","radio","formControlName","eligibility_for_rebate_is_taxable_value_new_regime","id","gridRadios18","value","lower",1,"form-check-input","radio-inline"],["type","text","placeholder","Amount(*)","formControlName","eligibility_for_rebate_is_taxable_amount_new_regime",1,"form-control"],[1,"text-center"],[4,"ngIf","ngIfElse"],["updateButton",""],[3,"formGroupName"],[4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Add New","type","button","class","btn btn-primary btn-icon mg-r-5",3,"click",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Remove","type","button","class","btn btn-danger btn-icon",3,"click",4,"ngIf"],["formControlName","salary_head",1,"form-control","p-1",3,"options","config"],["formControlName","tax_earning_head",1,"form-control","p-1",3,"options","config"],["data-toggle","tooltip","data-placement","top","title","Add New","type","button",1,"btn","btn-primary","btn-icon","mg-r-5",3,"click"],[2,"width","25px","height","25px"],[1,"fa","fa-plus"],["data-toggle","tooltip","data-placement","top","title","Remove","type","button",1,"btn","btn-danger","btn-icon",3,"click"],[1,"fa","fa-trash"],["formArrayName","children"],["colspan","5",3,"ngClass"],[1,"custom-control","custom-switch","inline_custom_chk"],["type","checkbox","value","NA",1,"custom-control-input",3,"id","checked","disabled","click"],[1,"custom-control-label",3,"for"],["type","checkbox","value","no_limit",1,"custom-control-input",3,"id","disabled","checked","click"],["type","text","placeholder","Amount","formControlName","amount",1,"form-control",3,"readOnly"],["type","button",1,"btn","btn-info","pd-y-13","pd-x-20","bd-0","mg-t-10","mg-md-t-0","tx-uppercase","tx-11","tx-spacing-2","wd-150",3,"disabled","click"]],template:function(n,t){if(1&n&&(e.\u0275\u0275element(0,"admin-app-dashboard-header"),e.\u0275\u0275elementStart(1,"div",0)(2,"div",1)(3,"nav",2)(4,"a",3),e.\u0275\u0275text(5,"Dashboard"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Government Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"a",4),e.\u0275\u0275text(9,"TDS Rule"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(10,"div",5),e.\u0275\u0275element(11,"i",6),e.\u0275\u0275elementStart(12,"div")(13,"h4"),e.\u0275\u0275text(14,"TDS Rule Management"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"p",7),e.\u0275\u0275text(16,"Create, assign, edit, view rights"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(17,"div",8)(18,"div",9),e.\u0275\u0275template(19,ou,2,0,"h6",10),e.\u0275\u0275template(20,iu,2,0,"ng-template",null,11,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(22,"div",12),e.\u0275\u0275template(23,bu,208,12,"form",13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(24,"div",5),e.\u0275\u0275element(25,"i",6),e.\u0275\u0275elementStart(26,"div")(27,"h4"),e.\u0275\u0275text(28,"TDS Rules"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"p",7),e.\u0275\u0275text(30,"List of predefined role templates"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(31,"div",14)(32,"div",9)(33,"div",15)(34,"table",16)(35,"thead")(36,"tr")(37,"th",17),e.\u0275\u0275text(38,"SL"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"th",18),e.\u0275\u0275text(40,"Status"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(41,"th",18),e.\u0275\u0275text(42,"Financial year"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(43,"th",19),e.\u0275\u0275text(44,"Action"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(45,"tbody"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275element(46,"admin-app-dashboard-footer"),e.\u0275\u0275elementEnd()),2&n){const a=e.\u0275\u0275reference(21);e.\u0275\u0275advance(19),e.\u0275\u0275property("ngIf",""==t.editActionId)("ngIfElse",a),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",t.tdsForm),e.\u0275\u0275advance(11),e.\u0275\u0275property("dtOptions",t.dtOptions)}},dependencies:[p.mk,p.sg,p.O5,h.yS,w.fY,C.G,i._Y,i.Fj,i._,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,y,x]}),o})()},{path:"smtp",component:Pp},{path:"company-rules/attendance-policy",component:Kt},{path:"company-rules/incentive-policy",component:zn},{path:"company-rules/bonus-policy",component:gn},{path:"company-rules/overtime-policy",component:za},{path:"company-rules/payslip-template",component:hr},{path:"company-rules/bonusslip-template",component:Nn},{path:"company-rules/arrearslip-template",component:Ct},{path:"company-rules/tds-rule",component:ui},{path:"company-rules/ptax-rule",component:zr},{path:"company-rules/lwf-rule",component:La},{path:"company-rules/salary-template",component:ni},{path:"company-rules/leave-rule",component:ha},{path:"client-package",component:Ze},{path:"subscription-management/plans",component:qc},{path:"invoice",component:Mp},{path:"ledger-report",component:Yp},{path:"credit-usage",component:nu},{path:"sales-ledger",component:ru},{path:"subscription-management/credit",component:nc},{path:"promotion-management",component:hm},{path:"landing/page",component:Wc},{path:"landing/posts",component:ip},{path:"landing/settings",component:mp},{path:"landing/membership",component:vp},{path:"tds-rule/declaration",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-tds-rule-declaration"]],decls:2,vars:0,template:function(n,t){1&n&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"tds-rule-declaration works!"),e.\u0275\u0275elementEnd())}}),o})()}]);let xu=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=e.\u0275\u0275defineInjector({imports:[p.ez,yu,w._c,E.ef,A._h,j.d,ie.y,z.vQ]}),o})()}}]);