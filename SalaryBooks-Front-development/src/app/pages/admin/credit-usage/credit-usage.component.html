<admin-app-dashboard-header></admin-app-dashboard-header>

<div class="br-mainpanel">
    <div class="br-pageheader">
        <nav class="breadcrumb pd-0 mg-0 tx-12">
            <a class="breadcrumb-item" routerLink="/admin">Dashboard</a>
            <a class="breadcrumb-item">Credit Usage</a>
        </nav>
    </div>

    <div class="br-pagetitle">
        <i class="icon ion-ios-list"></i>
        <div>
            <h4>Credit Usage Management</h4>
            <p class="mg-b-0">Track credit usage</p>
            <!-- <p class="mg-b-0">Lorem Ipsum is simply dummy text of the printing and typesetting</p> -->
        </div>
    </div>
    <ng-container  *ngIf="!bulkAction;else detail_data">
        <div class="br-pagebody pd-x-20 pd-sm-x-30">
            <div class="br-section-wrapper">
                <h6 class="br-section-label mb-3">Search User</h6>
    
                <div class="card" style="border:0px;">
                    <form [formGroup]="subscriptionUserSearchForm">
                        <div class="card-block pd-0">
                            <div class="row row-sm mg-t-20">
                                <div class="col-md-6 col-lg-3">
                                    <div class="form-group mg-b-0">
                                        <label class="d-block">From</label>
                                        <input class="form-control" type="month" formControlName="wage_from_date">
                                    </div>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                    <div class="form-group mg-b-0">
                                        <label class="d-block">To</label>
                                        <input class="form-control" type="month" formControlName="wage_to_date">
                                    </div>
                                </div>
                                <div class="col-md-6 col-lg-3">
                                    <div class="form-group mg-b-0">
                                        <label class="d-block">Reseller</label>
                                        <ngx-select-dropdown
                                        formControlName="reseller_id"
                                        [options]="resellerMaster"
                                        [multiple]="true"
                                        class="form-control"
                                        (change)="setReseller();"
                                        [config]="{ search: true, placeholder: 'Select Reseller' }"
                                       
                                      ></ngx-select-dropdown>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 col-lg-3 mg-t-10 mg-lg-t-0">
                                    <div class="form-group mg-b-0">
                                        <label>Corporate ID</label>
                                        <input type="text" formControlName="corporate_id" class="form-control tx-14">
                                    </div>
                                </div>
                            </div>
    
                            <button (click)="searchSubmit($event)" class="btn btn-info tx-11 tx-spacing-1 tx-uppercase tx-semibold tx-mont pd-y-12 pd-x-30 mg-t-30">
                                <span>Search</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    
        <div class="br-pagebody pd-x-20 pd-sm-x-30">
           
            
            <div class="br-section-wrapper">
                
                    <h6 class="br-section-label">Credit Usage
                    </h6>
                    
                    <button
                    type="button"
                    class="btn btn-info tx-11 tx-mont tx-medium h-100 flex-1 mr-2"
                    style="float: right;"
                    [disabled]="
                        !anyRowsChecked()
                      "
                   (click)="viewAll();"   
                  >
                    <span
                      ><i style="font-size: 12px" class="mr-1 fa fa-file"></i
                      >Bulk Action</span
                    >
                    </button>
                    <button
                    type="button"
                    class="btn btn-info tx-11 tx-mont tx-medium h-100 flex-1 mr-2"
                    style="float: right;"
                    [disabled]="
                        !anyRowsChecked()
                      "
                   (click)="exportData();"   
                  >
                    <span
                      ><i style="font-size: 12px" class="mr-1 fa fa-file"></i
                      >Export</span
                    >
                    </button>
                    
                    <div class="table-wrapper mt-1">
        
                      
        
                        <table class="table display responsive nowrap wd-100p" datatable [dtOptions]="dtOptions" id="my-datatable">
                            <thead>
                                <tr>
                                    <th class=""><input type="checkbox" [value]="rowCheckedAll" (change)="allRowsCheckboxChecked($event)"></th>
                                    <th class="">SL No</th>
                                    <th class="">Reseller</th>
                                    <th class="">Sub-Seller</th>
                                    <th class="">Branch</th>
                                    <th class="">Corp Id</th>
                                    <th class="">Establishment Name</th>
                                    <th class="">Address</th>
                                    <th class="">Contact Person</th>
                                    <th class="">Contact No</th>
                                    <th class="">Plan</th>
                                    <th class="">Free Empl</th>
                                    <th class="">Active Empl</th>
                                    <th class="">Difference</th>
                                    <th class="">Free Sub Admin</th>
                                    <th class="">Active Sub Admin</th>
                                    <th class="">Difference</th>
                                    <th class="">Credit O/B</th>
                                    <th class="">Credit Consumed</th>
                                    <th class="">Hold Credit</th>
                                    <th class="">Deducted Credit</th>
                                    <th class="">Credit Purchesed</th>
                                    <th class="">Available Credit C/B</th>
                                    <th class="">Credit C/B</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
        
                            </tbody>
                        </table>
                    </div>
               
              
                
               
            </div>
        </div>    
    </ng-container>
    <ng-template #detail_data>
    <app-credit-usage-detail (resetFilter)="resetFilter();" [filterOptions]="filterOptions"></app-credit-usage-detail>    
    </ng-template>
    <admin-app-dashboard-footer></admin-app-dashboard-footer>
</div>